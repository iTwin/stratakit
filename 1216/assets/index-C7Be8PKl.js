import{w as B,a as T,p as t}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{m as F,c as P}from"./~utils-BlN-5Gd1.js";import{I as E}from"./Icon-DtFWbYYF.js";import{b as _,T as C,a as A,p as R}from"./immer-DJEanRgJ.js";import{u as N,r as M}from"./refresh-D5eUN3Te.js";import{p as z}from"./placeholder-CJxU5h9k.js";import{s as U}from"./visibility-show-DeQAuxpv.js";import"./WZWDIE3S-DV5AxyYI.js";import"./Z2O3VLAQ-usAkTM5i.js";import"./GVAFFF2B-hb1ryj54.js";import"./Q5W46E73-DdVN5Hco.js";import"./PZ3OL7I2-BsU46uEz.js";import"./U6HHPQDW-CqfSluKS.js";import"./HSU7H6PW-CJWx4jd4.js";import"./CVCFNOHX-td5wz2hh.js";import"./JMU4N4M5-Df1HVy-H.js";import"./WLZ6H5FH-BCi9WXH5.js";import"./index-VRfNF7fP.js";import"./IconButton-BA2PYQU2.js";import"./~utils.Dot-BXQs45SV.js";import"./VisuallyHidden-BqdX3pJc.js";import"./~utils.useInit-Cn09o0k-.js";import"./Button-DfwfPPrN.js";import"./HMKTUWOU-CsOXh9Vc.js";import"./~utils.GhostAligner-Br93o2kf.js";import"./IconButton.internal-2ypYQlk0.js";import"./Tooltip-ALVgGzxS.js";import"./ECBEZ4YM-CqlPn2OY.js";import"./B6FLPFJM-CEJVJaHh.js";import"./Z32PU2LQ-BDjrUArl.js";import"./~utils.icons-CcfOFTTR.js";import"./~utils.icons-Dkn-R1YM.js";import"./DropdownMenu-D3lzNLyf.js";import"./RFRKSHIZ-D2GQ0nPH.js";import"./APVORPDK-D8n0W6q9.js";import"./NDVACHQI-CBX6ibRu.js";import"./I7KWAPMF-oiJeT6jg.js";import"./Kbd-CeIq8TqZ.js";import"./Text-Di_9KVmb.js";import"./~utils.icons-x8mfU-Zz.js";import"./~utils.useInit-B--Tb7DF.js";const _e={title:"Tree"},ye=B(F(function({overflow:e=!1,selected:r=!1,description:o,error:a,items:p,visible:l}){const[i,m]=T.useTransition(),h=e?" with a super long label that is overflown":"",u=l?!!l:void 0,x=o?"Additional description":void 0,[I,w]=T.useState(!!a),v=p?Number(p):0,[j,b]=T.useState(()=>[{label:`Item 1${h}`,selected:!!r,expanded:!0,children:[{label:"Item 1.1",selected:!!r},{label:"Item 1.2",selected:!!r},{label:`Item 1.3${h}`,selected:!!r}]},{label:"Item 2",selected:!1,expanded:!0,children:[{label:`Item 2.1${h}`,selected:!1}]},{label:"Item 3",selected:!1},...Array.from({length:v}).map((n,s)=>({label:`Item ${s+4}`,selected:!1}))]),$=T.useMemo(()=>j.flatMap((n,s,c)=>{const g={...n,level:1,index:s,setSize:c.length,childIndex:void 0};if(!n.expanded)return g;const k=n.children?n.children.map((S,f,D)=>({...S,level:2,index:s,childIndex:f,setSize:D.length,expanded:void 0})):[];return[g,...k]}),[j]),y=T.useCallback(()=>{w(!1)},[]);return t.jsx(_,{style:{maxInlineSize:e?300:void 0},children:$.map(n=>{const{index:s,childIndex:c}=n,g=I&&s===0&&c===void 0,k=s===0&&c===void 0||c===0;return t.jsx(C,{"aria-level":n.level,"aria-posinset":c!==void 0?c+1:s+1,"aria-setsize":n.setSize,label:n.label,description:k?x:void 0,expanded:n.expanded,selected:n.selected,error:g,onSelectedChange:()=>{b(R(S=>{const f=c===void 0?S[s]:S[s].children?.[c];f&&(f.selected=!f.selected)}))},onExpandedChange:()=>{m(()=>{b(R(S=>{const f=S[s];f.expanded!==void 0&&(f.expanded=!f.expanded)}))})},icon:c===void 0?t.jsx(E,{href:z,alt:"decoration"}):void 0,unstable_decorations:c===0?t.jsxs(t.Fragment,{children:[t.jsx(E,{href:z}),t.jsx(E,{href:z})]}):t.jsx(E,{href:z}),inlineActions:g?[t.jsx(A,{icon:M,label:"Retry",onClick:y},"retry")]:[t.jsx(A,{icon:N,label:"Unlock",visible:u},"unlock"),t.jsx(A,{icon:U,label:"Show",visible:u},"show")],actions:g?[t.jsx(A,{icon:N,label:"Unlock"},"unlock"),t.jsx(A,{icon:U,label:"Show"},"show")]:void 0},n.label)})})},{actions:G,_expansion:J}));function q(d){const e=P.c(5);let r,o;if(e[0]!==d?({hidden:r,...o}=d,e[0]=d,e[1]=r,e[2]=o):(r=e[1],o=e[2]),r)return null;let a;return e[3]!==o?(a=t.jsx(A,{icon:z,...o}),e[3]=o,e[4]=a):a=e[4],a}function G(d){const e=P.c(15),{inline:r,menu:o,dot:a,error:p,hiddenIds:l}=d,i=r?Number(r):2,m=o?Number(o):3,h=p?!!p:void 0;let u;if(e[0]!==a||e[1]!==l||e[2]!==i||e[3]!==m){const $=l?l.split(";").map(H):[];u=Array.from({length:i+m},(y,n)=>{const s=n+1;return t.jsx(q,{label:`Action ${s}`,dot:a?"Something's going on":void 0,hidden:$.includes(s)},s)}),e[0]=a,e[1]=l,e[2]=i,e[3]=m,e[4]=u}else u=e[4];const x=u;let I;e[5]!==x||e[6]!==i?(I=x.slice(0,i),e[5]=x,e[6]=i,e[7]=I):I=e[7];const w=I;let v;e[8]!==x||e[9]!==i?(v=x.slice(i),e[8]=x,e[9]=i,e[10]=v):v=e[10];const j=v;let b;return e[11]!==j||e[12]!==h||e[13]!==w?(b=t.jsx(_,{children:t.jsx(C,{label:"Item 1","aria-level":1,"aria-posinset":1,"aria-setsize":1,inlineActions:w,actions:j,error:h})}),e[11]=j,e[12]=h,e[13]=w,e[14]=b):b=e[14],b}function H(d){return Number(d)}function J(d){const e=P.c(8),{selectable:r}=d,[o,a]=T.useState(!1),p=r?!1:void 0;let l;e[0]!==o||e[1]!==p?(l=t.jsx(C,{label:"Parent Item","aria-level":1,"aria-posinset":1,"aria-setsize":1,expanded:o,onExpandedChange:a,selected:p}),e[0]=o,e[1]=p,e[2]=l):l=e[2];let i;e[3]!==o?(i=o&&t.jsxs(t.Fragment,{children:[t.jsx(C,{label:"Child Item 1","aria-level":2,"aria-posinset":1,"aria-setsize":2}),t.jsx(C,{label:"Child Item 2","aria-level":2,"aria-posinset":2,"aria-setsize":2})]}),e[3]=o,e[4]=i):i=e[4];let m;return e[5]!==l||e[6]!==i?(m=t.jsxs(_,{children:[l,i]}),e[5]=l,e[6]=i,e[7]=m):m=e[7],m}export{ye as default,_e as handle};
