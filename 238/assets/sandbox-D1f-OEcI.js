import{w as Q}from"./~utils-DQTNdQ0K.js";import{n as e,a as n,t as Y}from"./chunk-K6AXKMTT-BHCV6zel.js";import{a as D}from"./index-B0znaqTz.js";import{B as Z}from"./Button-3X2PDb2N.js";import{D as K,a as E,b as L,c as v,d as k}from"./DropdownMenu-D2OAwF6w.js";import{I}from"./Icon-sv_ZCCLo.js";import{I as S}from"./IconButton-CQcOB3Bo.js";import{T as X}from"./Text-kQncC0u1.js";import{T as ee,a as te,b as ne}from"./TextBox-CjWK3518.js";import{V as se}from"./VisuallyHidden-CrHY1Qyt.js";import{T as re,a as ae,b as le,c as oe,d as ie}from"./Tree-BIgRVS-w.js";import{p as P}from"./placeholder-OdMBAYoZ.js";import{p as ce,l as de,d as ue,h as he,m as xe,s as T,a as me,f as pe}from"./state-inherited-dot-DkD5_G_d.js";import{s as je}from"./visibility-show-D4R59sPU.js";import{R as fe}from"./XL7CSKGW-B-sEU1rt.js";import"./index-DeGJKKUv.js";import"./KUU7WJ55-z0H6dEew.js";import"./LVA2YJMS-wZBGZ43w.js";import"./Kbd-C9g5MZMq.js";import"./P2CTZE2T-B9wfX8x6.js";import"./YV4JVR4I-hb8MGMg1.js";import"./BYC7LY2E-kGIi3xur.js";import"./VGCJ63VH-BFs4-lX1.js";import"./MTZPJQMC-BFvmyI_S.js";import"./VEVQD5MH-DiiByO9N.js";import"./ITI7HKP4-DYuBndAE.js";import"./P4IRICAX-DqUucBX1.js";import"./ASMQKSDT-BzYd5aoq.js";import"./Tooltip-Dv4bdh89.js";import"./Field-DFpN3Mgn.js";import"./~hooks-DuYLhjin.js";import"./ListItem-CqbwzuTP.js";const be="_appLayout_mt7mw_5",ve="_header_mt7mw_22",Ce="_platformBar_mt7mw_32",ge="_logo_mt7mw_38",_e="_tools_mt7mw_48",Se="_leftPanel_mt7mw_58",Ae="_panelHeader_mt7mw_70",Ie="_panelTitle_mt7mw_78",we="_panelCaption_mt7mw_84",Me="_shiftIconRight_mt7mw_88",Pe="_subheader_mt7mw_92",Re="_subheaderTitle_mt7mw_102",ye="_searchInput_mt7mw_107",Ne="_subheaderActions_mt7mw_111",Be="_emptyState_mt7mw_115",De="_canvasWrapper_mt7mw_124",ke="_canvas_mt7mw_124",Te="_splitter_mt7mw_161",ze="_tree_mt7mw_203",Ke="_action_mt7mw_208",Ee="_actionIcon_mt7mw_216",Le="_slider_mt7mw_227",o={appLayout:be,header:ve,platformBar:Ce,logo:ge,tools:_e,leftPanel:Se,panelHeader:Ae,panelTitle:Ie,panelCaption:we,shiftIconRight:Me,subheader:Pe,subheaderTitle:Re,searchInput:ye,subheaderActions:Ne,emptyState:Be,canvasWrapper:De,canvas:ke,splitter:Te,tree:ze,action:Ke,actionIcon:Ee,slider:Le},G="Kiwi sandbox",Pt=()=>[{title:G}],Rt=Q(function(){const{sliderProps:l,panelProps:s,panelMinSize:r,panelMaxSize:d,resizing:i}=Oe({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":r,"--_panel-max-size":d},children:[e.jsxs("header",{className:o.header,children:[e.jsx("div",{className:o.logo,children:e.jsx(I,{href:P,size:"large"})}),e.jsx(X,{render:h=>e.jsx("h1",{...h}),variant:"body-md",children:G})]}),e.jsx("div",{className:o.platformBar,children:e.jsxs("div",{className:o.tools,children:[e.jsx(I,{href:P,size:"large"}),e.jsx(I,{href:P,size:"large"}),e.jsx(I,{href:P,size:"large"})]})}),e.jsxs("div",{...s,className:o.leftPanel,style:{position:"relative",...s.style},children:[e.jsxs("div",{className:o.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(S,{className:o.shiftIconRight,icon:ce,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Ue,{}),e.jsx(Fe,{})]}),e.jsx("div",{className:o.splitter,"data-resizing":i?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...l})}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})})});function Xe({children:a}){return e.jsx("div",{className:o.emptyState,children:a})}function Ge(a,l,s){return Math.min(Math.max(a,l),s)}function Oe(a){const{minSize:l,maxSize:s,onCollapse:r}=a,d=n.useId(),i=n.useRef(null),[h,u]=n.useState(void 0),[j,c]=n.useState(void 0),[m,p]=n.useState(void 0),[C,R]=n.useState(!1),[w,y]=n.useState(void 0),b=n.useMemo(()=>{if(l&&j)return Math.min(l.px,l.pct/100*j)},[l,j]),_=n.useMemo(()=>{if(b&&s&&j)return Math.max(b,s.pct/100*j)},[s,j,b]),A=n.useMemo(()=>{if(m==="smallest")return b??0;if(m==="largest")return _??0;if(h&&b&&_)return Ge(h,b,_)},[h,b,_,m]);n.useEffect(()=>{const x=i.current;if(!x)return;const f=x.parentElement;if(!f)return;const g=new ResizeObserver(()=>{const N=f.getBoundingClientRect(),B=x.getBoundingClientRect();c(N.width),u(B.width)});return g.observe(f),g.observe(x),()=>{g.disconnect()}},[]);const H=n.useCallback(x=>{const f=i.current;if(!f)return;const g=f.getBoundingClientRect();y(g.width+x),p(void 0),R(!0)},[]),F=n.useCallback(x=>{const f=i.current;if(!f)return;const g=f.parentElement;if(!g)return;const N=g.getBoundingClientRect(),B=x*(N.width*.005),J=f.getBoundingClientRect();y(J.width+B),p(void 0)},[]),V=n.useCallback(()=>{i.current&&(y(void 0),R(!1))},[]),{moveableProps:M}=He({onMove:H,onMoveEnd:V,onKeyMove:F}),W=n.useMemo(()=>({...M,onKeyDown:x=>{var f;if((f=M.onKeyDown)==null||f.call(M,x),!x.defaultPrevented)switch(x.key){case"Enter":x.preventDefault(),r==null||r();break;case"Home":x.preventDefault(),p("smallest");break;case"End":x.preventDefault(),p("largest");break}},onChange:x=>{if(C)return;const f=Number(x.target.value);y(f)},value:A===void 0?0:Math.floor(A),min:b===void 0?void 0:Math.floor(b),max:_===void 0?void 0:Math.floor(_)}),[M,A,b,_,r,C]),$=n.useMemo(()=>({style:{WebkitUserSelect:w===void 0?void 0:"none"},id:d,ref:i}),[d,w]),U=b===void 0?void 0:`${Math.floor(b)}px`,q=n.useMemo(()=>{if(w!==void 0&&s!==void 0&&m===void 0)return`min(${Math.floor(w)}px, ${s.pct}%)`;if(A!==void 0)return`${Math.floor(A)}px`},[s,w,A,m]);return{sliderProps:W,panelProps:$,panelMinSize:U,panelMaxSize:q,resizing:C}}function He(a){const{onMove:l,onMoveEnd:s,onKeyMove:r}=a,d=n.useRef(null),i=n.useRef(void 0),h=n.useRef(void 0),u=n.useCallback(()=>{h.current!==void 0&&(h.current=void 0,s==null||s())},[s]);return{moveableProps:n.useMemo(()=>({onPointerDown:c=>{if(c.button!==0||c.ctrlKey)return;const m=d.current;if(!m)return;const p=m.getBoundingClientRect(),C=c.clientX-p.left;h.current=C,c.preventDefault(),m.setPointerCapture(c.pointerId)},onPointerMove:c=>{const m=h.current;if(m===void 0)return;const p=d.current;if(!p)return;const C=p.getBoundingClientRect(),R=c.clientX-m-C.left;c.preventDefault(),l==null||l(R)},onPointerUp:u,onPointerCancel:u,onKeyDown:c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowLeft":c.preventDefault(),r==null||r(-1);break;case"ArrowRight":c.preventDefault(),r==null||r(1);break}},ref:c=>{var p;if(d.current=c,(p=i.current)==null||p.call(i),i.current=void 0,!c)return;const m=C=>{C.preventDefault()};c.addEventListener("touchstart",m),i.current=()=>{c.removeEventListener("touchstart",m)}}}),[r,l,u])}}const O=n.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function Fe(){const[a]=Y(),l=a.get("tree"),[s,r]=n.useState(),[d,i]=n.useState([]),h=n.useCallback(u=>{i(j=>j.includes(u)?j.filter(c=>c!==u):[...j,u])},[]);return l==="empty"?e.jsxs(Xe,{children:[e.jsx(X,{children:"No layers"}),e.jsx(Z,{children:"Create a layer"})]}):e.jsx(O.Provider,{value:n.useMemo(()=>({selected:s,setSelected:r,hidden:d,toggleHidden:h}),[d,s,h]),children:e.jsx(re,{className:o.tree,children:l==="complex"?e.jsx(We,{}):e.jsx(Ve,{})})})}function Ve(){return e.jsxs(e.Fragment,{children:[e.jsx(t,{label:"Guides",children:e.jsxs(t,{label:"Tree",actions:!0,children:[e.jsx(t,{label:"Guide 4"}),e.jsx(t,{label:"Guide 3"}),e.jsx(t,{label:"Guide 2"}),e.jsx(t,{label:"Guide 1"})]})}),e.jsxs(t,{label:"Other",children:[e.jsx(t,{label:"Object 2",actions:!0,children:e.jsx(t,{label:"Path 3"})}),e.jsx(t,{label:"Object 1"})]}),e.jsxs(t,{label:"Road",children:[e.jsx(t,{label:"Parking lot access"}),e.jsx(t,{label:"Site access"})]}),e.jsx(t,{label:"Parking lot",actions:!0,children:e.jsxs(t,{label:"Parking area",actions:!0,children:[e.jsx(t,{label:"Bay point 2"}),e.jsx(t,{label:"Bay point 1",actions:!0}),e.jsx(t,{label:"Space point 1",actions:!0}),e.jsx(t,{label:"Path 6"})]})}),e.jsx(t,{label:"Building",children:e.jsx(t,{label:"Building area",children:e.jsx(t,{label:"Path 5"})})}),e.jsx(t,{label:"Sewer",children:e.jsx(t,{label:"Run off pipe",children:e.jsx(t,{label:"Path 4"})})}),e.jsx(t,{label:"Project boundary",children:e.jsx(t,{label:"Property area",children:e.jsx(t,{label:"Path 1"})})}),e.jsx(t,{label:"Map",children:e.jsx(t,{label:"Location",children:e.jsx(t,{label:"Terrain"})})})]})}function We(){return e.jsxs(e.Fragment,{children:[e.jsxs(t,{label:"ITC_Master",children:[e.jsx(t,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(t,{label:"002_Substation_A"})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",actions:!0,defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",actions:!0,defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00002-A",actions:!0})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(t,{label:"007-aa_master.dgn",children:[e.jsx(t,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(t,{label:"A-CLNG-LITE-A"})}),e.jsx(t,{label:"A-CLNG-TILE",children:e.jsxs(t,{label:"A-DOOR-2D-PLAN",children:[e.jsx(t,{label:"P00003 [2-KA62]",actions:!0,children:e.jsx(t,{label:"Cell [2-KA63]",children:e.jsxs(t,{label:"Cell [2-KA64]",children:[e.jsx(t,{label:"Complex Chain [2-KA6A]"}),e.jsx(t,{label:"Complex Chain [2-KA6B]",actions:!0}),e.jsx(t,{label:"Complex Chain [2-KA6C]",actions:!0}),e.jsx(t,{label:"Complex Chain [2-KA6D]",actions:!0}),e.jsx(t,{label:"Complex Chain [2-KA6E]"}),e.jsx(t,{label:"Complex Chain [2-KA6F]"}),e.jsx(t,{label:"Complex Chain [2-KA6G]"}),e.jsx(t,{label:"Complex Chain [2-KA6H]"}),e.jsx(t,{label:"Complex Chain [2-KA61]"}),e.jsx(t,{label:"Complex Chain [2-KA65]"}),e.jsx(t,{label:"Complex Chain [2-KA66]"}),e.jsx(t,{label:"Complex Chain [2-KA67]"}),e.jsx(t,{label:"Complex Chain [2-KA68]"}),e.jsx(t,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(t,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KA74-A]"})}),e.jsx(t,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KA74-A]"})}),e.jsx(t,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KA98-A]"})}),e.jsx(t,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(t,{label:"ITC_Main",actions:!0})]})}const z=n.createContext({selected:!1,hidden:!1});function t(a){const l=n.useContext(O),s=n.useContext(z),r=n.useId(),[d,i]=n.useState(a.defaultCollapsed===void 0?!0:!a.defaultCollapsed),h=n.Children.count(a.children)>0,u=n.useMemo(()=>s.hidden?!0:l.hidden.includes(r),[r,l.hidden,s.hidden]),j=s.selected||r===l.selected,c=n.useCallback(()=>{l.setSelected(p=>{if(p!==r)return r})},[r,l]),m=a.actions||u;return e.jsx(z.Provider,{value:n.useMemo(()=>({selected:j,hidden:u}),[u,j]),children:e.jsx(ae,{content:e.jsxs(e.Fragment,{children:[e.jsx(le,{onClick:()=>{i(p=>!p)}}),e.jsx(I,{href:P,style:{display:"inline"}}),e.jsx(oe,{onClick:()=>{c()},children:a.label}),m&&e.jsxs(ie,{children:[e.jsx(S,{className:o.action,icon:de,label:"Lock",variant:"ghost","aria-hidden":!a.actions||u}),s.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(I,{href:ue})}):e.jsx(S,{className:o.action,icon:u?he:je,label:u?"Show":"Hide",variant:"ghost","aria-hidden":!a.actions,onClick:()=>{l.toggleHidden(r)}}),e.jsx($e,{hidden:!a.actions||u})]})]}),expanded:h?d:void 0,selected:j,children:d?a.children:void 0})})}function $e({hidden:a}){return e.jsxs(K,{children:[e.jsx(E,{className:o.action,"aria-hidden":a,render:e.jsx(S,{icon:xe,label:"More",variant:"ghost"})}),e.jsxs(L,{style:{minInlineSize:164},children:[e.jsx(v,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(v,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(v,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(v,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(v,{shortcuts:"]",children:"Bring to front"}),e.jsx(v,{shortcuts:"[",children:"Send to back"}),e.jsx(v,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(v,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(v,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(v,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(v,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(v,{shortcuts:"I",children:"Isolate object"})]})]})}function Ue(){const[a,l]=n.useState(!1),s=n.useRef(null),r=n.useRef(null),d=a?e.jsxs(e.Fragment,{children:[e.jsx(qe,{}),e.jsx(S,{className:o.shiftIconRight,icon:me,label:"Close",variant:"ghost",onClick:()=>{var i;D.flushSync(()=>l(!1)),(i=r.current)==null||i.focus()}})]}):e.jsx(S,{className:o.shiftIconRight,icon:T,label:"Search",variant:"ghost",onClick:()=>{var i;D.flushSync(()=>l(!0)),(i=s.current)==null||i.focus()}});return e.jsxs("div",{className:o.subheader,children:[e.jsx(fe.h3,{className:o.subheaderTitle,tabIndex:-1,ref:r,render:a?e.jsx(se,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),a?e.jsxs(ee,{className:o.searchInput,children:[e.jsx(te,{href:T}),e.jsx(ne,{placeholder:"Search",ref:s})]}):null,e.jsx("div",{className:o.subheaderActions,children:d})]})}function qe(){const[a]=n.useState(["Guides","Other","Roadway","Parking","Building","Dry utility","Stormwater","Sewer","Boundary","Map"]),[l,s]=n.useState({}),r=Object.keys(l).length;return e.jsxs(K,{children:[e.jsx(E,{render:e.jsx(S,{icon:pe,label:"Filter",variant:"ghost"})}),e.jsxs(L,{style:{minInlineSize:164},children:[e.jsx(k,{checked:r===0||r===a.length,onChange:()=>{s({})},children:"All"}),a.map(d=>e.jsx(k,{checked:!!l[d],onChange:i=>{if(i.currentTarget.checked){s(h=>({...h,[d]:!0}));return}s(h=>{const u={...h};return delete u[d],u})},children:d},d))]})]})}export{Rt as default,Pt as meta};
