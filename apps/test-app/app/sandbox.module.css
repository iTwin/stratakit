/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/
.appLayout {
	--_panel-min-size: 256px;
	--_panel-max-size: auto;

	--_platformBar-width: 40px;
	--_panel-width: minmax(var(--_panel-min-size), var(--_panel-max-size));
	--_splitter-width: 12px;

	block-size: 100dvb;
	display: grid;
	grid-template-areas:
		"header header header header"
		"platformBar leftPanel splitter canvas";
	grid-template-rows: auto 1fr;
	grid-template-columns: var(--_platformBar-width) var(--_panel-width) var(--_splitter-width) 1fr;
}

.header {
	grid-area: header;
	background-color: var(--kiwi-color-bg-surface-primary);
	border-block-end: 1px solid var(--kiwi-color-border-neutral-base);

	display: flex;
	align-items: center;
	gap: 12px;
}

.platformBar {
	grid-area: platformBar;
	background-color: var(--kiwi-color-bg-surface-secondary);
	border-inline-end: 1px solid var(--kiwi-color-border-neutral-base);
}

.logo {
	border-inline-end: 1px solid var(--kiwi-color-border-neutral-base);
	block-size: var(--_platformBar-width);
	inline-size: var(--_platformBar-width);

	display: flex;
	align-items: center;
	justify-content: center;
}

.tools {
	padding-block: 12px;

	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 12px;
}

.leftPanel {
	grid-area: leftPanel;
	padding-block: 12px;
	background-color: var(--kiwi-color-bg-surface-primary);
	min-block-size: 0;

	contain: size layout; /* prevent unnecessary overflow */
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.panelHeader {
	display: flex;
	padding-inline: 12px;
	justify-content: space-between;

	font-size: var(--kiwi-font-size-12);
}

.panelTitle {
	font-size: var(--kiwi-font-size-12);
	font-weight: 600;
	line-height: 1.5rem;
}

.panelCaption {
	color: var(--kiwi-color-text-neutral-secondary);
}

.shiftIconRight {
	margin-inline-end: -4px;
}

.subheader {
	padding: 12px;
	border-block: 1px solid var(--kiwi-color-border-neutral-base);
	border-inline: none;

	display: flex;
	gap: 4px;
	align-items: center;
}

.subheaderTitle {
	font-size: var(--kiwi-font-size-12);
	font-weight: 600;
}

.searchInput {
	flex: 1;
}

.subheaderActions {
	margin-inline-start: auto;
}

.tree {
	overflow: auto;
}

.canvasWrapper {
	padding-block: 8px;
	padding-inline-end: 8px;
}

.canvas {
	grid-area: canvas;
	block-size: 100%;
	border-radius: 16px;
	box-shadow: var(--kiwi-shadow-surface-xl);
	border: 1px solid var(--kiwi-color-border-neutral-base);
	position: relative;

	&::before {
		content: "";
		position: absolute;
		inset: 0;
		background-image: var(--_rings), var(--_gradient);
		opacity: 0.5;
		z-index: -1;
		border-radius: inherit;

		--_rings: repeating-radial-gradient(
			circle at center,
			var(--kiwi-color-border-neutral-base) 1px,
			var(--kiwi-color-border-neutral-base) 3px,
			transparent 3px,
			transparent 10px
		);
		--_gradient: linear-gradient(
			180deg,
			var(--kiwi-color-bg-surface-primary) 0%,
			var(--kiwi-color-bg-surface-tertiary) 100%
		);
	}
}

.splitter {
	grid-area: splitter;
	position: relative;
	user-select: none;

	&::before {
		content: "";
		position: absolute;
		inline-size: 2px;
		inset-inline-start: calc(var(--_splitter-width) / 2);
		inset-block: 0;
		background-color: var(--_bg);
	}

	&:not([aria-orientation="vertical"], [data-kiwi-orientation="vertical"]) {
		min-block-size: 100%;
		inline-size: 1px;
	}

	&:where(:hover, [data-resizing="true"]) {
		&:not(:focus-within) {
			--_bg: var(--kiwi-color-border-accent-strong);
		}
	}

	&:where(:has(:is(input):focus-visible)) {
		&::before {
			outline: 2px solid var(--kiwi-color-border-accent-strong);
			outline-offset: 1px;
		}
	}

	@supports not selector(:has(+ *)) {
		&:where(:not(input):focus-within) {
			&::before {
				outline: 2px solid var(--kiwi-color-border-accent-strong);
				outline-offset: -1px;
			}
		}
	}
}

.action {
	position: relative;

	&:where([aria-hidden="true"]) {
		visibility: hidden;
	}
}

.actionIcon {
	display: flex;
	align-items: center;
	justify-content: center;

	block-size: 1.5rem;
	aspect-ratio: 1;
}

.slider {
	display: block;
	block-size: 100%;
	inline-size: var(--_splitter-width, 12px);
	user-select: none;
	cursor: ew-resize;
	opacity: 0;
}
