import{aa as tt,ai as et,aj as nt,ak as rt,X as $,al as I,am as st,a1 as ut,N as z,an as ot,J as at,ao as ct}from"./~utils-_u2MSO01.js";import{r as it,C as ft,a as j}from"./chunk-JZWAC4HX-ROAaBwzV.js";function w(t,n){const e=t.__unstableInternals;return tt(e,"Invalid store"),e[n]}function D(t,...n){let e=t,f=e,r=Symbol(),o=ut;const c=new Set,i=new Set,S=new Set,v=new Set,p=new Set,u=new WeakMap,l=new WeakMap,m=s=>(S.add(s),()=>S.delete(s)),R=()=>{const s=c.size,a=Symbol();c.add(a);const g=()=>{c.delete(a),!c.size&&o()};if(s)return g;const E=rt(e).map(h=>$(...n.map(x=>{var d;const _=(d=x?.getState)==null?void 0:d.call(x);if(_&&I(_,h))return N(x,[h],q=>{M(h,q[h],!0)})}))),y=[];for(const h of S)y.push(h());const V=n.map(J);return o=$(...E,...y,...V),g},b=(s,a,g=v)=>(g.add(a),l.set(a,s),()=>{var E;(E=u.get(a))==null||E(),u.delete(a),l.delete(a),g.delete(a)}),C=(s,a)=>b(s,a),H=(s,a)=>(u.set(a,a(e,e)),b(s,a)),Q=(s,a)=>(u.set(a,a(e,f)),b(s,a,p)),T=s=>D(nt(e,s),O),Y=s=>D(et(e,s),O),Z=()=>e,M=(s,a,g=!1)=>{var E;if(!I(e,s))return;const y=st(a,e[s]);if(y===e[s])return;if(!g)for(const d of n)(E=d?.setState)==null||E.call(d,s,y);const V=e;e={...e,[s]:y};const h=Symbol();r=h,i.add(s);const x=(d,_,q)=>{var P;const B=l.get(d),k=W=>q?q.has(W):W===s;(!B||B.some(k))&&((P=u.get(d))==null||P(),u.set(d,d(e,_)))};for(const d of v)x(d,V);queueMicrotask(()=>{if(r!==h)return;const d=e;for(const _ of p)x(_,f,i);f=d,i.clear()})},O={getState:Z,setState:M,__unstableInternals:{setup:m,init:R,subscribe:C,sync:H,batch:Q,pick:T,omit:Y}};return O}function gt(t,...n){if(t)return w(t,"setup")(...n)}function J(t,...n){if(t)return w(t,"init")(...n)}function K(t,...n){if(t)return w(t,"subscribe")(...n)}function N(t,...n){if(t)return w(t,"sync")(...n)}function lt(t,...n){if(t)return w(t,"batch")(...n)}function Et(t,...n){if(t)return w(t,"omit")(...n)}function xt(t,...n){if(t)return w(t,"pick")(...n)}function wt(...t){var n;const e={};for(const r of t){const o=(n=r?.getState)==null?void 0:n.call(r);o&&Object.assign(e,o)}const f=D(e,...t);return Object.assign({},...t,f)}function yt(t,n){}var L={exports:{}},U={};var F;function St(){if(F)return U;F=1;var t=it();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var e=typeof Object.is=="function"?Object.is:n,f=t.useState,r=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function i(u,l){var m=l(),R=f({inst:{value:m,getSnapshot:l}}),b=R[0].inst,C=R[1];return o(function(){b.value=m,b.getSnapshot=l,S(b)&&C({inst:b})},[u,m,l]),r(function(){return S(b)&&C({inst:b}),u(function(){S(b)&&C({inst:b})})},[u]),c(m),m}function S(u){var l=u.getSnapshot;u=u.value;try{var m=l();return!e(u,m)}catch{return!0}}function v(u,l){return l()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:i;return U.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,U}var G;function dt(){return G||(G=1,L.exports=St()),L.exports}var pt=dt();const vt=ft(pt);var{useSyncExternalStore:X}=vt,A=()=>()=>{};function bt(t,n=ot){const e=j.useCallback(r=>t?K(t,null,r):A(),[t]),f=()=>{const r=typeof n=="string"?n:null,o=typeof n=="function"?n:null,c=t?.getState();if(o)return o(c);if(c&&r&&I(c,r))return c[r]};return X(e,f,f)}function _t(t,n){const e=j.useRef({}),f=j.useCallback(o=>t?K(t,null,o):A(),[t]),r=()=>{const o=t?.getState();let c=!1;const i=e.current;for(const S in n){const v=n[S];if(typeof v=="function"){const p=v(o);p!==i[S]&&(i[S]=p,c=!0)}if(typeof v=="string"){if(!o||!I(o,v))continue;const p=o[v];p!==i[S]&&(i[S]=p,c=!0)}}return c&&(e.current={...i}),e.current};return X(f,r,r)}function jt(t,n,e,f){const r=I(n,e)?n[e]:void 0,o=f?n[f]:void 0,c=ct({value:r,setValue:o});z(()=>N(t,[e],(i,S)=>{const{value:v,setValue:p}=c.current;p&&i[e]!==S[e]&&i[e]!==v&&p(i[e])}),[t,e]),z(()=>{if(r!==void 0)return t.setState(e,r),lt(t,[e],()=>{r!==void 0&&t.setState(e,r)})})}function Rt(t,n){const[e,f]=j.useState(()=>t(n));z(()=>J(e),[e]);const r=j.useCallback(i=>bt(e,i),[e]),o=j.useMemo(()=>({...e,useState:r}),[e,r]),c=at(()=>{f(i=>t({...n,...i.getState()}))});return[o,c]}export{Rt as a,jt as b,D as c,gt as d,K as e,lt as f,_t as g,J as i,wt as m,Et as o,xt as p,N as s,yt as t,bt as u};
