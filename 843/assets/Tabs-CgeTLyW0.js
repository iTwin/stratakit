import{a as I,o as T}from"./chunk-QMGIS6GS-BaJhsRKI.js";import{n as ce,o as J,p as ie,q as L,r as y,B as le,v as Z,w as Q,m as M,f as W,u as de,c as A}from"./sun-NTU6_aMn.js";import{r as ue,p as me,j as be,s as fe,v as ve,w as Ie}from"./~utils-DO8vcw5E.js";import{a as ee,b as te,C as U,u as pe}from"./6VRAQV3D-D5uXsJG6.js";import{I as oe,H as xe,F as B,E as O,d as $,J as X,_ as C,b as v,G as Y,a1 as Se,f as H,c as z,a as K,j as q,P as G,Q as se,p as Ce,q as V,m as ne,u as Pe}from"./LMDWO4NN-CcJUQKmw.js";import{c as he,a as ge,b as Te}from"./5JTVDSTH-CJasx-kK.js";import{u as Ee}from"./S43UC3DV-C_gr5MYd.js";import{c as _e,b as Re}from"./RZ4GPYOB-wC-_VWYs.js";var ye=oe([me,te],[ue,ee]),we=ye.useContext;I.createContext(!1);I.createContext(null);function je(t={}){var a=t,{composite:s,combobox:e}=a,o=xe(a,["composite","combobox"]);const n=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],b=ce(o.store,J(s,n),J(e,n)),c=b?.getState(),d=he(B($({},o),{store:b,includesBaseElement:O(o.includesBaseElement,c?.includesBaseElement,!1),orientation:O(o.orientation,c?.orientation,"horizontal"),focusLoop:O(o.focusLoop,c?.focusLoop,!0)})),r=_e(),E=B($({},d.getState()),{selectedId:O(o.selectedId,c?.selectedId,o.defaultSelectedId),selectOnMove:O(o.selectOnMove,c?.selectOnMove,!0)}),i=ie(E,d,b);L(i,()=>y(i,["moves"],()=>{const{activeId:u,selectOnMove:f}=i.getState();if(!f||!u)return;const p=d.item(u);p&&(p.dimmed||p.disabled||i.setState("selectedId",p.id))}));let P=!0;L(i,()=>le(i,["selectedId"],(u,f)=>{if(!P){P=!0;return}s&&u.selectedId===f.selectedId||i.setState("activeId",u.selectedId)})),L(i,()=>y(i,["selectedId","renderedItems"],u=>{if(u.selectedId!==void 0)return;const{activeId:f,renderedItems:p}=i.getState(),x=d.item(f);if(x&&!x.disabled&&!x.dimmed)i.setState("selectedId",x.id);else{const _=p.find(h=>!h.disabled&&!h.dimmed);i.setState("selectedId",_?.id)}})),L(i,()=>y(i,["renderedItems"],u=>{const f=u.renderedItems;if(f.length)return y(r,["renderedItems"],p=>{const x=p.renderedItems;x.some(h=>!h.tabId)&&x.forEach((h,j)=>{if(h.tabId)return;const k=f[j];k&&r.renderItem(B($({},h),{tabId:k.id}))})})}));let S=null;return L(i,()=>{const u=()=>{S=i.getState().selectedId},f=()=>{P=!1,i.setState("selectedId",S)};if(s&&"setSelectElement"in s)return X(y(s,["value"],u),y(s,["mounted"],f));if(e)return X(y(e,["selectedValue"],u),y(e,["mounted"],f))}),B($($({},d),i),{panels:r,setSelectedId:u=>i.setState("selectedId",u),select:u=>{i.setState("selectedId",u),d.move(u)}})}function De(t,a,s){Y(a,[s.composite,s.combobox]),t=ge(t,a,s),Q(t,s,"selectedId","setSelectedId"),Q(t,s,"selectOnMove");const[e,o]=Z(()=>t.panels,{});return Y(o,[t,o]),Object.assign(I.useMemo(()=>C(v({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function Me(t={}){const a=Ee(),s=we()||a;t=C(v({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:a});const[e,o]=Z(je,t);return De(e,o,t)}var N=oe([te],[ee]),ke=N.useContext,Fe=N.useScopedContext,re=N.useProviderContext,Le=N.ContextProvider,ae=N.ScopedContextProvider,Oe="button",$e=z(function(a){var s=a,{store:e,getItem:o}=s,n=q(s,["store","getItem"]),b;const c=Fe();e=e||c,G(e,!1);const d=se(),r=n.id||d,E=Ce(n),i=I.useCallback(m=>{const w=C(v({},m),{dimmed:E});return o?o(w):w},[E,o]),P=n.onClick,S=V(m=>{P?.(m),!m.defaultPrevented&&e?.setSelectedId(r)}),u=e.panels.useState(m=>{var w;return(w=m.items.find(l=>l.tabId===r))==null?void 0:w.id}),f=d?n.shouldRegisterItem:!1,p=e.useState(m=>!!r&&m.activeId===r),x=e.useState(m=>!!r&&m.selectedId===r),_=e.useState(m=>!!e.item(m.activeId)),h=p||x&&!_,j=x||((b=n.accessibleWhenDisabled)!=null?b:!0);if(M(e.combobox||e.composite,"virtualFocus")&&(n=C(v({},n),{tabIndex:-1})),n=C(v({id:r,role:"tab","aria-selected":x,"aria-controls":u||void 0},n),{onClick:S}),e.composite){const m={id:r,accessibleWhenDisabled:j,store:e.composite,shouldRegisterItem:h&&f,rowId:n.rowId,render:n.render};n=C(v({},n),{render:T.jsx(U,C(v({},m),{render:e.combobox&&e.composite!==e.combobox?T.jsx(U,C(v({},m),{store:e.combobox})):m.render}))})}return n=pe(C(v({store:e},n),{accessibleWhenDisabled:j,getItem:i,shouldRegisterItem:f})),n}),Ne=Se(H(function(a){const s=$e(a);return K(Oe,s)}));function Be(t={}){const a=Me(t);return T.jsx(Le,{value:a,children:t.children})}var Ve="div",We=z(function(a){var s=a,{store:e}=s,o=q(s,["store"]);const n=re();e=e||n,G(e,!1);const b=e.useState(c=>c.orientation==="both"?void 0:c.orientation);return o=ne(o,c=>T.jsx(ae,{value:e,children:c}),[e]),e.composite&&(o=v({focusable:!1},o)),o=v({role:"tablist","aria-orientation":b},o),o=Te(v({store:e},o)),o}),Ae=H(function(a){const s=We(a);return K(Ve,s)}),He="div",ze=z(function(a){var s=a,{store:e,unmountOnHide:o,tabId:n,getItem:b,scrollRestoration:c,scrollElement:d}=s,r=q(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const E=re();e=e||E,G(e,!1);const i=I.useRef(null),P=se(r.id),S=M(e.panels,()=>{var l;return n||((l=e?.panels.item(P))==null?void 0:l.tabId)}),u=M(e,l=>!!S&&l.selectedId===S),f=be({open:u}),p=M(f,"mounted"),x=I.useRef(new Map),_=V(()=>{const l=i.current;return l?d?typeof d=="function"?d(l):"current"in d?d.current:d:l:null});I.useEffect(()=>{var l,R;if(!c||!p)return;const g=_();if(!g)return;if(c==="reset"){g.scroll(0,0);return}if(!S)return;const D=x.current.get(S);g.scroll((l=D?.x)!=null?l:0,(R=D?.y)!=null?R:0);const F=()=>{x.current.set(S,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",F),()=>{g.removeEventListener("scroll",F)}},[c,p,S,_,e]);const[h,j]=I.useState(!1);I.useEffect(()=>{const l=i.current;if(!l)return;const R=fe(l);j(!!R.length)},[]);const k=I.useCallback(l=>{const R=C(v({},l),{id:P||l.id,tabId:n});return b?b(R):R},[P,n,b]),m=r.onKeyDown,w=V(l=>{if(m?.(l),l.defaultPrevented||!e?.composite)return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!g)return;const{selectedId:D}=e.getState(),F=g({activeId:D});F&&(l.preventDefault(),e.move(F))});return r=ne(r,l=>T.jsx(ae,{value:e,children:l}),[e]),r=C(v({id:P,role:"tabpanel","aria-labelledby":S||void 0},r),{children:o&&!p?null:r.children,ref:Pe(i,r.ref),onKeyDown:w}),r=ve(v({focusable:!e.composite&&!h},r)),r=Ie(v({store:f},r)),r=Re(C(v({store:e.panels},r),{getItem:k})),r}),Ke=H(function(a){const s=ze(a);return K(He,s)});function et(t){const{defaultSelectedId:a,selectedId:s,setSelectedId:e,selectOnMove:o,children:n}=t;return T.jsx(Be,{defaultSelectedId:a,selectedId:s,setSelectedId:b=>I.startTransition(()=>e?.(b)),selectOnMove:o,children:n})}const tt=W((t,a)=>{const{tone:s="neutral",...e}=t,[o,n]=I.useState(!1);return I.useEffect(()=>{n(!0)},[]),T.jsx(Ae,{...e,"data-initialized":o?"true":void 0,"data-kiwi-tone":s,className:A("-tab-list",t.className),ref:a})}),ot=W((t,a)=>{const s=ke(),e=M(s,"selectedId"),o=M(s,"baseElement"),n=I.useCallback(({tab:c})=>{if(!o)return;const{left:d,width:r}=c.getBoundingClientRect(),E=d-o.getBoundingClientRect().left;o.style.setProperty("--tab-active-stripe-position",`${Math.round(E)}px`),o.style.setProperty("--tab-active-stripe-width",`${Math.round(r)}px`)},[o]),b=I.useCallback(c=>{!c||!o||e===t.id&&n({tab:c})},[n,o,t.id,e]);return T.jsx(Ne,{accessibleWhenDisabled:!0,...t,className:A("-tab",t.className),"data-selected":e===t.id?"true":void 0,onPointerDown:c=>{const d=c.currentTarget,r=c.currentTarget.parentElement;t.disabled||!d||!r||(d.dataset.selected="true",n({tab:d}))},ref:de(a,b)})}),st=W((t,a)=>T.jsx(Ke,{...t,className:A("-tab-panel",t.className),ref:a}));export{et as T,ot as a,st as b,tt as c};
