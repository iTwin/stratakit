import{u as F}from"./LVA2YJMS-DabsqpBD.js";import{c as I,_ as m,ao as p,U as O,a0 as h,m as N,E as q,D as Y,aC as j,az as z,aD as _,g as H,u as L,b as C,d as V,e as G}from"./~utils-Dg-MnoLN.js";import{a as n}from"./chunk-K6AXKMTT-B_QCnNdX.js";var J="button";function T(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?p(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?p(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=I(function(t){var u=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=u,r=m(u,["clickOnEnter","clickOnSpace"]);const f=n.useRef(null),[M,R]=n.useState(!1);n.useEffect(()=>{f.current&&R(p(f.current))},[]);const[K,y]=n.useState(!1),l=n.useRef(!1),E=O(r),[g,U]=h(r,Q,!0),P=r.onKeyDown,w=N(e=>{P==null||P(e);const s=e.currentTarget;if(e.defaultPrevented||g||E||!q(e)||Y(s)||s.isContentEditable)return;const o=k&&e.key==="Enter",i=c&&e.key===" ",d=e.key==="Enter"&&!k,x=e.key===" "&&!c;if(d||x){e.preventDefault();return}if(o||i){const b=T(e);if(o){if(!b){e.preventDefault();const A=e,B=m(A,["view"]),D=()=>_(s,B);j()?z(s,"keyup",D):queueMicrotask(D)}}else i&&(l.current=!0,b||(e.preventDefault(),y(!0)))}}),S=r.onKeyUp,v=N(e=>{if(S==null||S(e),e.defaultPrevented||g||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!T(e))){e.preventDefault(),y(!1);const o=e.currentTarget,i=e,d=m(i,["view"]);queueMicrotask(()=>_(o,d))}});return r=H(C(C({"data-active":K||void 0,type:M?"button":void 0},U),r),{ref:L(f,r.ref),onKeyDown:w,onKeyUp:v}),r=F(r),r});V(function(t){const u=W(t);return G(J,u)});export{W as u};
