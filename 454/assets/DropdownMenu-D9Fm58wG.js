import{a as w,n as x}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{c as X}from"./~utils-CXPSt6v1.js";import{u as Ve,L as ge,a as Ce,b as le}from"./QYJ6MIDR-CUBr8kVh.js";import{B as $e}from"./Button-DVN_4YMs.js";import{p as We,K as ve}from"./Kbd-GWV1_tpO.js";import{a as qe,I as Ue,C as ze}from"./Icon-DPz7gbla.js";import{f as J}from"./~utils-CvI4aHT1.js";import{b as Ge}from"./~hooks-Dbo26-5-.js";import{C as Se,a as ye,u as Me,f as Je,b as Qe}from"./P2CTZE2T-D72lXxRb.js";import{H as Xe,a as Ye,c as Ze,u as et,b as tt,d as rt,e as nt}from"./BYC7LY2E-Cy2FmVCU.js";import{d as R,_ as z,b as T,u as we,c as Oe,e as ot,f as st,g as E,h as g,i as B,j as _,k as V,l as N,m as Pe,s as ut,r as Ee,n as at,o as it,p as lt,q as $,t as W,v as Ae,x as Ie,y as ne,z as ct,A as dt,B as ft,C as ke,D as mt,E as pt,F as ae,G as vt,H as bt,I as ce,J as ht,K as xt,L as gt,M as Ct}from"./LMDWO4NN-Bg6lErus.js";import{c as St,u as yt,a as Mt}from"./ITI7HKP4-BZO2jLmx.js";import{i as wt}from"./VGCJ63VH-Bp_09Dvo.js";import{t as Ot,c as De,u as He,a as Te,m as Pt,o as Et,p as At,s as be,b as he,d as j}from"./YV4JVR4I-D6Sf86gC.js";import{h as G,a as It}from"./LVA2YJMS-C6nAbmQd.js";import{u as kt}from"./VEVQD5MH-DWMMZi09.js";import{R as Dt}from"./XL7CSKGW-CCIXOv3t.js";import{u as Ht}from"./ASMQKSDT-B9-faIF8.js";function Tt(t={}){var r;Ot(t,t.store);const n=(r=t.store)==null?void 0:r.getState(),e={value:R(t.value,n==null?void 0:n.value,t.defaultValue,!1)},u=De(e,t.store);return z(T({},u),{setValue:o=>u.setState("value",o)})}function Ft(t,r,n){return we(r,[n.store]),Te(t,n,"value","setValue"),t}function _t(t={}){const[r,n]=He(Tt,t);return Ft(r,n,t)}var Fe=Oe([ye],[Se]),jt=Fe.useContext,Lt=Fe.useScopedContext;w.createContext(void 0);var Y=Oe([ye,Ye],[Se,Xe]),de=Y.useContext,_e=Y.useScopedContext,oe=Y.useProviderContext,je=Y.ContextProvider,Nt=Y.ScopedContextProvider;w.createContext(void 0);function Kt(t={}){var r=t,{combobox:n,parent:e,menubar:u}=r,o=ot(r,["combobox","parent","menubar"]);const s=!!u&&!e,a=Pt(o.store,At(e,["values"]),Et(n,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),d=a.getState(),c=St(z(T({},o),{store:a,orientation:R(o.orientation,d.orientation,"vertical")})),l=Ze(z(T({},o),{store:a,placement:R(o.placement,d.placement,"bottom-start"),timeout:R(o.timeout,d.timeout,s?0:150),hideTimeout:R(o.hideTimeout,d.hideTimeout,0)})),b=z(T(T({},c.getState()),l.getState()),{initialFocus:R(d.initialFocus,"container"),values:R(o.values,d.values,o.defaultValues,{})}),f=De(b,c,l,a);return be(f,()=>he(f,["mounted"],i=>{i.mounted||f.setState("activeId",null)})),be(f,()=>he(e,["orientation"],i=>{f.setState("placement",i.orientation==="vertical"?"right-start":"bottom-start")})),z(T(T(T({},c),l),f),{combobox:n,parent:e,menubar:u,hideAll:()=>{l.hide(),e==null||e.hideAll()},setInitialFocus:i=>f.setState("initialFocus",i),setValues:i=>f.setState("values",i),setValue:(i,S)=>{i!=="__proto__"&&i!=="constructor"&&(Array.isArray(i)||f.setState("values",p=>{const m=p[i],y=st(S,m);return y===m?p:z(T({},p),{[i]:y!==void 0&&y})}))}})}function Rt(t,r,n){return we(r,[n.combobox,n.parent,n.menubar]),Te(t,n,"values","setValues"),Object.assign(et(yt(t,r,n),r,n),{combobox:n.combobox,parent:n.parent,menubar:n.menubar})}function Bt(t={}){const r=de(),n=jt(),e=kt();t=E(g({},t),{parent:t.parent!==void 0?t.parent:r,menubar:t.menubar!==void 0?t.menubar:n,combobox:t.combobox!==void 0?t.combobox:e});const[u,o]=He(Kt,t);return Rt(u,o,t)}var Vt="div",F="";function se(){F=""}function $t(t){const r=t.target;return r&&at(r)?!1:t.key===" "&&F.length?!0:t.key.length===1&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&/^[\p{Letter}\p{Number}]$/u.test(t.key)}function Wt(t,r){if(it(t))return!0;const n=t.target;return n?r.some(u=>u.element===n):!1}function qt(t){return t.filter(r=>!r.disabled)}function re(t,r){var n;const e=((n=t.element)==null?void 0:n.textContent)||t.children||"value"in t&&t.value;return e?lt(e).trim().toLowerCase().startsWith(r.toLowerCase()):!1}function Ut(t,r,n){if(!n)return t;const e=t.find(u=>u.id===n);return!e||!re(e,r)||F!==r&&re(e,F)?t:(F=r,Je(t.filter(u=>re(u,F)),n).filter(u=>u.id!==n))}var fe=B(function(r){var n=r,{store:e,typeahead:u=!0}=n,o=_(n,["store","typeahead"]);const s=Me();e=e||s,V(e,!1);const a=o.onKeyDownCapture,d=w.useRef(0),c=N(l=>{if(a==null||a(l),l.defaultPrevented||!u||!e)return;if(!$t(l))return se();const{renderedItems:b,items:f,activeId:i,id:S}=e.getState();let p=qt(f.length>b.length?f:b);const m=Pe(l.currentTarget),y=`[data-offscreen-id="${S}"]`,v=m.querySelectorAll(y);for(const M of v){const D=M.ariaDisabled==="true"||"disabled"in M&&!!M.disabled;p.push({id:M.id,element:M,disabled:D})}if(v.length&&(p=ut(p,M=>M.element)),!Wt(l,p))return se();l.preventDefault(),window.clearTimeout(d.current),d.current=window.setTimeout(()=>{F=""},500);const A=l.key.toLowerCase();F+=A,p=Ut(p,A,i);const P=p.find(M=>re(M,F));P?e.move(P.id):se()});return o=E(g({},o),{onKeyDownCapture:c}),Ee(o)});$(function(r){const n=fe(r);return W(Vt,n)});var zt="div";function Gt(t){var r=t,{store:n}=r,e=_(r,["store"]);const[u,o]=w.useState(void 0),s=e["aria-label"],a=j(n,"disclosureElement"),d=j(n,"contentElement");return w.useEffect(()=>{const c=a;if(!c)return;const l=d;if(!l)return;s||l.hasAttribute("aria-label")?o(void 0):c.id&&o(c.id)},[s,a,d]),u}var Le=B(function(r){var n=r,{store:e,alwaysVisible:u,composite:o}=n,s=_(n,["store","alwaysVisible","composite"]);const a=oe();e=e||a,V(e,!1);const d=e.parent,c=e.menubar,l=!!d,b=Ae(s.id),f=s.onKeyDown,i=e.useState(C=>C.placement.split("-")[0]),S=e.useState(C=>C.orientation==="both"?void 0:C.orientation),p=S!=="vertical",m=j(c,C=>!!C&&C.orientation!=="vertical"),y=N(C=>{if(f==null||f(C),!C.defaultPrevented){if(l||c&&!p){const I={ArrowRight:()=>i==="left"&&!p,ArrowLeft:()=>i==="right"&&!p,ArrowUp:()=>i==="bottom"&&p,ArrowDown:()=>i==="top"&&p}[C.key];if(I!=null&&I())return C.stopPropagation(),C.preventDefault(),e==null?void 0:e.hide()}if(c){const I={ArrowRight:()=>{if(m)return c.next()},ArrowLeft:()=>{if(m)return c.previous()},ArrowDown:()=>{if(!m)return c.next()},ArrowUp:()=>{if(!m)return c.previous()}}[C.key],L=I==null?void 0:I();L!==void 0&&(C.stopPropagation(),C.preventDefault(),c.move(L))}}});s=Ie(s,C=>x.jsx(Nt,{value:e,children:C}),[e]);const v=Gt(g({store:e},s)),A=e.useState("mounted"),P=wt(A,s.hidden,u),M=P?E(g({},s.style),{display:"none"}):s.style;s=E(g({id:b,"aria-labelledby":v,hidden:P},s),{ref:ne(b?e.setContentElement:null,s.ref),style:M,onKeyDown:y});const D=!!e.combobox;return o=o??!D,o&&(s=g({role:"menu","aria-orientation":S},s)),s=Mt(g({store:e,composite:o},s)),s=fe(g({store:e,typeahead:!D},s)),s});$(function(r){const n=Le(r);return W(zt,n)});var Jt="div",Qt=B(function(r){var n=r,{store:e,modal:u=!1,portal:o=!!u,hideOnEscape:s=!0,autoFocusOnShow:a=!0,hideOnHoverOutside:d,alwaysVisible:c}=n,l=_(n,["store","modal","portal","hideOnEscape","autoFocusOnShow","hideOnHoverOutside","alwaysVisible"]);const b=oe();e=e||b,V(e,!1);const f=w.useRef(null),i=e.parent,S=e.menubar,p=!!i,m=!!S&&!p;l=E(g({},l),{ref:ne(f,l.ref)});const y=Le(g({store:e,alwaysVisible:c},l)),{"aria-labelledby":v}=y;l=_(y,["aria-labelledby"]);const[P,M]=w.useState(),D=e.useState("autoFocusOnShow"),C=e.useState("initialFocus"),q=e.useState("baseElement"),I=e.useState("renderedItems");w.useEffect(()=>{let H=!1;return M(O=>{var ee,me,pe;if(H||!D)return;if((ee=O==null?void 0:O.current)!=null&&ee.isConnected)return O;const te=w.createRef();switch(C){case"first":te.current=((me=I.find(Q=>!Q.disabled&&Q.element))==null?void 0:me.element)||null;break;case"last":te.current=((pe=[...I].reverse().find(Q=>!Q.disabled&&Q.element))==null?void 0:pe.element)||null;break;default:te.current=q}return te}),()=>{H=!0}},[e,D,C,I,q]);const L=p?!1:u,h=!!a,k=!!P||!!l.initialFocus||!!L,U=j(e.combobox||e,"contentElement"),K=j((i==null?void 0:i.combobox)||i,"contentElement"),Z=w.useMemo(()=>{if(!K||!U)return;const H=U.getAttribute("role"),O=K.getAttribute("role");if(!((O==="menu"||O==="menubar")&&H==="menu"))return K},[U,K]);return Z!==void 0&&(l=g({preserveTabOrderAnchor:Z},l)),l=rt(E(g({store:e,alwaysVisible:c,initialFocus:P,autoFocusOnShow:h?k&&a:D||!!L},l),{hideOnEscape(H){return dt(s,H)?!1:(e==null||e.hideAll(),!0)},hideOnHoverOutside(H){const O=e==null?void 0:e.getState().disclosureElement;return(typeof d=="function"?d(H):d??(p?!0:m?O?!G(O):!0:!1))?H.defaultPrevented||!p||!O||(ct(O,"mouseout",H),!G(O))?!0:(requestAnimationFrame(()=>{G(O)||e==null||e.hide()}),!1):!1},modal:L,portal:o,backdrop:p?!1:l.backdrop})),l=g({"aria-labelledby":v},l),l}),Xt=tt($(function(r){const n=Qt(r);return W(Jt,n)}),oe);function Yt(t={}){const r=Bt(t);return x.jsx(je,{value:r,children:t.children})}var Zt="button";function er(t,r){return{ArrowDown:r==="bottom"||r==="top"?"first":!1,ArrowUp:r==="bottom"||r==="top"?"last":!1,ArrowRight:r==="right"?"first":!1,ArrowLeft:r==="left"?"first":!1}[t.key]}function xe(t,r){return!!(t!=null&&t.some(n=>!n.element||n.element===r?!1:n.element.getAttribute("aria-expanded")==="true"))}var tr=B(function(r){var n=r,{store:e,focusable:u,accessibleWhenDisabled:o,showOnHover:s}=n,a=_(n,["store","focusable","accessibleWhenDisabled","showOnHover"]);const d=oe();e=e||d,V(e,!1);const c=w.useRef(null),l=e.parent,b=e.menubar,f=!!l,i=!!b&&!f,S=ft(a),p=()=>{const h=c.current;h&&(e==null||e.setDisclosureElement(h),e==null||e.setAnchorElement(h),e==null||e.show())},m=a.onFocus,y=N(h=>{if(m==null||m(h),S||h.defaultPrevented||(e==null||e.setAutoFocusOnShow(!1),e==null||e.setActiveId(null),!b)||!i)return;const{items:k}=b.getState();xe(k,h.currentTarget)&&p()}),v=j(e,h=>h.placement.split("-")[0]),A=a.onKeyDown,P=N(h=>{if(A==null||A(h),S||h.defaultPrevented)return;const k=er(h,v);k&&(h.preventDefault(),p(),e==null||e.setAutoFocusOnShow(!0),e==null||e.setInitialFocus(k))}),M=a.onClick,D=N(h=>{if(M==null||M(h),h.defaultPrevented||!e)return;const k=!h.detail,{open:U}=e.getState();(!U||k)&&((!f||k)&&e.setAutoFocusOnShow(!0),e.setInitialFocus(k?"first":"container")),f&&p()});a=Ie(a,h=>x.jsx(je,{value:e,children:h}),[e]),f&&(a=E(g({},a),{render:x.jsx(Dt.div,{render:a.render})}));const C=Ae(a.id),q=j((l==null?void 0:l.combobox)||l,"contentElement"),I=f||i?ke(q,"menuitem"):void 0,L=e.useState("contentElement");return a=E(g({id:C,role:I,"aria-haspopup":mt(L,"menu")},a),{ref:ne(c,a.ref),onFocus:y,onKeyDown:P,onClick:D}),a=nt(E(g({store:e,focusable:u,accessibleWhenDisabled:o},a),{showOnHover:h=>{if(!(()=>{if(typeof s=="function")return s(h);if(s!=null)return s;if(f)return!0;if(!b)return!1;const{items:Z}=b.getState();return i&&xe(Z)})())return!1;const K=i?b:l;return K&&K.setActiveId(h.currentTarget.id),!0}})),a=Ve(g({store:e,toggleOnClick:!f,focusable:u,accessibleWhenDisabled:o},a)),a=fe(g({store:e,typeahead:i},a)),a}),rr=$(function(r){const n=tr(r);return W(Zt,n)}),nr="div";function Ne(t){const r=t.relatedTarget;return(r==null?void 0:r.nodeType)===Node.ELEMENT_NODE?r:null}function or(t){const r=Ne(t);return r?vt(t.currentTarget,r):!1}var ie=Symbol("composite-hover");function sr(t){let r=Ne(t);if(!r)return!1;do{if(bt(r,ie)&&r[ie])return!0;r=r.parentElement}while(r);return!1}var Ke=B(function(r){var n=r,{store:e,focusOnHover:u=!0,blurOnHoverEnd:o=!!u}=n,s=_(n,["store","focusOnHover","blurOnHoverEnd"]);const a=Me();e=e||a,V(e,!1);const d=pt(),c=s.onMouseMove,l=ae(u),b=N(m=>{if(c==null||c(m),!m.defaultPrevented&&d()&&l(m)){if(!G(m.currentTarget)){const y=e==null?void 0:e.getState().baseElement;y&&!It(y)&&y.focus()}e==null||e.setActiveId(m.currentTarget.id)}}),f=s.onMouseLeave,i=ae(o),S=N(m=>{var y;f==null||f(m),!m.defaultPrevented&&d()&&(or(m)||sr(m)||l(m)&&i(m)&&(e==null||e.setActiveId(null),(y=e==null?void 0:e.getState().baseElement)==null||y.focus()))}),p=w.useCallback(m=>{m&&(m[ie]=!0)},[]);return s=E(g({},s),{ref:ne(p,s.ref),onMouseMove:b,onMouseLeave:S}),Ee(s)});ce($(function(r){const n=Ke(r);return W(nr,n)}));var ur="div";function ar(t,r,n){var e;if(!t)return!1;if(G(t))return!0;const u=r==null?void 0:r.find(d=>{var c;return d.element===n?!1:((c=d.element)==null?void 0:c.getAttribute("aria-expanded"))==="true"}),o=(e=u==null?void 0:u.element)==null?void 0:e.getAttribute("aria-controls");if(!o)return!1;const a=Pe(t).getElementById(o);return a?G(a)?!0:!!a.querySelector("[role=menuitem][aria-expanded=true]"):!1}var Re=B(function(r){var n=r,{store:e,hideOnClick:u=!0,preventScrollOnKeyDown:o=!0,focusOnHover:s,blurOnHoverEnd:a}=n,d=_(n,["store","hideOnClick","preventScrollOnKeyDown","focusOnHover","blurOnHoverEnd"]);const c=_e(!0),l=Lt();e=e||c||l,V(e,!1);const b=d.onClick,f=ae(u),i="hideAll"in e?e.hideAll:void 0,S=!!i,p=N(v=>{b==null||b(v),!(v.defaultPrevented||ht(v)||xt(v)||!i||v.currentTarget.getAttribute("aria-haspopup")==="menu")&&f(v)&&i()}),m=j(e,v=>"contentElement"in v?v.contentElement:null),y=ke(m,"menuitem");return d=E(g({role:y},d),{onClick:p}),d=Qe(g({store:e,preventScrollOnKeyDown:o},d)),d=Ke(E(g({store:e},d),{focusOnHover(v){const A=()=>typeof s=="function"?s(v):s??!0;if(!e||!A())return!1;const{baseElement:P,items:M}=e.getState();return S?(v.currentTarget.hasAttribute("aria-expanded")&&v.currentTarget.focus(),!0):ar(P,M,v.currentTarget)?(v.currentTarget.focus(),!0):!1},blurOnHoverEnd(v){return typeof a=="function"?a(v):a??S}})),d}),ir=ce($(function(r){const n=Re(r);return W(ur,n)})),lr="div";function cr(t){return Array.isArray(t)?t.toString():t}function ue(t,r,n){if(r===void 0)return Array.isArray(t)?t:!!n;const e=cr(r);return Array.isArray(t)?n?t.includes(e)?t:[...t,e]:t.filter(u=>u!==e):n?e:t===e?!1:t}var dr=B(function(r){var n=r,{store:e,name:u,value:o,checked:s,defaultChecked:a,hideOnClick:d=!1}=n,c=_(n,["store","name","value","checked","defaultChecked","hideOnClick"]);const l=_e();e=e||l,V(e,!1);const b=gt(a);w.useEffect(()=>{e==null||e.setValue(u,(i=[])=>b?ue(i,o,!0):i)},[e,u,o,b]),w.useEffect(()=>{s!==void 0&&(e==null||e.setValue(u,i=>ue(i,o,s)))},[e,u,o,s]);const f=_t({value:e.useState(i=>i.values[u]),setValue(i){e==null||e.setValue(u,()=>{if(s===void 0)return i;const S=ue(i,o,s);return!Array.isArray(S)||!Array.isArray(i)?S:Ct(i,S)?i:S})}});return c=g({role:"menuitemcheckbox"},c),c=Ht(g({store:f,name:u,value:o,checked:s},c)),c=Re(g({store:e,hideOnClick:d},c)),c}),fr=ce($(function(r){const n=dr(r);return W(lr,n)}));function Hr(t){const{children:r,placement:n,open:e,setOpen:u,defaultOpen:o}=t;return x.jsx(Yt,{placement:n,defaultOpen:o,open:e,setOpen:u,children:r})}const Tr=J((t,r)=>{const n=Ge(de());return x.jsx(Xt,{portal:!0,unmountOnHide:!0,...t,gutter:4,style:{...n.style,...t.style},wrapperProps:n.wrapperProps,className:X("-dropdown-menu",t.className),ref:r})}),Fr=J((t,r)=>{const{accessibleWhenDisabled:n=!0,children:e,...u}=t,o=j(de(),s=>s==null?void 0:s.open);return x.jsx(rr,{accessibleWhenDisabled:!0,render:x.jsxs($e,{accessibleWhenDisabled:n,children:[e,x.jsx(qe,{})]}),...u,className:X("-dropdown-menu-button",t.className),"data-has-popover-open":o||void 0,ref:r})}),_r=J((t,r)=>{const{label:n,shortcuts:e,icon:u,...o}=t;return x.jsxs(ir,{accessibleWhenDisabled:!0,...o,render:x.jsx(Ce,{render:t.render}),className:X("-dropdown-menu-item",t.className),ref:r,children:[u?x.jsx(Be,{icon:u}):null,x.jsx(ge,{children:n}),e?x.jsx(mr,{shortcuts:e}):null]})}),mr=J((t,r)=>{const{shortcuts:n,...e}=t,u=w.useMemo(()=>n.split("+").map(o=>({key:o.trim(),isSymbol:o in We})),[n]);return x.jsx(le,{...e,className:X("-dropdown-menu-item-shortcuts",t.className),ref:r,children:u.map(({key:o,isSymbol:s},a)=>s?x.jsx(ve,{variant:"ghost",symbol:o},`${o+a}`):x.jsx(ve,{variant:"ghost",children:o},`${o+a}`))})}),Be=J((t,r)=>{const{icon:n,...e}=t;return x.jsx(le,{render:x.jsx(Ue,{href:typeof n=="string"?n:void 0,render:w.isValidElement(n)?n:void 0}),...e,ref:r})}),jr=J((t,r)=>{const{label:n,icon:e,...u}=t;return x.jsxs(fr,{accessibleWhenDisabled:!0,value:t.defaultChecked?"on":void 0,...u,render:x.jsx(Ce,{render:t.render}),className:X("-dropdown-menu-item",t.className),ref:r,children:[e?x.jsx(Be,{icon:e}):null,x.jsx(ge,{children:n}),x.jsx(le,{render:x.jsx(ze,{className:"-dropdown-menu-checkmark"})})]})});export{Hr as D,Fr as a,Tr as b,_r as c,jr as d};
