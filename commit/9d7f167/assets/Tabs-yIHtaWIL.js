import{a as I,o as T}from"./chunk-QMGIS6GS-BaJhsRKI.js";import{m as ce,o as J,n as ie,p as L,q as y,A as le,t as Z,v as Q,l as k,f as W,u as de,c as B}from"./sun-Cb9-oQ-z.js";import{p as ue,n as me,h as be,q as fe,r as ve,s as Ie}from"./~utils-DnjP1a-v.js";import{a as ee,b as te,C as U,u as pe}from"./6VRAQV3D-B4liMw1E.js";import{I as oe,H as xe,F as A,E as O,d as $,J as X,_ as C,b as v,G as Y,a1 as Se,f as H,c as z,a as K,j as q,P as G,Q as se,p as Ce,q as V,m as ne,u as Pe}from"./LMDWO4NN-CcJUQKmw.js";import{c as he,a as ge,b as Te}from"./5JTVDSTH-70Md3pdZ.js";import{u as Ee}from"./S43UC3DV-ahhBbsYW.js";import{c as _e,b as Re}from"./RZ4GPYOB-tdKuhCZr.js";var ye=oe([me,te],[ue,ee]),je=ye.useContext;I.createContext(!1);I.createContext(null);function De(t={}){var r=t,{composite:s,combobox:e}=r,o=xe(r,["composite","combobox"]);const n=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],b=ce(o.store,J(s,n),J(e,n)),c=b?.getState(),m=he(A($({},o),{store:b,includesBaseElement:O(o.includesBaseElement,c?.includesBaseElement,!1),orientation:O(o.orientation,c?.orientation,"horizontal"),focusLoop:O(o.focusLoop,c?.focusLoop,!0)})),a=_e(),E=A($({},m.getState()),{selectedId:O(o.selectedId,c?.selectedId,o.defaultSelectedId),selectOnMove:O(o.selectOnMove,c?.selectOnMove,!0)}),i=ie(E,m,b);L(i,()=>y(i,["moves"],()=>{const{activeId:d,selectOnMove:f}=i.getState();if(!f||!d)return;const p=m.item(d);p&&(p.dimmed||p.disabled||i.setState("selectedId",p.id))}));let P=!0;L(i,()=>le(i,["selectedId"],(d,f)=>{if(!P){P=!0;return}s&&d.selectedId===f.selectedId||i.setState("activeId",d.selectedId)})),L(i,()=>y(i,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:f,renderedItems:p}=i.getState(),x=m.item(f);if(x&&!x.disabled&&!x.dimmed)i.setState("selectedId",x.id);else{const _=p.find(h=>!h.disabled&&!h.dimmed);i.setState("selectedId",_?.id)}})),L(i,()=>y(i,["renderedItems"],d=>{const f=d.renderedItems;if(f.length)return y(a,["renderedItems"],p=>{const x=p.renderedItems;x.some(h=>!h.tabId)&&x.forEach((h,D)=>{if(h.tabId)return;const w=f[D];w&&a.renderItem(A($({},h),{tabId:w.id}))})})}));let S=null;return L(i,()=>{const d=()=>{S=i.getState().selectedId},f=()=>{P=!1,i.setState("selectedId",S)};if(s&&"setSelectElement"in s)return X(y(s,["value"],d),y(s,["mounted"],f));if(e)return X(y(e,["selectedValue"],d),y(e,["mounted"],f))}),A($($({},m),i),{panels:a,setSelectedId:d=>i.setState("selectedId",d),select:d=>{i.setState("selectedId",d),m.move(d)}})}function Me(t,r,s){Y(r,[s.composite,s.combobox]),t=ge(t,r,s),Q(t,s,"selectedId","setSelectedId"),Q(t,s,"selectOnMove");const[e,o]=Z(()=>t.panels,{});return Y(o,[t,o]),Object.assign(I.useMemo(()=>C(v({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function ke(t={}){const r=Ee(),s=je()||r;t=C(v({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:r});const[e,o]=Z(De,t);return Me(e,o,t)}var N=oe([te],[ee]),we=N.useContext,Fe=N.useScopedContext,re=N.useProviderContext,Le=N.ContextProvider,ae=N.ScopedContextProvider,Oe="button",$e=z(function(r){var s=r,{store:e,getItem:o}=s,n=q(s,["store","getItem"]),b;const c=Fe();e=e||c,G(e,!1);const m=se(),a=n.id||m,E=Ce(n),i=I.useCallback(u=>{const j=C(v({},u),{dimmed:E});return o?o(j):j},[E,o]),P=n.onClick,S=V(u=>{P?.(u),!u.defaultPrevented&&e?.setSelectedId(a)}),d=e.panels.useState(u=>{var j;return(j=u.items.find(l=>l.tabId===a))==null?void 0:j.id}),f=m?n.shouldRegisterItem:!1,p=e.useState(u=>!!a&&u.activeId===a),x=e.useState(u=>!!a&&u.selectedId===a),_=e.useState(u=>!!e.item(u.activeId)),h=p||x&&!_,D=x||((b=n.accessibleWhenDisabled)!=null?b:!0);if(k(e.combobox||e.composite,"virtualFocus")&&(n=C(v({},n),{tabIndex:-1})),n=C(v({id:a,role:"tab","aria-selected":x,"aria-controls":d||void 0},n),{onClick:S}),e.composite){const u={id:a,accessibleWhenDisabled:D,store:e.composite,shouldRegisterItem:h&&f,rowId:n.rowId,render:n.render};n=C(v({},n),{render:T.jsx(U,C(v({},u),{render:e.combobox&&e.composite!==e.combobox?T.jsx(U,C(v({},u),{store:e.combobox})):u.render}))})}return n=pe(C(v({store:e},n),{accessibleWhenDisabled:D,getItem:i,shouldRegisterItem:f})),n}),Ne=Se(H(function(r){const s=$e(r);return K(Oe,s)}));function Ae(t={}){const r=ke(t);return T.jsx(Le,{value:r,children:t.children})}var Ve="div",We=z(function(r){var s=r,{store:e}=s,o=q(s,["store"]);const n=re();e=e||n,G(e,!1);const b=e.useState(c=>c.orientation==="both"?void 0:c.orientation);return o=ne(o,c=>T.jsx(ae,{value:e,children:c}),[e]),e.composite&&(o=v({focusable:!1},o)),o=v({role:"tablist","aria-orientation":b},o),o=Te(v({store:e},o)),o}),Be=H(function(r){const s=We(r);return K(Ve,s)}),He="div",ze=z(function(r){var s=r,{store:e,unmountOnHide:o,tabId:n,getItem:b,scrollRestoration:c,scrollElement:m}=s,a=q(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const E=re();e=e||E,G(e,!1);const i=I.useRef(null),P=se(a.id),S=k(e.panels,()=>{var l;return n||((l=e?.panels.item(P))==null?void 0:l.tabId)}),d=k(e,l=>!!S&&l.selectedId===S),f=be({open:d}),p=k(f,"mounted"),x=I.useRef(new Map),_=V(()=>{const l=i.current;return l?m?typeof m=="function"?m(l):"current"in m?m.current:m:l:null});I.useEffect(()=>{var l,R;if(!c||!p)return;const g=_();if(!g)return;if(c==="reset"){g.scroll(0,0);return}if(!S)return;const M=x.current.get(S);g.scroll((l=M?.x)!=null?l:0,(R=M?.y)!=null?R:0);const F=()=>{x.current.set(S,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",F),()=>{g.removeEventListener("scroll",F)}},[c,p,S,_,e]);const[h,D]=I.useState(!1);I.useEffect(()=>{const l=i.current;if(!l)return;const R=fe(l);D(!!R.length)},[]);const w=I.useCallback(l=>{const R=C(v({},l),{id:P||l.id,tabId:n});return b?b(R):R},[P,n,b]),u=a.onKeyDown,j=V(l=>{if(u?.(l),l.defaultPrevented||!e?.composite)return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!g)return;const{selectedId:M}=e.getState(),F=g({activeId:M});F&&(l.preventDefault(),e.move(F))});return a=ne(a,l=>T.jsx(ae,{value:e,children:l}),[e]),a=C(v({id:P,role:"tabpanel","aria-labelledby":S||void 0},a),{children:o&&!p?null:a.children,ref:Pe(i,a.ref),onKeyDown:j}),a=ve(v({focusable:!e.composite&&!h},a)),a=Ie(v({store:f},a)),a=Re(C(v({store:e.panels},a),{getItem:w})),a}),Ke=H(function(r){const s=ze(r);return K(He,s)});function et(t){const{defaultSelectedId:r,selectedId:s,setSelectedId:e,selectOnMove:o,children:n}=t;return T.jsx(Ae,{defaultSelectedId:r,selectedId:s,setSelectedId:b=>I.startTransition(()=>e?.(b)),selectOnMove:o,children:n})}const tt=W((t,r)=>{const{tone:s="neutral",...e}=t,[o,n]=I.useState(!1);return I.useEffect(()=>{n(!0)},[]),T.jsx(Be,{...e,"data-initialized":o?"true":void 0,"data-kiwi-tone":s,className:B("-tab-list",t.className),ref:r})}),ot=W((t,r)=>{const s=we(),e=k(s,"selectedId"),o=k(s,"baseElement"),n=I.useCallback(({tab:c})=>{if(!o)return;const{left:m,width:a}=c.getBoundingClientRect(),E=m-o.getBoundingClientRect().left;o.style.setProperty("--tab-active-stripe-position",`${Math.round(E)}px`),o.style.setProperty("--tab-active-stripe-width",`${Math.round(a)}px`)},[o]),b=I.useCallback(c=>{!c||!o||e===t.id&&n({tab:c})},[n,o,t.id,e]);return T.jsx(Ne,{accessibleWhenDisabled:!0,...t,className:B("-tab",t.className),ref:de(r,b)})}),st=W((t,r)=>T.jsx(Ke,{...t,className:B("-tab-panel",t.className),ref:r}));export{et as T,ot as a,st as b,tt as c};
