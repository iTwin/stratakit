import{n as v,a as P}from"./chunk-K6AXKMTT-BHCV6zel.js";import{c as W}from"./index-DeGJKKUv.js";import{B as k,C as b,D as x,z as q,c as F,_ as I,h as B,y as G,b as g,g as N,H,o as J,d as $,e as D,R as K,m as E,f as L,N as w}from"./~utils-ChHMGsjo.js";import{c as Q,u as U,H as X,a as Y,b as Z,d as ee,e as te}from"./BYC7LY2E-DBPNoNeE.js";import{c as M,u as re,b as j,a as R,d as V}from"./YV4JVR4I-I4X5ERHE.js";function oe(t={}){var o;const r=(o=t.store)==null?void 0:o.getState(),e=Q(k(x({},t),{placement:b(t.placement,r==null?void 0:r.placement,"top"),hideTimeout:b(t.hideTimeout,r==null?void 0:r.hideTimeout,0)})),l=k(x({},e.getState()),{type:b(t.type,r==null?void 0:r.type,"description"),skipTimeout:b(t.skipTimeout,r==null?void 0:r.skipTimeout,300)}),s=M(l,e,t.store);return x(x({},e),s)}function ne(t,o,r){return j(t,r,"type"),j(t,r,"skipTimeout"),U(t,o,r)}function z(t={}){const[o,r]=re(oe,t);return ne(o,r,t)}var _=q([Y],[X]),C=_.useProviderContext,ae=_.ContextProvider,se=_.ScopedContextProvider,ie="div",ue=F(function(o){var r=o,{store:e,portal:l=!0,gutter:s=8,preserveTabOrder:T=!1,hideOnHoverOutside:c=!0,hideOnInteractOutside:m=!0}=r,u=I(r,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const S=C();e=e||S,B(e,!1),u=G(u,i=>v.jsx(se,{value:e,children:i}),[e]);const p=e.useState(i=>i.type==="description"?"tooltip":"none");return u=g({role:p},u),u=Z(N(g({},u),{store:e,portal:l,gutter:s,preserveTabOrder:T,hideOnHoverOutside(i){if(H(c,i))return!1;const n=e==null?void 0:e.getState().anchorElement;return n?!("focusVisible"in n.dataset):!0},hideOnInteractOutside:i=>{if(H(m,i))return!1;const n=e==null?void 0:e.getState().anchorElement;return n?!J(n,i.target):!0}})),u}),le=ee($(function(o){const r=ue(o);return D(ie,r)}),C);function ce(t={}){const o=z(t);return v.jsx(ae,{value:o,children:t.children})}var de="div",f=M({activeStore:null});function A(t){return()=>{const{activeStore:o}=f.getState();o===t&&f.setState("activeStore",null)}}var pe=F(function(o){var r=o,{store:e,showOnHover:l=!0}=r,s=I(r,["store","showOnHover"]);const T=C();e=e||T,B(e,!1);const c=P.useRef(!1);P.useEffect(()=>R(e,["mounted"],a=>{a.mounted||(c.current=!1)}),[e]),P.useEffect(()=>{if(e)return K(A(e),R(e,["mounted","skipTimeout"],a=>{if(!e)return;if(a.mounted){const{activeStore:y}=f.getState();return y!==e&&(y==null||y.hide()),f.setState("activeStore",e)}const d=setTimeout(A(e),a.skipTimeout);return()=>clearTimeout(d)}))},[e]);const m=s.onMouseEnter,u=E(a=>{m==null||m(a),c.current=!0}),S=s.onFocusVisible,p=E(a=>{S==null||S(a),!a.defaultPrevented&&(e==null||e.setAnchorElement(a.currentTarget),e==null||e.show())}),i=s.onBlur,n=E(a=>{if(i==null||i(a),a.defaultPrevented)return;const{activeStore:d}=f.getState();c.current=!1,d===e&&f.setState("activeStore",null)}),h=e.useState("type"),O=e.useState(a=>{var d;return(d=a.contentElement)==null?void 0:d.id});return s=N(g({"aria-labelledby":h==="label"?O:void 0},s),{onMouseEnter:u,onFocusVisible:p,onBlur:n}),s=te(g({store:e,showOnHover(a){if(!c.current||H(l,a))return!1;const{activeStore:d}=f.getState();return d?(e==null||e.show(),!1):!0}},s)),s}),ve=$(function(o){const r=pe(o);return D(de,r)});const Pe=L((t,o)=>{const{content:r,children:e,type:l="description",id:s=P.useId(),defaultOpen:T,open:c,setOpen:m,unmountOnHide:u=l==="none",...S}=t,p=z(),i=V(p,h=>h.open),n=V(p,h=>h.popoverElement);return P.useEffect(function(){var O;n!=null&&n.isConnected&&((O=n==null?void 0:n.togglePopover)==null||O.call(n,i))},[i,n]),v.jsx(v.Fragment,{children:v.jsxs(ce,{store:p,defaultOpen:T,open:c,setOpen:m,children:[v.jsx(ve,{render:e,...l==="description"&&{"aria-describedby":s},...l==="label"&&{"aria-labelledby":s}}),v.jsx(le,{"aria-hidden":"true",...S,unmountOnHide:u,className:W("ü•ù-tooltip",t.className),ref:o,id:s,style:{zIndex:w?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!w,children:r})]})})});export{ce as T,ve as a,le as b,Pe as c,z as u};
