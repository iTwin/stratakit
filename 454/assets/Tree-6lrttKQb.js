import{n as r,a as i}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{c as j}from"./~utils-CXPSt6v1.js";import{f as W,P as $}from"./BYC7LY2E-Cy2FmVCU.js";import{R as b}from"./XL7CSKGW-CCIXOv3t.js";import{a as q}from"./MTZPJQMC-DSUGaJmQ.js";import{P as z,a as O,b as k,L as w}from"./QYJ6MIDR-CUBr8kVh.js";import{f as h}from"./~utils-CvI4aHT1.js";import{S as E,b as _,D as J,I as Q}from"./Icon-DPz7gbla.js";import{T as A}from"./Text-BwrQI5Jt.js";import{u as U,T as X,I as N}from"./IconButton-B9bbUUtD.js";import{A as K}from"./Anchor-DLUpVHmS.js";import{D as Y}from"./Divider-B7O4lSoW.js";import{B as Z,G as ee,u as re}from"./Button-DVN_4YMs.js";import{c as oe,g as I}from"./~hooks-Dbo26-5-.js";import{c as te}from"./P2CTZE2T-D72lXxRb.js";import{c as se,u as ie,a as ae,b as ne,C as ce}from"./ITI7HKP4-BZO2jLmx.js";import{u as le}from"./YV4JVR4I-D6Sf86gC.js";import{_ as de,d as y,b as ue,q as me,i as xe,t as fe,j as ve,x as he,h as S}from"./LMDWO4NN-Bg6lErus.js";function pe(e={}){var t;const o=(t=e.store)==null?void 0:t.getState();return se(de(ue({},e),{orientation:y(e.orientation,o==null?void 0:o.orientation,"horizontal"),focusLoop:y(e.focusLoop,o==null?void 0:o.focusLoop,!0)}))}function je(e,t,o){return ie(e,t,o)}function be(e={}){const[t,o]=le(pe,e);return je(t,o,e)}var Ie="div",De=xe(function(t){var o=t,{store:c,orientation:d,virtualFocus:a,focusLoop:u,rtl:n}=o,s=ve(o,["store","orientation","virtualFocus","focusLoop","rtl"]);const p=U();c=c||p;const x=be({store:c,orientation:d,virtualFocus:a,focusLoop:u,rtl:n}),v=x.useState(m=>m.orientation==="both"?void 0:m.orientation);return s=he(s,m=>r.jsx(X,{value:x,children:m}),[x]),s=S({role:"toolbar","aria-orientation":v},s),s=ae(S({store:x},s)),s}),Ce=me(function(t){const o=De(t);return fe(Ie,o)});function Te(e={}){const t=W(e);return r.jsx(q,{value:t,children:e.children})}const P=i.createContext(void 0),L=i.createContext(void 0),qe=h((e,t)=>{const{label:o,items:c,expanded:d,onExpandedChange:a,...u}=e,n=i.useId(),[s,p]=oe(!1,d,a);return r.jsx(Te,{open:s,setOpen:p,children:r.jsx(b.div,{"data-kiwi-expanded":s,...u,className:j("-tree-error",e.className),ref:t,children:r.jsxs("div",{className:"-tree-error-container",children:[r.jsxs(z,{className:"-tree-error-header",render:r.jsx(Z,{variant:"ghost"}),children:[r.jsx(E,{className:"-tree-error-icon"}),r.jsx(A,{id:n,className:"-tree-error-label",variant:"body-sm",children:o}),r.jsx(N,{inert:!0,render:r.jsx("span",{}),label:"Toggle",icon:r.jsx(_,{}),variant:"ghost"})]}),r.jsxs($,{portal:!1,modal:!1,wrapperProps:{style:{position:void 0,width:void 0}},updatePosition:()=>{},"aria-labelledby":n,children:[r.jsx(Y,{className:"-tree-error-divider",presentational:!0}),r.jsx("div",{className:"-tree-error-items",children:c})]})]})})})}),ze=h((e,t)=>{const{treeItemId:o,message:c,actions:d,onDismiss:a,...u}=e,{setErrorId:n}=i.useContext(P)??{},s=i.useId();return i.useEffect(()=>{if(o)return n==null||n({itemId:o,errorId:s}),()=>{n==null||n({itemId:o,errorId:void 0})}},[o,s,n]),r.jsx(L.Provider,{value:i.useMemo(()=>({itemId:o}),[o]),children:r.jsxs(b.div,{...u,className:j("-tree-error-item",e.className),ref:t,children:[r.jsx(A,{id:s,variant:"body-sm",className:"-tree-error-item-message",children:c}),a&&r.jsx(N,{className:"-tree-error-item-dismiss",variant:"ghost",label:"Dismiss",icon:r.jsx(J,{}),onClick:a}),r.jsx("div",{className:"-tree-error-item-actions",children:d})]})})}),Oe=h((e,t)=>{const{itemId:o}=i.useContext(L)??{};return r.jsx(K,{href:o?`#${o}`:void 0,...e,ref:t})}),Je=h((e,t)=>r.jsx(K,{render:r.jsx("button",{...e}),ref:t})),Ne=i.createContext(void 0),Qe=h((e,t)=>{const{id:o,"aria-level":c,selected:d,expanded:a,unstable_decorations:u,label:n,description:s,actions:p,error:x,onSelectedChange:v,onExpandedChange:m,onClick:R,onKeyDown:M,...B}=e;let{icon:f}=e;const{itemIdToErrorId:F}=i.useContext(P)??{},V=l=>{d!==void 0&&(l.stopPropagation(),v==null||v(!d))},G=l=>{l.altKey||l.ctrlKey||l.metaKey||l.shiftKey||a!==void 0&&(l.key==="ArrowRight"||l.key==="ArrowLeft")&&(l.preventDefault(),m==null||m(l.key==="ArrowRight"))},g=i.useId(),D=i.useId(),C=i.useId(),T=o&&F?F.get(o):void 0;f=x?r.jsx(E,{}):f;const H=i.useMemo(()=>{const l=[];return s&&l.push(D),(u||f)&&l.push(C),T&&l.push(T),l.length>0?l.join(" "):void 0},[u,f,C,s,D,T]);return r.jsx(Ne.Provider,{value:i.useMemo(()=>({level:c,expanded:a,selected:d}),[c,a,d]),children:r.jsx(te,{id:o,render:r.jsx(b,{...B}),onClick:I(R,V),onKeyDown:I(M,G),role:"treeitem","aria-expanded":a,"aria-selected":d,"aria-labelledby":g,"aria-describedby":H,"aria-level":c,className:j("-tree-item",e.className),ref:t,children:r.jsxs(O,{"data-kiwi-expanded":a,"data-kiwi-selected":d,"data-kiwi-error":x?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":c},role:void 0,children:[r.jsxs(k,{children:[r.jsx(ee,{align:s?"block":void 0,children:r.jsx(Fe,{onClick:()=>{a!==void 0&&(m==null||m(!a))}})}),f||u?r.jsx(b,{className:"-tree-item-decoration",id:C,render:i.isValidElement(f)?f:typeof f=="string"?r.jsx(Q,{href:f}):void 0,children:f?null:u}):null]}),r.jsx(w,{id:g,className:"-tree-item-content",children:n}),s?r.jsx(w,{id:D,className:"-tree-item-description",children:s}):void 0,r.jsx(k,{render:r.jsx(Pe,{children:p})})]})})})}),Pe=h((e,t)=>r.jsx(Ce,{...e,onClick:I(e.onClick,o=>o.stopPropagation()),onKeyDown:I(e.onKeyDown,o=>o.stopPropagation()),className:j("-tree-item-actions",e.className),ref:t,children:e.children})),Ue=h((e,t)=>{const{visible:o,...c}=e;return r.jsx(N,{inert:o===!1?!0:void 0,...c,variant:"ghost",className:j("-tree-item-action",e.className),"data-kiwi-visible":o,ref:t})}),Fe=h((e,t)=>r.jsx(b.span,{"aria-hidden":"true",...e,onClick:I(e.onClick,o=>o.stopPropagation()),className:j("-button","-icon-button","-ghost-aligner","-tree-item-expander",e.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":re(),ref:t,children:r.jsx(_,{})})),Xe=h((e,t)=>{const{error:o,...c}=e,d=ne({orientation:"vertical"}),[a,u]=i.useState(new Map),n=i.useCallback(s=>{const{errorId:p}=s;u(x=>{const v=new Map(x);return p===void 0?v.delete(s.itemId)?v:x:v.set(s.itemId,p)})},[]);return r.jsxs(P.Provider,{value:i.useMemo(()=>({itemIdToErrorId:a,setErrorId:n}),[a,n]),children:[o,r.jsx(b.div,{role:"tree",...c,render:r.jsx(ce,{store:d}),className:j("-tree",e.className),ref:t,children:e.children})]})});export{Xe as T,Qe as a,Ue as b,qe as c,ze as d,Je as e,Oe as f};
