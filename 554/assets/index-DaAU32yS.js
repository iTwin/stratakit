import{w as D,k as P,I as p}from"./~utils-CxASWhF4.js";import{b as n,p as s}from"./index-DDCMeoDP.js";import{p as I,T as j,a as g,b as m}from"./immer-DnIER06Z.js";import{p as i}from"./placeholder-gUCX-h4c.js";import{r as U,u as F}from"./refresh-BAzeHmAJ.js";import{s as M}from"./visibility-show-xvYChKDP.js";import"./P2CTZE2T-D_z6vYUB.js";import"./RZ4GPYOB-BTgj2PCQ.js";import"./BOLVLGVE-BW0Ov_J5.js";import"./ITI7HKP4-0vlP2Ae8.js";import"./DropdownMenu-DKEz9A5l.js";import"./Text-IxGqT4Nh.js";import"./Kbd-nKMXfOnl.js";import"./VEVQD5MH-CXqvOKN2.js";import"./AXB53BZF-z9Z2SPux.js";import"./P4IRICAX-BwHPV_Vw.js";import"./ASMQKSDT-Bs5Mo-96.js";const ae={title:"Tree"},ne=D(P(function({overflow:c=!1,selected:r=!1,description:x,error:d,items:u}){const[O,S]=n.useTransition(),f=c?" with a super long label that is overflown":"",T=x?"Additional description":void 0,[w,k]=n.useState(!!d),C=u?Number(u):0,[b,v]=n.useState(()=>[{label:`Item 1${f}`,selected:!!r,expanded:!0,children:[{label:"Item 1.1",selected:!!r},{label:"Item 1.2",selected:!!r},{label:`Item 1.3${f}`,selected:!!r}]},{label:"Item 2",selected:!1,expanded:!0,children:[{label:`Item 2.1${f}`,selected:!1}]},{label:"Item 3",selected:!1},...Array.from({length:C}).map((e,t)=>({label:`Item ${t+4}`,selected:!1}))]),y=n.useMemo(()=>b.flatMap((e,t,o)=>{const a={...e,level:1,index:t,setSize:o.length,childIndex:void 0};if(!e.expanded)return a;const l=e.children?e.children.map(($,R,_)=>({...$,level:2,index:t,childIndex:R,setSize:_.length,expanded:void 0})):[];return[a,...l]}),[b]),z=n.useCallback((e,t)=>{v(I(o=>{var l;const a=t===void 0?o[e]:(l=o[e].children)==null?void 0:l[t];a&&(a.selected=!a.selected)}))},[]),A=n.useCallback(e=>{S(()=>{v(I(t=>{const o=t[e];o.expanded!==void 0&&(o.expanded=!o.expanded)}))})},[]),E=n.useCallback(()=>{k(!1)},[]);return s.jsx(j,{style:{maxInlineSize:c?300:void 0},children:y.map(e=>{const{index:t,childIndex:o}=e,a=w&&t===0&&o===void 0,l=t===0&&o===void 0||o===0;return s.jsx(g,{"aria-level":e.level,"aria-posinset":t+1,"aria-setsize":e.setSize,label:e.label,description:l?T:void 0,expanded:e.expanded,selected:e.selected,error:a,onSelectedChange:()=>{z(t,o)},onExpandedChange:()=>{A(t)},icon:o===void 0?s.jsx(p,{href:i,alt:"decoration"}):void 0,unstable_decorations:o===0?s.jsxs(s.Fragment,{children:[s.jsx(p,{href:i}),s.jsx(p,{href:i})]}):s.jsx(p,{href:i}),actions:[a&&s.jsx(m,{icon:U,label:"Retry",onClick:E},"retry"),s.jsx(m,{icon:F,label:"Unlock"},"unlock"),s.jsx(m,{icon:M,label:"Show"},"show")]},e.label)})})},{_actionsOverflow:N}));function N({count:h=5,dot:c=!1}){const r=Array.from({length:Number(h)}).map((x,d)=>s.jsx(m,{label:`Action ${d+1}`,icon:i,dot:c?"Something's going on":void 0},`${d+1}`));return s.jsx(j,{children:s.jsx(g,{label:"Foo","aria-level":1,"aria-posinset":1,"aria-setsize":1,actions:r})})}export{ne as default,ae as handle};
