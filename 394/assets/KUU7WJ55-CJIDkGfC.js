import{j as h,_ as m,al as d,O as A,a2 as B,y as T,F as I,E as q,ax as j,ay as Y,az as w,v as z,J as H,l as C,ab as J,h as L,k as V}from"./~utils-3Un1J0Zt.js";import{b as o}from"./index-DDCMeoDP.js";var G="button";function D(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=h(function(t){var i=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=i,r=m(i,["clickOnEnter","clickOnSpace"]);const f=o.useRef(null),[M,R]=o.useState(!1);o.useEffect(()=>{f.current&&R(d(f.current))},[]);const[K,y]=o.useState(!1),l=o.useRef(!1),E=A(r),[b,U]=B(r,Q,!0),v=r.onKeyDown,x=T(e=>{v==null||v(e);const s=e.currentTarget;if(e.defaultPrevented||b||E||!I(e)||q(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",n=c&&e.key===" ",S=e.key==="Enter"&&!k,p=e.key===" "&&!c;if(S||p){e.preventDefault();return}if(u||n){const g=D(e);if(u){if(!g){e.preventDefault();const N=e,{view:X}=N,O=m(N,["view"]),_=()=>w(s,O);j()?Y(s,"keyup",_):queueMicrotask(_)}}else n&&(l.current=!0,g||(e.preventDefault(),y(!0)))}}),P=r.onKeyUp,F=T(e=>{if(P==null||P(e),e.defaultPrevented||b||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!D(e))){e.preventDefault(),y(!1);const u=e.currentTarget,n=e,{view:S}=n,p=m(n,["view"]);queueMicrotask(()=>w(u,p))}});return r=z(C(C({"data-active":K||void 0,type:M?"button":void 0},U),r),{ref:H(f,r.ref),onKeyDown:x,onKeyUp:F}),r=J(r),r});L(function(t){const i=W(t);return V(G,i)});export{W as u};
