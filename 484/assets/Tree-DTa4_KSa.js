import{p as o,b as c}from"./index-DDCMeoDP.js";import{ad as B,ae as P,af as E,al as O,E as V,F as G,G as H,J as q,bb as z,aq as J,bc as U,K as g,bd as W,a9 as Z,l as h,ap as $,d as v,be as p,bf as Q,o as j,I as F,a7 as N,b as X,S as Y,bg as ee,bh as oe}from"./~utils-DxSSssgS.js";import{c as te,a as re,b as se,e as ne,C as ae}from"./VEVQD5MH-B9NTV0Ek.js";import{L as ie,e as I,f as T,d as le,D as ce,a as ue,b as de}from"./DropdownMenu-B_3xpYn5.js";function me(e={}){var r;const t=(r=e.store)==null?void 0:r.getState();return te(B(E({},e),{orientation:P(e.orientation,t==null?void 0:t.orientation,"horizontal"),focusLoop:P(e.focusLoop,t==null?void 0:t.focusLoop,!0)}))}function fe(e,r,t){return re(e,r,t)}function xe(e={}){const[r,t]=O(me,e);return fe(r,t,e)}var he="div",ve=G(function(r){var t=r,{store:n,orientation:s,virtualFocus:f,focusLoop:a,rtl:d}=t,l=q(t,["store","orientation","virtualFocus","focusLoop","rtl"]);const w=z();n=n||w;const m=xe({store:n,orientation:s,virtualFocus:f,focusLoop:a,rtl:d}),b=m.useState(u=>u.orientation==="both"?void 0:u.orientation);return l=J(l,u=>o.jsx(U,{value:m,children:u}),[m]),l=g({role:"toolbar","aria-orientation":b},l),l=se(g({store:m},l)),l}),be=V(function(r){const t=ve(r);return H(he,t)});function pe(e={}){const r=W(e);return o.jsx(Z,{value:r,children:e.children})}const y=c.createContext(void 0),Fe=h((e,r)=>{const{"aria-level":t,selected:n,expanded:s,icon:f,unstable_decorations:a,label:d,description:l,actions:w,error:m,onSelectedChange:b,onExpandedChange:u,onClick:S,onKeyDown:K,...L}=e,M=i=>{n!==void 0&&(i.stopPropagation(),b==null||b(!n))},_=i=>{i.altKey||i.ctrlKey||i.metaKey||i.shiftKey||s!==void 0&&(i.key==="ArrowRight"||i.key==="ArrowLeft")&&(i.preventDefault(),u==null||u(i.key==="ArrowRight"))},k=c.useId(),D=c.useId(),C=c.useId(),x=m?o.jsx(Y,{tone:"critical"}):f,R=c.useMemo(()=>{const i=[];return l&&i.push(D),(a||x)&&i.push(C),i.length>0?i.join(" "):void 0},[a,x,C,l,D]);return o.jsx(y.Provider,{value:c.useMemo(()=>({level:t,expanded:s,selected:n,error:m}),[t,s,n,m]),children:o.jsx($,{render:o.jsx(j,{...L}),onClick:p(S,M),onKeyDown:p(K,_),role:"treeitem","aria-expanded":s,"aria-selected":n,"aria-labelledby":k,"aria-describedby":R,"aria-level":t,className:v("-tree-item",e.className),ref:r,children:o.jsxs(ie,{"data-kiwi-expanded":s,"data-kiwi-selected":n,"data-kiwi-error":m?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":t},role:void 0,children:[o.jsxs(I,{children:[o.jsx(Q,{align:l?"block":void 0,children:o.jsx(ye,{onClick:()=>{s!==void 0&&(u==null||u(!s))}})}),x||a?o.jsx(j,{className:"-tree-item-decoration",id:C,render:c.isValidElement(x)?x:typeof x=="string"?o.jsx(F,{href:x}):void 0,children:x?null:a}):null]}),o.jsx(T,{id:k,className:"-tree-item-content",children:d}),l?o.jsx(T,{id:D,className:"-tree-item-description",children:l}):void 0,o.jsx(I,{render:o.jsx(je,{children:w})})]})})})}),je=h((e,r)=>{const{children:t,...n}=e,s=c.Children.toArray(t).filter(Boolean),{error:f}=N(y),a=f?2:3;return o.jsxs(be,{...n,onClick:p(e.onClick,d=>d.stopPropagation()),onKeyDown:p(e.onKeyDown,d=>d.stopPropagation()),className:v("-tree-item-actions-container",e.className),focusLoop:!1,ref:r,children:[s.slice(0,a-1),s.length===a?s[a-1]:null,s.length>a?o.jsx(De,{children:s.slice(a-1)}):null]})}),we=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],A=c.createContext(!1);function De({children:e}){const[r,t]=c.useState(!1),n=c.useRef(!1);return o.jsx(pe,{placement:"right-start",children:o.jsxs(ce,{open:r,setOpen:c.useCallback(s=>{s&&!n.current?t(!0):t(!1)},[]),children:[o.jsx(ue,{onKeyDown:s=>{we.includes(s.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:o.jsx(Ce,{label:"More",icon:o.jsx(oe,{})})}),o.jsx(A.Provider,{value:!0,children:o.jsx(de,{children:e})})]})})}const Ce=h((e,r)=>{const{error:t}=N(y),{visible:n=t?!0:void 0,label:s,icon:f,dot:a,...d}=e;return c.useContext(A)?o.jsx(le,{...d,label:s,icon:f,unstable_dot:a,ref:r}):o.jsx(X,{label:s,icon:f,inert:n===!1?!0:void 0,...d,dot:a,variant:"ghost",className:v("-tree-item-action",e.className),"data-kiwi-visible":n,ref:r})}),ye=h((e,r)=>o.jsx(j.span,{"aria-hidden":"true",...e,onClick:p(e.onClick,t=>t.stopPropagation()),className:v("-button","-icon-button","-ghost-aligner","-tree-item-expander",e.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":ee(),ref:r,children:o.jsx(ke,{})})),ke=h((e,r)=>o.jsx(F,{...e,render:o.jsx(j.svg,{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",render:e.render,children:o.jsx("path",{d:"M4.146 6.146a.5.5 0 0 1 .708 0L8 9.293l3.146-3.147a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708Z"})}),className:v("-tree-chevron",e.className),ref:r})),Ne=h((e,r)=>{const t=ne({orientation:"vertical"});return o.jsx(j.div,{role:"tree",...e,render:o.jsx(ae,{store:t}),className:v("-tree",e.className),ref:r,children:e.children})});export{Ne as T,Fe as a,Ce as b};
