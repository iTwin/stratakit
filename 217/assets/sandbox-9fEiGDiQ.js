import{w as J}from"./LMDWO4NN-AdQVI40z.js";import{n as e,a as t}from"./chunk-D52XG6IA-BPj3SxYk.js";import{a as B}from"./index-Dh4JygWN.js";import{D as E,a as L,b as G,c}from"./DropdownMenu-B-wAhate.js";import{D as Q}from"./Divider-BMWncsDM.js";import{I as C}from"./Icon-DEgQPAjc.js";import{I}from"./IconButton-BcrikfyD.js";import{T as Y,a as Z,b as ee}from"./TextBox-Cl8N6h9y.js";import{V as A}from"./VisuallyHidden-oT9Xbpr4.js";import{T as te,a as ne,b as se,c as re}from"./Tree-Krm2_YXH.js";import{p as k}from"./placeholder-JYzNkcaY.js";import{p as ae,l as ie,h as oe,s as ce,a as T,d as le,f as de}from"./visibility-hide-x_gdpjwY.js";import{R as ue}from"./XL7CSKGW-DDU26wbd.js";import"./index-LDMScfjX.js";import"./~utils-DlLScLBX.js";import"./Button-Cn7siS-C.js";import"./KUU7WJ55-Jtc9VHwL.js";import"./LVA2YJMS-D9j0_TqI.js";import"./Kbd-DT0wV_hE.js";import"./P2CTZE2T-n7-0fjUr.js";import"./YV4JVR4I-7LgjLGcz.js";import"./BYC7LY2E-DvrZQKRn.js";import"./VGCJ63VH-DjYMlTD4.js";import"./XX67R432-Cv_HVTJr.js";import"./MTZPJQMC-BeFKSML9.js";import"./ITI7HKP4-CovurQgl.js";import"./P4IRICAX-T03WSK6e.js";import"./Tooltip-DfmhabBb.js";import"./Field-zFWJHpWk.js";import"./~hooks-KbN8yI3B.js";import"./Icon-BExUKRen.js";const he="_appLayout_1akge_5",pe="_platformBar_1akge_14",xe="_logo_1akge_19",me="_tools_1akge_29",fe="_leftPanel_1akge_39",je="_header_1akge_50",ve="_panelTitle_1akge_58",ge="_panelCaption_1akge_64",be="_shiftIconRight_1akge_68",_e="_subheader_1akge_72",Se="_subheaderTitle_1akge_82",ke="_searchInput_1akge_87",Ie="_subheaderActions_1akge_91",Re="_tree_1akge_95",Ce="_canvasWrapper_1akge_99",Pe="_canvas_1akge_99",ye="_splitter_1akge_121",Me="_action_1akge_152",ze="_actionIcon_1akge_160",we="_slider_1akge_169",o={appLayout:he,platformBar:pe,logo:xe,tools:me,leftPanel:fe,header:je,panelTitle:ve,panelCaption:ge,shiftIconRight:be,subheader:_e,subheaderTitle:Se,searchInput:ke,subheaderActions:Ie,tree:Re,canvasWrapper:Ce,canvas:Pe,splitter:ye,action:Me,actionIcon:ze,slider:we},H="Kiwi sandbox",ft=()=>[{title:H}],jt=J(function(){const{sliderProps:a,panelProps:s,panelMinSize:r,panelMaxSize:p,resizing:i}=Be({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs(e.Fragment,{children:[e.jsx(A,{render:x=>e.jsx("h1",{...x}),children:H}),e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":r,"--_panel-max-size":p},children:[e.jsxs("div",{className:o.platformBar,children:[e.jsx("div",{className:o.logo,children:e.jsx(C,{href:k,size:"large"})}),e.jsxs("div",{className:o.tools,children:[e.jsx(C,{href:k,size:"large"}),e.jsx(C,{href:k,size:"large"}),e.jsx(C,{href:k,size:"large"})]})]}),e.jsxs("div",{...s,className:o.leftPanel,style:{position:"relative",...s.style},children:[e.jsxs("div",{className:o.header,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(I,{className:o.shiftIconRight,icon:ae,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Le,{}),e.jsx(De,{}),e.jsx(Q,{presentational:!0,className:o.splitter,"data-resizing":i?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...a})})]}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})]})});function Ne(l,a,s){return Math.min(Math.max(l,a),s)}function Be(l){const{minSize:a,maxSize:s,onCollapse:r}=l??{},p=t.useId(),i=t.useRef(null),[x,f]=t.useState(void 0),[g,d]=t.useState(void 0),[u,j]=t.useState(void 0),[b,M]=t.useState(!1),[P,z]=t.useState(void 0),v=t.useMemo(()=>{if(a&&g)return Math.min(a.px,a.pct/100*g)},[a,g]),S=t.useMemo(()=>{if(v&&s&&g)return Math.max(v,s.pct/100*g)},[s,g,v]),R=t.useMemo(()=>{if(u==="smallest")return v??0;if(u==="largest")return S??0;if(x&&v&&S)return Ne(x,v,S)},[x,v,S,u]);t.useEffect(()=>{const h=i.current;if(!h)return;const m=h.parentElement;if(!m)return;const _=new ResizeObserver(()=>{const w=m.getBoundingClientRect(),N=h.getBoundingClientRect();d(w.width),f(N.width)});return _.observe(m),_.observe(h),()=>{_.disconnect()}},[]);const V=t.useCallback(h=>{const m=i.current;if(!m)return;const _=m.getBoundingClientRect();z(_.width+h),j(void 0),M(!0)},[]),W=t.useCallback(h=>{const m=i.current;if(!m)return;const _=m.parentElement;if(!_)return;const w=_.getBoundingClientRect(),N=h*(w.width*.005),q=m.getBoundingClientRect();z(q.width+N),j(void 0)},[]),$=t.useCallback(()=>{i.current&&(z(void 0),M(!1))},[]),{moveableProps:y}=Te({onMove:V,onMoveEnd:$,onKeyMove:W}),F=t.useMemo(()=>({...y,onKeyDown:h=>{var m;if((m=y.onKeyDown)==null||m.call(y,h),!h.defaultPrevented)switch(h.key){case"Enter":h.preventDefault(),r==null||r();break;case"Home":h.preventDefault(),j("smallest");break;case"End":h.preventDefault(),j("largest");break}},onChange:h=>{if(b)return;const m=Number(h.target.value);z(m)},value:R===void 0?0:Math.floor(R),min:v===void 0?void 0:Math.floor(v),max:S===void 0?void 0:Math.floor(S)}),[y,R,v,S,r,b]),U=t.useMemo(()=>({style:{WebkitUserSelect:P===void 0?void 0:"none"},id:p,ref:i}),[p,P]),K=v===void 0?void 0:`${v}px`,X=t.useMemo(()=>{if(P!==void 0&&s!==void 0&&u===void 0)return`min(${P}px, ${s.pct}%)`;if(R!==void 0)return`${R}px`},[s,P,R,u]);return{sliderProps:F,panelProps:U,panelMinSize:K,panelMaxSize:X,resizing:b}}function Te(l){const{onMove:a,onMoveEnd:s,onKeyMove:r}=l??{},p=t.useRef(null),i=t.useRef(void 0),x=t.useRef(void 0),f=t.useCallback(()=>{x.current!==void 0&&(x.current=void 0,s==null||s())},[s]);return{moveableProps:t.useMemo(()=>({onPointerDown:d=>{if(d.button!==0||d.ctrlKey)return;const u=p.current;if(!u)return;const j=u.getBoundingClientRect(),b=d.clientX-j.left;x.current=b,d.preventDefault(),u.setPointerCapture(d.pointerId)},onPointerMove:d=>{const u=x.current;if(u===void 0)return;const j=p.current;if(!j)return;const b=j.getBoundingClientRect(),M=d.clientX-u-b.left;d.preventDefault(),a==null||a(M)},onPointerUp:f,onPointerCancel:f,onKeyDown:d=>{if(!d.defaultPrevented)switch(d.key){case"ArrowLeft":d.preventDefault(),r==null||r(-1);break;case"ArrowRight":d.preventDefault(),r==null||r(1);break}},ref:d=>{var j;if(p.current=d,(j=i.current)==null||j.call(i),i.current=void 0,!d)return;const u=b=>{b.preventDefault()};d.addEventListener("touchstart",u),i.current=()=>{d.removeEventListener("touchstart",u)}}}),[r,a,f])}}const O=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function De(){const[l,a]=t.useState(),[s,r]=t.useState([]),p=t.useCallback(i=>{r(x=>x.includes(i)?x.filter(f=>f!==i):[...x,i])},[]);return e.jsx(O.Provider,{value:t.useMemo(()=>({selected:l,setSelected:a,hidden:s,toggleHidden:p}),[s,l,p]),children:e.jsxs(te,{className:o.tree,children:[e.jsx(n,{label:"Guides",children:e.jsxs(n,{label:"Tree",actions:!0,children:[e.jsx(n,{label:"Guide 4"}),e.jsx(n,{label:"Guide 3"}),e.jsx(n,{label:"Guide 2"}),e.jsx(n,{label:"Guide 1"})]})}),e.jsxs(n,{label:"Other",children:[e.jsx(n,{label:"Object 2",actions:!0,children:e.jsx(n,{label:"Path 3"})}),e.jsx(n,{label:"Object 1"})]}),e.jsxs(n,{label:"Road",children:[e.jsx(n,{label:"Parking lot access"}),e.jsx(n,{label:"Site access"})]}),e.jsx(n,{label:"Parking lot",actions:!0,children:e.jsxs(n,{label:"Parking area",actions:!0,children:[e.jsx(n,{label:"Bay point 2"}),e.jsx(n,{label:"Bay point 1",actions:!0}),e.jsx(n,{label:"Space point 1",actions:!0}),e.jsx(n,{label:"Path 6"})]})}),e.jsx(n,{label:"Building",children:e.jsx(n,{label:"Building area",children:e.jsx(n,{label:"Path 5"})})}),e.jsx(n,{label:"Sewer",children:e.jsx(n,{label:"Run off pipe",children:e.jsx(n,{label:"Path 4"})})}),e.jsx(n,{label:"Project boundary",children:e.jsx(n,{label:"Property area",children:e.jsx(n,{label:"Path 1"})})}),e.jsx(n,{label:"Map",children:e.jsx(n,{label:"Location",children:e.jsx(n,{label:"Terrain"})})})]})})}const D=t.createContext({selected:!1,hidden:!1});function n(l){const a=t.useContext(O),s=t.useContext(D),r=t.useId(),[p,i]=t.useState(!0),x=t.Children.count(l.children)>0,f=t.useMemo(()=>s.hidden?!0:a.hidden.includes(r),[r,a.hidden,s.hidden]),g=s.selected||r===a.selected,d=t.useCallback(()=>{a.setSelected(u=>{if(u!==r)return r})},[r,a]);return e.jsx(D.Provider,{value:t.useMemo(()=>({selected:g,hidden:f}),[f,g]),children:e.jsx(ne,{content:e.jsxs(e.Fragment,{children:[e.jsx(se,{onClick:()=>{i(u=>!u)}}),e.jsx(C,{href:k,style:{display:"inline"}}),e.jsx(re,{onClick:()=>{d()},children:l.label}),e.jsxs("div",{style:{display:"flex",gap:4,marginInlineStart:"auto"},children:[e.jsx(I,{className:o.action,icon:ie,label:"Lock",variant:"ghost","aria-hidden":!l.actions||f}),s.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(C,{href:k})}):e.jsx(I,{className:o.action,icon:f?oe:ce,label:f?"Show":"Hide",variant:"ghost","aria-hidden":!l.actions,onClick:()=>{a.toggleHidden(r)}}),e.jsx(Ee,{hidden:!l.actions||f})]})]}),expanded:x?p:void 0,selected:g,children:p?l.children:void 0})})}function Ee({hidden:l}){return e.jsxs(E,{children:[e.jsx(L,{className:o.action,"aria-hidden":l,render:e.jsx(I,{icon:k,label:"More",variant:"ghost"})}),e.jsxs(G,{style:{minInlineSize:164},children:[e.jsx(c,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(c,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(c,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(c,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(c,{shortcuts:"]",children:"Bring to front"}),e.jsx(c,{shortcuts:"[",children:"Send to back"}),e.jsx(c,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(c,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(c,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(c,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(c,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(c,{shortcuts:"I",children:"Isolate object"})]})]})}function Le(){const[l,a]=t.useState(!1),s=t.useRef(null),r=t.useRef(null),p=l?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{}),e.jsx(I,{className:o.shiftIconRight,icon:le,label:"Close",variant:"ghost",onClick:()=>{var i;B.flushSync(()=>a(!1)),(i=r.current)==null||i.focus()}})]}):e.jsx(I,{className:o.shiftIconRight,icon:T,label:"Search",variant:"ghost",onClick:()=>{var i;B.flushSync(()=>a(!0)),(i=s.current)==null||i.focus()}});return e.jsxs("div",{className:o.subheader,children:[e.jsx(ue.h3,{className:o.subheaderTitle,tabIndex:-1,ref:r,render:l?e.jsx(A,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),l?e.jsxs(Y,{className:o.searchInput,children:[e.jsx(Z,{href:T}),e.jsx(ee,{placeholder:"Search",ref:s})]}):null,e.jsx("div",{className:o.subheaderActions,children:p})]})}function Ge(){return e.jsxs(E,{children:[e.jsx(L,{render:e.jsx(I,{icon:de,label:"Filter",variant:"ghost"})}),e.jsxs(G,{style:{minInlineSize:164},children:[e.jsx(c,{children:"Show all"}),e.jsx(c,{children:"Guides"}),e.jsx(c,{children:"Other"}),e.jsx(c,{children:"Roadway"}),e.jsx(c,{children:"Parking"}),e.jsx(c,{children:"Building"}),e.jsx(c,{children:"Dry utility"}),e.jsx(c,{children:"Stormwater"}),e.jsx(c,{children:"Sewer"}),e.jsx(c,{children:"Boundary"}),e.jsx(c,{children:"Map"})]})]})}export{jt as default,ft as meta};
