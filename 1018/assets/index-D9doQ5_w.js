import{w as B,a as w,p as t}from"./chunk-OIYGIGL5-B7Xv9q1c.js";import{c as R}from"./VOQWLFSQ-DGNCsGQV.js";import{I as $}from"./sun-C-G25EcR.js";import{b as N,T as U,a as g,p as E}from"./immer-D2yf7hXT.js";import{d as M}from"./~utils-BiOJdJI9.js";import{u as P,r as F}from"./refresh-QmPhSYgB.js";import{p as k}from"./placeholder-BRxE5t00.js";import{s as _}from"./visibility-show-DdBTiDUC.js";import"./SBSPVDDI-Dl03cl1k.js";import"./Y62RTBST-h_4brOBQ.js";import"./AMMIPFT4-BFmWNA5l.js";import"./QHZCZ35Y-CxXfqE-B.js";import"./OLVWQA7U-DVYl-Apq.js";import"./~utils.icons-CQDM_EhD.js";import"./~utils.icons-Xz3oGO_9.js";import"./DropdownMenu-BSAFeGwF.js";import"./ZTXFEM5L-EgbOsMcV.js";import"./NMGNQVTG-BGpi1gt5.js";import"./KPUWHTQJ-KIJyS0KL.js";import"./Kbd-Bbginje2.js";import"./~utils.icons-BUeL4ofk.js";import"./index-E01d82tk.js";import"./DXGKYUAD-CDZsQKEC.js";const fe={title:"Tree"},ue=B(M(function({overflow:e=!1,selected:i=!1,description:r,error:l,items:A,visible:p}){const[a,S]=w.useTransition(),f=e?" with a super long label that is overflown":"",u=p?!!p:void 0,m=r?"Additional description":void 0,[x,T]=w.useState(!!l),b=A?Number(A):0,[I,h]=w.useState(()=>[{label:`Item 1${f}`,selected:!!i,expanded:!0,children:[{label:"Item 1.1",selected:!!i},{label:"Item 1.2",selected:!!i},{label:`Item 1.3${f}`,selected:!!i}]},{label:"Item 2",selected:!1,expanded:!0,children:[{label:`Item 2.1${f}`,selected:!1}]},{label:"Item 3",selected:!1},...Array.from({length:b}).map((o,n)=>({label:`Item ${n+4}`,selected:!1}))]),y=w.useMemo(()=>I.flatMap((o,n,s)=>{const v={...o,level:1,index:n,setSize:s.length,childIndex:void 0};if(!o.expanded)return v;const z=o.children?o.children.map((j,c,D)=>({...j,level:2,index:n,childIndex:c,setSize:D.length,expanded:void 0})):[];return[v,...z]}),[I]),C=w.useCallback(()=>{T(!1)},[]);return t.jsx(N,{style:{maxInlineSize:e?300:void 0},children:y.map(o=>{const{index:n,childIndex:s}=o,v=x&&n===0&&s===void 0,z=n===0&&s===void 0||s===0;return t.jsx(U,{"aria-level":o.level,"aria-posinset":s!==void 0?s+1:n+1,"aria-setsize":o.setSize,label:o.label,description:z?m:void 0,expanded:o.expanded,selected:o.selected,error:v,onSelectedChange:()=>{h(E(j=>{const c=s===void 0?j[n]:j[n].children?.[s];c&&(c.selected=!c.selected)}))},onExpandedChange:()=>{S(()=>{h(E(j=>{const c=j[n];c.expanded!==void 0&&(c.expanded=!c.expanded)}))})},icon:s===void 0?t.jsx($,{href:k,alt:"decoration"}):void 0,unstable_decorations:s===0?t.jsxs(t.Fragment,{children:[t.jsx($,{href:k}),t.jsx($,{href:k})]}):t.jsx($,{href:k}),inlineActions:v?[t.jsx(g,{icon:F,label:"Retry",onClick:C},"retry")]:[t.jsx(g,{icon:P,label:"Unlock",visible:u},"unlock"),t.jsx(g,{icon:_,label:"Show",visible:u},"show")],actions:v?[t.jsx(g,{icon:P,label:"Unlock"},"unlock"),t.jsx(g,{icon:_,label:"Show"},"show")]:void 0},o.label)})})},{actions:G}));function q(d){const e=R.c(5);let i,r;if(e[0]!==d?({hidden:i,...r}=d,e[0]=d,e[1]=i,e[2]=r):(i=e[1],r=e[2]),i)return null;let l;return e[3]!==r?(l=t.jsx(g,{icon:k,...r}),e[3]=r,e[4]=l):l=e[4],l}function G(d){const e=R.c(15),{inline:i,menu:r,dot:l,error:A,hiddenIds:p}=d,a=i?Number(i):2,S=r?Number(r):3,f=A?!!A:void 0;let u;if(e[0]!==l||e[1]!==p||e[2]!==a||e[3]!==S){const y=p?p.split(";").map(H):[];u=Array.from({length:a+S},(C,o)=>{const n=o+1;return t.jsx(q,{label:`Action ${n}`,dot:l?"Something's going on":void 0,hidden:y.includes(n)},n)}),e[0]=l,e[1]=p,e[2]=a,e[3]=S,e[4]=u}else u=e[4];const m=u;let x;e[5]!==m||e[6]!==a?(x=m.slice(0,a),e[5]=m,e[6]=a,e[7]=x):x=e[7];const T=x;let b;e[8]!==m||e[9]!==a?(b=m.slice(a),e[8]=m,e[9]=a,e[10]=b):b=e[10];const I=b;let h;return e[11]!==I||e[12]!==f||e[13]!==T?(h=t.jsx(N,{children:t.jsx(U,{label:"Item 1","aria-level":1,"aria-posinset":1,"aria-setsize":1,inlineActions:T,actions:I,error:f})}),e[11]=I,e[12]=f,e[13]=T,e[14]=h):h=e[14],h}function H(d){return Number(d)}export{ue as default,fe as handle};
