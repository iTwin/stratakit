import{l as f,r as P}from"./chunk-7R3XDUXW-DxTo8O6G.js";import{c as z}from"./index-6yh6O1FZ.js";import{u as W}from"./~hooks-0F5RvH8b.js";import{s as k}from"./~utils-YFcEjjdk.js";import{c as q,u as G,H as J,a as K,b as L,d as Q,e as U}from"./BYC7LY2E-BkUN-JnQ.js";import{c as A,u as X,b as j,a as R,d as Y}from"./YV4JVR4I-IQnN8q1u.js";import{x as V,y as b,z as g,v as Z,c as F,_ as I,i as N,t as ee,b as y,a as B,D as H,k as te,f as M,d as $,M as oe,j as E}from"./LMDWO4NN-DZi_YyQu.js";function re(t={}){var r;const o=(r=t.store)==null?void 0:r.getState(),e=q(V(g({},t),{placement:b(t.placement,o==null?void 0:o.placement,"top"),hideTimeout:b(t.hideTimeout,o==null?void 0:o.hideTimeout,0)})),p=V(g({},e.getState()),{type:b(t.type,o==null?void 0:o.type,"description"),skipTimeout:b(t.skipTimeout,o==null?void 0:o.skipTimeout,300)}),s=A(p,e,t.store);return g(g({},e),s)}function ne(t,r,o){return j(t,o,"type"),j(t,o,"skipTimeout"),G(t,r,o)}function D(t={}){const[r,o]=X(re,t);return ne(r,o,t)}var _=Z([K],[J]),C=_.useProviderContext,se=_.ContextProvider,ae=_.ScopedContextProvider,ie="div",ue=F(function(r){var o=r,{store:e,portal:p=!0,gutter:s=8,preserveTabOrder:v=!1,hideOnHoverOutside:c=!0,hideOnInteractOutside:S=!0}=o,i=I(o,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const h=C();e=e||h,N(e,!1),i=ee(i,a=>f.jsx(ae,{value:e,children:a}),[e]);const x=e.useState(a=>a.type==="description"?"tooltip":"none");return i=y({role:x},i),i=L(B(y({},i),{store:e,portal:p,gutter:s,preserveTabOrder:v,hideOnHoverOutside(a){if(H(c,a))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!("focusVisible"in l.dataset):!0},hideOnInteractOutside:a=>{if(H(S,a))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!te(l,a.target):!0}})),i}),le=Q(M(function(r){const o=ue(r);return $(ie,o)}),C);function ce(t={}){const r=D(t);return f.jsx(se,{value:r,children:t.children})}var de="div",m=A({activeStore:null});function w(t){return()=>{const{activeStore:r}=m.getState();r===t&&m.setState("activeStore",null)}}var pe=F(function(r){var o=r,{store:e,showOnHover:p=!0}=o,s=I(o,["store","showOnHover"]);const v=C();e=e||v,N(e,!1);const c=P.useRef(!1);P.useEffect(()=>R(e,["mounted"],n=>{n.mounted||(c.current=!1)}),[e]),P.useEffect(()=>{if(e)return oe(w(e),R(e,["mounted","skipTimeout"],n=>{if(!e)return;if(n.mounted){const{activeStore:T}=m.getState();return T!==e&&(T==null||T.hide()),m.setState("activeStore",e)}const u=setTimeout(w(e),n.skipTimeout);return()=>clearTimeout(u)}))},[e]);const S=s.onMouseEnter,i=E(n=>{S==null||S(n),c.current=!0}),h=s.onFocusVisible,x=E(n=>{h==null||h(n),!n.defaultPrevented&&(e==null||e.setAnchorElement(n.currentTarget),e==null||e.show())}),a=s.onBlur,l=E(n=>{if(a==null||a(n),n.defaultPrevented)return;const{activeStore:u}=m.getState();c.current=!1,u===e&&m.setState("activeStore",null)}),O=e.useState("type"),d=e.useState(n=>{var u;return(u=n.contentElement)==null?void 0:u.id});return s=B(y({"aria-labelledby":O==="label"?d:void 0},s),{onMouseEnter:i,onFocusVisible:x,onBlur:l}),s=U(y({store:e,showOnHover(n){if(!c.current||H(p,n))return!1;const{activeStore:u}=m.getState();return u?(e==null||e.show(),!1):!0}},s)),s}),ve=M(function(r){const o=pe(r);return $(de,o)});const fe=P.forwardRef((t,r)=>{const{content:o,children:e,className:p,type:s="description",id:v=P.useId(),defaultOpen:c,open:S,setOpen:i,unmountOnHide:h=s==="none",...x}=t,[a,l]=W(c,S,i),O=D(),d=Y(O,u=>u.popoverElement);P.useEffect(function(){var T;(T=d==null?void 0:d.togglePopover)==null||T.call(d,a)},[a,d]);const n=s==="description"?{"aria-describedby":v}:s==="label"?{"aria-labelledby":v}:{};return f.jsx(f.Fragment,{children:f.jsxs(ce,{store:O,open:a,setOpen:l,children:[f.jsx(ve,{render:e,...n}),f.jsx(le,{...x,unmountOnHide:h,className:z("ü•ù-tooltip",p),ref:r,id:v,style:{zIndex:k?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!k,children:o})]})})});fe.displayName="Tooltip";export{fe as T};
