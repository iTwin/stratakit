import{a as d}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{$ as rt,a5 as x,_ as nt,ap as _,y as ut,z as st,A as it,Y as L,E as ot,G as F,aq as at,a6 as ft,a8 as g,ae as q,X as ct,D as lt,I as dt,J as bt,a9 as vt}from"./~utils-BjBNFxuB.js";var m="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], summary, iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function yt(t){return Number.parseInt(t.getAttribute("tabindex")||"0",10)<0}function E(t){return!(!t.matches(m)||!rt(t)||t.closest("[inert]"))}function p(t){if(!E(t)||yt(t))return!1;if(!("form"in t)||!t.form||t.checked||t.type!=="radio")return!0;const e=t.form.elements.namedItem(t.name);if(!e||!("length"in e))return!0;const r=x(t);return!r||r===t||!("form"in r)||r.form!==t.form||r.name!==t.name}function h(t,e){const r=Array.from(t.querySelectorAll(m));e&&r.unshift(t);const u=r.filter(E);return u.forEach((i,s)=>{var f;if(!_(i))return;const a=(f=i.contentDocument)==null?void 0:f.body;a&&u.splice(s,1,...h(a))}),u}function I(t,e,r){const u=Array.from(t.querySelectorAll(m)),i=u.filter(p);return e&&p(t)&&i.unshift(t),i.forEach((s,f)=>{var a;if(!_(s))return;const l=(a=s.contentDocument)==null?void 0:a.body;if(!l)return;const b=I(l,!1,r);i.splice(f,1,...b)}),!i.length&&r?u:i}function Lt(t,e,r){const[u]=I(t,e,r);return u||null}function Ft(t,e,r,u){const i=x(t),s=h(t,e),f=s.indexOf(i),a=s.slice(f+1);return a.find(p)||(r?s.find(p):null)||(u?a[0]:null)||null}function qt(t,e){return Ft(document.body,!1,t,e)}function Et(t,e,r,u){const i=x(t),s=h(t,e).reverse(),f=s.indexOf(i);return s.slice(f+1).find(p)||null||null||null}function Bt(t,e){return Et(document.body,!1)}function pt(t){for(;t&&!E(t);)t=t.closest(m);return t||null}function B(t){const e=x(t);if(!e)return!1;if(e===t)return!0;const r=e.getAttribute("aria-activedescendant");return r?r===t.id:!1}function xt(t){const e=x(t);if(!e)return!1;if(nt(t,e))return!0;const r=e.getAttribute("aria-activedescendant");return!r||!("id"in t)?!1:r===t.id?!0:!!t.querySelector(`#${CSS.escape(r)}`)}function mt(t){!xt(t)&&E(t)&&t.focus()}function At(t){var e;const r=(e=t.getAttribute("tabindex"))!=null?e:"";t.setAttribute("data-tabindex",r),t.setAttribute("tabindex","-1")}function Ot(t,e){const r=I(t,e);for(const u of r)At(u)}function Gt(t){const e=t.querySelectorAll("[data-tabindex]"),r=u=>{const i=u.getAttribute("data-tabindex");u.removeAttribute("data-tabindex"),i?u.setAttribute("tabindex",i):u.removeAttribute("tabindex")};t.hasAttribute("data-tabindex")&&r(t);for(const u of e)r(u)}function Rt(t,e){"scrollIntoView"in t?(t.focus({preventScroll:!0}),t.scrollIntoView({block:"nearest",inline:"nearest",...e})):t.focus()}var gt=d.createContext(!0),Tt="div",O=vt(),ht=["text","search","url","tel","email","password","number","date","month","week","time","datetime","datetime-local"],U=Symbol("safariFocusAncestor");function Nt(t){return t?!!t[U]:!1}function G(t,e){t&&(t[U]=e)}function It(t){const{tagName:e,readOnly:r,type:u}=t;return e==="TEXTAREA"&&!r||e==="SELECT"&&!r?!0:e==="INPUT"&&!r?ht.includes(u):!!(t.isContentEditable||t.getAttribute("role")==="combobox"&&t.dataset.name)}function wt(t){return"labels"in t?t.labels:null}function R(t){return t.tagName.toLowerCase()==="input"&&t.type?t.type==="radio"||t.type==="checkbox":!1}function Ct(t){return t?t==="button"||t==="summary"||t==="input"||t==="select"||t==="textarea"||t==="a":!0}function Dt(t){return t?t==="button"||t==="input"||t==="select"||t==="textarea":!0}function Pt(t,e,r,u,i){return t?e?r&&!u?-1:void 0:r?i:i||0:i}function T(t,e){return F(r=>{t?.(r),!r.defaultPrevented&&e&&(r.stopPropagation(),r.preventDefault())})}var N=!1,w=!0;function St(t){const e=t.target;e&&"hasAttribute"in e&&(e.hasAttribute("data-focus-visible")||(w=!1))}function kt(t){t.metaKey||t.ctrlKey||t.altKey||(w=!0)}var Kt=it(function({focusable:e=!0,accessibleWhenDisabled:r,autoFocus:u,onFocusVisible:i,...s}){const f=d.useRef(null);d.useEffect(()=>{e&&(N||(L("mousedown",St,!0),L("keydown",kt,!0),N=!0))},[e]),O&&d.useEffect(()=>{if(!e)return;const n=f.current;if(!n||!R(n))return;const o=wt(n);if(!o)return;const c=()=>queueMicrotask(()=>n.focus());for(const y of o)y.addEventListener("mouseup",c);return()=>{for(const y of o)y.removeEventListener("mouseup",c)}},[e]);const a=e&&ot(s),l=!!a&&!r,[b,v]=d.useState(!1);d.useEffect(()=>{e&&l&&b&&v(!1)},[e,l,b]),d.useEffect(()=>{if(!e||!b)return;const n=f.current;if(!n||typeof IntersectionObserver>"u")return;const o=new IntersectionObserver(()=>{E(n)||v(!1)});return o.observe(n),()=>o.disconnect()},[e,b]);const j=T(s.onKeyPressCapture,a),X=T(s.onMouseDownCapture,a),$=T(s.onClickCapture,a),C=s.onMouseDown,z=F(n=>{if(C?.(n),n.defaultPrevented||!e)return;const o=n.currentTarget;if(!O||at(n)||!ft(o)&&!R(o))return;let c=!1;const y=()=>{c=!0},et={capture:!0,once:!0};o.addEventListener("focusin",y,et);const M=pt(o.parentElement);G(M,!0),g(o,"mouseup",()=>{o.removeEventListener("focusin",y,!0),G(M,!1),!c&&mt(o)})}),D=(n,o)=>{if(o&&(n.currentTarget=o),!e)return;const c=n.currentTarget;c&&B(c)&&(i?.(n),!n.defaultPrevented&&(c.dataset.focusVisible="true",v(!0)))},P=s.onKeyDownCapture,H=F(n=>{if(P?.(n),n.defaultPrevented||!e||b||n.metaKey||n.altKey||n.ctrlKey||!q(n))return;const o=n.currentTarget;g(o,"focusout",()=>D(n,o))}),S=s.onFocusCapture,J=F(n=>{if(S?.(n),n.defaultPrevented||!e)return;if(!q(n)){v(!1);return}const o=n.currentTarget,c=()=>D(n,o);w||It(n.target)?g(n.target,"focusout",c):v(!1)}),k=s.onBlur,W=F(n=>{k?.(n),e&&ct(n)&&(n.currentTarget.removeAttribute("data-focus-visible"),v(!1))}),Y=d.useContext(gt),Q=F(n=>{e&&u&&n&&Y&&queueMicrotask(()=>{B(n)||E(n)&&n.focus()})}),K=lt(f),Z=e&&Ct(K),V=e&&Dt(K),A=s.style,tt=d.useMemo(()=>l?{pointerEvents:"none",...A}:A,[l,A]);return s={"data-focus-visible":e&&b||void 0,"data-autofocus":u||void 0,"aria-disabled":a||void 0,...s,ref:dt(f,Q,s.ref),style:tt,tabIndex:Pt(e,l,Z,V,s.tabIndex),disabled:V&&l?!0:void 0,contentEditable:a?void 0:s.contentEditable,onKeyPressCapture:j,onClickCapture:$,onMouseDownCapture:X,onMouseDown:z,onKeyDownCapture:H,onFocusCapture:J,onBlur:W},bt(s)}),_t=ut(function(e){const r=Kt(e);return st(Tt,r)});export{gt as F,Bt as a,I as b,Lt as c,Ot as d,E as e,mt as f,qt as g,xt as h,Nt as i,_t as j,B as k,Rt as l,Gt as r,Kt as u};
