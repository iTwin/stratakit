import{w as re}from"./~utils-c1sb-itL.js";import{t as le,a as t,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as w}from"./index-Dr3kRIaJ.js";import{B as ae}from"./Button-BzkgLK5W.js";import{D as G,a as O,b as H,c as g,d as ie}from"./DropdownMenu-DAx5Yusb.js";import{I as y}from"./Icon-DIv-lnpo.js";import{I}from"./IconButton-QW70C_Vj.js";import{S as oe,H as ce}from"./Select-J8AbyuQh.js";import{T as E,a as de,b as K,c as ue}from"./Tabs-B__lkroO.js";import{T as W}from"./Text-PZ3OIcxk.js";import{T as pe,a as fe,b as he}from"./TextBox-Ek8-Brnc.js";import{V as N}from"./VisuallyHidden-CD7hmrhM.js";import{T as me,a as xe}from"./Tree-CE-Ejxja.js";import{p as R}from"./placeholder-BZbhP9Qz.js";import{p as je,l as be,d as Ce,h as ge,m as ke,a as Se,s as L,f as _e}from"./state-inherited-dot-C3qYly_3.js";import{s as Ie}from"./visibility-show-xDtdrfyN.js";import"./index-jyeBNHV5.js";import"./KUU7WJ55-CKUtQJlz.js";import"./LVA2YJMS-TgXrMinU.js";import"./XL7CSKGW-CagW3_U_.js";import"./Kbd-DgjfOkAJ.js";import"./P2CTZE2T-4fKeMvch.js";import"./BYC7LY2E-aAFRn7dW.js";import"./VGCJ63VH-DY27gHII.js";import"./MTZPJQMC-BJzcLjZf.js";import"./VEVQD5MH-Ciqu3842.js";import"./ITI7HKP4-BwMDVXZA.js";import"./P4IRICAX-ChzmpBPM.js";import"./ASMQKSDT-Dn4maEMc.js";import"./Tooltip-CRQJrisl.js";import"./Field-Bl6F_MZ3.js";import"./~hooks-Wdjhtx2E.js";import"./ListItem-DjOyGU8K.js";const Pe="_appLayout_fkpkj_5",ve="_header_fkpkj_22",Ae="_platformBar_fkpkj_32",ye="_logo_fkpkj_38",Me="_tools_fkpkj_48",Re="_leftPanel_fkpkj_58",Ne="_panelHeader_fkpkj_70",Te="_panelTitleWrapper_fkpkj_78",Be="_panelCaption_fkpkj_82",De="_shiftIconRight_fkpkj_86",ze="_subheader_fkpkj_90",we="_subheaderTitle_fkpkj_101",Ee="_searchInput_fkpkj_106",Ke="_subheaderActions_fkpkj_110",Le="_tabList_fkpkj_114",Xe="_emptyState_fkpkj_119",Fe="_canvasWrapper_fkpkj_128",Ge="_canvas_fkpkj_128",Oe="_splitter_fkpkj_165",He="_tabPanel_fkpkj_211",We="_tree_fkpkj_217",Ve="_action_fkpkj_221",$e="_actionIcon_fkpkj_227",Ue="_slider_fkpkj_238",o={appLayout:Pe,header:ve,platformBar:Ae,logo:ye,tools:Me,leftPanel:Re,panelHeader:Ne,panelTitleWrapper:Te,panelCaption:Be,shiftIconRight:De,subheader:ze,subheaderTitle:we,searchInput:Ee,subheaderActions:Ke,tabList:Le,emptyState:Xe,canvasWrapper:Fe,canvas:Ge,splitter:Oe,tabPanel:He,tree:We,action:Ve,actionIcon:$e,slider:Ue},V="Kiwi sandbox",Gt=()=>[{title:V}],Ot=re(function(){const[n,s]=le(),l=n.get("tree")==="empty"?"epoch-2":"epoch-1",h=t.useCallback(i=>{s(u=>(i==="epoch-2"?u.set("tree","empty"):u.delete("tree"),u))},[s]),d=t.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),p=t.useId();return e.jsxs(qe,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:o.panelHeader,children:[e.jsxs("div",{children:[e.jsx(N,{render:i=>e.jsx("label",{...i,htmlFor:p}),children:"Choose Model"}),e.jsx(oe,{className:o.panelTitleWrapper,children:e.jsx(ce,{id:p,variant:"ghost",defaultValue:l,onChange:i=>h(i.target.value),children:Object.entries(d).map(([i,u])=>e.jsx("option",{value:i,children:u},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(N,{render:i=>e.jsx("h2",{...i}),children:d[l]}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:o.actions,children:e.jsx(I,{className:o.shiftIconRight,icon:je,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(it,{children:e.jsxs(ot,{children:[e.jsx(lt,{}),e.jsx(E,{tabId:"simple",className:o.tabPanel,focusable:!1,children:e.jsx(X,{tree:l==="epoch-2"?"empty":"simple"})}),e.jsx(E,{tabId:"complex",className:o.tabPanel,focusable:!1,children:e.jsx(X,{tree:l==="epoch-2"?"empty":"complex"})})]})})]}),children:[e.jsxs("header",{className:o.header,children:[e.jsx("div",{className:o.logo,children:e.jsx(y,{href:R,size:"large"})}),e.jsx(W,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:V})]}),e.jsx("div",{className:o.platformBar,children:e.jsxs("div",{className:o.tools,children:[e.jsx(y,{href:R,size:"large"}),e.jsx(y,{href:R,size:"large"}),e.jsx(y,{href:R,size:"large"})]})}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})});function qe(r){const{sliderProps:n,panelProps:s,panelMinSize:l,panelMaxSize:h,resizing:d}=Ye({minSize:{px:256,pct:20},maxSize:{pct:30}}),p=t.useId();return e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":h},children:[e.jsx("div",{...s,className:o.leftPanel,style:{position:"relative",...s.style},children:r.panelContent}),e.jsxs("div",{className:o.splitter,"data-resizing":d?"true":void 0,children:[e.jsx(N,{render:i=>e.jsx("label",{...i,htmlFor:p,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:p,type:"range",className:o.slider,...n})]}),r.children]})}function Je({children:r}){return e.jsx("div",{className:o.emptyState,children:r})}function Qe(r,n,s){return Math.min(Math.max(r,n),s)}function Ye(r){const{minSize:n,maxSize:s,onCollapse:l}=r,h=t.useId(),d=t.useRef(null),[p,i]=t.useState(void 0),[u,c]=t.useState(void 0),[f,x]=t.useState(void 0),[b,P]=t.useState(!1),[k,v]=t.useState(void 0),C=t.useMemo(()=>{if(n&&u)return Math.min(n.px,n.pct/100*u)},[n,u]),_=t.useMemo(()=>{if(C&&s&&u)return Math.max(C,s.pct/100*u)},[s,u,C]),A=t.useMemo(()=>{if(f==="smallest")return C??0;if(f==="largest")return _??0;if(p&&C&&_)return Qe(p,C,_)},[p,C,_,f]);t.useEffect(()=>{const m=d.current;if(!m)return;const j=m.parentElement;if(!j)return;const S=new ResizeObserver(()=>{const B=j.getBoundingClientRect(),D=m.getBoundingClientRect();c(B.width),i(D.width)});return S.observe(j),S.observe(m),()=>{S.disconnect()}},[]);const J=t.useCallback(m=>{const j=d.current;if(!j)return;const S=j.getBoundingClientRect();v(S.width+m),x(void 0),P(!0)},[]),Q=t.useCallback(m=>{const j=d.current;if(!j)return;const S=j.parentElement;if(!S)return;const B=S.getBoundingClientRect(),D=m*(B.width*.005),se=j.getBoundingClientRect();v(se.width+D),x(void 0)},[]),Y=t.useCallback(()=>{d.current&&(v(void 0),P(!1))},[]),{moveableProps:M}=Ze({onMove:J,onMoveEnd:Y,onKeyMove:Q}),Z=t.useMemo(()=>({...M,onKeyDown:m=>{var j;if((j=M.onKeyDown)==null||j.call(M,m),!m.defaultPrevented)switch(m.key){case"Enter":m.preventDefault(),l==null||l();break;case"Home":m.preventDefault(),x("smallest");break;case"End":m.preventDefault(),x("largest");break}},onChange:m=>{if(b)return;const j=Number(m.target.value);v(j)},value:A===void 0?0:Math.floor(A),min:C===void 0?void 0:Math.floor(C),max:_===void 0?void 0:Math.floor(_)}),[M,A,C,_,l,b]),ee=t.useMemo(()=>({style:{WebkitUserSelect:k===void 0?void 0:"none"},id:h,ref:d}),[h,k]),te=C===void 0?void 0:`${Math.floor(C)}px`,ne=t.useMemo(()=>{if(k!==void 0&&s!==void 0&&f===void 0)return`min(${Math.floor(k)}px, ${s.pct}%)`;if(A!==void 0)return`${Math.floor(A)}px`},[s,k,A,f]);return{sliderProps:Z,panelProps:ee,panelMinSize:te,panelMaxSize:ne,resizing:b}}function Ze(r){const{onMove:n,onMoveEnd:s,onKeyMove:l}=r,h=t.useRef(null),d=t.useRef(void 0),p=t.useRef(void 0),i=t.useCallback(()=>{p.current!==void 0&&(p.current=void 0,s==null||s())},[s]);return{moveableProps:t.useMemo(()=>({onPointerDown:c=>{if(c.button!==0||c.ctrlKey)return;const f=h.current;if(!f)return;const x=f.getBoundingClientRect(),b=c.clientX-x.left;p.current=b,c.preventDefault(),f.setPointerCapture(c.pointerId)},onPointerMove:c=>{const f=p.current;if(f===void 0)return;const x=h.current;if(!x)return;const b=x.getBoundingClientRect(),P=c.clientX-f-b.left;c.preventDefault(),n==null||n(P)},onPointerUp:i,onPointerCancel:i,onKeyDown:c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowLeft":c.preventDefault(),l==null||l(-1);break;case"ArrowRight":c.preventDefault(),l==null||l(1);break}},ref:c=>{var x;if(h.current=c,(x=d.current)==null||x.call(d),d.current=void 0,!c)return;const f=b=>{b.preventDefault()};c.addEventListener("touchstart",f),d.current=()=>{c.removeEventListener("touchstart",f)}}}),[l,n,i])}}const $=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function X({tree:r}){const[n,s]=t.useState(),[l,h]=t.useState([]),d=t.useCallback(i=>{h(u=>u.includes(i)?u.filter(c=>c!==i):[...u,i])},[]),p=t.useMemo(()=>({selected:n,setSelected:s,hidden:l,toggleHidden:d}),[l,n,d]);return r==="empty"?e.jsxs(Je,{children:[e.jsx(W,{children:"No layers"}),e.jsx(ae,{children:"Create a layer"})]}):e.jsx($.Provider,{value:p,children:e.jsx(me,{className:o.tree,children:e.jsx(et,{tree:r})})})}const z={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function et({tree:r}){return r==="complex"?e.jsx(st,{}):r==="simple"?e.jsx(nt,{}):null}function U({item:r}){var n;return e.jsx(a,{label:r.label,children:(n=r.items)==null?void 0:n.map(s=>e.jsx(U,{item:s},s.label))})}function tt({tree:r,activeFilters:n}){var s;return(s=r.items)==null?void 0:s.map(l=>n.length>0&&(!l.type||!n.includes(l.type))?null:e.jsx(U,{item:l},l.label))}function nt(){const r=t.useContext(T);return e.jsx(tt,{tree:z,activeFilters:r.filters})}function st(){return e.jsxs(e.Fragment,{children:[e.jsxs(a,{label:"ITC_Master",children:[e.jsx(a,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(a,{label:"002_Substation_A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(a,{label:"007-aa_master.dgn",children:[e.jsx(a,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(a,{label:"A-CLNG-LITE-A"})}),e.jsx(a,{label:"A-CLNG-TILE",children:e.jsxs(a,{label:"A-DOOR-2D-PLAN",children:[e.jsx(a,{label:"P00003 [2-KA62]",children:e.jsx(a,{label:"Cell [2-KA63]",children:e.jsxs(a,{label:"Cell [2-KA64]",children:[e.jsx(a,{label:"Complex Chain [2-KA6A]"}),e.jsx(a,{label:"Complex Chain [2-KA6B]"}),e.jsx(a,{label:"Complex Chain [2-KA6C]"}),e.jsx(a,{label:"Complex Chain [2-KA6D]"}),e.jsx(a,{label:"Complex Chain [2-KA6E]"}),e.jsx(a,{label:"Complex Chain [2-KA6F]"}),e.jsx(a,{label:"Complex Chain [2-KA6G]"}),e.jsx(a,{label:"Complex Chain [2-KA6H]"}),e.jsx(a,{label:"Complex Chain [2-KA61]"}),e.jsx(a,{label:"Complex Chain [2-KA65]"}),e.jsx(a,{label:"Complex Chain [2-KA66]"}),e.jsx(a,{label:"Complex Chain [2-KA67]"}),e.jsx(a,{label:"Complex Chain [2-KA68]"}),e.jsx(a,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(a,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA98-A]"})}),e.jsx(a,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(a,{label:"ITC_Main"})]})}const F=t.createContext({selected:!1,hidden:!1});function a(r){const n=t.useContext($),s=t.useContext(F),l=t.useId(),[h,d]=t.useState(r.defaultCollapsed===void 0?!0:!r.defaultCollapsed),p=t.Children.count(r.children)>0,i=t.useMemo(()=>s.hidden?!0:n.hidden.includes(l),[l,n.hidden,s.hidden]),u=s.selected||l===n.selected,c=t.useCallback(f=>{n.setSelected(f?l:void 0)},[l,n]);return e.jsx(F.Provider,{value:t.useMemo(()=>({selected:u,hidden:i}),[i,u]),children:e.jsx(xe,{expanded:p?h:void 0,onExpandedChange:d,selected:u,onSelectedChange:c,icon:e.jsx(y,{href:R,style:{display:"inline"}}),label:r.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(I,{className:o.action,icon:be,label:"Lock",variant:"ghost","aria-hidden":i}),s.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(y,{href:Ce})}):e.jsx(I,{className:o.action,icon:i?ge:Ie,label:i?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(l)}}),e.jsx(rt,{hidden:i})]}),children:h?r.children:void 0})})}function rt({hidden:r}){return e.jsxs(G,{children:[e.jsx(O,{className:o.action,"aria-hidden":r,render:e.jsx(I,{icon:ke,label:"More",variant:"ghost"})}),e.jsxs(H,{style:{minInlineSize:164},children:[e.jsx(g,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(g,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(g,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(g,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(g,{shortcuts:"]",children:"Bring to front"}),e.jsx(g,{shortcuts:"[",children:"Send to back"}),e.jsx(g,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(g,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(g,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(g,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(g,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(g,{shortcuts:"I",children:"Isolate object"})]})]})}function lt(){const{selectedId:r}=t.useContext(q),{filters:n,filtered:s}=t.useContext(T),[l,h]=t.useState(!1),d=t.useRef(null),p=t.useMemo(()=>{if(r!=="simple"||n.length===0)return;const f=z.items.filter(b=>b.type?n.includes(b.type):!1);function x(b){return b.reduce((P,k)=>{const v=k.items?x(k.items):0;return P+1+v},0)}return x(f)},[n,r]),i=t.useRef(null),u=l?e.jsxs(e.Fragment,{children:[e.jsx(at,{filters:r==="simple"?z.filters:[]}),e.jsx(I,{className:o.shiftIconRight,icon:Se,label:"Close",variant:"ghost",onClick:()=>{var f;w.flushSync(()=>h(!1)),(f=i.current)==null||f.focus()}})]}):e.jsx(I,{className:o.shiftIconRight,icon:L,label:"Search",variant:"ghost",onClick:()=>{var f;w.flushSync(()=>h(!0)),(f=d.current)==null||f.focus()}}),c=t.useMemo(()=>{if(s)return p===void 0?"Showing all tree items":`Showing ${p} tree items`},[s,p]);return e.jsxs("div",{className:o.subheader,children:[e.jsx(N,{"aria-live":"polite","aria-atomic":!0,children:c}),l?void 0:e.jsxs(de,{className:o.tabList,tone:"accent",ref:i,children:[e.jsx(K,{id:"simple",children:"Simple"}),e.jsx(K,{id:"complex",children:"Complex"})]}),l?e.jsxs(pe,{className:o.searchInput,children:[e.jsx(fe,{href:L}),e.jsx(he,{placeholder:"Search",ref:d})]}):null,e.jsx("div",{className:o.subheaderActions,children:u})]})}function at({filters:r}){const n=t.useContext(T);return e.jsxs(G,{children:[e.jsx(O,{render:e.jsx(I,{icon:_e,label:"Filter",variant:"ghost",disabled:r.length===0,isActive:n.filters.length>0})}),e.jsx(H,{children:r.map(s=>{const l=n.filters.includes(s);return e.jsx(ie,{name:s,checked:l,onChange:()=>{n.toggleFilter(s)},children:s},s)})})]})}function it(r){const[n,s]=t.useState(!1),[l,h]=t.useState([]),d=t.useCallback(i=>{h(u=>u.includes(i)?u.filter(c=>c!==i):[...u,i]),s(!0)},[]),p=t.useCallback(()=>{h([]),s(!0)},[]);return e.jsx(T.Provider,{value:t.useMemo(()=>({filters:l,filtered:n,toggleFilter:d,clearFilters:p}),[l,n,d,p]),children:r.children})}function ot(r){const[n,s]=t.useState(void 0);return e.jsx(q.Provider,{value:t.useMemo(()=>({selectedId:n??""}),[n]),children:e.jsx(ue,{setSelectedId:s,selectedId:n,children:r.children})})}const T=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}}),q=t.createContext({selectedId:""});export{Ot as default,Gt as meta};
