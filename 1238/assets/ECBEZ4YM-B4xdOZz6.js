import{u as ie,c as se,a as ce}from"./B6FLPFJM-BhcnY6-x.js";import{c as ae}from"./Z32PU2LQ-B87hqSD1.js";import{w as le,A as Z,aa as $,a4 as fe,ar as J,a7 as N,Z as X,Y as F,ao as de,L as me,W as ve,I as K,ab as he,_ as q,G as B,y as Q,z as ee,E as Pe,ac as R}from"./~utils-DWZR7FF2.js";import{h as Se,u as Ee}from"./U6HHPQDW-3zxFb9sA.js";import{s as we,c as ge,b as D}from"./Q5W46E73-Di3Lk8ax.js";import{a as d,p as _}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{P as xe,a as He}from"./JMU4N4M5-CTm7vXPU.js";var b=le([He],[xe]);b.useContext;b.useScopedContext;var I=b.useProviderContext,Ne=b.ContextProvider,Ce=b.ScopedContextProvider;function L(o){return[o.clientX,o.clientY]}function z(o,e){const[t,n]=o;let i=!1;const c=e.length;for(let r=c,u=0,f=r-1;u<r;f=u++){const[s,P]=e[u],[S,m]=e[f],[,E]=e[f===0?r-1:f-1]||[0,0],v=(P-m)*(t-s)-(s-S)*(n-P);if(m<P){if(n>=m&&n<P){if(v===0)return!0;v>0&&(n===m?n>E&&(i=!i):i=!i)}}else if(P<m){if(n>P&&n<=m){if(v===0)return!0;v<0&&(n===m?n<E&&(i=!i):i=!i)}}else if(n===P&&(t>=S&&t<=s||t>=s&&t<=S))return!0}return i}function Fe(o,e){const{top:t,right:n,bottom:i,left:c}=e,[r,u]=o,f=r<c?"left":r>n?"right":null,s=u<t?"top":u>i?"bottom":null;return[f,s]}function U(o,e){const t=o.getBoundingClientRect(),{top:n,right:i,bottom:c,left:r}=t,[u,f]=Fe(e,t),s=[e];return u?(f!=="top"&&s.push([u==="left"?r:i,n]),s.push([u==="left"?i:r,n]),s.push([u==="left"?i:r,c]),f!=="bottom"&&s.push([u==="left"?r:i,c])):f==="top"?(s.push([r,n]),s.push([r,c]),s.push([i,c]),s.push([i,n])):(s.push([r,c]),s.push([r,n]),s.push([i,n]),s.push([i,c])),s}var Me="div";function te(o,e,t,n){return Se(e)?!0:o?!!(q(e,o)||t&&q(t,o)||n?.some(i=>te(o,i,t))):!1}function Te({store:o,...e}){const[t,n]=d.useState(!1),i=o.useState("mounted");d.useEffect(()=>{i||n(!1)},[i]);const c=e.onFocus,r=B(f=>{c?.(f),!f.defaultPrevented&&n(!0)}),u=d.useRef(null);return d.useEffect(()=>we(o,["anchorElement"],f=>{u.current=f.anchorElement}),[]),e={autoFocusOnHide:t,finalFocus:u,...e,onFocus:r},e}var V=d.createContext(null),Re=Z(function({store:e,modal:t=!1,portal:n=!!t,hideOnEscape:i=!0,hideOnHoverOutside:c=!0,disablePointerEventsOnApproach:r=!!c,...u}){const f=I();e=e||f,$(e,!1);const s=d.useRef(null),[P,S]=d.useState([]),m=d.useRef(0),E=d.useRef(null),{portalRef:v,domReady:l}=fe(n,u.portalRef),w=J(),y=!!c,M=N(c),x=!!r,O=N(r),k=e.useState("open"),H=e.useState("mounted");d.useEffect(()=>{if(!l||!H||!y&&!x)return;const a=s.current;return a?X(F("mousemove",h=>{if(!e||!w())return;const{anchorElement:C,hideTimeout:A,timeout:re}=e.getState(),Y=E.current,[p]=h.composedPath(),j=C;if(te(p,a,j,P)){E.current=p&&j&&q(j,p)?L(h):null,window.clearTimeout(m.current),m.current=0;return}if(!m.current){if(Y){const G=L(h),ue=U(a,Y);if(z(G,ue)){if(E.current=G,!O(h))return;h.preventDefault(),h.stopPropagation();return}}M(h)&&(m.current=window.setTimeout(()=>{m.current=0,e?.hide()},A??re))}},!0),()=>clearTimeout(m.current)):void 0},[e,w,l,H,y,x,P,O,M]),d.useEffect(()=>{if(!l||!H||!x)return;const a=g=>{const h=s.current;if(!h)return;const C=E.current;if(!C)return;const A=U(h,C);if(z(L(g),A)){if(!O(g))return;g.preventDefault(),g.stopPropagation()}};return X(F("mouseenter",a,!0),F("mouseover",a,!0),F("mouseout",a,!0),F("mouseleave",a,!0))},[l,H,x,O]),d.useEffect(()=>{l&&(k||e?.setAutoFocusOnShow(!1))},[e,l,k]);const ne=de(k);d.useEffect(()=>{if(l)return()=>{ne.current||e?.setAutoFocusOnShow(!1)}},[e,l]);const T=d.useContext(V);me(()=>{if(t||!n||!H||!l)return;const a=s.current;if(a)return T?.(a)},[t,n,H,l]);const W=d.useCallback(a=>{S(h=>[...h,a]);const g=T?.(a);return()=>{S(h=>h.filter(C=>C!==a)),g?.()}},[T]);u=ve(u,a=>_.jsx(Ce,{value:e,children:_.jsx(V.Provider,{value:W,children:a})}),[e,W]),u={...u,ref:K(s,u.ref)},u=Te({store:e,...u});const oe=e.useState(a=>t||a.autoFocusOnShow);return u=ie({store:e,modal:t,portal:n,autoFocusOnShow:oe,...u,portalRef:v,hideOnEscape(a){return he(i,a)?!1:(requestAnimationFrame(()=>{requestAnimationFrame(()=>{e?.hide()})}),!0)}}),u});ae(Q(function(e){const t=Re(e);return ee(Me,t)}),I);var be="a",ye=Z(function({store:e,showOnHover:t=!0,...n}){const i=I();e=e||i,$(e,!1);const c=Pe(n),r=d.useRef(0);d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useEffect(()=>F("mouseleave",l=>{if(!e)return;const{anchorElement:w}=e.getState();w&&l.target===w&&(window.clearTimeout(r.current),r.current=0)},!0),[e]);const u=n.onMouseMove,f=N(t),s=J(),P=B(v=>{if(u?.(v),c||!e||v.defaultPrevented||r.current||!s()||!f(v))return;const l=v.currentTarget;e.setAnchorElement(l),e.setDisclosureElement(l);const{showTimeout:w,timeout:y}=e.getState(),M=()=>{r.current=0,s()&&(e?.setAnchorElement(l),e?.show(),queueMicrotask(()=>{e?.setDisclosureElement(l)}))},x=w??y;x===0?M():r.current=window.setTimeout(M,x)}),S=n.onClick,m=B(v=>{S?.(v),e&&(window.clearTimeout(r.current),r.current=0)}),E=d.useCallback(v=>{if(!e)return;const{anchorElement:l}=e.getState();l?.isConnected||e.setAnchorElement(v)},[e]);return n={...n,ref:K(E,n.ref),onMouseMove:P,onClick:m},n=Ee(n),n});Q(function(e){const t=ye(e);return ee(be,t)});function qe(o={}){var e;const t=(e=o.store)==null?void 0:e.getState(),n=se({...o,placement:R(o.placement,t?.placement,"bottom")}),i=R(o.timeout,t?.timeout,500),c={...n.getState(),timeout:i,showTimeout:R(o.showTimeout,t?.showTimeout),hideTimeout:R(o.hideTimeout,t?.hideTimeout),autoFocusOnShow:R(t?.autoFocusOnShow,!1)},r=ge(c,n,o.store);return{...n,...r,setAutoFocusOnShow:u=>r.setState("autoFocusOnShow",u)}}function Be(o,e,t){return D(o,t,"timeout"),D(o,t,"showTimeout"),D(o,t,"hideTimeout"),ce(o,e,t)}export{Ce as H,Ne as a,ye as b,qe as c,Be as d,Re as u};
