import{n as v,a as O}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{c as q}from"./index-jyeBNHV5.js";import{f as z,s as k}from"./~utils-DoC8vB3l.js";import{c as L,u as G,H as J,a as K,b as Q,d as U,e as X}from"./BYC7LY2E-BpTC1yif.js";import{q as w,o as x,s as b,p as V,v as Y,y as j,F as Z,c as A,_ as B,i as N,E as ee,b as g,e as $,P as H,l as te,f as M,d as D,L as F,a1 as re,k as y,O as I}from"./collection-JezXOkgr.js";function ne(t={}){var n;const r=(n=t.store)==null?void 0:n.getState(),e=L(w(b({},t),{placement:x(t.placement,r==null?void 0:r.placement,"top"),hideTimeout:x(t.hideTimeout,r==null?void 0:r.hideTimeout,0)})),f=w(b({},e.getState()),{type:x(t.type,r==null?void 0:r.type,"description"),skipTimeout:x(t.skipTimeout,r==null?void 0:r.skipTimeout,300)}),a=V(f,e,t.store);return b(b({},e),a)}function oe(t,n,r){return j(t,r,"type"),j(t,r,"skipTimeout"),G(t,n,r)}function W(t={}){const[n,r]=Y(ne,t);return oe(n,r,t)}var _=Z([K],[J]),C=_.useProviderContext,ae=_.ContextProvider,se=_.ScopedContextProvider,ue="div",ie=A(function(n){var r=n,{store:e,portal:f=!0,gutter:a=8,preserveTabOrder:p=!1,hideOnHoverOutside:c=!0,hideOnInteractOutside:S=!0}=r,u=B(r,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const h=C();e=e||h,N(e,!1),u=ee(u,s=>v.jsx(se,{value:e,children:s}),[e]);const P=e.useState(s=>s.type==="description"?"tooltip":"none");return u=g({role:P},u),u=Q($(g({},u),{store:e,portal:f,gutter:a,preserveTabOrder:p,hideOnHoverOutside(s){if(H(c,s))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!("focusVisible"in l.dataset):!0},hideOnInteractOutside:s=>{if(H(S,s))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!te(l,s.target):!0}})),u}),le=U(M(function(n){const r=ie(n);return D(ue,r)}),C);function ce(t={}){const n=W(t);return v.jsx(ae,{value:n,children:t.children})}var de="div",m=V({activeStore:null});function R(t){return()=>{const{activeStore:n}=m.getState();n===t&&m.setState("activeStore",null)}}var fe=A(function(n){var r=n,{store:e,showOnHover:f=!0}=r,a=B(r,["store","showOnHover"]);const p=C();e=e||p,N(e,!1);const c=O.useRef(!1);O.useEffect(()=>F(e,["mounted"],o=>{o.mounted||(c.current=!1)}),[e]),O.useEffect(()=>{if(e)return re(R(e),F(e,["mounted","skipTimeout"],o=>{if(!e)return;if(o.mounted){const{activeStore:E}=m.getState();return E!==e&&(E==null||E.hide()),m.setState("activeStore",e)}const d=setTimeout(R(e),o.skipTimeout);return()=>clearTimeout(d)}))},[e]);const S=a.onMouseEnter,u=y(o=>{S==null||S(o),c.current=!0}),h=a.onFocusVisible,P=y(o=>{h==null||h(o),!o.defaultPrevented&&(e==null||e.setAnchorElement(o.currentTarget),e==null||e.show())}),s=a.onBlur,l=y(o=>{if(s==null||s(o),o.defaultPrevented)return;const{activeStore:d}=m.getState();c.current=!1,d===e&&m.setState("activeStore",null)}),i=e.useState("type"),T=e.useState(o=>{var d;return(d=o.contentElement)==null?void 0:d.id});return a=$(g({"aria-labelledby":i==="label"?T:void 0},a),{onMouseEnter:u,onFocusVisible:P,onBlur:l}),a=X(g({store:e,showOnHover(o){if(!c.current||H(f,o))return!1;const{activeStore:d}=m.getState();return d?(e==null||e.show(),!1):!0}},a)),a}),pe=M(function(n){const r=fe(n);return D(de,r)});const Pe=z((t,n)=>{const r=O.useId(),{content:e,children:f,type:a="description",id:p=r,defaultOpen:c,open:S,setOpen:u,unmountOnHide:h=a==="none",...P}=t,s=W(),l=I(s,T=>T.open),i=I(s,T=>T.popoverElement);return O.useEffect(function(){var o;i!=null&&i.isConnected&&((o=i==null?void 0:i.togglePopover)==null||o.call(i,l))},[l,i]),v.jsx(v.Fragment,{children:v.jsxs(ce,{store:s,defaultOpen:c,open:S,setOpen:u,children:[v.jsx(pe,{render:f,...a==="description"&&{"aria-describedby":p},...a==="label"&&{"aria-labelledby":p}}),v.jsx(le,{"aria-hidden":"true",...P,unmountOnHide:h,className:q("ü•ù-tooltip",t.className),ref:n,id:p,style:{zIndex:k?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!k,children:e})]})})});export{ce as T,pe as a,le as b,Pe as c,W as u};
