import{y as V,f as A,e as B,g as R,i as F,C as D,af as C,L as _,j as S,T as $,l as b,S as h,a0 as L,a7 as U,E as W,c as q}from"./ExamplePreview.D9xpx-6T.js";import{r as p}from"./index.CtNveh2g.js";import{f as H,c as I,a as z,d as k,u as j}from"./Q5W46E73.CH-2BzjX.js";import{u as G}from"./~utils.useInit.C_68u6XG.js";import{f as J}from"./styles.internal.oMsq5KxP.js";import{H as K,a as Q,u as X,b as Y,c as Z,d as ee}from"./ECBEZ4YM.F_HkRNvc.js";import{c as te}from"./Z32PU2LQ.Dg0XoAaG.js";var g=V([Q],[K]),y=g.useProviderContext,ne=g.ContextProvider,oe=g.ScopedContextProvider,re="div",ae=B(function({store:e,portal:n=!0,gutter:r=8,preserveTabOrder:d=!1,hideOnHoverOutside:u=!0,hideOnInteractOutside:s=!0,...a}){const v=y();return e=e||v,F(e,!1),a=D(a,i=>S.jsx(oe,{value:e,children:i}),[e]),a={role:e.useState(i=>i.type==="description"?"tooltip":"none"),...a},a=X({...a,store:e,portal:n,gutter:r,preserveTabOrder:d,hideOnHoverOutside(i){if(C(u,i))return!1;const c=e?.getState().anchorElement;return c?!("focusVisible"in c.dataset):!0},hideOnInteractOutside:i=>{if(C(s,i))return!1;const c=e?.getState().anchorElement;return c?!_(c,i.target):!0}}),a}),ie=te(A(function(e){const n=ae(e);return R(re,n)}),y),ue="div",f=I({activeStore:null});function w(t){return()=>{const{activeStore:e}=f.getState();e===t&&f.setState("activeStore",null)}}var le=B(function({store:e,showOnHover:n=!0,...r}){const d=y();e=e||d,F(e,!1);const u=p.useRef(!1);p.useEffect(()=>H(e,["mounted"],o=>{o.mounted||(u.current=!1)}),[e]),p.useEffect(()=>{if(e)return $(w(e),H(e,["mounted","skipTimeout"],o=>{if(!e)return;if(o.mounted){const{activeStore:m}=f.getState();return m!==e&&m?.hide(),f.setState("activeStore",e)}const l=setTimeout(w(e),o.skipTimeout);return()=>clearTimeout(l)}))},[e]);const s=r.onMouseEnter,a=b(o=>{s?.(o),u.current=!0}),v=r.onFocusVisible,T=b(o=>{v?.(o),!o.defaultPrevented&&(e?.setAnchorElement(o.currentTarget),e?.show())}),i=r.onBlur,c=b(o=>{if(i?.(o),o.defaultPrevented)return;const{activeStore:l}=f.getState();u.current=!1,l===e&&f.setState("activeStore",null)}),x=e.useState("type"),P=e.useState(o=>{var l;return(l=o.contentElement)==null?void 0:l.id});return r={"aria-labelledby":x==="label"?P:void 0,...r,onMouseEnter:a,onFocusVisible:T,onBlur:c},r=Y({store:e,showOnHover(o){if(!u.current||C(n,o))return!1;const{activeStore:l}=f.getState();return l?(e?.show(),!1):!0},...r}),r}),ce=A(function(e){const n=le(e);return R(ue,n)});function se(t={}){var e;const n=(e=t.store)==null?void 0:e.getState(),r=Z({...t,placement:h(t.placement,n?.placement,"top"),hideTimeout:h(t.hideTimeout,n?.hideTimeout,0)}),d={...r.getState(),type:h(t.type,n?.type,"description"),skipTimeout:h(t.skipTimeout,n?.skipTimeout,300)},u=I(d,r,t.store);return{...r,...u}}function de(t,e,n){return k(t,n,"type"),k(t,n,"skipTimeout"),ee(t,e,n)}function M(t={}){const[e,n]=z(se,t);return de(e,n,t)}function fe(t={}){const e=M(t);return S.jsx(ne,{value:e,children:t.children})}const ve=p.createContext({placement:void 0}),pe=J((t,e)=>{G();const n=p.useId(),r=p.useContext(ve),{content:d,children:u,type:s="description",id:a=n,defaultOpen:v,open:T,setOpen:i,unmountOnHide:c=s==="none",placement:x=r.placement,...P}=t,o=M(),l=j(o,"open"),m=j(o,"popoverElement"),N=L(o.setOpen),O=U({element:m,open:l,setOpen:N});return S.jsxs(fe,{store:o,defaultOpen:v,open:T,setOpen:i,placement:x,children:[S.jsx(ce,{render:u,onContextMenu:W(u.props?.onContextMenu,E=>{(E.currentTarget.localName==="button"||E.currentTarget.role==="button")&&(E.preventDefault(),o.setOpen(!0))}),"data-has-popover-open":l||void 0,...s==="description"&&{"aria-describedby":a},...s==="label"&&{"aria-labelledby":a}}),S.jsx(ie,{portal:!0,...P,unmountOnHide:c,className:q("ü•ùTooltip",t.className),ref:e,id:a,style:{...O.style,...t.style},wrapperProps:{popover:O.popover},children:d})]})});var Ce=pe;export{Ce as T,ve as a};
