import{r as C,j as g}from"./chunk-K6AXKMTT-DG8v5gpF.js";import{r as ce}from"./index-5If27ekR.js";import{l as Z,a6 as ie,A as N,z as L,C as M,B as q,g as x,j as b,F as J,b as W,_ as B,i as H,G as ee,o as le,e as A,y as de,f as K,k as z,v as te,h as ue,c as G}from"./index-DksOGUVp.js";import{a as me}from"./~hooks-CIUXFpz1.js";import{f as U}from"./~utils-CpwKMB5b.js";import{u as fe}from"./VEVQD5MH-j-bxI2do.js";import{C as se,a as oe,d as Q,u as be}from"./P2CTZE2T-owQbJceW.js";import{P as Ie,a as pe}from"./MTZPJQMC-Ddx49i4g.js";import{c as ve,u as Se,a as xe}from"./ITI7HKP4-bMtFybyl.js";import{m as Ce,o as X,c as Pe,s as O,f as y,b as he,d as ne,a as Y,u as $}from"./YV4JVR4I-CGpFYsWa.js";import{c as Te}from"./C3IKGW5T-BJASAGeE.js";import{d as ge}from"./RZ4GPYOB-BmMDqW1J.js";import{b as Ee,e as _e}from"./VGCJ63VH-DD759LrV.js";import{g as ye,u as Re}from"./LVA2YJMS-CEef_-N2.js";var je=Z([pe,oe],[Ie,se]),we=je.useContext;C.createContext(!1);C.createContext(null);function De(t={}){var n=t,{composite:s,combobox:e}=n,o=ie(n,["composite","combobox"]);const a=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],I=Ce(o.store,X(s,a),X(e,a)),l=I==null?void 0:I.getState(),u=ve(N(M({},o),{store:I,includesBaseElement:L(o.includesBaseElement,l==null?void 0:l.includesBaseElement,!1),orientation:L(o.orientation,l==null?void 0:l.orientation,"horizontal"),focusLoop:L(o.focusLoop,l==null?void 0:l.focusLoop,!0)})),r=Te(),j=N(M({},u.getState()),{selectedId:L(o.selectedId,l==null?void 0:l.selectedId,o.defaultSelectedId),selectOnMove:L(o.selectOnMove,l==null?void 0:l.selectOnMove,!0)}),c=Pe(j,u,I);O(c,()=>y(c,["moves"],()=>{const{activeId:d,selectOnMove:f}=c.getState();if(!f||!d)return;const p=u.item(d);p&&(p.dimmed||p.disabled||c.setState("selectedId",p.id))}));let P=!0;O(c,()=>he(c,["selectedId"],(d,f)=>{if(!P){P=!0;return}s&&d.selectedId===f.selectedId||c.setState("activeId",d.selectedId)})),O(c,()=>y(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:f,renderedItems:p}=c.getState(),v=u.item(f);if(v&&!v.disabled&&!v.dimmed)c.setState("selectedId",v.id);else{const E=p.find(h=>!h.disabled&&!h.dimmed);c.setState("selectedId",E==null?void 0:E.id)}})),O(c,()=>y(c,["renderedItems"],d=>{const f=d.renderedItems;if(f.length)return y(r,["renderedItems"],p=>{const v=p.renderedItems;v.some(h=>!h.tabId)&&v.forEach((h,w)=>{if(h.tabId)return;const k=f[w];k&&r.renderItem(N(M({},h),{tabId:k.id}))})})}));let S=null;return O(c,()=>{const d=()=>{S=c.getState().selectedId},f=()=>{P=!1,c.setState("selectedId",S)};if(s&&"setSelectElement"in s)return q(y(s,["value"],d),y(s,["mounted"],f));if(e)return q(y(e,["selectedValue"],d),y(e,["mounted"],f))}),N(M(M({},u),c),{panels:r,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),u.move(d)}})}function ke(t,n,s){J(n,[s.composite,s.combobox]),t=Se(t,n,s),Y(t,s,"selectedId","setSelectedId"),Y(t,s,"selectOnMove");const[e,o]=ne(()=>t.panels,{});return J(o,[t,o]),Object.assign(C.useMemo(()=>x(b({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function Fe(t={}){const n=fe(),s=we()||n;t=x(b({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:n});const[e,o]=ne(De,t);return ke(e,o,t)}var V=Z([oe],[se]),Le=V.useScopedContext,re=V.useProviderContext,Me=V.ContextProvider,ae=V.ScopedContextProvider,Oe="button",Ne=W(function(n){var s=n,{store:e,getItem:o}=s,a=B(s,["store","getItem"]),I;const l=Le();e=e||l,H(e,!1);const u=ee(),r=a.id||u,j=le(a),c=C.useCallback(m=>{const R=x(b({},m),{dimmed:j});return o?o(R):R},[j,o]),P=a.onClick,S=A(m=>{P==null||P(m),!m.defaultPrevented&&(e==null||e.setSelectedId(r))}),d=e.panels.useState(m=>{var R;return(R=m.items.find(i=>i.tabId===r))==null?void 0:R.id}),f=u?a.shouldRegisterItem:!1,p=e.useState(m=>!!r&&m.activeId===r),v=e.useState(m=>!!r&&m.selectedId===r),E=e.useState(m=>!!e.item(m.activeId)),h=p||v&&!E,w=v||((I=a.accessibleWhenDisabled)!=null?I:!0);if($(e.combobox||e.composite,"virtualFocus")&&(a=x(b({},a),{tabIndex:-1})),a=x(b({id:r,role:"tab","aria-selected":v,"aria-controls":d||void 0},a),{onClick:S}),e.composite){const m={id:r,accessibleWhenDisabled:w,store:e.composite,shouldRegisterItem:h&&f,rowId:a.rowId,render:a.render};a=x(b({},a),{render:g.jsx(Q,x(b({},m),{render:e.combobox&&e.composite!==e.combobox?g.jsx(Q,x(b({},m),{store:e.combobox})):m.render}))})}return a=be(x(b({store:e},a),{accessibleWhenDisabled:w,getItem:c,shouldRegisterItem:f})),a}),$e=de(K(function(n){const s=Ne(n);return z(Oe,s)}));function Ve(t={}){const n=Fe(t);return g.jsx(Me,{value:n,children:t.children})}var Ae="div",We=W(function(n){var s=n,{store:e}=s,o=B(s,["store"]);const a=re();e=e||a,H(e,!1);const I=e.useState(l=>l.orientation==="both"?void 0:l.orientation);return o=te(o,l=>g.jsx(ae,{value:e,children:l}),[e]),e.composite&&(o=b({focusable:!1},o)),o=b({role:"tablist","aria-orientation":I},o),o=xe(b({store:e},o)),o}),Be=K(function(n){const s=We(n);return z(Ae,s)}),He="div",Ke=W(function(n){var s=n,{store:e,unmountOnHide:o,tabId:a,getItem:I,scrollRestoration:l,scrollElement:u}=s,r=B(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const j=re();e=e||j,H(e,!1);const c=C.useRef(null),P=ee(r.id),S=$(e.panels,()=>{var i;return a||((i=e==null?void 0:e.panels.item(P))==null?void 0:i.tabId)}),d=$(e,i=>!!S&&i.selectedId===S),f=Ee({open:d}),p=$(f,"mounted"),v=C.useRef(new Map),E=A(()=>{const i=c.current;return i?u?typeof u=="function"?u(i):"current"in u?u.current:u:i:null});C.useEffect(()=>{var i,_;if(!l||!p)return;const T=E();if(!T)return;if(l==="reset"){T.scroll(0,0);return}if(!S)return;const D=v.current.get(S);T.scroll((i=D==null?void 0:D.x)!=null?i:0,(_=D==null?void 0:D.y)!=null?_:0);const F=()=>{v.current.set(S,{x:T.scrollLeft,y:T.scrollTop})};return T.addEventListener("scroll",F),()=>{T.removeEventListener("scroll",F)}},[l,p,S,E,e]);const[h,w]=C.useState(!1);C.useEffect(()=>{const i=c.current;if(!i)return;const _=ye(i);w(!!_.length)},[]);const k=C.useCallback(i=>{const _=x(b({},i),{id:P||i.id,tabId:a});return I?I(_):_},[P,a,I]),m=r.onKeyDown,R=A(i=>{if(m==null||m(i),i.defaultPrevented||!(e!=null&&e.composite))return;const T={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[i.key];if(!T)return;const{selectedId:D}=e.getState(),F=T({activeId:D});F&&(i.preventDefault(),e.move(F))});return r=te(r,i=>g.jsx(ae,{value:e,children:i}),[e]),r=x(b({id:P,role:"tabpanel","aria-labelledby":S||void 0},r),{children:o&&!p?null:r.children,ref:ue(c,r.ref),onKeyDown:R}),r=Re(b({focusable:!e.composite&&!h},r)),r=_e(b({store:f},r)),r=ge(x(b({store:e.panels},r),{getItem:k})),r}),ze=K(function(n){const s=Ke(n);return z(He,s)});function at(t){const{defaultSelectedId:n,selectedId:s,setSelectedId:e,selectOnMove:o,children:a}=t,[I,l]=me(n,s,e);return g.jsx(Ve,{selectedId:I,setSelectedId:C.useCallback(u=>{document.startViewTransition?document.startViewTransition(()=>{ce.flushSync(()=>{l(u)})}):l(u)},[l]),selectOnMove:o,children:a})}const ct=U((t,n)=>{const{tone:s="neutral",...e}=t,o=`active-stripe-${C.useId().replaceAll(":","_")}`;return g.jsx(Be,{...e,"data-kiwi-tone":s,className:G("-tab-list",t.className),style:{"--tab-active-stripe-view-transition-name":o,...t.style},ref:n})}),it=U((t,n)=>g.jsx($e,{accessibleWhenDisabled:!0,...t,className:G("-tab",t.className),ref:n})),lt=U((t,n)=>g.jsx(ze,{...t,className:G("-tab-panel",t.className),ref:n}));export{lt as T,ct as a,it as b,at as c};
