import{u as A}from"./LVA2YJMS-PSCN4cPZ.js";import{c as B,_ as m,l as d,m as F,b as I,d as _,n as O,o as j,p as Y,q as H,r as v,e as L,g as V,h as T,f as z,j as G}from"./LMDWO4NN-UKOJDKde.js";import{r as n}from"./chunk-D52XG6IA-DUkyOzkQ.js";var J="button";function C(s){if(!s.isTrusted)return!1;const t=s.currentTarget;return s.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":s.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=B(function(t){var o=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=o,r=m(o,["clickOnEnter","clickOnSpace"]);const f=n.useRef(null),[D,M]=n.useState(!1);n.useEffect(()=>{f.current&&M(d(f.current))},[]);const[R,y]=n.useState(!1),l=n.useRef(!1),E=F(r),[g,K]=I(r,Q,!0),P=r.onKeyDown,w=_(e=>{P==null||P(e);const a=e.currentTarget;if(e.defaultPrevented||g||E||!O(e)||j(a)||a.isContentEditable)return;const i=k&&e.key==="Enter",u=c&&e.key===" ",p=e.key==="Enter"&&!k,h=e.key===" "&&!c;if(p||h){e.preventDefault();return}if(i||u){const b=C(e);if(i){if(!b){e.preventDefault();const q=e,x=m(q,["view"]),N=()=>v(a,x);Y()?H(a,"keyup",N):queueMicrotask(N)}}else u&&(l.current=!0,b||(e.preventDefault(),y(!0)))}}),S=r.onKeyUp,U=_(e=>{if(S==null||S(e),e.defaultPrevented||g||E||e.metaKey)return;const a=c&&e.key===" ";if(l.current&&a&&(l.current=!1,!C(e))){e.preventDefault(),y(!1);const i=e.currentTarget,u=e,p=m(u,["view"]);queueMicrotask(()=>v(i,p))}});return r=L(T(T({"data-active":R||void 0,type:D?"button":void 0},K),r),{ref:V(f,r.ref),onKeyDown:w,onKeyUp:U}),r=A(r),r});z(function(t){const o=W(t);return G(J,o)});export{W as u};
