import{p as S,a as p}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{s as H,c as B,a as V,b as k,u as A}from"./Q5W46E73-4FcSIHUg.js";import{y as D,A as j,B as R,D as F,aa as I,T as _,ab as y,Y as $,X as q,J as E,ac as h,q as J,O as U,P as W,a as X,b as Y}from"./~utils-_u2MSO01.js";import{u as z}from"./~utils.useInit-Dat4pLQo.js";import{H as G,a as K,u as L,b as Q,c as Z,d as ee}from"./ECBEZ4YM-DMPjn0Al.js";import{c as te}from"./Z32PU2LQ-B1IJIcrv.js";var C=D([K],[G]),g=C.useProviderContext,ne=C.ContextProvider,oe=C.ScopedContextProvider,re="div",ae=F(function({store:e,portal:n=!0,gutter:r=8,preserveTabOrder:d=!1,hideOnHoverOutside:u=!0,hideOnInteractOutside:s=!0,...a}){const f=g();return e=e||f,I(e,!1),a=_(a,i=>S.jsx(oe,{value:e,children:i}),[e]),a={role:e.useState(i=>i.type==="description"?"tooltip":"none"),...a},a=L({...a,store:e,portal:n,gutter:r,preserveTabOrder:d,hideOnHoverOutside(i){if(y(u,i))return!1;const c=e?.getState().anchorElement;return c?!("focusVisible"in c.dataset):!0},hideOnInteractOutside:i=>{if(y(s,i))return!1;const c=e?.getState().anchorElement;return c?!$(c,i.target):!0}}),a}),ie=te(j(function(e){const n=ae(e);return R(re,n)}),g),ue="div",v=B({activeStore:null});function w(t){return()=>{const{activeStore:e}=v.getState();e===t&&v.setState("activeStore",null)}}var le=F(function({store:e,showOnHover:n=!0,...r}){const d=g();e=e||d,I(e,!1);const u=p.useRef(!1);p.useEffect(()=>H(e,["mounted"],o=>{o.mounted||(u.current=!1)}),[e]),p.useEffect(()=>{if(e)return q(w(e),H(e,["mounted","skipTimeout"],o=>{if(!e)return;if(o.mounted){const{activeStore:m}=v.getState();return m!==e&&m?.hide(),v.setState("activeStore",e)}const l=setTimeout(w(e),o.skipTimeout);return()=>clearTimeout(l)}))},[e]);const s=r.onMouseEnter,a=E(o=>{s?.(o),u.current=!0}),f=r.onFocusVisible,T=E(o=>{f?.(o),!o.defaultPrevented&&(e?.setAnchorElement(o.currentTarget),e?.show())}),i=r.onBlur,c=E(o=>{if(i?.(o),o.defaultPrevented)return;const{activeStore:l}=v.getState();u.current=!1,l===e&&v.setState("activeStore",null)}),x=e.useState("type"),P=e.useState(o=>{var l;return(l=o.contentElement)==null?void 0:l.id});return r={"aria-labelledby":x==="label"?P:void 0,...r,onMouseEnter:a,onFocusVisible:T,onBlur:c},r=Q({store:e,showOnHover(o){if(!u.current||y(n,o))return!1;const{activeStore:l}=v.getState();return l?(e?.show(),!1):!0},...r}),r}),ce=j(function(e){const n=le(e);return R(ue,n)});function se(t={}){var e;const n=(e=t.store)==null?void 0:e.getState(),r=Z({...t,placement:h(t.placement,n?.placement,"top"),hideTimeout:h(t.hideTimeout,n?.hideTimeout,0)}),d={...r.getState(),type:h(t.type,n?.type,"description"),skipTimeout:h(t.skipTimeout,n?.skipTimeout,300)},u=B(d,r,t.store);return{...r,...u}}function de(t,e,n){return k(t,n,"type"),k(t,n,"skipTimeout"),ee(t,e,n)}function M(t={}){const[e,n]=V(se,t);return de(e,n,t)}function ve(t={}){const e=M(t);return S.jsx(ne,{value:e,children:t.children})}const fe=p.createContext({placement:void 0}),pe=J((t,e)=>{z();const n=p.useId(),r=p.useContext(fe),{content:d,children:u,type:s="description",id:a=n,defaultOpen:f,open:T,setOpen:i,unmountOnHide:c=s==="none",placement:x=r.placement,...P}=t,o=M(),l=A(o,"open"),m=A(o,"popoverElement"),N=U(o.setOpen),O=W({element:m,open:l,setOpen:N});return S.jsxs(ve,{store:o,defaultOpen:f,open:T,setOpen:i,placement:x,children:[S.jsx(ce,{render:u,onContextMenu:X(u.props?.onContextMenu,b=>{(b.currentTarget.localName==="button"||b.currentTarget.role==="button")&&(b.preventDefault(),o.setOpen(!0))}),"data-has-popover-open":l||void 0,...s==="description"&&{"aria-describedby":a},...s==="label"&&{"aria-labelledby":a}}),S.jsx(ie,{portal:!0,...P,unmountOnHide:c,className:Y("ü•ùTooltip",t.className),ref:e,id:a,style:{...O.style,...t.style},wrapperProps:{popover:O.popover},children:d})]})});var Ee=pe;export{Ee as T,fe as a};
