import{w as V}from"./with-props-XFbs5UV3.js";import{l as e,r as n}from"./chunk-7R3XDUXW-DxTo8O6G.js";import{r as B}from"./index-CpodmKhz.js";import{D as X,a as H,b as U,c as m}from"./DropdownMenu-KzQ4Lya1.js";import{D as q}from"./Divider-BrMdR3aZ.js";import{I as z}from"./Icon-Cp_r7ubW.js";import{I as S}from"./IconButton-tvDT3qhG.js";import{T as J,a as Q,b as Y}from"./TextBox-CCbKWPc0.js";import{T as Z,a as ee,b as te,c as ne}from"./Tree-CN0G4o6A.js";import{V as T}from"./VisuallyHidden-DpR5ZIYl.js";import{p as w}from"./placeholder-DeFGWrFQ.js";import{p as re,l as se,s as oe,a as D,d as ie,f as ae}from"./visibility-show-DApvu9tc.js";import{R as ce}from"./XL7CSKGW-dh1dRh0h.js";import"./index-6yh6O1FZ.js";import"./ListItem-DPWNMNO1.js";import"./Button-BXPrYjnY.js";import"./KUU7WJ55-D-YHFOBk.js";import"./LVA2YJMS-D4_IrASL.js";import"./LMDWO4NN-DZi_YyQu.js";import"./~utils-YFcEjjdk.js";import"./P2CTZE2T-DiKUJO9D.js";import"./YV4JVR4I-IQnN8q1u.js";import"./BYC7LY2E-BfotWczU.js";import"./VGCJ63VH-DCGxV_XM.js";import"./XX67R432-CnBfjeG9.js";import"./MTZPJQMC-BlK_aww9.js";import"./ITI7HKP4-BTCbsDiF.js";import"./P4IRICAX-hO8t9012.js";import"./Tooltip-BVWQvTIL.js";import"./Field-xeE_zSqj.js";import"./~hooks-CW6k0nNz.js";const le="_appLayout_yyrfv_5",de="_platformBar_yyrfv_14",ue="_logo_yyrfv_19",pe="_tools_yyrfv_29",he="_leftPanel_yyrfv_39",fe="_header_yyrfv_49",xe="_panelTitle_yyrfv_57",me="_panelCaption_yyrfv_63",ve="_shiftIconRight_yyrfv_67",je="_subheader_yyrfv_71",ye="_subheaderTitle_yyrfv_81",ge="_searchInput_yyrfv_86",_e="_subheaderActions_yyrfv_90",be="_tree_yyrfv_94",Se="_canvasWrapper_yyrfv_102",Re="_canvas_yyrfv_102",Ie="_splitter_yyrfv_124",Pe="_slider_yyrfv_155",r={appLayout:le,platformBar:de,logo:ue,tools:pe,leftPanel:he,header:fe,panelTitle:xe,panelCaption:me,shiftIconRight:ve,subheader:je,subheaderTitle:ye,searchInput:ge,subheaderActions:_e,tree:be,canvasWrapper:Se,canvas:Re,splitter:Ie,slider:Pe},E="Kiwi sandbox",dt=()=>[{title:E},{name:"color-scheme",content:"dark"}],ut=V(function(){const{sliderProps:c,panelProps:s,panelMinSize:i,panelMaxSize:h,resizing:a}=we({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs(e.Fragment,{children:[e.jsx(T,{render:v=>e.jsx("h1",{...v}),children:E}),e.jsxs("div",{className:r.appLayout,style:{"--_panel-min-size":i,"--_panel-max-size":h},children:[e.jsxs("div",{className:r.platformBar,children:[e.jsx("div",{className:r.logo,children:e.jsx(z,{href:w,size:"large"})}),e.jsxs("div",{className:r.tools,children:[e.jsx(z,{href:w,size:"large"}),e.jsx(z,{href:w,size:"large"}),e.jsx(z,{href:w,size:"large"})]})]}),e.jsxs("div",{...s,className:r.leftPanel,style:{position:"relative",...s.style},children:[e.jsxs("div",{className:r.header,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:r.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:r.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:r.actions,children:e.jsx(S,{className:r.shiftIconRight,icon:re,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Ce,{}),e.jsx(ke,{}),e.jsx(q,{presentational:!0,className:r.splitter,"data-resizing":a?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:r.slider,...c})})]}),e.jsx("div",{className:r.canvasWrapper,children:e.jsx("div",{className:r.canvas})})]})]})});function ze(d,c,s){return Math.min(Math.max(d,c),s)}function we(d){const{minSize:c,maxSize:s,onCollapse:i}=d??{},h=n.useId(),a=n.useRef(null),[v,R]=n.useState(void 0),[g,o]=n.useState(void 0),[u,f]=n.useState(void 0),[j,M]=n.useState(!1),[I,k]=n.useState(void 0),x=n.useMemo(()=>{if(c&&g)return Math.min(c.px,c.pct/100*g)},[c,g]),_=n.useMemo(()=>{if(x&&s&&g)return Math.max(x,s.pct/100*g)},[s,g,x]),b=n.useMemo(()=>{if(u==="smallest")return x??0;if(u==="largest")return _??0;if(v&&x&&_)return ze(v,x,_)},[v,x,_,u]);n.useEffect(()=>{const l=a.current;if(!l)return;const p=l.parentElement;if(!p)return;const y=new ResizeObserver(()=>{const C=p.getBoundingClientRect(),N=l.getBoundingClientRect();o(C.width),R(N.width)});return y.observe(p),y.observe(l),()=>{y.disconnect()}},[]);const A=n.useCallback(l=>{const p=a.current;if(!p)return;const y=p.getBoundingClientRect();k(y.width+l),f(void 0),M(!0)},[]),L=n.useCallback(l=>{const p=a.current;if(!p)return;const y=p.parentElement;if(!y)return;const C=y.getBoundingClientRect(),N=l*(C.width*.005),K=p.getBoundingClientRect();k(K.width+N),f(void 0)},[]),G=n.useCallback(()=>{a.current&&(k(void 0),M(!1))},[]),{moveableProps:P}=Me({onMove:A,onMoveEnd:G,onKeyMove:L}),O=n.useMemo(()=>({...P,onKeyDown:l=>{var p;if((p=P.onKeyDown)==null||p.call(P,l),!l.defaultPrevented)switch(l.key){case"Enter":l.preventDefault(),i==null||i();break;case"Home":l.preventDefault(),f("smallest");break;case"End":l.preventDefault(),f("largest");break}},onChange:l=>{if(j)return;const p=Number(l.target.value);k(p)},value:b===void 0?0:Math.floor(b),min:x===void 0?void 0:Math.floor(x),max:_===void 0?void 0:Math.floor(_)}),[P,b,x,_,i,j]),W=n.useMemo(()=>({style:{WebkitUserSelect:I===void 0?void 0:"none"},id:h,ref:a}),[h,I]),$=x===void 0?void 0:`${x}px`,F=n.useMemo(()=>{if(I!==void 0&&s!==void 0&&u===void 0)return`min(${I}px, ${s.pct}%)`;if(b!==void 0)return`${b}px`},[s,I,b,u]);return{sliderProps:O,panelProps:W,panelMinSize:$,panelMaxSize:F,resizing:j}}function Me(d){const{onMove:c,onMoveEnd:s,onKeyMove:i}=d??{},h=n.useRef(null),a=n.useRef(void 0),v=n.useRef(void 0),R=n.useCallback(()=>{v.current!==void 0&&(v.current=void 0,s==null||s())},[s]);return{moveableProps:n.useMemo(()=>({onPointerDown:o=>{if(o.button!==0||o.ctrlKey)return;const u=h.current;if(!u)return;const f=u.getBoundingClientRect(),j=o.clientX-f.left;v.current=j,o.preventDefault(),u.setPointerCapture(o.pointerId)},onPointerMove:o=>{const u=v.current;if(u===void 0)return;const f=h.current;if(!f)return;const j=f.getBoundingClientRect(),M=o.clientX-u-j.left;o.preventDefault(),c==null||c(M)},onPointerUp:R,onPointerCancel:R,onKeyDown:o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowLeft":o.preventDefault(),i==null||i(-1);break;case"ArrowRight":o.preventDefault(),i==null||i(1);break}},ref:o=>{var f;if(h.current=o,(f=a.current)==null||f.call(a),a.current=void 0,!o)return;const u=j=>{j.preventDefault()};o.addEventListener("touchstart",u),a.current=()=>{o.removeEventListener("touchstart",u)}}}),[i,c,R])}}function ke(){return e.jsxs(Z,{className:r.tree,children:[e.jsx(t,{content:"Guides",children:e.jsxs(t,{content:"Tree",children:[e.jsx(t,{content:"Guide 4"}),e.jsx(t,{content:"Guide 3"}),e.jsx(t,{content:"Guide 2"}),e.jsx(t,{content:"Guide 1",lockAction:!0})]})}),e.jsxs(t,{content:"Other",children:[e.jsx(t,{content:"Object 2",children:e.jsx(t,{content:"Path 3"})}),e.jsx(t,{content:"Object 1",visibilityAction:!0})]}),e.jsxs(t,{content:"Road",children:[e.jsx(t,{content:"Parking lot access"}),e.jsx(t,{content:"Site access",lockAction:!0,visibilityAction:!0})]}),e.jsx(t,{content:"Parking lot",children:e.jsxs(t,{content:"Parking area",children:[e.jsx(t,{content:"Bay point 2"}),e.jsx(t,{content:"Bay point 1"}),e.jsx(t,{content:"Space point 1"}),e.jsx(t,{content:"Path 6"})]})}),e.jsx(t,{content:"Building",children:e.jsx(t,{content:"Building area",children:e.jsx(t,{content:"Path 5"})})}),e.jsx(t,{content:"Sewer",children:e.jsx(t,{content:"Run off pipe",children:e.jsx(t,{content:"Path 4"})})}),e.jsx(t,{content:"Project boundary",children:e.jsx(t,{content:"Property area",children:e.jsx(t,{content:"Path 1"})})}),e.jsx(t,{content:"Map",children:e.jsx(t,{content:"Location",children:e.jsx(t,{content:"Terrain"})})})]})}function t(d){const c=n.Children.count(d.children)>0,[s,i]=n.useState(!0);return e.jsx(ee,{content:e.jsxs(e.Fragment,{children:[e.jsx(te,{onClick:()=>i(h=>!h)}),e.jsx(z,{href:w,style:{display:"inline"}}),e.jsx(ne,{children:d.content}),e.jsxs("div",{style:{display:"flex",gap:4,marginInlineStart:"auto"},children:[e.jsx(S,{className:r.action,icon:se,label:"Lock",variant:"ghost","aria-hidden":!d.lockAction}),e.jsx(S,{className:r.action,icon:oe,label:"Show",variant:"ghost","aria-hidden":!d.visibilityAction})]})]}),expanded:c?s:void 0,children:s?d.children:void 0})}function Ce(){const[d,c]=n.useState(!1),s=n.useRef(null),i=n.useRef(null),h=d?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx(S,{className:r.shiftIconRight,icon:ie,label:"Close",variant:"ghost",onClick:()=>{var a;B.flushSync(()=>c(!1)),(a=i.current)==null||a.focus()}})]}):e.jsx(S,{className:r.shiftIconRight,icon:D,label:"Search",variant:"ghost",onClick:()=>{var a;B.flushSync(()=>c(!0)),(a=s.current)==null||a.focus()}});return e.jsxs("div",{className:r.subheader,children:[e.jsx(ce.h3,{className:r.subheaderTitle,tabIndex:-1,ref:i,render:d?e.jsx(T,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),d?e.jsxs(J,{className:r.searchInput,children:[e.jsx(Q,{href:D}),e.jsx(Y,{placeholder:"Search",ref:s})]}):null,e.jsx("div",{className:r.subheaderActions,children:h})]})}function Ne(){return e.jsxs(X,{children:[e.jsx(H,{render:e.jsx(S,{icon:ae,label:"Filter",variant:"ghost"})}),e.jsxs(U,{style:{minInlineSize:164},children:[e.jsx(m,{children:"Show all"}),e.jsx(m,{children:"Guides"}),e.jsx(m,{children:"Other"}),e.jsx(m,{children:"Roadway"}),e.jsx(m,{children:"Parking"}),e.jsx(m,{children:"Building"}),e.jsx(m,{children:"Dry utility"}),e.jsx(m,{children:"Stormwater"}),e.jsx(m,{children:"Sewer"}),e.jsx(m,{children:"Boundary"}),e.jsx(m,{children:"Map"})]})]})}export{ut as default,dt as meta};
