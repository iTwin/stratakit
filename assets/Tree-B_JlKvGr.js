import{p as o,b as c}from"./index-DDCMeoDP.js";import{a$ as H,a5 as $,a9 as z,aa as g,ab as W,ah as q,O as J,E as F,F as S,G as A,J as K,al as Q,K as P,Q as U,l as v,d as h,b0 as p,b1 as Z,o as j,I as L,a3 as _,b as X,b2 as Y,b3 as ee,b4 as oe}from"./~utils-BFvLGhFO.js";import{C as te,a as re,u as se,b as ne}from"./P2CTZE2T-CD5SbesH.js";import{c as ae,a as ie,b as le,e as ce,C as ue}from"./ITI7HKP4-Bz26jSBL.js";import{L as de,e as k,f as N,d as me,D as xe,a as fe,b as ve}from"./DropdownMenu-Chsg5Zfp.js";function he(e={}){const r=H(e);return o.jsx($,{value:r,children:e.children})}function be(e={}){var r;const t=(r=e.store)==null?void 0:r.getState();return ae(z(W({},e),{orientation:g(e.orientation,t==null?void 0:t.orientation,"horizontal"),focusLoop:g(e.focusLoop,t==null?void 0:t.focusLoop,!0)}))}function pe(e,r,t){return ie(e,r,t)}function je(e={}){const[r,t]=q(be,e);return pe(r,t,e)}var I=J([re],[te]),Ce=I.useContext,we=I.useProviderContext,De=I.ScopedContextProvider,Pe="div",Ie=S(function(r){var t=r,{store:n,orientation:s,virtualFocus:d,focusLoop:a,rtl:m}=t,l=K(t,["store","orientation","virtualFocus","focusLoop","rtl"]);const C=we();n=n||C;const x=je({store:n,orientation:s,virtualFocus:d,focusLoop:a,rtl:m}),b=x.useState(u=>u.orientation==="both"?void 0:u.orientation);return l=Q(l,u=>o.jsx(De,{value:x,children:u}),[x]),l=P({role:"toolbar","aria-orientation":b},l),l=le(P({store:x},l)),l}),Te=F(function(r){const t=Ie(r);return A(Pe,t)}),ye="button",ge=S(function(r){var t=r,{store:n}=t,s=K(t,["store"]);const d=Ce();return n=n||d,s=se(P({store:n},s)),s}),ke=U(F(function(r){const t=ge(r);return A(ye,t)}));const T=c.createContext(void 0),Oe=v((e,r)=>{const{"aria-level":t,selected:n,expanded:s,icon:d,unstable_decorations:a,label:m,description:l,actions:C,error:x,onSelectedChange:b,onExpandedChange:u,onClick:R,onKeyDown:B,...E}=e,O=i=>{n!==void 0&&(i.stopPropagation(),b==null||b(!n))},V=i=>{i.altKey||i.ctrlKey||i.metaKey||i.shiftKey||s!==void 0&&(i.key==="ArrowRight"||i.key==="ArrowLeft")&&(i.preventDefault(),u==null||u(i.key==="ArrowRight"))},y=c.useId(),w=c.useId(),D=c.useId(),f=x?o.jsx(Y,{}):d,G=c.useMemo(()=>{const i=[];return l&&i.push(w),(a||f)&&i.push(D),i.length>0?i.join(" "):void 0},[a,f,D,l,w]);return o.jsx(T.Provider,{value:c.useMemo(()=>({level:t,expanded:s,selected:n,error:x}),[t,s,n,x]),children:o.jsx(ne,{render:o.jsx(j,{...E}),onClick:p(R,O),onKeyDown:p(B,V),role:"treeitem","aria-expanded":s,"aria-selected":n,"aria-labelledby":y,"aria-describedby":G,"aria-level":t,className:h("-tree-item",e.className),ref:r,children:o.jsxs(de,{"data-kiwi-expanded":s,"data-kiwi-selected":n,"data-kiwi-error":x?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":t},role:void 0,children:[o.jsxs(k,{children:[o.jsx(Z,{align:l?"block":void 0,children:o.jsx(Ke,{onClick:()=>{s!==void 0&&(u==null||u(!s))}})}),f||a?o.jsx(j,{className:"-tree-item-decoration",id:D,render:c.isValidElement(f)?f:typeof f=="string"?o.jsx(L,{href:f}):void 0,children:f?null:a}):null]}),o.jsx(N,{id:y,className:"-tree-item-content",children:m}),l?o.jsx(N,{id:w,className:"-tree-item-description",children:l}):void 0,o.jsx(k,{render:o.jsx(Ne,{children:C})})]})})})}),Ne=v((e,r)=>{const{children:t,...n}=e,s=c.Children.toArray(t).filter(Boolean),{error:d}=_(T),a=d?2:3;return o.jsxs(Te,{...n,onClick:p(e.onClick,m=>m.stopPropagation()),onKeyDown:p(e.onKeyDown,m=>m.stopPropagation()),className:h("-tree-item-actions-container",e.className),focusLoop:!1,ref:r,children:[s.slice(0,a-1),s.length===a?s[a-1]:null,s.length>a?o.jsx(Se,{children:s.slice(a-1)}):null]})}),Fe=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],M=c.createContext(!1);function Se({children:e}){const[r,t]=c.useState(!1),n=c.useRef(!1);return o.jsx(he,{placement:"right-start",children:o.jsxs(xe,{open:r,setOpen:c.useCallback(s=>{s&&!n.current?t(!0):t(!1)},[]),children:[o.jsx(fe,{onKeyDown:s=>{Fe.includes(s.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:o.jsx(Ae,{label:"More",icon:o.jsx(oe,{})})}),o.jsx(M.Provider,{value:!0,children:o.jsx(ve,{children:e})})]})})}const Ae=v((e,r)=>{const{error:t}=_(T),{visible:n=t?!0:void 0,label:s,icon:d,dot:a,...m}=e;return c.useContext(M)?o.jsx(me,{...m,label:s,icon:d,unstable_dot:a,ref:r}):o.jsx(ke,{render:o.jsx(X,{label:s,icon:d,inert:n===!1?!0:void 0,...m,dot:a,variant:"ghost",className:h("-tree-item-action",e.className),"data-kiwi-visible":n,ref:r})})}),Ke=v((e,r)=>o.jsx(j.span,{"aria-hidden":"true",...e,onClick:p(e.onClick,t=>t.stopPropagation()),className:h("-button","-icon-button","-ghost-aligner","-tree-item-expander",e.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":ee(),ref:r,children:o.jsx(Le,{})})),Le=v((e,r)=>o.jsx(L,{...e,render:o.jsx(j.svg,{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",render:e.render,children:o.jsx("path",{d:"M4.146 6.146a.5.5 0 0 1 .708 0L8 9.293l3.146-3.147a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708Z"})}),className:h("-tree-chevron",e.className),ref:r})),Ve=v((e,r)=>{const t=ce({orientation:"vertical"});return o.jsx(j.div,{role:"tree",...e,render:o.jsx(ue,{store:t}),className:h("-tree",e.className),ref:r,children:e.children})});export{Ve as T,Oe as a,Ae as b};
