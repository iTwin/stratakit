/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/

.-progress-bar {
	--牡uration: 1.5s;
	--牠asing: cubic-bezier(0.5, 0, 0.5, 1);

	@layer base {
		block-size: var(--progress-bar-size);
		inline-size: 100%;
		border-radius: 9999px;
		contain: strict;
		display: grid;
		background-color: var(--progress-bar-track-color);

		&::before {
			content: "";
			block-size: inherit;
			inline-size: var(--progress-bar-fill-size);
			border-radius: inherit;
			background-color: var(--progress-bar-fill-color);
		}
	}

	@layer modifiers {
		&:where([data-kiwi-tone="neutral"]) {
			--progress-bar-fill-color: var(--ids-color-icon-neutral-base);
			--progress-bar-track-color: var(--ids-color-border-page-base);
		}

		&:where([data-kiwi-tone="accent"]) {
			--progress-bar-fill-color: var(--ids-color-icon-accent-strong);
			--progress-bar-track-color: var(--ids-color-bg-accent-muted);
		}

		&:where([data-kiwi-size="small"]) {
			--progress-bar-size: 0.063rem;
		}

		&:where([data-kiwi-size="medium"]) {
			--progress-bar-size: 0.125rem;
		}

		&:where([data-kiwi-size="large"]) {
			--progress-bar-size: 0.25rem;
		}

		&:where([data-kiwi-variant="indeterminate"]) {
			--progress-bar-fill-size: 25%;

			&::before {
				animation: --progress-bar-animation-indeterminate var(--牠asing) var(--牡uration)
					infinite;

				@media (prefers-reduced-motion) {
					animation-timing-function: steps(4, end);
					animation-duration: 4s;
				}
			}
		}

		@media (forced-colors: active) {
			--progress-bar-fill-color: CanvasText;
			--progress-bar-track-color: CanvasText;

			&::before {
				outline: 2px solid Canvas;
			}
		}
	}
}

@keyframes --progress-bar-animation-indeterminate {
	from {
		translate: -100% 0; /* -100% moves the fill out of view on the left side. */
	}

	to {
		translate: 400% 0; /* The fill is 25% width of the container, multiplied by 4 moves the fill out of view on the right side. */
	}
}
