import{a as x,o as T}from"./chunk-QMGIS6GS-BaJhsRKI.js";import{n as ie,o as J,p as ce,q as L,r as y,B as le,v as Z,w as Q,m as D,f as W,u as de,c as A}from"./sun-C1yOhal6.js";import{r as ue,p as me,i as be,s as fe,v as ve,w as Ie}from"./~utils-B5tKETzh.js";import{a as ee,b as te,C as U,u as pe}from"./6VRAQV3D-B1s8_Px0.js";import{I as oe,H as xe,F as B,E as O,d as $,J as X,_ as C,b as f,G as Y,a1 as Se,f as H,c as z,a as K,j as q,P as G,Q as se,p as Ce,q as V,m as ne,u as Pe}from"./LMDWO4NN-CcJUQKmw.js";import{c as he,a as ge,b as Te}from"./5JTVDSTH-8DsCGhUL.js";import{u as Ee}from"./S43UC3DV-UdxBMsk4.js";import{c as _e}from"./VDHZ5F7K-DnQVInwg.js";import{u as Re}from"./RZ4GPYOB-C2aLgdAh.js";var ye=oe([me,te],[ue,ee]),we=ye.useContext;x.createContext(!1);x.createContext(null);function je(t={}){var r=t,{composite:s,combobox:e}=r,o=xe(r,["composite","combobox"]);const n=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],v=ie(o.store,J(s,n),J(e,n)),i=v?.getState(),m=he(B($({},o),{store:v,includesBaseElement:O(o.includesBaseElement,i?.includesBaseElement,!1),orientation:O(o.orientation,i?.orientation,"horizontal"),focusLoop:O(o.focusLoop,i?.focusLoop,!0)})),a=_e(),E=B($({},m.getState()),{selectedId:O(o.selectedId,i?.selectedId,o.defaultSelectedId),selectOnMove:O(o.selectOnMove,i?.selectOnMove,!0)}),c=ce(E,m,v);L(c,()=>y(c,["moves"],()=>{const{activeId:d,selectOnMove:b}=c.getState();if(!b||!d)return;const I=m.item(d);I&&(I.dimmed||I.disabled||c.setState("selectedId",I.id))}));let P=!0;L(c,()=>le(c,["selectedId"],(d,b)=>{if(!P){P=!0;return}s&&d.selectedId===b.selectedId||c.setState("activeId",d.selectedId)})),L(c,()=>y(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:b,renderedItems:I}=c.getState(),p=m.item(b);if(p&&!p.disabled&&!p.dimmed)c.setState("selectedId",p.id);else{const _=I.find(h=>!h.disabled&&!h.dimmed);c.setState("selectedId",_?.id)}})),L(c,()=>y(c,["renderedItems"],d=>{const b=d.renderedItems;if(b.length)return y(a,["renderedItems"],I=>{const p=I.renderedItems;p.some(h=>!h.tabId)&&p.forEach((h,j)=>{if(h.tabId)return;const M=b[j];M&&a.renderItem(B($({},h),{tabId:M.id}))})})}));let S=null;return L(c,()=>{const d=()=>{S=c.getState().selectedId},b=()=>{P=!1,c.setState("selectedId",S)};if(s&&"setSelectElement"in s)return X(y(s,["value"],d),y(s,["mounted"],b));if(e)return X(y(e,["selectedValue"],d),y(e,["mounted"],b))}),B($($({},m),c),{panels:a,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),m.move(d)}})}function ke(t,r,s){Y(r,[s.composite,s.combobox]),t=ge(t,r,s),Q(t,s,"selectedId","setSelectedId"),Q(t,s,"selectOnMove");const[e,o]=Z(()=>t.panels,{});return Y(o,[t,o]),Object.assign(x.useMemo(()=>C(f({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function De(t={}){const r=Ee(),s=we()||r;t=C(f({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:r});const[e,o]=Z(je,t);return ke(e,o,t)}var N=oe([te],[ee]),Me=N.useContext,Fe=N.useScopedContext,re=N.useProviderContext,Le=N.ContextProvider,ae=N.ScopedContextProvider,Oe="button",$e=z(function(r){var s=r,{store:e,getItem:o}=s,n=q(s,["store","getItem"]),v;const i=Fe();e=e||i,G(e,!1);const m=se(),a=n.id||m,E=Ce(n),c=x.useCallback(u=>{const w=C(f({},u),{dimmed:E});return o?o(w):w},[E,o]),P=n.onClick,S=V(u=>{P?.(u),!u.defaultPrevented&&e?.setSelectedId(a)}),d=e.panels.useState(u=>{var w;return(w=u.items.find(l=>l.tabId===a))==null?void 0:w.id}),b=m?n.shouldRegisterItem:!1,I=e.useState(u=>!!a&&u.activeId===a),p=e.useState(u=>!!a&&u.selectedId===a),_=e.useState(u=>!!e.item(u.activeId)),h=I||p&&!_,j=p||((v=n.accessibleWhenDisabled)!=null?v:!0);if(D(e.combobox||e.composite,"virtualFocus")&&(n=C(f({},n),{tabIndex:-1})),n=C(f({id:a,role:"tab","aria-selected":p,"aria-controls":d||void 0},n),{onClick:S}),e.composite){const u={id:a,accessibleWhenDisabled:j,store:e.composite,shouldRegisterItem:h&&b,rowId:n.rowId,render:n.render};n=C(f({},n),{render:T.jsx(U,C(f({},u),{render:e.combobox&&e.composite!==e.combobox?T.jsx(U,C(f({},u),{store:e.combobox})):u.render}))})}return n=pe(C(f({store:e},n),{accessibleWhenDisabled:j,getItem:c,shouldRegisterItem:b})),n}),Ne=Se(H(function(r){const s=$e(r);return K(Oe,s)}));function Be(t={}){const r=De(t);return T.jsx(Le,{value:r,children:t.children})}var Ve="div",We=z(function(r){var s=r,{store:e}=s,o=q(s,["store"]);const n=re();e=e||n,G(e,!1);const v=e.useState(i=>i.orientation==="both"?void 0:i.orientation);return o=ne(o,i=>T.jsx(ae,{value:e,children:i}),[e]),e.composite&&(o=f({focusable:!1},o)),o=f({role:"tablist","aria-orientation":v},o),o=Te(f({store:e},o)),o}),Ae=H(function(r){const s=We(r);return K(Ve,s)}),He="div",ze=z(function(r){var s=r,{store:e,unmountOnHide:o,tabId:n,getItem:v,scrollRestoration:i,scrollElement:m}=s,a=q(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const E=re();e=e||E,G(e,!1);const c=x.useRef(null),P=se(a.id),S=D(e.panels,()=>{var l;return n||((l=e?.panels.item(P))==null?void 0:l.tabId)}),d=D(e,l=>!!S&&l.selectedId===S),b=be({open:d}),I=D(b,"mounted"),p=x.useRef(new Map),_=V(()=>{const l=c.current;return l?m?typeof m=="function"?m(l):"current"in m?m.current:m:l:null});x.useEffect(()=>{var l,R;if(!i||!I)return;const g=_();if(!g)return;if(i==="reset"){g.scroll(0,0);return}if(!S)return;const k=p.current.get(S);g.scroll((l=k?.x)!=null?l:0,(R=k?.y)!=null?R:0);const F=()=>{p.current.set(S,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",F),()=>{g.removeEventListener("scroll",F)}},[i,I,S,_,e]);const[h,j]=x.useState(!1);x.useEffect(()=>{const l=c.current;if(!l)return;const R=fe(l);j(!!R.length)},[]);const M=x.useCallback(l=>{const R=C(f({},l),{id:P||l.id,tabId:n});return v?v(R):R},[P,n,v]),u=a.onKeyDown,w=V(l=>{if(u?.(l),l.defaultPrevented||!e?.composite)return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!g)return;const{selectedId:k}=e.getState(),F=g({activeId:k});F&&(l.preventDefault(),e.move(F))});return a=ne(a,l=>T.jsx(ae,{value:e,children:l}),[e]),a=C(f({id:P,role:"tabpanel","aria-labelledby":S||void 0},a),{children:o&&!I?null:a.children,ref:Pe(c,a.ref),onKeyDown:w}),a=ve(f({focusable:!e.composite&&!h},a)),a=Ie(f({store:b},a)),a=Re(C(f({store:e.panels},a),{getItem:M})),a}),Ke=H(function(r){const s=ze(r);return K(He,s)});function tt(t){const{defaultSelectedId:r,selectedId:s,setSelectedId:e,selectOnMove:o,children:n}=t;return T.jsx(Be,{defaultSelectedId:r,selectedId:s,setSelectedId:e,selectOnMove:o,children:n})}const ot=W((t,r)=>{const{tone:s="neutral",...e}=t,[o,n]=x.useState(!1);return x.useEffect(()=>{n(!0)},[]),T.jsx(Ae,{...e,"data-kiwi-initialized":o?"true":void 0,"data-kiwi-tone":s,className:A("-tab-list",t.className),ref:r})}),st=W((t,r)=>{const s=Me(),e=D(s,"selectedId"),o=D(s,"baseElement"),n=x.useCallback(({tab:i})=>{if(!o)return;const{left:m,width:a}=i.getBoundingClientRect(),E=m-o.getBoundingClientRect().left;o.style.setProperty("--tab-active-stripe-position",`${Math.round(E)}px`),o.style.setProperty("--tab-active-stripe-width",`${Math.round(a)}px`)},[o]),v=x.useCallback(i=>{!i||!o||e===t.id&&n({tab:i})},[n,o,t.id,e]);return T.jsx(Ne,{accessibleWhenDisabled:!0,...t,className:A("-tab",t.className),ref:de(r,v)})}),nt=W((t,r)=>T.jsx(Ke,{...t,className:A("-tab-panel",t.className),ref:r}));export{tt as T,st as a,nt as b,ot as c};
