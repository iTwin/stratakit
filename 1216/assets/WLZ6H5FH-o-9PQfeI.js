import{y as R,A as F,D as G,aa as J,E as Q,N as S,T as X,K as Y,L as Z,B as _,ac as D,as as ee}from"./~utils-_u2MSO01.js";import{a as m,p as I}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{u as M,m as te,o as ne,c as ae,d as y,s as b,e as oe,a as ie,b as P}from"./Q5W46E73-4FcSIHUg.js";import{a as se}from"./index-VRfNF7fP.js";var p=R(),O=p.useProviderContext,re=p.ContextProvider,ue=p.ScopedContextProvider,f=R([re],[ue]),Pe=f.useContext,pe=f.useScopedContext,he=f.useProviderContext,Ae=f.ContextProvider,le=f.ScopedContextProvider,be=m.createContext(void 0),Te=m.createContext(void 0),ce="div";function T(n,e){const t=setTimeout(e,n);return()=>clearTimeout(t)}function de(n){let e=requestAnimationFrame(()=>{e=requestAnimationFrame(n)});return()=>cancelAnimationFrame(e)}function j(...n){return n.join(", ").split(", ").reduce((e,t)=>{const i=t.endsWith("ms")?1:1e3,s=Number.parseFloat(t||"0s")*i;return s>e?s:e},0)}function me(n,e,t){return!t&&e!==!1&&(!n||!!e)}var fe=G(function({store:e,alwaysVisible:t,...i}){const s=O();e=e||s,J(e,!1);const u=m.useRef(null),a=Q(i.id),[o,h]=m.useState(null),l=e.useState("open"),x=e.useState("mounted"),c=e.useState("animated"),d=e.useState("contentElement"),C=M(e.disclosure,"contentElement");S(()=>{u.current&&e?.setContentElement(u.current)},[e]),S(()=>{let r;return e?.setState("animated",v=>(r=v,!0)),()=>{r!==void 0&&e?.setState("animated",r)}},[e]),S(()=>{if(c){if(!d?.isConnected){h(null);return}return de(()=>{h(l?"enter":x?"leave":null)})}},[c,d,l,x]),S(()=>{if(!e||!c||!o||!d)return;const r=()=>e?.setState("animating",!1),v=()=>se.flushSync(r);if(o==="leave"&&l||o==="enter"&&!l)return;if(typeof c=="number")return T(c,v);const{transitionDuration:N,animationDuration:k,transitionDelay:q,animationDelay:w}=getComputedStyle(d),{transitionDuration:L="0",animationDuration:U="0",transitionDelay:V="0",animationDelay:W="0"}=C?getComputedStyle(C):{},B=j(q,w,V,W),K=j(N,k,L,U),A=B+K;if(!A){o==="enter"&&e.setState("animated",!1),r();return}const $=1e3/60,z=Math.max(A-$,0);return T(z,v)},[e,c,d,C,l,o]),i=X(i,r=>I.jsx(le,{value:e,children:r}),[e]);const g=me(x,i.hidden,t),E=i.style,H=m.useMemo(()=>g?{...E,display:"none"}:E,[g,E]);return i={id:a,"data-open":l||void 0,"data-enter":o==="enter"||void 0,"data-leave":o==="leave"||void 0,hidden:g,...i,ref:Y(a?e.setContentElement:null,u,i.ref),style:H},Z(i)}),ve=F(function(e){const t=fe(e);return _(ce,t)}),je=F(function({unmountOnHide:e,...t}){const i=O(),s=t.store||i;return M(s,a=>!e||a?.mounted)===!1?null:I.jsx(ve,{...t})});function Se(n={}){const e=te(n.store,ne(n.disclosure,["contentElement","disclosureElement"])),t=e?.getState(),i=D(n.open,t?.open,n.defaultOpen,!1),s=D(n.animated,t?.animated,!1),u={open:i,animated:s,animating:!!s&&i,mounted:i,contentElement:D(t?.contentElement,null),disclosureElement:D(t?.disclosureElement,null)},a=ae(u,e);return y(a,()=>b(a,["animated","animating"],o=>{o.animated||a.setState("animating",!1)})),y(a,()=>oe(a,["open"],()=>{a.getState().animated&&a.setState("animating",!0)})),y(a,()=>b(a,["open","animating"],o=>{a.setState("mounted",o.open||o.animating)})),{...a,disclosure:n.disclosure,setOpen:o=>a.setState("open",o),show:()=>a.setState("open",!0),hide:()=>a.setState("open",!1),toggle:()=>a.setState("open",o=>!o),stopAnimation:()=>a.setState("animating",!1),setContentElement:o=>a.setState("contentElement",o),setDisclosureElement:o=>a.setState("disclosureElement",o)}}function De(n,e,t){return ee(e,[t.store,t.disclosure]),P(n,t,"open","setOpen"),P(n,t,"mounted","setMounted"),P(n,t,"animated"),Object.assign(n,{disclosure:t.disclosure})}function Re(n={}){const[e,t]=ie(Se,n);return De(e,t,n)}export{je as D,be as a,Pe as b,Re as c,fe as d,Se as e,De as f,he as g,le as h,me as i,Te as j,Ae as k,O as l,re as m,pe as u};
