import{y as R,f as F,j as I,e as J,g as K,i as Q,z as X,a2 as S,C as Y,m as Z,B as _,a5 as ee,S as C,W as te}from"./ExamplePreview.2rrH2oIg.js";import{r as m}from"./index.CtNveh2g.js";import{u as M,m as ne,o as ae,c as oe,s as y,f as A,g as ie,a as se,d as P}from"./Q5W46E73.QLDOdomH.js";var p=R(),O=p.useProviderContext,re=p.ContextProvider,ue=p.ScopedContextProvider,f=R([re],[ue]),ye=f.useContext,Pe=f.useScopedContext,pe=f.useProviderContext,he=f.ContextProvider,le=f.ScopedContextProvider,je=m.createContext(void 0),Ae=m.createContext(void 0),ce="div";function b(n,e){const t=setTimeout(e,n);return()=>clearTimeout(t)}function de(n){let e=requestAnimationFrame(()=>{e=requestAnimationFrame(n)});return()=>cancelAnimationFrame(e)}function T(...n){return n.join(", ").split(", ").reduce((e,t)=>{const i=t.endsWith("ms")?1:1e3,s=Number.parseFloat(t||"0s")*i;return s>e?s:e},0)}function me(n,e,t){return!t&&e!==!1&&(!n||!!e)}var fe=J(function({store:e,alwaysVisible:t,...i}){const s=O();e=e||s,Q(e,!1);const u=m.useRef(null),a=X(i.id),[o,h]=m.useState(null),l=e.useState("open"),D=e.useState("mounted"),c=e.useState("animated"),d=e.useState("contentElement"),x=M(e.disclosure,"contentElement");S(()=>{u.current&&e?.setContentElement(u.current)},[e]),S(()=>{let r;return e?.setState("animated",v=>(r=v,!0)),()=>{r!==void 0&&e?.setState("animated",r)}},[e]),S(()=>{if(c){if(!d?.isConnected){h(null);return}return de(()=>{h(l?"enter":D?"leave":null)})}},[c,d,l,D]),S(()=>{if(!e||!c||!o||!d)return;const r=()=>e?.setState("animating",!1),v=()=>ee.flushSync(r);if(o==="leave"&&l||o==="enter"&&!l)return;if(typeof c=="number")return b(c,v);const{transitionDuration:W,animationDuration:k,transitionDelay:q,animationDelay:w}=getComputedStyle(d),{transitionDuration:N="0",animationDuration:U="0",transitionDelay:V="0",animationDelay:z="0"}=x?getComputedStyle(x):{},B=T(q,w,V,z),L=T(W,k,N,U),j=B+L;if(!j){o==="enter"&&e.setState("animated",!1),r();return}const $=1e3/60,G=Math.max(j-$,0);return b(G,v)},[e,c,d,x,l,o]),i=Y(i,r=>I.jsx(le,{value:e,children:r}),[e]);const g=me(D,i.hidden,t),E=i.style,H=m.useMemo(()=>g?{...E,display:"none"}:E,[g,E]);return i={id:a,"data-open":l||void 0,"data-enter":o==="enter"||void 0,"data-leave":o==="leave"||void 0,hidden:g,...i,ref:Z(a?e.setContentElement:null,u,i.ref),style:H},_(i)}),ve=F(function(e){const t=fe(e);return K(ce,t)}),be=F(function({unmountOnHide:e,...t}){const i=O(),s=t.store||i;return M(s,a=>!e||a?.mounted)===!1?null:I.jsx(ve,{...t})});function Se(n={}){const e=ne(n.store,ae(n.disclosure,["contentElement","disclosureElement"])),t=e?.getState(),i=C(n.open,t?.open,n.defaultOpen,!1),s=C(n.animated,t?.animated,!1),u={open:i,animated:s,animating:!!s&&i,mounted:i,contentElement:C(t?.contentElement,null),disclosureElement:C(t?.disclosureElement,null)},a=oe(u,e);return y(a,()=>A(a,["animated","animating"],o=>{o.animated||a.setState("animating",!1)})),y(a,()=>ie(a,["open"],()=>{a.getState().animated&&a.setState("animating",!0)})),y(a,()=>A(a,["open","animating"],o=>{a.setState("mounted",o.open||o.animating)})),{...a,disclosure:n.disclosure,setOpen:o=>a.setState("open",o),show:()=>a.setState("open",!0),hide:()=>a.setState("open",!1),toggle:()=>a.setState("open",o=>!o),stopAnimation:()=>a.setState("animating",!1),setContentElement:o=>a.setState("contentElement",o),setDisclosureElement:o=>a.setState("disclosureElement",o)}}function Ce(n,e,t){return te(e,[t.store,t.disclosure]),P(n,t,"open","setOpen"),P(n,t,"mounted","setMounted"),P(n,t,"animated"),Object.assign(n,{disclosure:t.disclosure})}function Te(n={}){const[e,t]=se(Se,n);return Ce(e,t,n)}export{le as D,he as a,pe as b,Te as c,re as d,be as e,Pe as f,je as g,ye as h,fe as i,Se as j,Ce as k,me as l,Ae as m,O as u};
