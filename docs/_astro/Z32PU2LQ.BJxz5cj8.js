import{e as Q,f as Y,g as U,m as _e,a6 as je,a2 as j,ai as Le,V as P,C as q,j as x,O as K,a5 as de,M as me,T as I,L as A,l as Oe,I as ut,Q as it,aj as Be,ak as ct,al as at,ad as ue,R as Me,ag as ft,z as lt,K as qe,o as dt,h as ie,v as gt,N as vt}from"./ExamplePreview.CUsXfSM8.js";import{b as ce,c as Ne,r as mt,d as ht,e as Et,i as bt,g as xt,j as pt,k as G,u as yt,l as Pt}from"./U6HHPQDW.CQJRc0X9.js";import{r as f}from"./index.CtNveh2g.js";import{u as V,f as St,a as Dt}from"./Q5W46E73.Dvh7tqbY.js";import{c as wt,i as We,j as Ft,k as At,b as he,l as Ct,D as Rt,g as Tt,m as jt}from"./WLZ6H5FH.BZkUXEnV.js";var Lt="span",Ye=Q(function(t){return t={...t,style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px",...t.style}},t});Y(function(t){const n=Ye(t);return U(Lt,n)});var Mt="span",Nt=Q(function(t){return t={"data-focus-trap":"",tabIndex:0,"aria-hidden":!0,...t,style:{position:"fixed",top:0,left:0,...t.style}},t=Ye(t),t}),re=Y(function(t){const n=Nt(t);return U(Mt,n)}),Ht="div";function Vt(e){return P(e).body}function It(e,t){return t?typeof t=="function"?t(e):t:P(e).createElement("div")}function kt(e="id"){return`${e?`${e}-`:""}${Math.random().toString(36).slice(2,8)}`}function H(e){queueMicrotask(()=>{e?.focus()})}var ze=Q(function({preserveTabOrder:t,preserveTabOrderAnchor:n,portalElement:r,portalRef:u,portal:s=!0,...o}){const a=f.useRef(null),d=_e(a,o.ref),b=f.useContext(je),[l,C]=f.useState(null),[p,N]=f.useState(null),k=f.useRef(null),L=f.useRef(null),O=f.useRef(null),M=f.useRef(null);return j(()=>{const c=a.current;if(!c||!s){C(null);return}const m=It(c,r);if(!m){C(null);return}const E=m.isConnected;if(E||(b||Vt(c)).appendChild(m),m.id||(m.id=c.id?`portal/${c.id}`:kt()),C(m),Le(u,m),!E)return()=>{m.remove(),Le(u,null)}},[s,r,b,u]),j(()=>{if(!s||!t||!n)return;const m=P(n).createElement("span");return m.style.position="fixed",n.insertAdjacentElement("afterend",m),N(m),()=>{m.remove(),N(null)}},[s,t,n]),f.useEffect(()=>{if(!l||!t)return;let c=0;const m=E=>{if(!K(E))return;const g=E.type==="focusin";if(cancelAnimationFrame(c),g)return mt(l);c=requestAnimationFrame(()=>{ht(l,!0)})};return l.addEventListener("focusin",m,!0),l.addEventListener("focusout",m,!0),()=>{cancelAnimationFrame(c),l.removeEventListener("focusin",m,!0),l.removeEventListener("focusout",m,!0)}},[l,t]),o=q(o,c=>{if(c=x.jsx(je.Provider,{value:l||b,children:c}),!s)return c;if(!l)return x.jsx("span",{ref:d,id:o.id,style:{position:"fixed"},hidden:!0});c=x.jsxs(x.Fragment,{children:[t&&l&&x.jsx(re,{ref:L,"data-focus-trap":o.id,className:"__focus-trap-inner-before",onFocus:E=>{K(E,l)?H(ce()):H(k.current)}}),c,t&&l&&x.jsx(re,{ref:O,"data-focus-trap":o.id,className:"__focus-trap-inner-after",onFocus:E=>{K(E,l)?H(Ne()):H(M.current)}})]}),l&&(c=de.createPortal(c,l));let m=x.jsxs(x.Fragment,{children:[t&&l&&x.jsx(re,{ref:k,"data-focus-trap":o.id,className:"__focus-trap-outer-before",onFocus:E=>{!(E.relatedTarget===M.current)&&K(E,l)?H(L.current):H(Ne())}}),t&&x.jsx("span",{"aria-owns":l?.id,style:{position:"fixed"}}),t&&l&&x.jsx(re,{ref:M,"data-focus-trap":o.id,className:"__focus-trap-outer-after",onFocus:E=>{if(K(E,l))H(O.current);else{const g=ce();if(g===L.current){requestAnimationFrame(()=>{var B;return(B=ce())==null?void 0:B.focus()});return}H(g)}}})]});return p&&t&&(m=de.createPortal(m,p)),x.jsxs(x.Fragment,{children:[m,c]})},[l,b,s,o.id,t,p]),o={...o,ref:d},o}),pn=Y(function(t){const n=ze(t);return U(Ht,n)}),He=f.createContext(0);function $t({level:e,children:t}){const n=f.useContext(He),r=Math.max(Math.min(e||n+1,6),1);return x.jsx(He.Provider,{value:r,children:t})}var _t="div",Xe=Q(function({autoFocusOnShow:t=!0,...n}){return n=q(n,r=>x.jsx(Et.Provider,{value:t,children:r}),[t]),n});Y(function(t){const n=Xe(t);return U(_t,n)});function Ot(e,t){const r=P(e).createElement("button");return r.type="button",r.tabIndex=-1,r.textContent="Dismiss popup",Object.assign(r.style,{border:"0px",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}),r.addEventListener("click",t),e.prepend(r),()=>{r.removeEventListener("click",t),r.remove()}}function Bt(e){const t=f.useRef(null);return f.useEffect(()=>{if(!e){t.current=null;return}return me("mousedown",r=>{t.current=r.target},!0)},[e]),t}var ae=new WeakMap;function J(e,t,n){ae.has(e)||ae.set(e,new Map);const r=ae.get(e),u=r.get(t);if(!u)return r.set(t,n()),()=>{var a;(a=r.get(t))==null||a(),r.delete(t)};const s=n(),o=()=>{s(),u(),r.delete(t)};return r.set(t,o),()=>{r.get(t)===o&&(s(),r.set(t,u))}}function Ee(e,t,n){return J(e,t,()=>{const u=e.getAttribute(t);return e.setAttribute(t,n),()=>{u==null?e.removeAttribute(t):e.setAttribute(t,u)}})}function _(e,t,n){return J(e,t,()=>{const u=t in e,s=e[t];return e[t]=n,()=>{u?e[t]=s:delete e[t]}})}function ge(e,t){return e?J(e,"style",()=>{const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}):()=>{}}function qt(e,t,n){return e?J(e,t,()=>{const u=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{u?e.style.setProperty(t,u):e.style.removeProperty(t)}}):()=>{}}var Wt=["SCRIPT","STYLE"];function ve(e){return`__ariakit-dialog-snapshot-${e}`}function Yt(e,t){const n=P(t),r=ve(e);if(!n.body[r])return!0;do{if(t===n.body)return!1;if(t[r])return!0;if(!t.parentElement)return!1;t=t.parentElement}while(!0)}function zt(e,t,n){return Wt.includes(t.tagName)||!Yt(e,t)?!1:!n.some(r=>r&&A(t,r))}function be(e,t,n,r){for(let u of t){if(!u?.isConnected)continue;const s=t.some(d=>!d||d===u?!1:d.contains(u)),o=P(u),a=u;for(;u.parentElement&&u!==o.body;){if(r?.(u.parentElement,a),!s)for(const d of u.parentElement.children)zt(e,d,t)&&n(d,a);u=u.parentElement}}}function Xt(e,t){const{body:n}=P(t[0]),r=[];return be(e,t,s=>{r.push(_(s,ve(e),!0))}),I(_(n,ve(e),!0),()=>{for(const s of r)s()})}function Ke(e,...t){if(!e)return!1;const n=e.getAttribute("data-backdrop");return n==null?!1:n===""||n==="true"||!t.length?!0:t.some(r=>n===r)}function W(e="",t=!1){return`__ariakit-dialog-${t?"ancestor":"outside"}${e?`-${e}`:""}`}function Kt(e,t=""){return I(_(e,W(),!0),_(e,W(t),!0))}function Ge(e,t=""){return I(_(e,W("",!0),!0),_(e,W(t,!0),!0))}function xe(e,t){const n=W(t,!0);if(e[n])return!0;const r=W(t);do{if(e[r])return!0;if(!e.parentElement)return!1;e=e.parentElement}while(!0)}function Ve(e,t){const n=[],r=t.map(s=>s?.id);return be(e,t,s=>{Ke(s,...r)||n.unshift(Kt(s,e))},(s,o)=>{o.hasAttribute("data-dialog")&&o.id!==e||n.unshift(Ge(s,e))}),()=>{for(const s of n)s()}}function Gt(e){return e.tagName==="HTML"?!0:A(P(e).body,e)}function Qt(e,t){if(!e)return!1;if(A(e,t))return!0;const n=t.getAttribute("aria-activedescendant");if(n){const r=P(e).getElementById(n);if(r)return A(e,r)}return!1}function Ut(e,t){if(!("clientY"in e))return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function fe({store:e,type:t,listener:n,capture:r,domReady:u}){const s=Oe(n),o=V(e,"open"),a=f.useRef(!1);j(()=>{if(!o||!u)return;const{contentElement:d}=e.getState();if(!d)return;const b=()=>{a.current=!0};return d.addEventListener("focusin",b,!0),()=>d.removeEventListener("focusin",b,!0)},[e,o,u]),f.useEffect(()=>o?me(t,b=>{const{contentElement:l,disclosureElement:C}=e.getState(),p=b.target;!l||!p||!Gt(p)||A(l,p)||Qt(C,p)||p.hasAttribute("data-focus-trap")||Ut(b,l)||a.current&&!xe(p,l.id)||bt(p)||s(b)},r):void 0,[o,r])}function le(e,t){return typeof e=="function"?e(t):!!e}function Jt(e,t,n){const r=V(e,"open"),u=Bt(r),s={store:e,domReady:n,capture:!0};fe({...s,type:"click",listener:o=>{const{contentElement:a}=e.getState(),d=u.current;d&&ut(d)&&xe(d,a?.id)&&le(t,o)&&e.hide()}}),fe({...s,type:"focusin",listener:o=>{const{contentElement:a}=e.getState();a&&o.target!==P(a)&&le(t,o)&&e.hide()}}),fe({...s,type:"contextmenu",listener:o=>{le(t,o)&&e.hide()}})}var Ie=f.createContext({});function Zt(e){const t=f.useContext(Ie),[n,r]=f.useState([]),u=f.useCallback(a=>{var d;return r(b=>[...b,a]),I((d=t.add)==null?void 0:d.call(t,a),()=>{r(b=>b.filter(l=>l!==a))})},[t]);j(()=>St(e,["open","contentElement"],a=>{var d;if(a.open&&a.contentElement)return(d=t.add)==null?void 0:d.call(t,e)}),[e,t]);const s=f.useMemo(()=>({store:e,add:u}),[e,u]);return{wrapElement:f.useCallback(a=>x.jsx(Ie.Provider,{value:s,children:a}),[s]),nestedDialogs:n}}function en({attribute:e,contentId:t,contentElement:n,enabled:r}){const[u,s]=it(),o=f.useCallback(()=>{if(!r||!n)return!1;const{body:a}=P(n),d=a.getAttribute(e);return!d||d===t},[u,r,n,e,t]);return f.useEffect(()=>{if(!r||!t||!n)return;const{body:a}=P(n);if(o())return a.setAttribute(e,t),()=>a.removeAttribute(e);const d=new MutationObserver(()=>de.flushSync(s));return d.observe(a,{attributeFilter:[e]}),()=>d.disconnect()},[u,r,t,n,o,e]),o}function tn(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function nn(e,t,n){const r=en({attribute:"data-dialog-prevent-body-scroll",contentElement:e,contentId:t,enabled:n});f.useEffect(()=>{if(!r()||!e)return;const u=P(e),s=Be(e),{documentElement:o,body:a}=u,d=o.style.getPropertyValue("--scrollbar-width"),b=d?Number.parseInt(d,10):s.innerWidth-o.clientWidth,l=()=>qt(o,"--scrollbar-width",`${b}px`),C=tn(o),p=()=>ge(a,{overflow:"hidden",[C]:`${b}px`}),N=()=>{var L,O;const{scrollX:M,scrollY:c,visualViewport:m}=s,E=(L=m?.offsetLeft)!=null?L:0,g=(O=m?.offsetTop)!=null?O:0,B=ge(a,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(g))}px`,left:`${-(M-Math.floor(E))}px`,right:"0",[C]:`${b}px`});return()=>{B(),s.scrollTo({left:M,top:c,behavior:"instant"})}},k=ct()&&!at();return I(l(),k?N():p())},[r,e])}function rn(e,...t){if(!e)return!1;const n=e.getAttribute("data-focus-trap");return n==null?!1:t.length?n===""?!1:t.some(r=>n===r):!0}function Qe(){return"inert"in HTMLElement.prototype}function sn(e){return Ee(e,"aria-hidden","true")}function Ue(e,t){if(!("style"in e))return ue;if(Qe())return _(e,"inert",!0);const r=xt(e,!0).map(u=>{if(t?.some(o=>o&&A(o,u)))return ue;const s=J(u,"focus",()=>(u.focus=ue,()=>{delete u.focus}));return I(Ee(u,"tabindex","-1"),s)});return I(...r,sn(e),ge(e,{pointerEvents:"none",userSelect:"none",cursor:"default"}))}function on(e,t){const n=[],r=t.map(s=>s?.id);return be(e,t,s=>{Ke(s,...r)||rn(s,...r)||n.unshift(Ue(s,t))},s=>{s.hasAttribute("role")&&(t.some(o=>o&&A(o,s))||n.unshift(Ee(s,"role","none")))}),()=>{for(const s of n)s()}}function un({store:e,backdrop:t,alwaysVisible:n,hidden:r}){const u=f.useRef(null),s=wt({disclosure:e}),o=V(e,"contentElement");f.useEffect(()=>{const b=u.current,l=o;b&&l&&(b.style.zIndex=getComputedStyle(l).zIndex)},[o]),j(()=>{const b=o?.id;if(!b)return;const l=u.current;if(l)return Ge(l,b)},[o]);const a=We({ref:u,store:s,role:"presentation","data-backdrop":o?.id||"",alwaysVisible:n,hidden:r??void 0,style:{position:"fixed",top:0,right:0,bottom:0,left:0}});if(!t)return null;if(f.isValidElement(t))return x.jsx(Me,{...a,render:t});const d=typeof t!="boolean"?t:"div";return x.jsx(Me,{...a,render:x.jsx(d,{})})}function cn(e={}){return Ft(e)}function an(e,t,n){return At(e,t,n)}function fn(e={}){const[t,n]=Dt(cn,e);return an(t,n,e)}var ln="div",ke=vt();function dn(e){const t=qe();return!t||e&&A(e,t)?!1:!!G(t)}function $e(e,t=!1){if(!e)return null;const n="current"in e?e.current:e;return n?t?G(n)?n:null:n:null}var gn=Q(function({store:t,open:n,onClose:r,focusable:u=!0,modal:s=!0,portal:o=!!s,backdrop:a=!!s,hideOnEscape:d=!0,hideOnInteractOutside:b=!0,getPersistentElements:l,preventBodyScroll:C=!!s,autoFocusOnShow:p=!0,autoFocusOnHide:N=!0,initialFocus:k,finalFocus:L,unmountOnHide:O,unstable_treeSnapshotKey:M,...c}){const m=he(),E=f.useRef(null),g=fn({store:t||m,open:n,setOpen(i){if(i)return;const h=E.current;if(!h)return;const y=new Event("close",{bubbles:!1,cancelable:!0});r&&h.addEventListener("close",r,{once:!0}),h.dispatchEvent(y),y.defaultPrevented&&g.setOpen(!0)}}),{portalRef:B,domReady:S}=ft(o,c.portalRef),Je=c.preserveTabOrder,se=V(g,i=>Je&&!s&&i.mounted),R=lt(c.id),w=V(g,"open"),F=V(g,"mounted"),$=V(g,"contentElement"),Ze=Ct(F,c.hidden,c.alwaysVisible);nn($,R,C&&!Ze),Jt(g,b,S);const{wrapElement:pe,nestedDialogs:ye}=Zt(g);c=q(c,pe,[pe]),j(()=>{if(!w)return;const i=E.current,h=qe(i,!0);h&&h.tagName!=="BODY"&&(i&&A(i,h)||g.setDisclosureElement(h))},[g,w]),ke&&f.useEffect(()=>{if(!F)return;const{disclosureElement:i}=g.getState();if(!i||!dt(i))return;const h=()=>{let y=!1;const v=()=>{y=!0},D={capture:!0,once:!0};i.addEventListener("focusin",v,D),gt(i,"mouseup",()=>{i.removeEventListener("focusin",v,!0),!y&&Pt(i)})};return i.addEventListener("mousedown",h),()=>{i.removeEventListener("mousedown",h)}},[g,F]),f.useEffect(()=>{if(!F||!S)return;const i=E.current;if(!i)return;const h=Be(i),y=h.visualViewport||h,v=()=>{var D,T;const X=(T=(D=h.visualViewport)==null?void 0:D.height)!=null?T:h.innerHeight;i.style.setProperty("--dialog-viewport-height",`${X}px`)};return v(),y.addEventListener("resize",v),()=>{y.removeEventListener("resize",v)}},[F,S]),f.useEffect(()=>{if(!s||!F||!S)return;const i=E.current;if(!(!i||i.querySelector("[data-dialog-dismiss]")))return Ot(i,g.hide)},[g,s,F,S]),j(()=>{if(!Qe()||w||!F||!S)return;const i=E.current;if(i)return Ue(i)},[w,F,S]);const Z=w&&S;j(()=>{if(!R||!Z)return;const i=E.current;return Xt(R,[i])},[R,Z,M]);const Pe=Oe(l);j(()=>{if(!R||!Z)return;const{disclosureElement:i}=g.getState(),h=E.current,y=Pe()||[],v=[h,...y,...ye.map(D=>D.getState().contentElement)];return s?I(Ve(R,v),on(R,v)):Ve(R,[i,...v])},[R,g,Z,Pe,ye,s,M]);const Se=!!p,De=ie(p),[et,tt]=f.useState(!1);f.useEffect(()=>{if(!w||!Se||!S||!$?.isConnected)return;const i=$e(k,!0)||$.querySelector("[data-autofocus=true],[autofocus]")||pt($,!0,o&&se)||$,h=G(i);De(h?i:null)&&(tt(!0),queueMicrotask(()=>{i.focus(),ke&&h&&i.scrollIntoView({block:"nearest",inline:"nearest"})}))},[w,Se,S,$,k,o,se,De]);const ee=!!N,we=ie(N),[te,Fe]=f.useState(!1);f.useEffect(()=>{if(w)return Fe(!0),()=>Fe(!1)},[w]);const z=f.useCallback((i,h=!0)=>{const{disclosureElement:y}=g.getState();if(dn(i))return;let v=$e(L)||y;if(v?.id){const T=P(v),X=`[aria-activedescendant="${v.id}"]`,ne=T.querySelector(X);ne&&(v=ne)}if(v&&!G(v)){const T=v.closest("[data-dialog]");if(T?.id){const X=P(T),ne=`[aria-controls~="${T.id}"]`,Te=X.querySelector(ne);Te&&(v=Te)}}const D=v&&G(v);if(!D&&h){requestAnimationFrame(()=>z(i,!1));return}we(D?v:null)&&D&&v?.focus({preventScroll:!0})},[g,L,we]),oe=f.useRef(!1);j(()=>{if(w||!te||!ee)return;const i=E.current;oe.current=!0,z(i)},[w,te,S,ee,z]),f.useEffect(()=>{if(!te||!ee)return;const i=E.current;return()=>{if(oe.current){oe.current=!1;return}z(i)}},[te,ee,z]);const Ae=ie(d);f.useEffect(()=>!S||!F?void 0:me("keydown",h=>{if(h.key!=="Escape"||h.defaultPrevented)return;const y=E.current;if(!y||xe(y))return;const v=h.target;if(!v)return;const{disclosureElement:D}=g.getState();!!(v.tagName==="BODY"||A(y,v)||!D||A(D,v))&&Ae(h)&&g.hide()},!0),[g,S,F,Ae]),c=q(c,i=>x.jsx($t,{level:s?1:void 0,children:i}),[s]);const Ce=c.hidden,Re=c.alwaysVisible;c=q(c,i=>a?x.jsxs(x.Fragment,{children:[x.jsx(un,{store:g,backdrop:a,hidden:Ce,alwaysVisible:Re}),i]}):i,[g,a,Ce,Re]);const[nt,rt]=f.useState(),[st,ot]=f.useState();return c=q(c,i=>x.jsx(Rt,{value:g,children:x.jsx(Tt.Provider,{value:rt,children:x.jsx(jt.Provider,{value:ot,children:i})})}),[g]),c={id:R,"data-dialog":"",role:"dialog",tabIndex:u?-1:void 0,"aria-labelledby":nt,"aria-describedby":st,...c,ref:_e(E,c.ref)},c=Xe({...c,autoFocusOnShow:et}),c=We({store:g,...c}),c=yt({...c,focusable:u}),c=ze({portal:o,...c,portalRef:B,preserveTabOrder:se}),c});function vn(e,t=he){return Y(function(r){const u=t(),s=r.store||u;return V(s,a=>!r.unmountOnHide||a?.mounted||!!r.open)?x.jsx(e,{...r}):null})}var yn=vn(Y(function(t){const n=gn(t);return U(ln,n)}),he);export{yn as D,He as H,pn as P,gn as a,cn as b,vn as c,an as d,fn as u};
