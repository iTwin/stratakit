import{F as ae,a9 as le,aa as fe,B as W,z as de,c as ce,m as me,f as pe,_ as Ie,N as be,R as ge,ab as Ce,e as w,b as v,k as D,j as V,E as xe,u as Se,a2 as Pe,r as we,d as ve,ac as Ee,ad as F,C as O,ae as he,af as ye,ag as Te,ah as Re,ai as De}from"./RZ4GPYOB-Dq4Rw448.js";import{u as Fe}from"./KUU7WJ55-DC0G0Lza.js";import{a as p,n as Oe}from"./chunk-K6AXKMTT-B_QCnNdX.js";var E=ae([fe],[le]),Ae=E.useContext,Qe=E.useProviderContext,Xe=E.ContextProvider,Ze=E.ScopedContextProvider,_e=p.createContext(void 0),ke=p.createContext(void 0),ze={id:null};function $e(n,r,i=!1){const t=n.findIndex(f=>f.id===r);return[...n.slice(t+1),...i?[ze]:[],...n.slice(0,t)]}function et(n,r){return n.find(i=>!i.disabled)}function Ke(n,r){return r&&n.item(r)||null}function tt(n){const r=[];for(const i of n){const t=r.find(f=>{var c;return((c=f[0])==null?void 0:c.rowId)===i.rowId});t?t.push(i):r.push([i])}return r}function Le(n,r=!1){if(W(n))n.setSelectionRange(r?n.value.length:0,n.value.length);else if(n.isContentEditable){const i=de(n).getSelection();i==null||i.selectAllChildren(n),r&&(i==null||i.collapseToEnd())}}var A=Symbol("FOCUS_SILENTLY");function Ne(n){n[A]=!0,n.focus({preventScroll:!0})}function nt(n){const r=n[A];return delete n[A],r}function Y(n,r,i){return!(!r||r===i||!n.item(r.id))}var Be="button";function Me(n){return F(n)?!0:n.tagName==="INPUT"&&!Re(n)}function He(n,r=!1){const i=n.clientHeight,{top:t}=n.getBoundingClientRect(),f=Math.max(i*.875,i-40)*1.5,c=r?i-f+t:f+t;return n.tagName==="HTML"?c+n.scrollTop:c}function Ue(n,r=!1){const{top:i}=n.getBoundingClientRect();return r?i+n.clientHeight:i}function j(n,r,i,t=!1){var f;if(!r||!i)return;const{renderedItems:c}=r.getState(),x=De(n);if(!x)return;const h=He(x,t);let d,I;for(let b=0;b<c.length;b+=1){const o=d;if(d=i(b),!d)break;if(d===o)continue;const S=(f=Ke(r,d))==null?void 0:f.element;if(!S)continue;const g=Ue(S,t)-h,a=Math.abs(g);if(t&&g<=0||!t&&g>=0){I!==void 0&&I<a&&(d=o);break}I=a}return d}function Ve(n,r){return O(n)?!1:Y(r,n.target)}var je=ce(function(r){var i=r,{store:t,rowId:f,preventScrollOnKeyDown:c=!1,moveOnKeyPress:x=!0,tabbable:h=!1,getItem:d,"aria-setsize":I,"aria-posinset":b}=i,o=Ie(i,["store","rowId","preventScrollOnKeyDown","moveOnKeyPress","tabbable","getItem","aria-setsize","aria-posinset"]);const S=Ae();t=t||S;const l=be(o.id),g=p.useRef(null),a=p.useContext(ke),_=ge(o)&&!o.accessibleWhenDisabled,{rowId:y,baseElement:k,isActiveItem:G,ariaSetSize:q,ariaPosInSet:J,isTabbable:Q}=Ce(t,{rowId(e){if(f)return f;if(e&&a!=null&&a.baseElement&&a.baseElement===e.baseElement)return a.id},baseElement(e){return(e==null?void 0:e.baseElement)||void 0},isActiveItem(e){return!!e&&e.activeId===l},ariaSetSize(e){if(I!=null)return I;if(e&&a!=null&&a.ariaSetSize&&a.baseElement===e.baseElement)return a.ariaSetSize},ariaPosInSet(e){if(b!=null)return b;if(!e||!(a!=null&&a.ariaPosInSet)||a.baseElement!==e.baseElement)return;const s=e.renderedItems.filter(u=>u.rowId===y);return a.ariaPosInSet+s.findIndex(u=>u.id===l)},isTabbable(e){if(!(e!=null&&e.renderedItems.length))return!0;if(e.virtualFocus)return!1;if(h)return!0;if(e.activeId===null)return!1;const s=t==null?void 0:t.item(e.activeId);return s!=null&&s.disabled||!(s!=null&&s.element)?!0:e.activeId===l}}),X=p.useCallback(e=>{var s;const u=w(v({},e),{id:l||e.id,rowId:y,disabled:!!_,children:(s=e.element)==null?void 0:s.textContent});return d?d(u):u},[l,y,_,d]),z=o.onFocus,T=p.useRef(!1),Z=D(e=>{if(z==null||z(e),e.defaultPrevented||Ee(e)||!l||!t||Ve(e,t))return;const{virtualFocus:s,baseElement:u}=t.getState();if(t.setActiveId(l),F(e.currentTarget)&&Le(e.currentTarget),!s||!O(e)||Me(e.currentTarget)||!(u!=null&&u.isConnected))return;he()&&e.currentTarget.hasAttribute("data-autofocus")&&e.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),T.current=!0,e.relatedTarget===u||Y(t,e.relatedTarget)?Ne(u):u.focus()}),K=o.onBlurCapture,$=D(e=>{if(K==null||K(e),e.defaultPrevented)return;const s=t==null?void 0:t.getState();s!=null&&s.virtualFocus&&T.current&&(T.current=!1,e.preventDefault(),e.stopPropagation())}),L=o.onKeyDown,ee=V(c),te=V(x),ne=D(e=>{if(L==null||L(e),e.defaultPrevented||!O(e)||!t)return;const{currentTarget:s}=e,u=t.getState(),R=t.item(l),m=!!(R!=null&&R.rowId),P=u.orientation!=="horizontal",C=u.orientation!=="vertical",B=()=>!!(m||C||!u.baseElement||!W(u.baseElement)),M={ArrowUp:(m||P)&&t.up,ArrowRight:(m||C)&&t.next,ArrowDown:(m||P)&&t.down,ArrowLeft:(m||C)&&t.previous,Home:()=>{if(B())return!m||e.ctrlKey?t==null?void 0:t.first():t==null?void 0:t.previous(-1)},End:()=>{if(B())return!m||e.ctrlKey?t==null?void 0:t.last():t==null?void 0:t.next(-1)},PageUp:()=>j(s,t,t==null?void 0:t.up,!0),PageDown:()=>j(s,t,t==null?void 0:t.down)}[e.key];if(M){if(F(s)){const U=ye(s),re=C&&e.key==="ArrowLeft",ie=C&&e.key==="ArrowRight",oe=P&&e.key==="ArrowUp",se=P&&e.key==="ArrowDown";if(ie||se){const{length:ue}=Te(s);if(U.end!==ue)return}else if((re||oe)&&U.start!==0)return}const H=M();if(ee(e)||H!==void 0){if(!te(e))return;e.preventDefault(),t.move(H)}}}),N=p.useMemo(()=>({id:l,baseElement:k}),[l,k]);return o=xe(o,e=>Oe.jsx(_e.Provider,{value:N,children:e}),[N]),o=w(v({id:l,"data-active-item":G||void 0},o),{ref:Se(g,o.ref),tabIndex:Q?o.tabIndex:-1,onFocus:Z,onBlurCapture:$,onKeyDown:ne}),o=Fe(o),o=Pe(w(v({store:t},o),{getItem:X,shouldRegisterItem:l?o.shouldRegisterItem:!1})),we(w(v({},o),{"aria-setsize":q,"aria-posinset":J}))}),rt=me(pe(function(r){const i=je(r);return ve(Be,i)}));export{Ze as C,Xe as a,je as b,rt as c,Qe as d,et as e,$e as f,Ke as g,tt as h,Y as i,nt as s,Ae as u};
