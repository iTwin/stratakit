import{u as ie,c as se,a as ce}from"./B6FLPFJM-CEJVJaHh.js";import{c as ae}from"./Z32PU2LQ-BDjrUArl.js";import{y as le,D as _,aa as $,a2 as fe,ar as z,a5 as L,X as I,W as T,ao as de,N as me,T as ve,K as Q,ab as he,Y as B,J as q,A as Z,B as ee,G as Pe,ac as R}from"./~utils-BlN-5Gd1.js";import{h as Se,u as Ee}from"./U6HHPQDW-CqfSluKS.js";import{s as ge,c as we,b as j}from"./Q5W46E73-DdVN5Hco.js";import{a as d,p as J}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{P as xe,a as He}from"./JMU4N4M5-Df1HVy-H.js";var b=le([He],[xe]);b.useContext;b.useScopedContext;var W=b.useProviderContext,Le=b.ContextProvider,Ce=b.ScopedContextProvider;function N(o){return[o.clientX,o.clientY]}function K(o,e){const[t,n]=o;let i=!1;const c=e.length;for(let r=c,u=0,f=r-1;u<r;f=u++){const[s,P]=e[u],[S,m]=e[f],[,E]=e[f===0?r-1:f-1]||[0,0],v=(P-m)*(t-s)-(s-S)*(n-P);if(m<P){if(n>=m&&n<P){if(v===0)return!0;v>0&&(n===m?n>E&&(i=!i):i=!i)}}else if(P<m){if(n>P&&n<=m){if(v===0)return!0;v<0&&(n===m?n<E&&(i=!i):i=!i)}}else if(n===P&&(t>=S&&t<=s||t>=s&&t<=S))return!0}return i}function Te(o,e){const{top:t,right:n,bottom:i,left:c}=e,[r,u]=o,f=r<c?"left":r>n?"right":null,s=u<t?"top":u>i?"bottom":null;return[f,s]}function U(o,e){const t=o.getBoundingClientRect(),{top:n,right:i,bottom:c,left:r}=t,[u,f]=Te(e,t),s=[e];return u?(f!=="top"&&s.push([u==="left"?r:i,n]),s.push([u==="left"?i:r,n]),s.push([u==="left"?i:r,c]),f!=="bottom"&&s.push([u==="left"?r:i,c])):f==="top"?(s.push([r,n]),s.push([r,c]),s.push([i,c]),s.push([i,n])):(s.push([r,c]),s.push([r,n]),s.push([i,n]),s.push([i,c])),s}var Fe="div";function te(o,e,t,n){return Se(e)?!0:o?!!(B(e,o)||t&&B(t,o)||n?.some(i=>te(o,i,t))):!1}function Me({store:o,...e}){const[t,n]=d.useState(!1),i=o.useState("mounted");d.useEffect(()=>{i||n(!1)},[i]);const c=e.onFocus,r=q(f=>{c?.(f),!f.defaultPrevented&&n(!0)}),u=d.useRef(null);return d.useEffect(()=>ge(o,["anchorElement"],f=>{u.current=f.anchorElement}),[]),e={autoFocusOnHide:t,finalFocus:u,...e,onFocus:r},e}var V=d.createContext(null),Re=_(function({store:e,modal:t=!1,portal:n=!!t,hideOnEscape:i=!0,hideOnHoverOutside:c=!0,disablePointerEventsOnApproach:r=!!c,...u}){const f=W();e=e||f,$(e,!1);const s=d.useRef(null),[P,S]=d.useState([]),m=d.useRef(0),E=d.useRef(null),{portalRef:v,domReady:l}=fe(n,u.portalRef),g=z(),y=!!c,F=L(c),x=!!r,O=L(r),k=e.useState("open"),H=e.useState("mounted");d.useEffect(()=>{if(!l||!H||!y&&!x)return;const a=s.current;return a?I(T("mousemove",h=>{if(!e||!g())return;const{anchorElement:C,hideTimeout:A,timeout:re}=e.getState(),Y=E.current,[p]=h.composedPath(),D=C;if(te(p,a,D,P)){E.current=p&&D&&B(D,p)?N(h):null,window.clearTimeout(m.current),m.current=0;return}if(!m.current){if(Y){const G=N(h),ue=U(a,Y);if(K(G,ue)){if(E.current=G,!O(h))return;h.preventDefault(),h.stopPropagation();return}}F(h)&&(m.current=window.setTimeout(()=>{m.current=0,e?.hide()},A??re))}},!0),()=>clearTimeout(m.current)):void 0},[e,g,l,H,y,x,P,O,F]),d.useEffect(()=>{if(!l||!H||!x)return;const a=w=>{const h=s.current;if(!h)return;const C=E.current;if(!C)return;const A=U(h,C);if(K(N(w),A)){if(!O(w))return;w.preventDefault(),w.stopPropagation()}};return I(T("mouseenter",a,!0),T("mouseover",a,!0),T("mouseout",a,!0),T("mouseleave",a,!0))},[l,H,x,O]),d.useEffect(()=>{l&&(k||e?.setAutoFocusOnShow(!1))},[e,l,k]);const ne=de(k);d.useEffect(()=>{if(l)return()=>{ne.current||e?.setAutoFocusOnShow(!1)}},[e,l]);const M=d.useContext(V);me(()=>{if(t||!n||!H||!l)return;const a=s.current;if(a)return M?.(a)},[t,n,H,l]);const X=d.useCallback(a=>{S(h=>[...h,a]);const w=M?.(a);return()=>{S(h=>h.filter(C=>C!==a)),w?.()}},[M]);u=ve(u,a=>J.jsx(Ce,{value:e,children:J.jsx(V.Provider,{value:X,children:a})}),[e,X]),u={...u,ref:Q(s,u.ref)},u=Me({store:e,...u});const oe=e.useState(a=>t||a.autoFocusOnShow);return u=ie({store:e,modal:t,portal:n,autoFocusOnShow:oe,...u,portalRef:v,hideOnEscape(a){return he(i,a)?!1:(requestAnimationFrame(()=>{requestAnimationFrame(()=>{e?.hide()})}),!0)}}),u});ae(Z(function(e){const t=Re(e);return ee(Fe,t)}),W);var be="a",ye=_(function({store:e,showOnHover:t=!0,...n}){const i=W();e=e||i,$(e,!1);const c=Pe(n),r=d.useRef(0);d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useEffect(()=>T("mouseleave",l=>{if(!e)return;const{anchorElement:g}=e.getState();g&&l.target===g&&(window.clearTimeout(r.current),r.current=0)},!0),[e]);const u=n.onMouseMove,f=L(t),s=z(),P=q(v=>{if(u?.(v),c||!e||v.defaultPrevented||r.current||!s()||!f(v))return;const l=v.currentTarget;e.setAnchorElement(l),e.setDisclosureElement(l);const{showTimeout:g,timeout:y}=e.getState(),F=()=>{r.current=0,s()&&(e?.setAnchorElement(l),e?.show(),queueMicrotask(()=>{e?.setDisclosureElement(l)}))},x=g??y;x===0?F():r.current=window.setTimeout(F,x)}),S=n.onClick,m=q(v=>{S?.(v),e&&(window.clearTimeout(r.current),r.current=0)}),E=d.useCallback(v=>{if(!e)return;const{anchorElement:l}=e.getState();l?.isConnected||e.setAnchorElement(v)},[e]);return n={...n,ref:Q(E,n.ref),onMouseMove:P,onClick:m},n=Ee(n),n});Z(function(e){const t=ye(e);return ee(be,t)});function Be(o={}){var e;const t=(e=o.store)==null?void 0:e.getState(),n=se({...o,placement:R(o.placement,t?.placement,"bottom")}),i=R(o.timeout,t?.timeout,500),c={...n.getState(),timeout:i,showTimeout:R(o.showTimeout,t?.showTimeout),hideTimeout:R(o.hideTimeout,t?.hideTimeout),autoFocusOnShow:R(t?.autoFocusOnShow,!1)},r=we(c,n,o.store);return{...n,...r,setAutoFocusOnShow:u=>r.setState("autoFocusOnShow",u)}}function qe(o,e,t){return j(o,t,"timeout"),j(o,t,"showTimeout"),j(o,t,"hideTimeout"),ce(o,e,t)}export{Ce as H,Le as a,ye as b,Be as c,qe as d,Re as u};
