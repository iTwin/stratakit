import{p as e,b as i}from"./index-DDCMeoDP.js";import{_ as $,l as w,m as z,I as J,v as O,J as q,x as Q,L as U,s as y,f as v,h as I,c as j,A as _}from"./~utils-_YrhhzFf.js";import{f as X,P as Y}from"./BYC7LY2E-BAMzCens.js";import{a as Z}from"./MTZPJQMC-tgzdJb0L.js";import{P as ee,a as re,b as S,L as E}from"./QYJ6MIDR-C_1rV35T.js";import{S as A,b as L,D as oe,I as te}from"./Icon-BwjTL5l7.js";import{T as K}from"./Text-6KxiecpG.js";import{u as se,T as ae,I as N}from"./IconButton-BS10fTng.js";import{D as ie}from"./Divider-Diwm1XTj.js";import{B as ne,G as ce,u as le}from"./Button-Db9f0Kyp.js";import{c as de,g as D}from"./~hooks-q1Th06jS.js";import{c as ue}from"./P2CTZE2T-Dl7tcNn5.js";import{c as me,u as xe,a as ve,b as fe,C as he}from"./ITI7HKP4-OCRSR5BQ.js";import{u as pe}from"./YV4JVR4I-BEBdk2ZG.js";function je(r={}){var t;const o=(t=r.store)==null?void 0:t.getState();return me($(z({},r),{orientation:w(r.orientation,o==null?void 0:o.orientation,"horizontal"),focusLoop:w(r.focusLoop,o==null?void 0:o.focusLoop,!0)}))}function be(r,t,o){return xe(r,t,o)}function Ie(r={}){const[t,o]=pe(je,r);return be(t,o,r)}var De="div",Ce=O(function(t){var o=t,{store:c,orientation:d,virtualFocus:n,focusLoop:m,rtl:s}=o,a=Q(o,["store","orientation","virtualFocus","focusLoop","rtl"]);const u=se();c=c||u;const x=Ie({store:c,orientation:d,virtualFocus:n,focusLoop:m,rtl:s}),f=x.useState(h=>h.orientation==="both"?void 0:h.orientation);return a=U(a,h=>e.jsx(ae,{value:x,children:h}),[x]),a=y({role:"toolbar","aria-orientation":f},a),a=ve(y({store:x},a)),a}),Te=J(function(t){const o=Ce(t);return q(De,o)});function Pe(r={}){const t=X(r);return e.jsx(Z,{value:t,children:r.children})}const F=i.createContext(void 0),R=i.createContext(void 0),He=v((r,t)=>{const{label:o,items:c,expanded:d,onExpandedChange:n,...m}=r,s=i.useId(),[a,u]=de(!1,d,n);return e.jsx(Pe,{open:a,setOpen:u,children:e.jsx(I.div,{"data-kiwi-expanded":a,...m,className:j("-tree-error",r.className),ref:t,children:e.jsxs("div",{className:"-tree-error-container",children:[e.jsxs(ee,{className:"-tree-error-header",render:e.jsx(ne,{variant:"ghost"}),children:[e.jsx(A,{className:"-tree-error-icon"}),e.jsx(K,{id:s,className:"-tree-error-label",variant:"body-sm",children:o}),e.jsx(N,{inert:!0,render:e.jsx("span",{}),label:"Toggle",icon:e.jsx(L,{}),variant:"ghost"})]}),e.jsxs(Y,{portal:!1,modal:!1,wrapperProps:{style:{position:void 0,width:void 0}},updatePosition:()=>{},"aria-labelledby":s,children:[e.jsx(ie,{className:"-tree-error-divider",presentational:!0}),e.jsx("div",{className:"-tree-error-items",children:c})]})]})})})}),We=v((r,t)=>{const{treeItemId:o,message:c,actions:d,onDismiss:n,...m}=r,{setErrorId:s}=i.useContext(F)??{},a=i.useId();return i.useEffect(()=>{if(o)return s==null||s({itemId:o,errorId:a}),()=>{s==null||s({itemId:o,errorId:void 0})}},[o,a,s]),e.jsx(R.Provider,{value:i.useMemo(()=>({itemId:o}),[o]),children:e.jsxs(I.div,{...m,className:j("-tree-error-item",r.className),ref:t,children:[e.jsx(K,{id:a,variant:"body-sm",className:"-tree-error-item-message",children:c}),n&&e.jsx(N,{className:"-tree-error-item-dismiss",variant:"ghost",label:"Dismiss",icon:e.jsx(oe,{}),onClick:n}),e.jsx("div",{className:"-tree-error-item-actions",children:d})]})})}),$e=v((r,t)=>{const{itemId:o}=i.useContext(R)??{};return e.jsx(_,{href:o?`#${o}`:void 0,...r,ref:t})}),ze=v((r,t)=>e.jsx(_,{render:e.jsx("button",{...r}),ref:t})),Ne=i.createContext(void 0),Je=v((r,t)=>{const{id:o,"aria-level":c,selected:d,expanded:n,icon:m,unstable_decorations:s,label:a,description:u,actions:x,error:f,onSelectedChange:h,onExpandedChange:b,onClick:M,onKeyDown:B,...V}=r,{itemIdToErrorId:g}=i.useContext(F)??{},G=l=>{d!==void 0&&(l.stopPropagation(),h==null||h(!d))},H=l=>{l.altKey||l.ctrlKey||l.metaKey||l.shiftKey||n!==void 0&&(l.key==="ArrowRight"||l.key==="ArrowLeft")&&(l.preventDefault(),b==null||b(l.key==="ArrowRight"))},k=i.useId(),C=i.useId(),T=i.useId(),P=o&&g?g.get(o):void 0,p=f?e.jsx(A,{}):m,W=i.useMemo(()=>{const l=[];return u&&l.push(C),(s||p)&&l.push(T),P&&l.push(P),l.length>0?l.join(" "):void 0},[s,p,T,u,C,P]);return e.jsx(Ne.Provider,{value:i.useMemo(()=>({level:c,expanded:n,selected:d}),[c,n,d]),children:e.jsx(ue,{id:o,render:e.jsx(I,{...V}),onClick:D(M,G),onKeyDown:D(B,H),role:"treeitem","aria-expanded":n,"aria-selected":d,"aria-labelledby":k,"aria-describedby":W,"aria-level":c,className:j("-tree-item",r.className),ref:t,children:e.jsxs(re,{"data-kiwi-expanded":n,"data-kiwi-selected":d,"data-kiwi-error":f?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":c},role:void 0,children:[e.jsxs(S,{children:[e.jsx(ce,{align:u?"block":void 0,children:e.jsx(ge,{onClick:()=>{n!==void 0&&(b==null||b(!n))}})}),p||s?e.jsx(I,{className:"-tree-item-decoration",id:T,render:i.isValidElement(p)?p:typeof p=="string"?e.jsx(te,{href:p}):void 0,children:p?null:s}):null]}),e.jsx(E,{id:k,className:"-tree-item-content",children:a}),u?e.jsx(E,{id:C,className:"-tree-item-description",children:u}):void 0,e.jsx(S,{render:e.jsx(Fe,{children:x})})]})})})}),Fe=v((r,t)=>e.jsx(Te,{...r,onClick:D(r.onClick,o=>o.stopPropagation()),onKeyDown:D(r.onKeyDown,o=>o.stopPropagation()),className:j("-tree-item-actions",r.className),ref:t,children:r.children})),Oe=v((r,t)=>{const{visible:o,...c}=r;return e.jsx(N,{inert:o===!1?!0:void 0,...c,variant:"ghost",className:j("-tree-item-action",r.className),"data-kiwi-visible":o,ref:t})}),ge=v((r,t)=>e.jsx(I.span,{"aria-hidden":"true",...r,onClick:D(r.onClick,o=>o.stopPropagation()),className:j("-button","-icon-button","-ghost-aligner","-tree-item-expander",r.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":le(),ref:t,children:e.jsx(L,{})})),qe=v((r,t)=>{const{error:o,...c}=r,d=fe({orientation:"vertical"}),[n,m]=i.useState(new Map),s=i.useCallback(a=>{const{errorId:u}=a;m(x=>{const f=new Map(x);return u===void 0?f.delete(a.itemId)?f:x:f.set(a.itemId,u)})},[]);return e.jsxs(F.Provider,{value:i.useMemo(()=>({itemIdToErrorId:n,setErrorId:s}),[n,s]),children:[o,e.jsx(I.div,{role:"tree",...c,render:e.jsx(he,{store:d}),className:j("-tree",r.className),ref:t,children:r.children})]})});export{qe as T,Je as a,Oe as b,He as c,We as d,ze as e,$e as f};
