import{b as w,p as x}from"./index-DDCMeoDP.js";import{l as R,_ as z,m as T,n as ge,o as Se,p as Ve,q as $e,r as E,s as g,v as B,x as _,y as V,z as N,B as Ce,D as We,E as ye,F as Ue,G as qe,H as ze,I as $,J as W,K as Me,L as we,M as re,N as Ge,O as G,P as Je,Q as Qe,h as Xe,S as Oe,U as Ye,W as Ze,X as ae,Y as et,Z as tt,$ as nt,a0 as le,a1 as rt,a2 as ot,a3 as st,a4 as ut,f as J,c as X}from"./~utils-BFcooMC1.js";import{u as at,L as Pe,a as Ee,b as ce}from"./QYJ6MIDR-Bfd920oL.js";import{B as it}from"./Button-ORaLud1U.js";import{p as lt,K as ve}from"./Kbd-D8j2cpzV.js";import{a as ct,I as dt,C as ft}from"./Icon-Bp9Xi1cW.js";import{b as mt}from"./~hooks-D6zECIHT.js";import{C as Ae,a as Ie,u as ke,f as pt,b as vt}from"./P2CTZE2T-D7c_UAUb.js";import{H as bt,a as ht,c as xt,u as gt,b as St,d as Ct,e as yt}from"./BYC7LY2E-D0Jx6cGv.js";import{c as Mt,u as wt,a as Ot}from"./ITI7HKP4-D05z1dy4.js";import{i as Pt}from"./VGCJ63VH-B2hmVctR.js";import{t as Et,c as De,u as He,a as Te,m as At,o as It,p as kt,s as be,b as he,d as j}from"./YV4JVR4I-DB2LP8YT.js";import{u as Dt}from"./VEVQD5MH-gauS404f.js";import{u as Ht}from"./ASMQKSDT-CGgCQgY7.js";function Tt(t={}){var n;Et(t,t.store);const r=(n=t.store)==null?void 0:n.getState(),e={value:R(t.value,r==null?void 0:r.value,t.defaultValue,!1)},u=De(e,t.store);return z(T({},u),{setValue:o=>u.setState("value",o)})}function Ft(t,n,r){return ge(n,[r.store]),Te(t,r,"value","setValue"),t}function _t(t={}){const[n,r]=He(Tt,t);return Ft(n,r,t)}var Fe=Se([Ie],[Ae]),jt=Fe.useContext,Lt=Fe.useScopedContext;w.createContext(void 0);var Y=Se([Ie,ht],[Ae,bt]),de=Y.useContext,_e=Y.useScopedContext,oe=Y.useProviderContext,je=Y.ContextProvider,Nt=Y.ScopedContextProvider;w.createContext(void 0);function Kt(t={}){var n=t,{combobox:r,parent:e,menubar:u}=n,o=Ve(n,["combobox","parent","menubar"]);const s=!!u&&!e,a=At(o.store,kt(e,["values"]),It(r,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),d=a.getState(),c=Mt(z(T({},o),{store:a,orientation:R(o.orientation,d.orientation,"vertical")})),l=xt(z(T({},o),{store:a,placement:R(o.placement,d.placement,"bottom-start"),timeout:R(o.timeout,d.timeout,s?0:150),hideTimeout:R(o.hideTimeout,d.hideTimeout,0)})),b=z(T(T({},c.getState()),l.getState()),{initialFocus:R(d.initialFocus,"container"),values:R(o.values,d.values,o.defaultValues,{})}),f=De(b,c,l,a);return be(f,()=>he(f,["mounted"],i=>{i.mounted||f.setState("activeId",null)})),be(f,()=>he(e,["orientation"],i=>{f.setState("placement",i.orientation==="vertical"?"right-start":"bottom-start")})),z(T(T(T({},c),l),f),{combobox:r,parent:e,menubar:u,hideAll:()=>{l.hide(),e==null||e.hideAll()},setInitialFocus:i=>f.setState("initialFocus",i),setValues:i=>f.setState("values",i),setValue:(i,C)=>{i!=="__proto__"&&i!=="constructor"&&(Array.isArray(i)||f.setState("values",p=>{const m=p[i],y=$e(C,m);return y===m?p:z(T({},p),{[i]:y!==void 0&&y})}))}})}function Rt(t,n,r){return ge(n,[r.combobox,r.parent,r.menubar]),Te(t,r,"values","setValues"),Object.assign(gt(wt(t,n,r),n,r),{combobox:r.combobox,parent:r.parent,menubar:r.menubar})}function Bt(t={}){const n=de(),r=jt(),e=Dt();t=E(g({},t),{parent:t.parent!==void 0?t.parent:n,menubar:t.menubar!==void 0?t.menubar:r,combobox:t.combobox!==void 0?t.combobox:e});const[u,o]=He(Kt,t);return Rt(u,o,t)}var Vt="div",F="";function se(){F=""}function $t(t){const n=t.target;return n&&Ue(n)?!1:t.key===" "&&F.length?!0:t.key.length===1&&!t.ctrlKey&&!t.altKey&&!t.metaKey&&/^[\p{Letter}\p{Number}]$/u.test(t.key)}function Wt(t,n){if(qe(t))return!0;const r=t.target;return r?n.some(u=>u.element===r):!1}function Ut(t){return t.filter(n=>!n.disabled)}function ne(t,n){var r;const e=((r=t.element)==null?void 0:r.textContent)||t.children||"value"in t&&t.value;return e?ze(e).trim().toLowerCase().startsWith(n.toLowerCase()):!1}function qt(t,n,r){if(!r)return t;const e=t.find(u=>u.id===r);return!e||!ne(e,n)||F!==n&&ne(e,F)?t:(F=n,pt(t.filter(u=>ne(u,F)),r).filter(u=>u.id!==r))}var fe=B(function(n){var r=n,{store:e,typeahead:u=!0}=r,o=_(r,["store","typeahead"]);const s=ke();e=e||s,V(e,!1);const a=o.onKeyDownCapture,d=w.useRef(0),c=N(l=>{if(a==null||a(l),l.defaultPrevented||!u||!e)return;if(!$t(l))return se();const{renderedItems:b,items:f,activeId:i,id:C}=e.getState();let p=Ut(f.length>b.length?f:b);const m=Ce(l.currentTarget),y=`[data-offscreen-id="${C}"]`,v=m.querySelectorAll(y);for(const M of v){const D=M.ariaDisabled==="true"||"disabled"in M&&!!M.disabled;p.push({id:M.id,element:M,disabled:D})}if(v.length&&(p=We(p,M=>M.element)),!Wt(l,p))return se();l.preventDefault(),window.clearTimeout(d.current),d.current=window.setTimeout(()=>{F=""},500);const A=l.key.toLowerCase();F+=A,p=qt(p,A,i);const P=p.find(M=>ne(M,F));P?e.move(P.id):se()});return o=E(g({},o),{onKeyDownCapture:c}),ye(o)});$(function(n){const r=fe(n);return W(Vt,r)});var zt="div";function Gt(t){var n=t,{store:r}=n,e=_(n,["store"]);const[u,o]=w.useState(void 0),s=e["aria-label"],a=j(r,"disclosureElement"),d=j(r,"contentElement");return w.useEffect(()=>{const c=a;if(!c)return;const l=d;if(!l)return;s||l.hasAttribute("aria-label")?o(void 0):c.id&&o(c.id)},[s,a,d]),u}var Le=B(function(n){var r=n,{store:e,alwaysVisible:u,composite:o}=r,s=_(r,["store","alwaysVisible","composite"]);const a=oe();e=e||a,V(e,!1);const d=e.parent,c=e.menubar,l=!!d,b=Me(s.id),f=s.onKeyDown,i=e.useState(S=>S.placement.split("-")[0]),C=e.useState(S=>S.orientation==="both"?void 0:S.orientation),p=C!=="vertical",m=j(c,S=>!!S&&S.orientation!=="vertical"),y=N(S=>{if(f==null||f(S),!S.defaultPrevented){if(l||c&&!p){const I={ArrowRight:()=>i==="left"&&!p,ArrowLeft:()=>i==="right"&&!p,ArrowUp:()=>i==="bottom"&&p,ArrowDown:()=>i==="top"&&p}[S.key];if(I!=null&&I())return S.stopPropagation(),S.preventDefault(),e==null?void 0:e.hide()}if(c){const I={ArrowRight:()=>{if(m)return c.next()},ArrowLeft:()=>{if(m)return c.previous()},ArrowDown:()=>{if(!m)return c.next()},ArrowUp:()=>{if(!m)return c.previous()}}[S.key],L=I==null?void 0:I();L!==void 0&&(S.stopPropagation(),S.preventDefault(),c.move(L))}}});s=we(s,S=>x.jsx(Nt,{value:e,children:S}),[e]);const v=Gt(g({store:e},s)),A=e.useState("mounted"),P=Pt(A,s.hidden,u),M=P?E(g({},s.style),{display:"none"}):s.style;s=E(g({id:b,"aria-labelledby":v,hidden:P},s),{ref:re(b?e.setContentElement:null,s.ref),style:M,onKeyDown:y});const D=!!e.combobox;return o=o??!D,o&&(s=g({role:"menu","aria-orientation":C},s)),s=Ot(g({store:e,composite:o},s)),s=fe(g({store:e,typeahead:!D},s)),s});$(function(n){const r=Le(n);return W(zt,r)});var Jt="div",Qt=B(function(n){var r=n,{store:e,modal:u=!1,portal:o=!!u,hideOnEscape:s=!0,autoFocusOnShow:a=!0,hideOnHoverOutside:d,alwaysVisible:c}=r,l=_(r,["store","modal","portal","hideOnEscape","autoFocusOnShow","hideOnHoverOutside","alwaysVisible"]);const b=oe();e=e||b,V(e,!1);const f=w.useRef(null),i=e.parent,C=e.menubar,p=!!i,m=!!C&&!p;l=E(g({},l),{ref:re(f,l.ref)});const y=Le(g({store:e,alwaysVisible:c},l)),{"aria-labelledby":v}=y;l=_(y,["aria-labelledby"]);const[P,M]=w.useState(),D=e.useState("autoFocusOnShow"),S=e.useState("initialFocus"),U=e.useState("baseElement"),I=e.useState("renderedItems");w.useEffect(()=>{let H=!1;return M(O=>{var ee,me,pe;if(H||!D)return;if((ee=O==null?void 0:O.current)!=null&&ee.isConnected)return O;const te=w.createRef();switch(S){case"first":te.current=((me=I.find(Q=>!Q.disabled&&Q.element))==null?void 0:me.element)||null;break;case"last":te.current=((pe=[...I].reverse().find(Q=>!Q.disabled&&Q.element))==null?void 0:pe.element)||null;break;default:te.current=U}return te}),()=>{H=!0}},[e,D,S,I,U]);const L=p?!1:u,h=!!a,k=!!P||!!l.initialFocus||!!L,q=j(e.combobox||e,"contentElement"),K=j((i==null?void 0:i.combobox)||i,"contentElement"),Z=w.useMemo(()=>{if(!K||!q)return;const H=q.getAttribute("role"),O=K.getAttribute("role");if(!((O==="menu"||O==="menubar")&&H==="menu"))return K},[q,K]);return Z!==void 0&&(l=g({preserveTabOrderAnchor:Z},l)),l=Ct(E(g({store:e,alwaysVisible:c,initialFocus:P,autoFocusOnShow:h?k&&a:D||!!L},l),{hideOnEscape(H){return Je(s,H)?!1:(e==null||e.hideAll(),!0)},hideOnHoverOutside(H){const O=e==null?void 0:e.getState().disclosureElement;return(typeof d=="function"?d(H):d??(p?!0:m?O?!G(O):!0:!1))?H.defaultPrevented||!p||!O||(Ge(O,"mouseout",H),!G(O))?!0:(requestAnimationFrame(()=>{G(O)||e==null||e.hide()}),!1):!1},modal:L,portal:o,backdrop:p?!1:l.backdrop})),l=g({"aria-labelledby":v},l),l}),Xt=St($(function(n){const r=Qt(n);return W(Jt,r)}),oe);function Yt(t={}){const n=Bt(t);return x.jsx(je,{value:n,children:t.children})}var Zt="button";function en(t,n){return{ArrowDown:n==="bottom"||n==="top"?"first":!1,ArrowUp:n==="bottom"||n==="top"?"last":!1,ArrowRight:n==="right"?"first":!1,ArrowLeft:n==="left"?"first":!1}[t.key]}function xe(t,n){return!!(t!=null&&t.some(r=>!r.element||r.element===n?!1:r.element.getAttribute("aria-expanded")==="true"))}var tn=B(function(n){var r=n,{store:e,focusable:u,accessibleWhenDisabled:o,showOnHover:s}=r,a=_(r,["store","focusable","accessibleWhenDisabled","showOnHover"]);const d=oe();e=e||d,V(e,!1);const c=w.useRef(null),l=e.parent,b=e.menubar,f=!!l,i=!!b&&!f,C=Qe(a),p=()=>{const h=c.current;h&&(e==null||e.setDisclosureElement(h),e==null||e.setAnchorElement(h),e==null||e.show())},m=a.onFocus,y=N(h=>{if(m==null||m(h),C||h.defaultPrevented||(e==null||e.setAutoFocusOnShow(!1),e==null||e.setActiveId(null),!b)||!i)return;const{items:k}=b.getState();xe(k,h.currentTarget)&&p()}),v=j(e,h=>h.placement.split("-")[0]),A=a.onKeyDown,P=N(h=>{if(A==null||A(h),C||h.defaultPrevented)return;const k=en(h,v);k&&(h.preventDefault(),p(),e==null||e.setAutoFocusOnShow(!0),e==null||e.setInitialFocus(k))}),M=a.onClick,D=N(h=>{if(M==null||M(h),h.defaultPrevented||!e)return;const k=!h.detail,{open:q}=e.getState();(!q||k)&&((!f||k)&&e.setAutoFocusOnShow(!0),e.setInitialFocus(k?"first":"container")),f&&p()});a=we(a,h=>x.jsx(je,{value:e,children:h}),[e]),f&&(a=E(g({},a),{render:x.jsx(Xe.div,{render:a.render})}));const S=Me(a.id),U=j((l==null?void 0:l.combobox)||l,"contentElement"),I=f||i?Oe(U,"menuitem"):void 0,L=e.useState("contentElement");return a=E(g({id:S,role:I,"aria-haspopup":Ye(L,"menu")},a),{ref:re(c,a.ref),onFocus:y,onKeyDown:P,onClick:D}),a=yt(E(g({store:e,focusable:u,accessibleWhenDisabled:o},a),{showOnHover:h=>{if(!(()=>{if(typeof s=="function")return s(h);if(s!=null)return s;if(f)return!0;if(!b)return!1;const{items:Z}=b.getState();return i&&xe(Z)})())return!1;const K=i?b:l;return K&&K.setActiveId(h.currentTarget.id),!0}})),a=at(g({store:e,toggleOnClick:!f,focusable:u,accessibleWhenDisabled:o},a)),a=fe(g({store:e,typeahead:i},a)),a}),nn=$(function(n){const r=tn(n);return W(Zt,r)}),rn="div";function Ne(t){const n=t.relatedTarget;return(n==null?void 0:n.nodeType)===Node.ELEMENT_NODE?n:null}function on(t){const n=Ne(t);return n?tt(t.currentTarget,n):!1}var ie=Symbol("composite-hover");function sn(t){let n=Ne(t);if(!n)return!1;do{if(nt(n,ie)&&n[ie])return!0;n=n.parentElement}while(n);return!1}var Ke=B(function(n){var r=n,{store:e,focusOnHover:u=!0,blurOnHoverEnd:o=!!u}=r,s=_(r,["store","focusOnHover","blurOnHoverEnd"]);const a=ke();e=e||a,V(e,!1);const d=Ze(),c=s.onMouseMove,l=ae(u),b=N(m=>{if(c==null||c(m),!m.defaultPrevented&&d()&&l(m)){if(!G(m.currentTarget)){const y=e==null?void 0:e.getState().baseElement;y&&!et(y)&&y.focus()}e==null||e.setActiveId(m.currentTarget.id)}}),f=s.onMouseLeave,i=ae(o),C=N(m=>{var y;f==null||f(m),!m.defaultPrevented&&d()&&(on(m)||sn(m)||l(m)&&i(m)&&(e==null||e.setActiveId(null),(y=e==null?void 0:e.getState().baseElement)==null||y.focus()))}),p=w.useCallback(m=>{m&&(m[ie]=!0)},[]);return s=E(g({},s),{ref:re(p,s.ref),onMouseMove:b,onMouseLeave:C}),ye(s)});le($(function(n){const r=Ke(n);return W(rn,r)}));var un="div";function an(t,n,r){var e;if(!t)return!1;if(G(t))return!0;const u=n==null?void 0:n.find(d=>{var c;return d.element===r?!1:((c=d.element)==null?void 0:c.getAttribute("aria-expanded"))==="true"}),o=(e=u==null?void 0:u.element)==null?void 0:e.getAttribute("aria-controls");if(!o)return!1;const a=Ce(t).getElementById(o);return a?G(a)?!0:!!a.querySelector("[role=menuitem][aria-expanded=true]"):!1}var Re=B(function(n){var r=n,{store:e,hideOnClick:u=!0,preventScrollOnKeyDown:o=!0,focusOnHover:s,blurOnHoverEnd:a}=r,d=_(r,["store","hideOnClick","preventScrollOnKeyDown","focusOnHover","blurOnHoverEnd"]);const c=_e(!0),l=Lt();e=e||c||l,V(e,!1);const b=d.onClick,f=ae(u),i="hideAll"in e?e.hideAll:void 0,C=!!i,p=N(v=>{b==null||b(v),!(v.defaultPrevented||rt(v)||ot(v)||!i||v.currentTarget.getAttribute("aria-haspopup")==="menu")&&f(v)&&i()}),m=j(e,v=>"contentElement"in v?v.contentElement:null),y=Oe(m,"menuitem");return d=E(g({role:y},d),{onClick:p}),d=vt(g({store:e,preventScrollOnKeyDown:o},d)),d=Ke(E(g({store:e},d),{focusOnHover(v){const A=()=>typeof s=="function"?s(v):s??!0;if(!e||!A())return!1;const{baseElement:P,items:M}=e.getState();return C?(v.currentTarget.hasAttribute("aria-expanded")&&v.currentTarget.focus(),!0):an(P,M,v.currentTarget)?(v.currentTarget.focus(),!0):!1},blurOnHoverEnd(v){return typeof a=="function"?a(v):a??C}})),d}),ln=le($(function(n){const r=Re(n);return W(un,r)})),cn="div";function dn(t){return Array.isArray(t)?t.toString():t}function ue(t,n,r){if(n===void 0)return Array.isArray(t)?t:!!r;const e=dn(n);return Array.isArray(t)?r?t.includes(e)?t:[...t,e]:t.filter(u=>u!==e):r?e:t===e?!1:t}var fn=B(function(n){var r=n,{store:e,name:u,value:o,checked:s,defaultChecked:a,hideOnClick:d=!1}=r,c=_(r,["store","name","value","checked","defaultChecked","hideOnClick"]);const l=_e();e=e||l,V(e,!1);const b=st(a);w.useEffect(()=>{e==null||e.setValue(u,(i=[])=>b?ue(i,o,!0):i)},[e,u,o,b]),w.useEffect(()=>{s!==void 0&&(e==null||e.setValue(u,i=>ue(i,o,s)))},[e,u,o,s]);const f=_t({value:e.useState(i=>i.values[u]),setValue(i){e==null||e.setValue(u,()=>{if(s===void 0)return i;const C=ue(i,o,s);return!Array.isArray(C)||!Array.isArray(i)?C:ut(i,C)?i:C})}});return c=g({role:"menuitemcheckbox"},c),c=Ht(g({store:f,name:u,value:o,checked:s},c)),c=Re(g({store:e,hideOnClick:d},c)),c}),mn=le($(function(n){const r=fn(n);return W(cn,r)}));function In(t){const{children:n,placement:r,open:e,setOpen:u,defaultOpen:o}=t;return x.jsx(Yt,{placement:r,defaultOpen:o,open:e,setOpen:u,children:n})}const kn=J((t,n)=>{const r=mt(de());return x.jsx(Xt,{portal:!0,unmountOnHide:!0,...t,gutter:4,style:{...r.style,...t.style},wrapperProps:r.wrapperProps,className:X("-dropdown-menu",t.className),ref:n})}),Dn=J((t,n)=>{const{accessibleWhenDisabled:r=!0,children:e,...u}=t,o=j(de(),s=>s==null?void 0:s.open);return x.jsx(nn,{accessibleWhenDisabled:!0,render:x.jsxs(it,{accessibleWhenDisabled:r,children:[e,x.jsx(ct,{})]}),...u,className:X("-dropdown-menu-button",t.className),"data-has-popover-open":o||void 0,ref:n})}),Hn=J((t,n)=>{const{label:r,shortcuts:e,icon:u,...o}=t;return x.jsxs(ln,{accessibleWhenDisabled:!0,...o,render:x.jsx(Ee,{render:t.render}),className:X("-dropdown-menu-item",t.className),ref:n,children:[u?x.jsx(Be,{icon:u}):null,x.jsx(Pe,{children:r}),e?x.jsx(pn,{shortcuts:e}):null]})}),pn=J((t,n)=>{const{shortcuts:r,...e}=t,u=w.useMemo(()=>r.split("+").map(o=>({key:o.trim(),isSymbol:o in lt})),[r]);return x.jsx(ce,{...e,className:X("-dropdown-menu-item-shortcuts",t.className),ref:n,children:u.map(({key:o,isSymbol:s},a)=>s?x.jsx(ve,{variant:"ghost",symbol:o},`${o+a}`):x.jsx(ve,{variant:"ghost",children:o},`${o+a}`))})}),Be=J((t,n)=>{const{icon:r,...e}=t;return x.jsx(ce,{render:x.jsx(dt,{href:typeof r=="string"?r:void 0,render:w.isValidElement(r)?r:void 0}),...e,ref:n})}),Tn=J((t,n)=>{const{label:r,icon:e,...u}=t;return x.jsxs(mn,{accessibleWhenDisabled:!0,value:t.defaultChecked?"on":void 0,...u,render:x.jsx(Ee,{render:t.render}),className:X("-dropdown-menu-item",t.className),ref:n,children:[e?x.jsx(Be,{icon:e}):null,x.jsx(Pe,{children:r}),x.jsx(ce,{render:x.jsx(ft,{className:"-dropdown-menu-checkmark"})})]})});export{In as D,Dn as a,kn as b,Hn as c,Tn as d};
