import{w as ae}from"./LMDWO4NN-CLzxyYou.js";import{t as re,a as n,n as e}from"./chunk-K6AXKMTT-BW7jlo3W.js";import{a as F}from"./index-DZwx3Qa0.js";import{B as le}from"./Button-DSKfRtBY.js";import{D as V,a as $,b as U,c as I,d as ie}from"./DropdownMenu-xsYh-6Ir.js";import{I as y}from"./Icon-B-edqgdk.js";import{I as T}from"./IconButton-qbfB8v1f.js";import{S as oe,H as ce}from"./Select-B76PFSwI.js";import{T as O,a as de,b as G,c as ue}from"./Tabs-ADZm_mel.js";import{T as D}from"./Text-BWJHrdBm.js";import{T as fe,a as pe,b as me}from"./TextBox-CLbjUTRF.js";import{V as B}from"./VisuallyHidden-B1F2oxdM.js";import{T as he,a as be,b as E}from"./Tree-CEfcZhqx.js";import{p as R}from"./placeholder-FokjAKzO.js";import{p as xe,l as Ce,h as je,m as ge,s as H,d as Se,f as _e}from"./visibility-hide-Djz6sf1_.js";import{s as Ie}from"./visibility-show-tv61uSwc.js";import"./index-CsTEVwxQ.js";import"./X5NMLKT6-Bu45KwEf.js";import"./KUU7WJ55-cDv2oETi.js";import"./LVA2YJMS-CXeVGb3U.js";import"./~utils-lUdJarWT.js";import"./XL7CSKGW-D9KRXKHa.js";import"./Kbd-BytxeBzh.js";import"./~hooks-DEHNUAEu.js";import"./YV4JVR4I-CRyqA3iN.js";import"./P2CTZE2T-Xhnj7g45.js";import"./RZ4GPYOB-CjSWlnaE.js";import"./BYC7LY2E-D-vnM78m.js";import"./VGCJ63VH-DhYgQ14u.js";import"./XX67R432-CiZmPxWN.js";import"./AOQQTIBO-BKnvA82o.js";import"./MTZPJQMC-BUgWnBw8.js";import"./ITI7HKP4-DWuTEtbE.js";import"./C3IKGW5T-8QdXANBR.js";import"./VEVQD5MH-DcsPqdXI.js";import"./P4IRICAX-Ctrmtw5w.js";import"./ASMQKSDT-XJ2v5shq.js";import"./BOLVLGVE-DjWxKfuZ.js";import"./Tooltip-j5Oeclwp.js";import"./tooltip-anchor-O4jffasm.js";import"./Field-CfYCTW4i.js";import"./~utils.ListItem-CWxmgkNe.js";import"./~utils-CHOcCWb4.js";import"./~hooks-C1JQvvHo.js";const ve="_appLayout_cf09u_5",Ae="_header_cf09u_22",Pe="_platformBar_cf09u_32",Me="_logo_cf09u_38",ye="_tools_cf09u_48",Re="_leftPanel_cf09u_58",Ne="_panelHeader_cf09u_70",Te="_panelTitleWrapper_cf09u_78",Be="_panelCaption_cf09u_82",ze="_shiftIconRight_cf09u_86",ke="_subheader_cf09u_90",we="_subheaderTitle_cf09u_101",Le="_searchInput_cf09u_106",Ee="_subheaderActions_cf09u_110",De="_tabList_cf09u_114",Ke="_emptyState_cf09u_119",Fe="_canvasWrapper_cf09u_128",Oe="_canvas_cf09u_128",Ge="_splitter_cf09u_165",He="_tabPanel_cf09u_211",Xe="_tree_cf09u_219",We="_action_cf09u_223",Ve="_actionIcon_cf09u_229",$e="_slider_cf09u_240",h={appLayout:ve,header:Ae,platformBar:Pe,logo:Me,tools:ye,leftPanel:Re,panelHeader:Ne,panelTitleWrapper:Te,panelCaption:Be,shiftIconRight:ze,subheader:ke,subheaderTitle:we,searchInput:Le,subheaderActions:Ee,tabList:De,emptyState:Ke,canvasWrapper:Fe,canvas:Oe,splitter:Ge,tabPanel:He,tree:Xe,action:We,actionIcon:Ve,slider:$e},Z="Kiwi sandbox",qt=()=>[{title:Z}],Qt=ae(function(){const[s,a]=re(),r=s.get("tree")==="empty"?"epoch-2":"epoch-1",f=n.useCallback(i=>{a(m=>(i==="epoch-2"?m.set("tree","empty"):m.delete("tree"),m))},[a]),p=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),c=n.useId();return e.jsxs(Ue,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:h.panelHeader,children:[e.jsxs("div",{children:[e.jsx(B,{render:i=>e.jsx("label",{...i,htmlFor:c}),children:"Choose Model"}),e.jsx(oe,{className:h.panelTitleWrapper,children:e.jsx(ce,{id:c,variant:"ghost",defaultValue:r,onChange:i=>f(i.target.value),children:Object.entries(p).map(([i,m])=>e.jsx("option",{value:i,children:m},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(B,{render:i=>e.jsx("h2",{...i}),children:p[r]}),e.jsx("p",{className:h.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:h.actions,children:e.jsx(T,{className:h.shiftIconRight,icon:xe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(lt,{children:e.jsxs(rt,{children:[e.jsx(st,{}),e.jsx(O,{tabId:"simple",className:h.tabPanel,focusable:!1,children:r==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"simple"})}),e.jsx(O,{tabId:"complex",className:h.tabPanel,focusable:!1,children:r==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:h.header,children:[e.jsx("div",{className:h.logo,children:e.jsx(y,{href:R,size:"large"})}),e.jsx(D,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:Z})]}),e.jsx("div",{className:h.platformBar,children:e.jsxs("div",{className:h.tools,children:[e.jsx(y,{href:R,size:"large"}),e.jsx(y,{href:R,size:"large"}),e.jsx(y,{href:R,size:"large"})]})}),e.jsx("div",{className:h.canvasWrapper,children:e.jsx("div",{className:h.canvas})})]})});function Ue(o){const{sliderProps:s,panelProps:a,panelMinSize:r,panelMaxSize:f,resizing:p}=qe({minSize:{px:256,pct:20},maxSize:{pct:30}}),c=n.useId();return e.jsxs("div",{className:h.appLayout,style:{"--_panel-min-size":r,"--_panel-max-size":f},children:[e.jsx("div",{...a,className:h.leftPanel,style:{position:"relative",...a.style},children:o.panelContent}),e.jsxs("div",{className:h.splitter,"data-resizing":p?"true":void 0,children:[e.jsx(B,{render:i=>e.jsx("label",{...i,htmlFor:c,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:c,type:"range",className:h.slider,...s})]}),o.children]})}function X(){return e.jsxs("div",{className:h.emptyState,children:[e.jsx(D,{variant:"body-sm",children:"No layers"}),e.jsx(le,{children:"Create a layer"})]})}function Ze(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(D,{variant:"body-sm",children:"No results found"})})}function Je(o,s,a){return Math.min(Math.max(o,s),a)}function qe(o){const{minSize:s,maxSize:a,onCollapse:r}=o,f=n.useId(),p=n.useRef(null),[c,i]=n.useState(void 0),[m,l]=n.useState(void 0),[u,b]=n.useState(void 0),[x,C]=n.useState(!1),[v,P]=n.useState(void 0),d=n.useMemo(()=>{if(s&&m)return Math.min(s.px,s.pct/100*m)},[s,m]),S=n.useMemo(()=>{if(d&&a&&m)return Math.max(d,a.pct/100*m)},[a,m,d]),_=n.useMemo(()=>{if(u==="smallest")return d??0;if(u==="largest")return S??0;if(c&&d&&S)return Je(c,d,S)},[c,d,S,u]);n.useEffect(()=>{const j=p.current;if(!j)return;const g=j.parentElement;if(!g)return;const A=new ResizeObserver(()=>{const w=g.getBoundingClientRect(),L=j.getBoundingClientRect();l(w.width),i(L.width)});return A.observe(g),A.observe(j),()=>{A.disconnect()}},[]);const N=n.useCallback(j=>{const g=p.current;if(!g)return;const A=g.getBoundingClientRect();P(A.width+j),b(void 0),C(!0)},[]),k=n.useCallback(j=>{const g=p.current;if(!g)return;const A=g.parentElement;if(!A)return;const w=A.getBoundingClientRect(),L=j*(w.width*.005),se=g.getBoundingClientRect();P(se.width+L),b(void 0)},[]),Q=n.useCallback(()=>{p.current&&(P(void 0),C(!1))},[]),{moveableProps:M}=Qe({onMove:N,onMoveEnd:Q,onKeyMove:k}),Y=n.useMemo(()=>({...M,onKeyDown:j=>{var g;if((g=M.onKeyDown)==null||g.call(M,j),!j.defaultPrevented)switch(j.key){case"Enter":j.preventDefault(),r==null||r();break;case"Home":j.preventDefault(),b("smallest");break;case"End":j.preventDefault(),b("largest");break}},onChange:j=>{if(x)return;const g=Number(j.target.value);P(g)},value:_===void 0?0:Math.floor(_),min:d===void 0?void 0:Math.floor(d),max:S===void 0?void 0:Math.floor(S)}),[M,_,d,S,r,x]),ee=n.useMemo(()=>({style:{WebkitUserSelect:v===void 0?void 0:"none"},id:f,ref:p}),[f,v]),te=d===void 0?void 0:`${Math.floor(d)}px`,ne=n.useMemo(()=>{if(v!==void 0&&a!==void 0&&u===void 0)return`min(${Math.floor(v)}px, ${a.pct}%)`;if(_!==void 0)return`${Math.floor(_)}px`},[a,v,_,u]);return{sliderProps:Y,panelProps:ee,panelMinSize:te,panelMaxSize:ne,resizing:x}}function Qe(o){const{onMove:s,onMoveEnd:a,onKeyMove:r}=o,f=n.useRef(null),p=n.useRef(void 0),c=n.useRef(void 0),i=n.useCallback(()=>{c.current!==void 0&&(c.current=void 0,a==null||a())},[a]);return{moveableProps:n.useMemo(()=>({onPointerDown:l=>{if(l.button!==0||l.ctrlKey)return;const u=f.current;if(!u)return;const b=u.getBoundingClientRect(),x=l.clientX-b.left;c.current=x,l.preventDefault(),u.setPointerCapture(l.pointerId)},onPointerMove:l=>{const u=c.current;if(u===void 0)return;const b=f.current;if(!b)return;const x=b.getBoundingClientRect(),C=l.clientX-u-x.left;l.preventDefault(),s==null||s(C)},onPointerUp:i,onPointerCancel:i,onKeyDown:l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowLeft":l.preventDefault(),r==null||r(-1);break;case"ArrowRight":l.preventDefault(),r==null||r(1);break}},ref:l=>{var b;if(f.current=l,(b=p.current)==null||b.call(p),p.current=void 0,!l)return;const u=x=>{x.preventDefault()};l.addEventListener("touchstart",u),p.current=()=>{l.removeEventListener("touchstart",u)}}}),[r,s,i])}}const t=(()=>{let o=0;return s=>({id:`${o++}`,label:`Tree Item ${o}`,items:[],expanded:!0,...s})})(),J={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},Ye={filters:[],items:[t({label:"ITC_Master",items:[t({label:"002_Substation",expanded:!1,items:[t({label:"002_Substation_A"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-COLS",description:"Columns",expanded:!1,items:[t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-JOIS-ENVL",description:"Bar Joist: Envelopes"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-SLAB-CONC",description:"Slabs: Concrete"}),t({label:"003-BENSTR-ZO-LG2-M3-S-00001 - S-BEAM-PURL",description:"Columns: concrete"}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A"})]}),t({label:"007-aa_master.dgn",items:[t({label:"A-CLNG-LITE",expanded:!1,items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",items:[t({label:"A-DOOR-2D-PLAN",items:[t({label:"P00003 [2-KA62]",items:[t({label:"Cell [2-KA63]",items:[t({label:"Cell [2-KA64]",items:[t({label:"Complex Chain [2-KA6A]"}),t({label:"Complex Chain [2-KA6B]"}),t({label:"Complex Chain [2-KA6C]"}),t({label:"Complex Chain [2-KA6D]"}),t({label:"Complex Chain [2-KA6E]"}),t({label:"Complex Chain [2-KA6F]"}),t({label:"Complex Chain [2-KA6G]"}),t({label:"Complex Chain [2-KA6H]"}),t({label:"Complex Chain [2-KA61]"}),t({label:"Complex Chain [2-KA65]"}),t({label:"Complex Chain [2-KA66]"}),t({label:"Complex Chain [2-KA67]"}),t({label:"Complex Chain [2-KA68]"}),t({label:"Complex Chain [2-KA69]"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA86]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA98]",expanded:!1,items:[t({label:"P00003 [2-KA98-A]"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,items:[t({label:"P00003 [2-KAAA-A]"})]})]})]})]})]})]};function et({items:o,filters:s,search:a}){const r=n.useMemo(()=>s.length===0?o:o.reduce((c,i)=>(!i.type||!s.includes(i.type)||c.push(i),c),[]),[o,s]),f=n.useMemo(()=>{function c(i){return i.reduce((m,l)=>{const u=c(l.items??[]);return(l.label.toLowerCase().includes(a.toLowerCase())||u.length>0)&&m.push({...l,items:u}),m},[])}return a===""?r:c(r)},[r,a]),p=n.useMemo(()=>{if(s.length===0&&a==="")return;function c(i){return i.reduce((m,l)=>{const u=l.items?c(l.items):0;return m+1+u},0)}return c(f)},[f,s,a]);return{filteredTree:f,itemCount:p}}function tt(o,s,a){return n.useMemo(()=>{function r(f,p,c,i,m){const l=[];let u=1;for(const b of f){const x=b.id===s||i,C=a.includes(b.id)||m;l.push({...b,level:c,parentItem:p,selected:x,hidden:C,parentHidden:m,position:u++,size:f.length}),b.expanded&&l.push(...r(b.items,b,c+1,x,C))}return l}return r(o,void 0,1,!1,!1)},[o,s,a])}function q(o,s){for(const a of o){if(a.id===s)return a;const r=q(a.items,s);if(r)return r}}function W({tree:o}){const{selectedId:s}=n.useContext(K),{filters:a,search:r,setItemCount:f}=n.useContext(z),[p,c]=n.useState(),[i,m]=n.useState([]),l=n.useCallback(d=>{m(S=>S.includes(d)?S.filter(_=>_!==d):[...S,d])},[]),[u,b]=n.useState(()=>o==="complex"?Ye.items:J.items),{filteredTree:x,itemCount:C}=et({items:u,filters:a,search:r}),v=tt(x,p,i);n.useEffect(()=>{o===s&&f(C)},[o,s,f,C]);const P=n.useDeferredValue(v);return P.length===0?e.jsx(Ze,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(he,{className:h.tree,children:P.map(d=>e.jsx(be,{label:d.label,description:d.description,"aria-level":d.level,"aria-posinset":d.position,"aria-setsize":d.size,selected:d.selected,onSelectedChange:()=>{if(p===d.id){c(void 0);return}c(d.id)},expanded:d.items.length===0?void 0:d.expanded,onExpandedChange:S=>{b(_=>{const N=q(_,d.id);if(!N)return _;const k=[..._];return N.expanded=S,k})},icon:e.jsx(y,{href:R,style:{display:"inline"}}),actions:[e.jsx(E,{className:h.action,icon:Ce,label:"Lock","aria-hidden":d.hidden},"lock"),e.jsx(E,{className:h.action,icon:d.hidden?je:Ie,label:d.hidden?"Show":"Hide",visible:d.hidden?!0:void 0,onClick:()=>{l(d.id)}},"visibility"),e.jsx(nt,{hidden:d.hidden},"more")]},d.id))})})}function nt({hidden:o}){return e.jsxs(V,{children:[e.jsx($,{className:h.action,"aria-hidden":o,render:e.jsx(E,{icon:ge,label:"More"})}),e.jsxs(U,{style:{minInlineSize:164},children:[e.jsx(I,{label:"Copy",shortcuts:"Command+C"}),e.jsx(I,{label:"Paste",shortcuts:"Command+P"}),e.jsx(I,{label:"Copy/Paste as",shortcuts:"Command+V"}),e.jsx(I,{label:"Move to",shortcuts:"Command+M"}),e.jsx(I,{label:"Bring to front",shortcuts:"]"}),e.jsx(I,{label:"Send to back",shortcuts:"["}),e.jsx(I,{label:"Group selection",shortcuts:"Command+G"}),e.jsx(I,{label:"Ungroup",shortcuts:"Command+U"}),e.jsx(I,{label:"Rename",shortcuts:"Command+R"}),e.jsx(I,{label:"Show/hide",shortcuts:"Shift+Command+V"}),e.jsx(I,{label:"Lock/unlock",shortcuts:"Shift+Command+L"}),e.jsx(I,{label:"Isolate object",shortcuts:"I"})]})]})}function st(){const{selectedId:o}=n.useContext(K),{itemCount:s,filtered:a,clearFilters:r,search:f,setSearch:p}=n.useContext(z),[c,i]=n.useState(!1),m=n.useRef(null),l=n.useRef(null),u=a||!!f,b=c?e.jsxs(e.Fragment,{children:[e.jsx(at,{filters:o==="simple"?J.filters:[]}),e.jsx(T,{className:h.shiftIconRight,icon:Se,label:"Close",variant:"ghost",onClick:()=>{var C;F.flushSync(()=>i(!1)),(C=l.current)==null||C.focus()}})]}):e.jsx(T,{className:h.shiftIconRight,icon:H,label:"Search",dot:u?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var C;F.flushSync(()=>i(!0)),(C=m.current)==null||C.focus()}}),x=n.useMemo(()=>{if(a)return s===void 0?"Showing all tree items":`Showing ${s} tree items`},[a,s]);return e.jsxs("div",{className:h.subheader,children:[e.jsx(B,{"aria-live":"polite","aria-atomic":!0,children:x}),c?void 0:e.jsxs(de,{className:h.tabList,tone:"accent",ref:l,children:[e.jsx(G,{id:"simple",children:"Simple"}),e.jsx(G,{id:"complex",children:"Complex"})]}),c?e.jsxs(fe,{className:h.searchInput,children:[e.jsx(pe,{href:H}),e.jsx(me,{placeholder:"Search",ref:m,onChange:C=>{p(C.target.value)},value:f})]}):null,e.jsx("div",{className:h.subheaderActions,children:b})]})}function at({filters:o}){const s=n.useContext(z),a=s.filters.length>0;return e.jsxs(V,{children:[e.jsx($,{render:e.jsx(T,{icon:_e,label:"Filter",dot:a?"Some filters applied":void 0,variant:"ghost",disabled:o.length===0})}),e.jsx(U,{children:o.map(r=>{const f=s.filters.includes(r);return e.jsx(ie,{name:r,label:r,checked:f,onChange:()=>{s.toggleFilter(r)}},r)})})]})}function rt(o){const[s,a]=n.useState(!1),[r,f]=n.useState([]),[p,c]=n.useState(""),[i,m]=n.useState(void 0),l=n.useCallback(x=>{const C=r.includes(x)?r.filter(v=>v!==x):[...r,x];f(C),a(C.length>0)},[r]),u=n.useCallback(()=>{f([]),a(!1)},[]),b=n.useCallback(x=>{c(x),a(!!x)},[]);return e.jsx(z.Provider,{value:n.useMemo(()=>({filters:r,filtered:s,toggleFilter:l,clearFilters:u,search:p,setSearch:b,itemCount:i,setItemCount:m}),[r,s,l,u,p,b,i]),children:o.children})}function lt(o){const[s,a]=n.useState(void 0);return e.jsx(K.Provider,{value:n.useMemo(()=>({selectedId:s??""}),[s]),children:e.jsx(ue,{setSelectedId:a,selectedId:s,children:o.children})})}const z=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),K=n.createContext({selectedId:""});export{Qt as default,qt as meta};
