import{a as T,p as E}from"./chunk-EF7DTUVF-kG7VDEF3.js";import{s as ie,q as le,v as de,w as U,x as ue,y as F,z as y,E as me,H as Z,J,n as D,i as be,K as fe,L as ve,M as Ie}from"./~utils-BYV3BH5q.js";import{f as W,r as pe,c as V}from"./sun-BSOLKypC.js";import{a as ee,b as te,C as Q,u as xe}from"./6VRAQV3D-BxyDIAhu.js";import{S as oe,R as Se,L as N,P as O,d as $,I as G,_ as P,b as v,Q as Y,a1 as Ce,f as H,c as K,a as X,j as q,E as z,X as se,p as Pe,q as B,m as ne,u as he}from"./LMDWO4NN-L4HmYCAu.js";import{c as ge,a as Te,b as Ee}from"./5JTVDSTH-1Gv1MQI3.js";import{u as _e}from"./S43UC3DV-DT2Ark9n.js";import{c as Re}from"./VDHZ5F7K-BftdCvxP.js";import{u as ye}from"./RZ4GPYOB-D_T-CSDI.js";var Le=oe([le,te],[ie,ee]),je=Le.useContext;T.createContext(!1);T.createContext(null);function we(t={}){var n=t,{composite:o,combobox:e}=n,s=Se(n,["composite","combobox"]);const c=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],f=de(s.store,U(o,c),U(e,c)),l=f?.getState(),u=ge(N($({},s),{store:f,includesBaseElement:O(s.includesBaseElement,l?.includesBaseElement,!1),orientation:O(s.orientation,l?.orientation,"horizontal"),focusLoop:O(s.focusLoop,l?.focusLoop,!0)})),r=Re(),C=N($({},u.getState()),{selectedId:O(s.selectedId,l?.selectedId,s.defaultSelectedId),selectOnMove:O(s.selectOnMove,l?.selectOnMove,!0)}),a=ue(C,u,f);F(a,()=>y(a,["moves"],()=>{const{activeId:d,selectOnMove:m}=a.getState();if(!m||!d)return;const x=u.item(d);x&&(x.dimmed||x.disabled||a.setState("selectedId",x.id))}));let p=!0;F(a,()=>me(a,["selectedId"],(d,m)=>{if(!p){p=!0;return}o&&d.selectedId===m.selectedId||a.setState("activeId",d.selectedId)})),F(a,()=>y(a,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:m,renderedItems:x}=a.getState(),S=u.item(m);if(S&&!S.disabled&&!S.dimmed)a.setState("selectedId",S.id);else{const _=x.find(h=>!h.disabled&&!h.dimmed);a.setState("selectedId",_?.id)}})),F(a,()=>y(a,["renderedItems"],d=>{const m=d.renderedItems;if(m.length)return y(r,["renderedItems"],x=>{const S=x.renderedItems;S.some(h=>!h.tabId)&&S.forEach((h,j)=>{if(h.tabId)return;const k=m[j];k&&r.renderItem(N($({},h),{tabId:k.id}))})})}));let I=null;return F(a,()=>{const d=()=>{I=a.getState().selectedId},m=()=>{p=!1,a.setState("selectedId",I)};if(o&&"setSelectElement"in o)return G(y(o,["value"],d),y(o,["mounted"],m));if(e)return G(y(e,["selectedValue"],d),y(e,["mounted"],m))}),N($($({},u),a),{panels:r,setSelectedId:d=>a.setState("selectedId",d),select:d=>{a.setState("selectedId",d),u.move(d)}})}function De(t,n,o){Y(n,[o.composite,o.combobox]),t=Te(t,n,o),J(t,o,"selectedId","setSelectedId"),J(t,o,"selectOnMove");const[e,s]=Z(()=>t.panels,{});return Y(s,[t,s]),Object.assign(T.useMemo(()=>P(v({},t),{panels:e}),[t,e]),{composite:o.composite,combobox:o.combobox})}function re(t={}){const n=_e(),o=je()||n;t=P(v({},t),{composite:t.composite!==void 0?t.composite:o,combobox:t.combobox!==void 0?t.combobox:n});const[e,s]=Z(we,t);return De(e,s,t)}var A=oe([te],[ee]),ke=A.useScopedContext,ae=A.useProviderContext,Me=A.ContextProvider,ce=A.ScopedContextProvider,Fe="button",Oe=K(function(n){var o=n,{store:e,getItem:s}=o,c=q(o,["store","getItem"]),f;const l=ke();e=e||l,z(e,!1);const u=se(),r=c.id||u,C=Pe(c),a=T.useCallback(b=>{const L=P(v({},b),{dimmed:C});return s?s(L):L},[C,s]),p=c.onClick,I=B(b=>{p?.(b),!b.defaultPrevented&&e?.setSelectedId(r)}),d=e.panels.useState(b=>{var L;return(L=b.items.find(i=>i.tabId===r))==null?void 0:L.id}),m=u?c.shouldRegisterItem:!1,x=e.useState(b=>!!r&&b.activeId===r),S=e.useState(b=>!!r&&b.selectedId===r),_=e.useState(b=>!!e.item(b.activeId)),h=x||S&&!_,j=S||((f=c.accessibleWhenDisabled)!=null?f:!0);if(D(e.combobox||e.composite,"virtualFocus")&&(c=P(v({},c),{tabIndex:-1})),c=P(v({id:r,role:"tab","aria-selected":S,"aria-controls":d||void 0},c),{onClick:I}),e.composite){const b={id:r,accessibleWhenDisabled:j,store:e.composite,shouldRegisterItem:h&&m,rowId:c.rowId,render:c.render};c=P(v({},c),{render:E.jsx(Q,P(v({},b),{render:e.combobox&&e.composite!==e.combobox?E.jsx(Q,P(v({},b),{store:e.combobox})):b.render}))})}return c=xe(P(v({store:e},c),{accessibleWhenDisabled:j,getItem:a,shouldRegisterItem:m})),c}),$e=Ce(H(function(n){const o=Oe(n);return X(Fe,o)}));function Ne(t={}){const n=re(t);return E.jsx(Me,{value:n,children:t.children})}var Ae="div",Be=K(function(n){var o=n,{store:e}=o,s=q(o,["store"]);const c=ae();e=e||c,z(e,!1);const f=e.useState(l=>l.orientation==="both"?void 0:l.orientation);return s=ne(s,l=>E.jsx(ce,{value:e,children:l}),[e]),e.composite&&(s=v({focusable:!1},s)),s=v({role:"tablist","aria-orientation":f},s),s=Ee(v({store:e},s)),s}),We=H(function(n){const o=Be(n);return X(Ae,o)}),Ve="div",He=K(function(n){var o=n,{store:e,unmountOnHide:s,tabId:c,getItem:f,scrollRestoration:l,scrollElement:u}=o,r=q(o,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const C=ae();e=e||C,z(e,!1);const a=T.useRef(null),p=se(r.id),I=D(e.panels,()=>{var i;return c||((i=e?.panels.item(p))==null?void 0:i.tabId)}),d=D(e,i=>!!I&&i.selectedId===I),m=be({open:d}),x=D(m,"mounted"),S=T.useRef(new Map),_=B(()=>{const i=a.current;return i?u?typeof u=="function"?u(i):"current"in u?u.current:u:i:null});T.useEffect(()=>{var i,R;if(!l||!x)return;const g=_();if(!g)return;if(l==="reset"){g.scroll(0,0);return}if(!I)return;const w=S.current.get(I);g.scroll((i=w?.x)!=null?i:0,(R=w?.y)!=null?R:0);const M=()=>{S.current.set(I,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",M),()=>{g.removeEventListener("scroll",M)}},[l,x,I,_,e]);const[h,j]=T.useState(!1);T.useEffect(()=>{const i=a.current;if(!i)return;const R=fe(i);j(!!R.length)},[]);const k=T.useCallback(i=>{const R=P(v({},i),{id:p||i.id,tabId:c});return f?f(R):R},[p,c,f]),b=r.onKeyDown,L=B(i=>{if(b?.(i),i.defaultPrevented||!e?.composite)return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[i.key];if(!g)return;const{selectedId:w}=e.getState(),M=g({activeId:w});M&&(i.preventDefault(),e.move(M))});return r=ne(r,i=>E.jsx(ce,{value:e,children:i}),[e]),r=P(v({id:p,role:"tabpanel","aria-labelledby":I||void 0},r),{children:s&&!x?null:r.children,ref:he(a,r.ref),onKeyDown:L}),r=ve(v({focusable:!e.composite&&!h},r)),r=Ie(v({store:m},r)),r=ye(P(v({store:e.panels},r),{getItem:k})),r}),Ke=H(function(n){const o=He(n);return X(Ve,o)});const Xe=typeof CSS<"u"&&CSS.supports("anchor-name: --foo");function tt(t){const{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:c}=t,f=re({defaultSelectedId:n}),l=D(f,"baseElement"),u=D(f,"selectedId"),r=C=>{if(!Xe)return;const a=l?.ownerDocument;if(!a||!u||!C)return;const p=a.getElementById(u)?.getBoundingClientRect(),I=a.getElementById(C)?.getBoundingClientRect();if(!p||!I)return;const d=p.left-I.left,m=p.width/I.width;l.animate([{transform:`translateX(${d}px) scaleX(${m})`},{transform:"none"}],{pseudoElement:"::after",duration:150,easing:"ease-in-out"})};return E.jsx(Ne,{store:f,selectedId:o,setSelectedId:pe(C=>{r(C),e?.(C)}),selectOnMove:s,children:c})}const ot=W((t,n)=>{const{tone:o="neutral",...e}=t;return E.jsx(We,{...e,"data-kiwi-tone":o,className:V("ü•ù-tab-list",t.className),ref:n})}),st=W((t,n)=>E.jsx($e,{accessibleWhenDisabled:!0,...t,className:V("ü•ù-tab",t.className),ref:n})),nt=W((t,n)=>E.jsx(Ke,{...t,className:V("ü•ù-tab-panel",t.className),ref:n}));export{tt as T,st as a,nt as b,ot as c};
