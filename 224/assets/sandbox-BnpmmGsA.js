import{w as ae}from"./LMDWO4NN-Byj-nXYS.js";import{t as le,a as n,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as E}from"./index-Dr3kRIaJ.js";import{B as ie}from"./Button-DPe5oMBh.js";import{D as O,a as H,b as W,c as C,d as oe}from"./DropdownMenu-C8HK6a_C.js";import{I as v}from"./Icon-DEq9jiRr.js";import{I as R}from"./IconButton-DWTkuM6Q.js";import{S as ce,H as de}from"./Select-DA7DqP1l.js";import{T as L,a as ue,b as X,c as pe}from"./Tabs-DI_42FWp.js";import{T as $}from"./Text-D8Cagtif.js";import{T as fe,a as me,b as he}from"./TextBox-ClU9u1l8.js";import{V as T}from"./VisuallyHidden-cnhqJQFL.js";import{T as xe,a as be,b as D}from"./Tree-BjTAaRxD.js";import{p as M}from"./placeholder-DsSaw0wz.js";import{p as je,l as ge,h as Ce,m as ke,s as F,d as _e,f as Se}from"./visibility-hide-D55eFB_G.js";import{s as Ie}from"./visibility-show-mWfTZ8_o.js";import"./index-jyeBNHV5.js";import"./~utils-Cznddkjz.js";import"./X5NMLKT6-3paX6Xl5.js";import"./KUU7WJ55-CriyIzjH.js";import"./LVA2YJMS-DqB9_j1W.js";import"./XL7CSKGW-bDaSWFDO.js";import"./Kbd-Doev9cAr.js";import"./P2CTZE2T-CumnqgF6.js";import"./RZ4GPYOB-Bpaf2GRQ.js";import"./YV4JVR4I-BlNXHGle.js";import"./BYC7LY2E-BbgPBSur.js";import"./VGCJ63VH-XNhtTgSK.js";import"./XX67R432-BXmQ6BNw.js";import"./MTZPJQMC-DeaJVyUW.js";import"./VEVQD5MH-aRyWcmUO.js";import"./ITI7HKP4-DoDtM-qa.js";import"./C3IKGW5T-CtCGsAqd.js";import"./P4IRICAX-iRVvJyJS.js";import"./ASMQKSDT-QtEie5Jh.js";import"./Tooltip-CLI7iDKA.js";import"./tooltip-anchor-tVUznSSS.js";import"./BOLVLGVE-BtKDFFR7.js";import"./Field-DQuwljSf.js";import"./~hooks-Wdjhtx2E.js";import"./ListItem-Bk2XtJ05.js";const Ae="_appLayout_fkpkj_5",Pe="_header_fkpkj_22",ye="_platformBar_fkpkj_32",ve="_logo_fkpkj_38",Me="_tools_fkpkj_48",Re="_leftPanel_fkpkj_58",Te="_panelHeader_fkpkj_70",Ne="_panelTitleWrapper_fkpkj_78",ze="_panelCaption_fkpkj_82",Be="_shiftIconRight_fkpkj_86",De="_subheader_fkpkj_90",we="_subheaderTitle_fkpkj_101",Ke="_searchInput_fkpkj_106",Ee="_subheaderActions_fkpkj_110",Le="_tabList_fkpkj_114",Xe="_emptyState_fkpkj_119",Fe="_canvasWrapper_fkpkj_128",Ge="_canvas_fkpkj_128",Oe="_splitter_fkpkj_165",He="_tabPanel_fkpkj_211",We="_tree_fkpkj_217",$e="_action_fkpkj_221",Ve="_actionIcon_fkpkj_227",Ue="_slider_fkpkj_238",p={appLayout:Ae,header:Pe,platformBar:ye,logo:ve,tools:Me,leftPanel:Re,panelHeader:Te,panelTitleWrapper:Ne,panelCaption:ze,shiftIconRight:Be,subheader:De,subheaderTitle:we,searchInput:Ke,subheaderActions:Ee,tabList:Le,emptyState:Xe,canvasWrapper:Fe,canvas:Ge,splitter:Oe,tabPanel:He,tree:We,action:$e,actionIcon:Ve,slider:Ue},V="Kiwi sandbox",Qt=()=>[{title:V}],Yt=ae(function(){const[s,a]=le(),i=s.get("tree")==="empty"?"epoch-2":"epoch-1",m=n.useCallback(o=>{a(u=>(o==="epoch-2"?u.set("tree","empty"):u.delete("tree"),u))},[a]),d=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),f=n.useId();return e.jsxs(qe,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p.panelHeader,children:[e.jsxs("div",{children:[e.jsx(T,{render:o=>e.jsx("label",{...o,htmlFor:f}),children:"Choose Model"}),e.jsx(ce,{className:p.panelTitleWrapper,children:e.jsx(de,{id:f,variant:"ghost",defaultValue:i,onChange:o=>m(o.target.value),children:Object.entries(d).map(([o,u])=>e.jsx("option",{value:o,children:u},o))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(T,{render:o=>e.jsx("h2",{...o}),children:d[i]}),e.jsx("p",{className:p.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:p.actions,children:e.jsx(R,{className:p.shiftIconRight,icon:je,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(ot,{children:e.jsxs(ct,{children:[e.jsx(lt,{}),e.jsx(L,{tabId:"simple",className:p.tabPanel,focusable:!1,children:e.jsx(G,{tree:i==="epoch-2"?"empty":"simple"})}),e.jsx(L,{tabId:"complex",className:p.tabPanel,focusable:!1,children:e.jsx(G,{tree:i==="epoch-2"?"empty":"complex"})})]})})]}),children:[e.jsxs("header",{className:p.header,children:[e.jsx("div",{className:p.logo,children:e.jsx(v,{href:M,size:"large"})}),e.jsx($,{render:o=>e.jsx("h1",{...o}),variant:"body-md",children:V})]}),e.jsx("div",{className:p.platformBar,children:e.jsxs("div",{className:p.tools,children:[e.jsx(v,{href:M,size:"large"}),e.jsx(v,{href:M,size:"large"}),e.jsx(v,{href:M,size:"large"})]})}),e.jsx("div",{className:p.canvasWrapper,children:e.jsx("div",{className:p.canvas})})]})});function qe(r){const{sliderProps:s,panelProps:a,panelMinSize:i,panelMaxSize:m,resizing:d}=Ye({minSize:{px:256,pct:20},maxSize:{pct:30}}),f=n.useId();return e.jsxs("div",{className:p.appLayout,style:{"--_panel-min-size":i,"--_panel-max-size":m},children:[e.jsx("div",{...a,className:p.leftPanel,style:{position:"relative",...a.style},children:r.panelContent}),e.jsxs("div",{className:p.splitter,"data-resizing":d?"true":void 0,children:[e.jsx(T,{render:o=>e.jsx("label",{...o,htmlFor:f,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:f,type:"range",className:p.slider,...s})]}),r.children]})}function Je({children:r}){return e.jsx("div",{className:p.emptyState,children:r})}function Qe(r,s,a){return Math.min(Math.max(r,s),a)}function Ye(r){const{minSize:s,maxSize:a,onCollapse:i}=r,m=n.useId(),d=n.useRef(null),[f,o]=n.useState(void 0),[u,l]=n.useState(void 0),[c,h]=n.useState(void 0),[x,k]=n.useState(!1),[_,A]=n.useState(void 0),g=n.useMemo(()=>{if(s&&u)return Math.min(s.px,s.pct/100*u)},[s,u]),I=n.useMemo(()=>{if(g&&a&&u)return Math.max(g,a.pct/100*u)},[a,u,g]),P=n.useMemo(()=>{if(c==="smallest")return g??0;if(c==="largest")return I??0;if(f&&g&&I)return Qe(f,g,I)},[f,g,I,c]);n.useEffect(()=>{const b=d.current;if(!b)return;const j=b.parentElement;if(!j)return;const S=new ResizeObserver(()=>{const z=j.getBoundingClientRect(),B=b.getBoundingClientRect();l(z.width),o(B.width)});return S.observe(j),S.observe(b),()=>{S.disconnect()}},[]);const Q=n.useCallback(b=>{const j=d.current;if(!j)return;const S=j.getBoundingClientRect();A(S.width+b),h(void 0),k(!0)},[]),Y=n.useCallback(b=>{const j=d.current;if(!j)return;const S=j.parentElement;if(!S)return;const z=S.getBoundingClientRect(),B=b*(z.width*.005),re=j.getBoundingClientRect();A(re.width+B),h(void 0)},[]),Z=n.useCallback(()=>{d.current&&(A(void 0),k(!1))},[]),{moveableProps:y}=Ze({onMove:Q,onMoveEnd:Z,onKeyMove:Y}),ee=n.useMemo(()=>({...y,onKeyDown:b=>{var j;if((j=y.onKeyDown)==null||j.call(y,b),!b.defaultPrevented)switch(b.key){case"Enter":b.preventDefault(),i==null||i();break;case"Home":b.preventDefault(),h("smallest");break;case"End":b.preventDefault(),h("largest");break}},onChange:b=>{if(x)return;const j=Number(b.target.value);A(j)},value:P===void 0?0:Math.floor(P),min:g===void 0?void 0:Math.floor(g),max:I===void 0?void 0:Math.floor(I)}),[y,P,g,I,i,x]),te=n.useMemo(()=>({style:{WebkitUserSelect:_===void 0?void 0:"none"},id:m,ref:d}),[m,_]),ne=g===void 0?void 0:`${Math.floor(g)}px`,se=n.useMemo(()=>{if(_!==void 0&&a!==void 0&&c===void 0)return`min(${Math.floor(_)}px, ${a.pct}%)`;if(P!==void 0)return`${Math.floor(P)}px`},[a,_,P,c]);return{sliderProps:ee,panelProps:te,panelMinSize:ne,panelMaxSize:se,resizing:x}}function Ze(r){const{onMove:s,onMoveEnd:a,onKeyMove:i}=r,m=n.useRef(null),d=n.useRef(void 0),f=n.useRef(void 0),o=n.useCallback(()=>{f.current!==void 0&&(f.current=void 0,a==null||a())},[a]);return{moveableProps:n.useMemo(()=>({onPointerDown:l=>{if(l.button!==0||l.ctrlKey)return;const c=m.current;if(!c)return;const h=c.getBoundingClientRect(),x=l.clientX-h.left;f.current=x,l.preventDefault(),c.setPointerCapture(l.pointerId)},onPointerMove:l=>{const c=f.current;if(c===void 0)return;const h=m.current;if(!h)return;const x=h.getBoundingClientRect(),k=l.clientX-c-x.left;l.preventDefault(),s==null||s(k)},onPointerUp:o,onPointerCancel:o,onKeyDown:l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowLeft":l.preventDefault(),i==null||i(-1);break;case"ArrowRight":l.preventDefault(),i==null||i(1);break}},ref:l=>{var h;if(m.current=l,(h=d.current)==null||h.call(d),d.current=void 0,!l)return;const c=x=>{x.preventDefault()};l.addEventListener("touchstart",c),d.current=()=>{l.removeEventListener("touchstart",c)}}}),[i,s,o])}}const K=n.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function G({tree:r}){const[s,a]=n.useState(),[i,m]=n.useState([]),d=n.useCallback(o=>{m(u=>u.includes(o)?u.filter(l=>l!==o):[...u,o])},[]),f=n.useMemo(()=>({selected:s,setSelected:a,hidden:i,toggleHidden:d}),[i,s,d]);return r==="empty"?e.jsxs(Je,{children:[e.jsx($,{children:"No layers"}),e.jsx(ie,{children:"Create a layer"})]}):e.jsx(K.Provider,{value:f,children:e.jsx(xe,{className:p.tree,children:e.jsx(tt,{tree:r})})})}const t=(()=>{let r=0;return s=>({id:`${r++}`,label:`Tree Item ${r}`,items:[],expanded:!0,...s})})(),w={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},et={filters:[],items:[t({label:"ITC_Master",items:[t({label:"002_Substation",expanded:!1,items:[t({label:"002_Substation_A"})]}),t({label:"005-BENROAD-00-XX-M3-D-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-D-00003-A"})]}),t({label:"005-BENROAD-00-XX-M3-D-00005.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-D-00005-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A"})]}),t({label:"007-aa_master.dgn",items:[t({label:"A-CLNG-LITE",expanded:!1,items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",items:[t({label:"A-DOOR-2D-PLAN",items:[t({label:"P00003 [2-KA62]",items:[t({label:"Cell [2-KA63]",items:[t({label:"Cell [2-KA64]",items:[t({label:"Complex Chain [2-KA6A]"}),t({label:"Complex Chain [2-KA6B]"}),t({label:"Complex Chain [2-KA6C]"}),t({label:"Complex Chain [2-KA6D]"}),t({label:"Complex Chain [2-KA6E]"}),t({label:"Complex Chain [2-KA6F]"}),t({label:"Complex Chain [2-KA6G]"}),t({label:"Complex Chain [2-KA6H]"}),t({label:"Complex Chain [2-KA61]"}),t({label:"Complex Chain [2-KA65]"}),t({label:"Complex Chain [2-KA66]"}),t({label:"Complex Chain [2-KA67]"}),t({label:"Complex Chain [2-KA68]"}),t({label:"Complex Chain [2-KA69]"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA86]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA98]",expanded:!1,items:[t({label:"P00003 [2-KA98-A]"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,items:[t({label:"P00003 [2-KAAA-A]"})]})]})]})]})]})]};function tt({tree:r}){return r==="complex"?e.jsx(q,{initialItems:et.items}):r==="simple"?e.jsx(nt,{}):null}function nt(){const{filters:r}=n.useContext(N);return e.jsx(q,{initialItems:w.items,filters:r})}function st({items:r,filters:s}){return n.useMemo(()=>s.length===0?r:r.reduce((a,i)=>(!i.type||!s.includes(i.type)||a.push(i),a),[]),[r,s])}function rt(r){const s=n.useContext(K);return n.useMemo(()=>{function a(i,m,d,f,o){const u=[];let l=1;for(const c of i){const h=c.id===s.selected||f,x=s.hidden.includes(c.id)||o;u.push({...c,level:d,parentItem:m,selected:h,hidden:x,parentHidden:o,position:l++,size:i.length}),c.expanded&&u.push(...a(c.items,c,d+1,h,x))}return u}return a(r,void 0,1,!1,!1)},[r,s.selected,s.hidden])}function U(r,s){for(const a of r){if(a.id===s)return a;const i=U(a.items,s);if(i)return i}}function q(r){const{setSelected:s,selected:a,toggleHidden:i}=n.useContext(K),[m,d]=n.useState(r.initialItems),f=n.useMemo(()=>r.filters??[],[r.filters]),o=st({items:m,filters:f});return rt(o).map(l=>e.jsx(be,{label:l.label,"aria-level":l.level,"aria-posinset":l.position,"aria-setsize":l.size,selected:l.selected,onSelectedChange:()=>{if(a===l.id){s(void 0);return}s(l.id)},expanded:l.items.length===0?void 0:l.expanded,onExpandedChange:c=>{d(h=>{const x=U(h,l.id);if(!x)return h;const k=[...h];return x.expanded=c,k})},icon:e.jsx(v,{href:M,style:{display:"inline"}}),actions:[e.jsx(D,{className:p.action,icon:ge,label:"Lock","aria-hidden":l.hidden},"lock"),e.jsx(D,{className:p.action,icon:l.hidden?Ce:Ie,label:l.hidden?"Show":"Hide",visible:l.hidden?!0:void 0,onClick:()=>{i(l.id)}},"visibility"),e.jsx(at,{hidden:l.hidden},"more")]},l.id))}function at({hidden:r}){return e.jsxs(O,{children:[e.jsx(H,{className:p.action,"aria-hidden":r,render:e.jsx(D,{icon:ke,label:"More"})}),e.jsxs(W,{style:{minInlineSize:164},children:[e.jsx(C,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(C,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(C,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(C,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(C,{shortcuts:"]",children:"Bring to front"}),e.jsx(C,{shortcuts:"[",children:"Send to back"}),e.jsx(C,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(C,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(C,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(C,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(C,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(C,{shortcuts:"I",children:"Isolate object"})]})]})}function lt(){const{selectedId:r}=n.useContext(J),{filters:s,filtered:a}=n.useContext(N),[i,m]=n.useState(!1),d=n.useRef(null),f=n.useMemo(()=>{if(r!=="simple"||s.length===0)return;const c=w.items.filter(x=>x.type?s.includes(x.type):!1);function h(x){return x.reduce((k,_)=>{const A=_.items?h(_.items):0;return k+1+A},0)}return h(c)},[s,r]),o=n.useRef(null),u=i?e.jsxs(e.Fragment,{children:[e.jsx(it,{filters:r==="simple"?w.filters:[]}),e.jsx(R,{className:p.shiftIconRight,icon:_e,label:"Close",variant:"ghost",onClick:()=>{var c;E.flushSync(()=>m(!1)),(c=o.current)==null||c.focus()}})]}):e.jsx(R,{className:p.shiftIconRight,icon:F,label:"Search",variant:"ghost",onClick:()=>{var c;E.flushSync(()=>m(!0)),(c=d.current)==null||c.focus()}}),l=n.useMemo(()=>{if(a)return f===void 0?"Showing all tree items":`Showing ${f} tree items`},[a,f]);return e.jsxs("div",{className:p.subheader,children:[e.jsx(T,{"aria-live":"polite","aria-atomic":!0,children:l}),i?void 0:e.jsxs(ue,{className:p.tabList,tone:"accent",ref:o,children:[e.jsx(X,{id:"simple",children:"Simple"}),e.jsx(X,{id:"complex",children:"Complex"})]}),i?e.jsxs(fe,{className:p.searchInput,children:[e.jsx(me,{href:F}),e.jsx(he,{placeholder:"Search",ref:d})]}):null,e.jsx("div",{className:p.subheaderActions,children:u})]})}function it({filters:r}){const s=n.useContext(N);return e.jsxs(O,{children:[e.jsx(H,{render:e.jsx(R,{icon:Se,label:"Filter",variant:"ghost",disabled:r.length===0,isActive:s.filters.length>0})}),e.jsx(W,{children:r.map(a=>{const i=s.filters.includes(a);return e.jsx(oe,{name:a,checked:i,onChange:()=>{s.toggleFilter(a)},children:a},a)})})]})}function ot(r){const[s,a]=n.useState(!1),[i,m]=n.useState([]),d=n.useCallback(o=>{m(u=>u.includes(o)?u.filter(l=>l!==o):[...u,o]),a(!0)},[]),f=n.useCallback(()=>{m([]),a(!0)},[]);return e.jsx(N.Provider,{value:n.useMemo(()=>({filters:i,filtered:s,toggleFilter:d,clearFilters:f}),[i,s,d,f]),children:r.children})}function ct(r){const[s,a]=n.useState(void 0);return e.jsx(J.Provider,{value:n.useMemo(()=>({selectedId:s??""}),[s]),children:e.jsx(pe,{setSelectedId:a,selectedId:s,children:r.children})})}const N=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}}),J=n.createContext({selectedId:""});export{Yt as default,Qt as meta};
