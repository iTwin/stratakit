import{w as re}from"./LMDWO4NN-Byj-nXYS.js";import{t as ae,a as n,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as F}from"./index-Dr3kRIaJ.js";import{B as le}from"./Button-DPe5oMBh.js";import{D as V,a as $,b as U,c as I,d as ie}from"./DropdownMenu-C8HK6a_C.js";import{I as M}from"./Icon-DEq9jiRr.js";import{I as N}from"./IconButton-DWTkuM6Q.js";import{S as oe,H as ce}from"./Select-DA7DqP1l.js";import{T as X,a as de,b as G,c as ue}from"./Tabs-DI_42FWp.js";import{T as K}from"./Text-D8Cagtif.js";import{T as pe,a as he,b as fe}from"./TextBox-ClU9u1l8.js";import{V as T}from"./VisuallyHidden-cnhqJQFL.js";import{T as me,a as be,b as E}from"./Tree-CTZUoSnu.js";import{p as y}from"./placeholder-5huE_NmZ.js";import{p as xe,l as je,h as ge,m as Ce,s as O,d as Se,f as _e}from"./visibility-hide-Bz5IkIpy.js";import{s as Ie}from"./visibility-show-Dlta9_Bb.js";import"./index-jyeBNHV5.js";import"./~utils-Cznddkjz.js";import"./X5NMLKT6-3paX6Xl5.js";import"./KUU7WJ55-CriyIzjH.js";import"./LVA2YJMS-DqB9_j1W.js";import"./XL7CSKGW-bDaSWFDO.js";import"./Kbd-Doev9cAr.js";import"./P2CTZE2T-CumnqgF6.js";import"./RZ4GPYOB-Bpaf2GRQ.js";import"./YV4JVR4I-BlNXHGle.js";import"./BYC7LY2E-BbgPBSur.js";import"./VGCJ63VH-XNhtTgSK.js";import"./XX67R432-BXmQ6BNw.js";import"./MTZPJQMC-DeaJVyUW.js";import"./VEVQD5MH-aRyWcmUO.js";import"./ITI7HKP4-DoDtM-qa.js";import"./C3IKGW5T-CtCGsAqd.js";import"./P4IRICAX-iRVvJyJS.js";import"./ASMQKSDT-QtEie5Jh.js";import"./Tooltip-CLI7iDKA.js";import"./tooltip-anchor-tVUznSSS.js";import"./BOLVLGVE-BtKDFFR7.js";import"./Field-DQuwljSf.js";import"./~hooks-Wdjhtx2E.js";import"./ListItem-Bk2XtJ05.js";const Ae="_appLayout_1hpze_5",ve="_header_1hpze_22",ze="_platformBar_1hpze_32",Pe="_logo_1hpze_38",Me="_tools_1hpze_48",ye="_leftPanel_1hpze_58",Re="_panelHeader_1hpze_70",Ne="_panelTitleWrapper_1hpze_78",Te="_panelCaption_1hpze_82",Be="_shiftIconRight_1hpze_86",De="_subheader_1hpze_90",ke="_subheaderTitle_1hpze_101",we="_searchInput_1hpze_106",Ee="_subheaderActions_1hpze_110",Ke="_tabList_1hpze_114",Le="_emptyState_1hpze_119",Fe="_canvasWrapper_1hpze_128",Xe="_canvas_1hpze_128",Ge="_splitter_1hpze_165",Oe="_tabPanel_1hpze_211",He="_tree_1hpze_217",We="_action_1hpze_222",Ve="_actionIcon_1hpze_228",$e="_slider_1hpze_239",m={appLayout:Ae,header:ve,platformBar:ze,logo:Pe,tools:Me,leftPanel:ye,panelHeader:Re,panelTitleWrapper:Ne,panelCaption:Te,shiftIconRight:Be,subheader:De,subheaderTitle:ke,searchInput:we,subheaderActions:Ee,tabList:Ke,emptyState:Le,canvasWrapper:Fe,canvas:Xe,splitter:Ge,tabPanel:Oe,tree:He,action:We,actionIcon:Ve,slider:$e},q="Kiwi sandbox",Ut=()=>[{title:q}],qt=re(function(){const[r,s]=ae(),l=r.get("tree")==="empty"?"epoch-2":"epoch-1",x=n.useCallback(i=>{s(h=>(i==="epoch-2"?h.set("tree","empty"):h.delete("tree"),h))},[s]),u=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),c=n.useId();return e.jsxs(Ue,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:m.panelHeader,children:[e.jsxs("div",{children:[e.jsx(T,{render:i=>e.jsx("label",{...i,htmlFor:c}),children:"Choose Model"}),e.jsx(oe,{className:m.panelTitleWrapper,children:e.jsx(ce,{id:c,variant:"ghost",defaultValue:l,onChange:i=>x(i.target.value),children:Object.entries(u).map(([i,h])=>e.jsx("option",{value:i,children:h},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(T,{render:i=>e.jsx("h2",{...i}),children:u[l]}),e.jsx("p",{className:m.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:m.actions,children:e.jsx(N,{className:m.shiftIconRight,icon:xe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(lt,{children:e.jsxs(at,{children:[e.jsx(st,{}),e.jsx(X,{tabId:"simple",className:m.tabPanel,focusable:!1,children:l==="epoch-2"?e.jsx(H,{}):e.jsx(W,{tree:"simple"})}),e.jsx(X,{tabId:"complex",className:m.tabPanel,focusable:!1,children:l==="epoch-2"?e.jsx(H,{}):e.jsx(W,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:m.header,children:[e.jsx("div",{className:m.logo,children:e.jsx(M,{href:y,size:"large"})}),e.jsx(K,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:q})]}),e.jsx("div",{className:m.platformBar,children:e.jsxs("div",{className:m.tools,children:[e.jsx(M,{href:y,size:"large"}),e.jsx(M,{href:y,size:"large"}),e.jsx(M,{href:y,size:"large"})]})}),e.jsx("div",{className:m.canvasWrapper,children:e.jsx("div",{className:m.canvas})})]})});function Ue(o){const{sliderProps:r,panelProps:s,panelMinSize:l,panelMaxSize:x,resizing:u}=Qe({minSize:{px:256,pct:20},maxSize:{pct:30}}),c=n.useId();return e.jsxs("div",{className:m.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":x},children:[e.jsx("div",{...s,className:m.leftPanel,style:{position:"relative",...s.style},children:o.panelContent}),e.jsxs("div",{className:m.splitter,"data-resizing":u?"true":void 0,children:[e.jsx(T,{render:i=>e.jsx("label",{...i,htmlFor:c,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:c,type:"range",className:m.slider,...r})]}),o.children]})}function H(){return e.jsxs("div",{className:m.emptyState,children:[e.jsx(K,{children:"No layers"}),e.jsx(le,{children:"Create a layer"})]})}function qe(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{children:"No results found"})})}function Je(o,r,s){return Math.min(Math.max(o,r),s)}function Qe(o){const{minSize:r,maxSize:s,onCollapse:l}=o,x=n.useId(),u=n.useRef(null),[c,i]=n.useState(void 0),[h,a]=n.useState(void 0),[p,b]=n.useState(void 0),[f,C]=n.useState(!1),[A,z]=n.useState(void 0),d=n.useMemo(()=>{if(r&&h)return Math.min(r.px,r.pct/100*h)},[r,h]),S=n.useMemo(()=>{if(d&&s&&h)return Math.max(d,s.pct/100*h)},[s,h,d]),_=n.useMemo(()=>{if(p==="smallest")return d??0;if(p==="largest")return S??0;if(c&&d&&S)return Je(c,d,S)},[c,d,S,p]);n.useEffect(()=>{const j=u.current;if(!j)return;const g=j.parentElement;if(!g)return;const v=new ResizeObserver(()=>{const k=g.getBoundingClientRect(),w=j.getBoundingClientRect();a(k.width),i(w.width)});return v.observe(g),v.observe(j),()=>{v.disconnect()}},[]);const R=n.useCallback(j=>{const g=u.current;if(!g)return;const v=g.getBoundingClientRect();z(v.width+j),b(void 0),C(!0)},[]),D=n.useCallback(j=>{const g=u.current;if(!g)return;const v=g.parentElement;if(!v)return;const k=v.getBoundingClientRect(),w=j*(k.width*.005),se=g.getBoundingClientRect();z(se.width+w),b(void 0)},[]),Y=n.useCallback(()=>{u.current&&(z(void 0),C(!1))},[]),{moveableProps:P}=Ye({onMove:R,onMoveEnd:Y,onKeyMove:D}),Z=n.useMemo(()=>({...P,onKeyDown:j=>{var g;if((g=P.onKeyDown)==null||g.call(P,j),!j.defaultPrevented)switch(j.key){case"Enter":j.preventDefault(),l==null||l();break;case"Home":j.preventDefault(),b("smallest");break;case"End":j.preventDefault(),b("largest");break}},onChange:j=>{if(f)return;const g=Number(j.target.value);z(g)},value:_===void 0?0:Math.floor(_),min:d===void 0?void 0:Math.floor(d),max:S===void 0?void 0:Math.floor(S)}),[P,_,d,S,l,f]),ee=n.useMemo(()=>({style:{WebkitUserSelect:A===void 0?void 0:"none"},id:x,ref:u}),[x,A]),te=d===void 0?void 0:`${Math.floor(d)}px`,ne=n.useMemo(()=>{if(A!==void 0&&s!==void 0&&p===void 0)return`min(${Math.floor(A)}px, ${s.pct}%)`;if(_!==void 0)return`${Math.floor(_)}px`},[s,A,_,p]);return{sliderProps:Z,panelProps:ee,panelMinSize:te,panelMaxSize:ne,resizing:f}}function Ye(o){const{onMove:r,onMoveEnd:s,onKeyMove:l}=o,x=n.useRef(null),u=n.useRef(void 0),c=n.useRef(void 0),i=n.useCallback(()=>{c.current!==void 0&&(c.current=void 0,s==null||s())},[s]);return{moveableProps:n.useMemo(()=>({onPointerDown:a=>{if(a.button!==0||a.ctrlKey)return;const p=x.current;if(!p)return;const b=p.getBoundingClientRect(),f=a.clientX-b.left;c.current=f,a.preventDefault(),p.setPointerCapture(a.pointerId)},onPointerMove:a=>{const p=c.current;if(p===void 0)return;const b=x.current;if(!b)return;const f=b.getBoundingClientRect(),C=a.clientX-p-f.left;a.preventDefault(),r==null||r(C)},onPointerUp:i,onPointerCancel:i,onKeyDown:a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowLeft":a.preventDefault(),l==null||l(-1);break;case"ArrowRight":a.preventDefault(),l==null||l(1);break}},ref:a=>{var b;if(x.current=a,(b=u.current)==null||b.call(u),u.current=void 0,!a)return;const p=f=>{f.preventDefault()};a.addEventListener("touchstart",p),u.current=()=>{a.removeEventListener("touchstart",p)}}}),[l,r,i])}}const t=(()=>{let o=0;return r=>({id:`${o++}`,label:`Tree Item ${o}`,items:[],expanded:!0,...r})})(),J={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},Ze={filters:[],items:[t({label:"ITC_Master",items:[t({label:"002_Substation",sublabel:"Additional description",expanded:!1,items:[t({label:"002_Substation_A"})]}),t({label:"005-BENROAD-00-XX-M3-D-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-D-00003-A"})]}),t({label:"005-BENROAD-00-XX-M3-D-00005.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-D-00005-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A"})]}),t({label:"007-aa_master.dgn",items:[t({label:"A-CLNG-LITE",expanded:!1,items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",items:[t({label:"A-DOOR-2D-PLAN",items:[t({label:"P00003 [2-KA62]",items:[t({label:"Cell [2-KA63]",items:[t({label:"Cell [2-KA64]",items:[t({label:"Complex Chain [2-KA6A]"}),t({label:"Complex Chain [2-KA6B]"}),t({label:"Complex Chain [2-KA6C]"}),t({label:"Complex Chain [2-KA6D]"}),t({label:"Complex Chain [2-KA6E]"}),t({label:"Complex Chain [2-KA6F]"}),t({label:"Complex Chain [2-KA6G]"}),t({label:"Complex Chain [2-KA6H]"}),t({label:"Complex Chain [2-KA61]"}),t({label:"Complex Chain [2-KA65]"}),t({label:"Complex Chain [2-KA66]"}),t({label:"Complex Chain [2-KA67]"}),t({label:"Complex Chain [2-KA68]",sublabel:"Additional description"}),t({label:"Complex Chain [2-KA69]",sublabel:"Additional description"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA86]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA98]",expanded:!1,items:[t({label:"P00003 [2-KA98-A]"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,items:[t({label:"P00003 [2-KAAA-A]"})]})]})]})]})]})]};function et({items:o,filters:r,search:s}){const l=n.useMemo(()=>r.length===0?o:o.reduce((c,i)=>(!i.type||!r.includes(i.type)||c.push(i),c),[]),[o,r]),x=n.useMemo(()=>{function c(i){return i.reduce((h,a)=>{const p=c(a.items??[]);return(a.label.toLowerCase().includes(s.toLowerCase())||p.length>0)&&h.push({...a,items:p}),h},[])}return s===""?l:c(l)},[l,s]),u=n.useMemo(()=>{if(r.length===0&&s==="")return;function c(i){return i.reduce((h,a)=>{const p=a.items?c(a.items):0;return h+1+p},0)}return c(x)},[x,r,s]);return{filteredTree:x,itemCount:u}}function tt(o,r,s){return n.useMemo(()=>{function l(x,u,c,i,h){const a=[];let p=1;for(const b of x){const f=b.id===r||i,C=s.includes(b.id)||h;a.push({...b,level:c,parentItem:u,selected:f,hidden:C,parentHidden:h,position:p++,size:x.length}),b.expanded&&a.push(...l(b.items,b,c+1,f,C))}return a}return l(o,void 0,1,!1,!1)},[o,r,s])}function Q(o,r){for(const s of o){if(s.id===r)return s;const l=Q(s.items,r);if(l)return l}}function W({tree:o}){const{selectedId:r}=n.useContext(L),{filters:s,search:l,setItemCount:x}=n.useContext(B),[u,c]=n.useState(),[i,h]=n.useState([]),a=n.useCallback(d=>{h(S=>S.includes(d)?S.filter(_=>_!==d):[...S,d])},[]),[p,b]=n.useState(()=>o==="complex"?Ze.items:J.items),{filteredTree:f,itemCount:C}=et({items:p,filters:s,search:l}),A=tt(f,u,i);n.useEffect(()=>{o===r&&x(C)},[o,r,x,C]);const z=n.useDeferredValue(A);return z.length===0?e.jsx(qe,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(me,{className:m.tree,children:z.map(d=>e.jsx(be,{label:d.label,sublabel:d.sublabel,"aria-level":d.level,"aria-posinset":d.position,"aria-setsize":d.size,selected:d.selected,onSelectedChange:()=>{if(u===d.id){c(void 0);return}c(d.id)},expanded:d.items.length===0?void 0:d.expanded,onExpandedChange:S=>{b(_=>{const R=Q(_,d.id);if(!R)return _;const D=[..._];return R.expanded=S,D})},icon:e.jsx(M,{href:y,style:{display:"inline"}}),actions:[e.jsx(E,{className:m.action,icon:je,label:"Lock","aria-hidden":d.hidden},"lock"),e.jsx(E,{className:m.action,icon:d.hidden?ge:Ie,label:d.hidden?"Show":"Hide",visible:d.hidden?!0:void 0,onClick:()=>{a(d.id)}},"visibility"),e.jsx(nt,{hidden:d.hidden},"more")]},d.id))})})}function nt({hidden:o}){return e.jsxs(V,{children:[e.jsx($,{className:m.action,"aria-hidden":o,render:e.jsx(E,{icon:Ce,label:"More"})}),e.jsxs(U,{style:{minInlineSize:164},children:[e.jsx(I,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(I,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(I,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(I,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(I,{shortcuts:"]",children:"Bring to front"}),e.jsx(I,{shortcuts:"[",children:"Send to back"}),e.jsx(I,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(I,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(I,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(I,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(I,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(I,{shortcuts:"I",children:"Isolate object"})]})]})}function st(){const{selectedId:o}=n.useContext(L),{itemCount:r,filtered:s,clearFilters:l,search:x,setSearch:u}=n.useContext(B),[c,i]=n.useState(!1),h=n.useRef(null),a=n.useRef(null),p=c?e.jsxs(e.Fragment,{children:[e.jsx(rt,{filters:o==="simple"?J.filters:[]}),e.jsx(N,{className:m.shiftIconRight,icon:Se,label:"Close",variant:"ghost",onClick:()=>{var f;u(""),l(),F.flushSync(()=>i(!1)),(f=a.current)==null||f.focus()}})]}):e.jsx(N,{className:m.shiftIconRight,icon:O,label:"Search",variant:"ghost",onClick:()=>{var f;F.flushSync(()=>i(!0)),(f=h.current)==null||f.focus()}}),b=n.useMemo(()=>{if(s)return r===void 0?"Showing all tree items":`Showing ${r} tree items`},[s,r]);return e.jsxs("div",{className:m.subheader,children:[e.jsx(T,{"aria-live":"polite","aria-atomic":!0,children:b}),c?void 0:e.jsxs(de,{className:m.tabList,tone:"accent",ref:a,children:[e.jsx(G,{id:"simple",children:"Simple"}),e.jsx(G,{id:"complex",children:"Complex"})]}),c?e.jsxs(pe,{className:m.searchInput,children:[e.jsx(he,{href:O}),e.jsx(fe,{placeholder:"Search",ref:h,onChange:f=>{u(f.target.value)},value:x})]}):null,e.jsx("div",{className:m.subheaderActions,children:p})]})}function rt({filters:o}){const r=n.useContext(B);return e.jsxs(V,{children:[e.jsx($,{render:e.jsx(N,{icon:_e,label:"Filter",variant:"ghost",disabled:o.length===0,isActive:r.filters.length>0})}),e.jsx(U,{children:o.map(s=>{const l=r.filters.includes(s);return e.jsx(ie,{name:s,checked:l,onChange:()=>{r.toggleFilter(s)},children:s},s)})})]})}function at(o){const[r,s]=n.useState(!1),[l,x]=n.useState([]),[u,c]=n.useState(""),[i,h]=n.useState(void 0),a=n.useCallback(f=>{x(C=>C.includes(f)?C.filter(A=>A!==f):[...C,f]),s(!0)},[]),p=n.useCallback(()=>{x([]),s(!0)},[]),b=n.useCallback(f=>{c(f),s(!0)},[]);return e.jsx(B.Provider,{value:n.useMemo(()=>({filters:l,filtered:r,toggleFilter:a,clearFilters:p,search:u,setSearch:b,itemCount:i,setItemCount:h}),[l,r,a,p,u,b,i]),children:o.children})}function lt(o){const[r,s]=n.useState(void 0);return e.jsx(L.Provider,{value:n.useMemo(()=>({selectedId:r??""}),[r]),children:e.jsx(ue,{setSelectedId:s,selectedId:r,children:o.children})})}const B=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),L=n.createContext({selectedId:""});export{qt as default,Ut as meta};
