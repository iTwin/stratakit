var Fe=e=>{throw TypeError(e)};var ge=(e,t,s)=>t.has(e)||Fe("Cannot "+s);var i=(e,t,s)=>(ge(e,t,"read from private field"),s?s.call(e):t.get(e)),M=(e,t,s)=>t.has(e)?Fe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),S=(e,t,s,n)=>(ge(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),w=(e,t,s)=>(ge(e,t,"access private method"),s);import{w as st}from"./LMDWO4NN-Dg-CmVu9.js";import{a as o,n as r,t as rt}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{a as ke}from"./index-ChOFKjs3.js";import{G as nt,u as it,B as at}from"./Button-CEY4h1K_.js";import{L as ot,a as Me,b as De,D as Ve,c as We,d as $e,e as z,f as lt}from"./DropdownMenu-DjY6S54T.js";import{I as H}from"./Icon-Bvn2Wcu5.js";import{I as ne}from"./IconButton-B_zFmHKs.js";import{F as ct,L as ut}from"./Label-DBHnAU-G.js";import{S as dt,H as ht}from"./Select-Ae09_qov.js";import{S as Ne}from"./Skeleton-DOAZqkeh.js";import{T as ft,a as mt,b as pt,c as gt}from"./Tabs-CW8ZfKGx.js";import{T as de}from"./Text-jB67G3_s.js";import{T as vt,a as xt,b as bt}from"./TextBox-BWK6DSy9.js";import{c as $,a as jt}from"./~utils-uzVVQVsv.js";import{R as ie}from"./XL7CSKGW-UlgSkSI6.js";import{u as Ct,C as yt}from"./ITI7HKP4-DbxAdGsH.js";import{f as te}from"./~utils-CDNTHryc.js";import{V as ee}from"./VisuallyHidden-CBlrUW0k.js";import{S as St,l as Pe,q as O,t as ve,r as ue,b as It,u as xe,v as ze,w as Rt,g as _t,x as wt,y as Ee,n as Ge,z as Tt}from"./QueryClientProvider-CsjJmbma.js";import{p as se}from"./placeholder-DyDmZlpM.js";import{p as Ft,l as kt,h as Mt,s as Le,m as Dt,d as Nt,f as Pt}from"./visibility-hide-q3PJlrWx.js";import{s as zt}from"./visibility-show-BikOIQmu.js";import{C as Et}from"./P2CTZE2T-CsknsjqQ.js";import{T as Lt}from"./toolbar-BCmn58t3.js";import{u as ae}from"./~hooks-DKHT3q8G.js";import"./X5NMLKT6-tbHUaCWI.js";import"./KUU7WJ55-DGpHxwfQ.js";import"./LVA2YJMS-Poy2N9Zq.js";import"./Kbd-TNz0oxDc.js";import"./BYC7LY2E-DEfXd4q1.js";import"./YV4JVR4I-DPjYyIBF.js";import"./VGCJ63VH-B_HxEu7q.js";import"./XX67R432-tiBLlwDL.js";import"./AOQQTIBO-B4HjLz2q.js";import"./MTZPJQMC-DyHagAf_.js";import"./VEVQD5MH-5tJIUYnQ.js";import"./P4IRICAX-BkrqoX0A.js";import"./ASMQKSDT-Bn53RVEK.js";import"./BOLVLGVE-BFPJ-NKS.js";import"./Tooltip-DWhHrP9H.js";import"./tooltip-anchor-DqtdyEiF.js";import"./C3IKGW5T-C3PuGI4F.js";import"./RZ4GPYOB-Do0ZeBdx.js";const Ot=o.createContext(void 0),Bt=te((e,t)=>{const{"aria-level":s,selected:n,expanded:d,icon:l,unstable_decorations:a,label:u,description:f,actions:h,onSelectedChange:m,onExpandedChange:c,onClick:g,onKeyDown:b,...T}=e,p=R=>{n!==void 0&&(R.stopPropagation(),m==null||m(!n))},x=R=>{R.altKey||R.ctrlKey||R.metaKey||R.shiftKey||d!==void 0&&(R.key==="ArrowRight"||R.key==="ArrowLeft")&&(R.preventDefault(),c==null||c(R.key==="ArrowRight"))},I=o.useId(),F=o.useId(),E=o.useId(),G=o.useMemo(()=>{const R=[];return f&&R.push(F),(a||l)&&R.push(E),R.length>0?R.join(" "):void 0},[a,l,E,f,F]);return r.jsx(Ot.Provider,{value:o.useMemo(()=>({level:s,expanded:d,selected:n}),[s,d,n]),children:r.jsx(Et,{render:r.jsx(ie,{...T}),onClick:ae(g,p),onKeyDown:ae(b,x),role:"treeitem","aria-expanded":d,"aria-selected":n,"aria-labelledby":I,"aria-describedby":G,"aria-level":s,className:$("ðŸ¥-tree-item",e.className),ref:t,children:r.jsxs(ot,{"data-kiwi-expanded":d,"data-kiwi-selected":n,className:"ðŸ¥-tree-item-node",style:{"--ðŸ¥tree-item-level":s},role:void 0,children:[r.jsxs(Me,{children:[r.jsx(nt,{align:f?"block":void 0,children:r.jsx(Qt,{onClick:()=>{d!==void 0&&(c==null||c(!d))}})}),l||a?r.jsx(ie,{className:"ðŸ¥-tree-item-decoration",id:E,render:o.isValidElement(l)?l:typeof l=="string"?r.jsx(H,{href:l}):void 0,children:l?null:a}):null]}),r.jsx(De,{id:I,className:"ðŸ¥-tree-item-content",children:u}),f?r.jsx(De,{id:F,className:"ðŸ¥-tree-item-description",children:f}):void 0,r.jsx(Me,{render:r.jsx(Ut,{children:h})})]})})})}),Ut=te((e,t)=>r.jsx(Lt,{...e,onClick:ae(e.onClick,s=>s.stopPropagation()),onKeyDown:ae(e.onKeyDown,s=>s.stopPropagation()),className:$("ðŸ¥-tree-item-actions",e.className),ref:t,children:e.children})),be=te((e,t)=>{const{visible:s,...n}=e;return r.jsx(ne,{inert:s===!1?!0:void 0,...n,variant:"ghost",className:$("ðŸ¥-tree-item-action",e.className),"data-kiwi-visible":s,ref:t})}),Qt=te((e,t)=>r.jsx(ie.span,{"aria-hidden":"true",...e,onClick:ae(e.onClick,s=>s.stopPropagation()),className:$("ðŸ¥-button","ðŸ¥-icon-button","ðŸ¥-ghost-aligner","ðŸ¥-tree-item-expander",e.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":it(),ref:t,children:r.jsx(At,{})})),At=te((e,t)=>r.jsx(H,{...e,render:r.jsx(ie.svg,{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",render:e.render,children:r.jsx("path",{d:"M4.146 6.146a.5.5 0 0 1 .708 0L8 9.293l3.146-3.147a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708Z"})}),className:$("ðŸ¥-tree-chevron",e.className),ref:t})),Ht=te((e,t)=>{const s=Ct({orientation:"vertical"});return r.jsx(ie.div,{role:"tree",...e,render:r.jsx(yt,{store:s}),className:$("ðŸ¥-tree",e.className),ref:t,children:e.children})});var N,v,oe,D,K,q,Q,L,le,Z,J,V,W,A,Y,j,re,je,Ce,ye,Se,Ie,Re,_e,Xe,Ke,Kt=(Ke=class extends St{constructor(t,s){super();M(this,j);M(this,N);M(this,v);M(this,oe);M(this,D);M(this,K);M(this,q);M(this,Q);M(this,L);M(this,le);M(this,Z);M(this,J);M(this,V);M(this,W);M(this,A);M(this,Y,new Set);this.options=s,S(this,N,t),S(this,L,null),S(this,Q,Pe()),this.options.experimental_prefetchInRender||i(this,Q).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,v).addObserver(this),Oe(i(this,v),this.options)?w(this,j,re).call(this):this.updateResult(),w(this,j,Se).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return we(i(this,v),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return we(i(this,v),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,w(this,j,Ie).call(this),w(this,j,Re).call(this),i(this,v).removeObserver(this)}setOptions(t,s){const n=this.options,d=i(this,v);if(this.options=i(this,N).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,i(this,v))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");w(this,j,_e).call(this),i(this,v).setOptions(this.options),n._defaulted&&!ve(this.options,n)&&i(this,N).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,v),observer:this});const l=this.hasListeners();l&&Be(i(this,v),d,this.options,n)&&w(this,j,re).call(this),this.updateResult(s),l&&(i(this,v)!==d||O(this.options.enabled,i(this,v))!==O(n.enabled,i(this,v))||ue(this.options.staleTime,i(this,v))!==ue(n.staleTime,i(this,v)))&&w(this,j,je).call(this);const a=w(this,j,Ce).call(this);l&&(i(this,v)!==d||O(this.options.enabled,i(this,v))!==O(n.enabled,i(this,v))||a!==i(this,A))&&w(this,j,ye).call(this,a)}getOptimisticResult(t){const s=i(this,N).getQueryCache().build(i(this,N),t),n=this.createResult(s,t);return Wt(this,n)&&(S(this,D,n),S(this,q,this.options),S(this,K,i(this,v).state)),n}getCurrentResult(){return i(this,D)}trackResult(t,s){const n={};return Object.keys(t).forEach(d=>{Object.defineProperty(n,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),s==null||s(d),t[d])})}),n}trackProp(t){i(this,Y).add(t)}getCurrentQuery(){return i(this,v)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=i(this,N).defaultQueryOptions(t),n=i(this,N).getQueryCache().build(i(this,N),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return w(this,j,re).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,D)))}createResult(t,s){var ce;const n=i(this,v),d=this.options,l=i(this,D),a=i(this,K),u=i(this,q),h=t!==n?t.state:i(this,oe),{state:m}=t;let c={...m},g=!1,b;if(s._optimisticResults){const k=this.hasListeners(),B=!k&&Oe(t,s),y=k&&Be(t,n,s,d);(B||y)&&(c={...c,...wt(m.data,t.options)}),s._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:T,errorUpdatedAt:p,status:x}=c;if(s.select&&c.data!==void 0)if(l&&c.data===(a==null?void 0:a.data)&&s.select===i(this,le))b=i(this,Z);else try{S(this,le,s.select),b=s.select(c.data),b=Ee(l==null?void 0:l.data,b,s),S(this,Z,b),S(this,L,null)}catch(k){S(this,L,k)}else b=c.data;if(s.placeholderData!==void 0&&b===void 0&&x==="pending"){let k;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(u==null?void 0:u.placeholderData))k=l.data;else if(k=typeof s.placeholderData=="function"?s.placeholderData((ce=i(this,J))==null?void 0:ce.state.data,i(this,J)):s.placeholderData,s.select&&k!==void 0)try{k=s.select(k),S(this,L,null)}catch(B){S(this,L,B)}k!==void 0&&(x="success",b=Ee(l==null?void 0:l.data,k,s),g=!0)}i(this,L)&&(T=i(this,L),b=i(this,Z),p=Date.now(),x="error");const I=c.fetchStatus==="fetching",F=x==="pending",E=x==="error",G=F&&I,R=b!==void 0,P={status:x,fetchStatus:c.fetchStatus,isPending:F,isSuccess:x==="success",isError:E,isInitialLoading:G,isLoading:G,data:b,dataUpdatedAt:c.dataUpdatedAt,error:T,errorUpdatedAt:p,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>h.dataUpdateCount||c.errorUpdateCount>h.errorUpdateCount,isFetching:I,isRefetching:I&&!F,isLoadingError:E&&!R,isPaused:c.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:E&&R,isStale:Te(t,s),refetch:this.refetch,promise:i(this,Q)};if(this.options.experimental_prefetchInRender){const k=_=>{P.status==="error"?_.reject(P.error):P.data!==void 0&&_.resolve(P.data)},B=()=>{const _=S(this,Q,P.promise=Pe());k(_)},y=i(this,Q);switch(y.status){case"pending":t.queryHash===n.queryHash&&k(y);break;case"fulfilled":(P.status==="error"||P.data!==y.value)&&B();break;case"rejected":(P.status!=="error"||P.error!==y.reason)&&B();break}}return P}updateResult(t){const s=i(this,D),n=this.createResult(i(this,v),this.options);if(S(this,K,i(this,v).state),S(this,q,this.options),i(this,K).data!==void 0&&S(this,J,i(this,v)),ve(n,s))return;S(this,D,n);const d={},l=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,u=typeof a=="function"?a():a;if(u==="all"||!u&&!i(this,Y).size)return!0;const f=new Set(u??i(this,Y));return this.options.throwOnError&&f.add("error"),Object.keys(i(this,D)).some(h=>{const m=h;return i(this,D)[m]!==s[m]&&f.has(m)})};(t==null?void 0:t.listeners)!==!1&&l()&&(d.listeners=!0),w(this,j,Xe).call(this,{...d,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&w(this,j,Se).call(this)}},N=new WeakMap,v=new WeakMap,oe=new WeakMap,D=new WeakMap,K=new WeakMap,q=new WeakMap,Q=new WeakMap,L=new WeakMap,le=new WeakMap,Z=new WeakMap,J=new WeakMap,V=new WeakMap,W=new WeakMap,A=new WeakMap,Y=new WeakMap,j=new WeakSet,re=function(t){w(this,j,_e).call(this);let s=i(this,v).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(It)),s},je=function(){w(this,j,Ie).call(this);const t=ue(this.options.staleTime,i(this,v));if(xe||i(this,D).isStale||!ze(t))return;const n=Rt(i(this,D).dataUpdatedAt,t)+1;S(this,V,setTimeout(()=>{i(this,D).isStale||this.updateResult()},n))},Ce=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,v)):this.options.refetchInterval)??!1},ye=function(t){w(this,j,Re).call(this),S(this,A,t),!(xe||O(this.options.enabled,i(this,v))===!1||!ze(i(this,A))||i(this,A)===0)&&S(this,W,setInterval(()=>{(this.options.refetchIntervalInBackground||_t.isFocused())&&w(this,j,re).call(this)},i(this,A)))},Se=function(){w(this,j,je).call(this),w(this,j,ye).call(this,w(this,j,Ce).call(this))},Ie=function(){i(this,V)&&(clearTimeout(i(this,V)),S(this,V,void 0))},Re=function(){i(this,W)&&(clearInterval(i(this,W)),S(this,W,void 0))},_e=function(){const t=i(this,N).getQueryCache().build(i(this,N),this.options);if(t===i(this,v))return;const s=i(this,v);S(this,v,t),S(this,oe,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Xe=function(t){Ge.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(i(this,D))}),i(this,N).getQueryCache().notify({query:i(this,v),type:"observerResultsUpdated"})})},Ke);function Vt(e,t){return O(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Oe(e,t){return Vt(e,t)||e.state.data!==void 0&&we(e,t,t.refetchOnMount)}function we(e,t,s){if(O(t.enabled,e)!==!1){const n=typeof s=="function"?s(e):s;return n==="always"||n!==!1&&Te(e,t)}return!1}function Be(e,t,s,n){return(e!==t||O(n.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Te(e,s)}function Te(e,t){return O(t.enabled,e)!==!1&&e.isStaleByTime(ue(t.staleTime,e))}function Wt(e,t){return!ve(e.getCurrentResult(),t)}var qe=o.createContext(!1),$t=()=>o.useContext(qe);qe.Provider;function Gt(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Xt=o.createContext(Gt()),qt=()=>o.useContext(Xt);function Zt(e,t){return typeof e=="function"?e(...t):!!e}function Ue(){}var Jt=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Yt=e=>{o.useEffect(()=>{e.clearReset()},[e])},es=({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:d})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(d&&e.data===void 0||Zt(s,[e.error,n])),ts=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...s)=>Math.max(t(...s),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},ss=(e,t)=>e.isLoading&&e.isFetching&&!t,rs=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Qe=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ns(e,t,s){var c,g,b,T,p;const n=Tt(),d=$t(),l=qt(),a=n.defaultQueryOptions(e);(g=(c=n.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||g.call(c,a),a._optimisticResults=d?"isRestoring":"optimistic",ts(a),Jt(a,l),Yt(l);const u=!n.getQueryCache().get(a.queryHash),[f]=o.useState(()=>new t(n,a)),h=f.getOptimisticResult(a),m=!d&&e.subscribed!==!1;if(o.useSyncExternalStore(o.useCallback(x=>{const I=m?f.subscribe(Ge.batchCalls(x)):Ue;return f.updateResult(),I},[f,m]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),o.useEffect(()=>{f.setOptions(a,{listeners:!1})},[a,f]),rs(a,h))throw Qe(a,f,l);if(es({result:h,errorResetBoundary:l,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((T=(b=n.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||T.call(b,a,h),a.experimental_prefetchInRender&&!xe&&ss(h,d)){const x=u?Qe(a,f,l):(p=n.getQueryCache().get(a.queryHash))==null?void 0:p.promise;x==null||x.catch(Ue).finally(()=>{f.updateResult()})}return a.notifyOnChangeProps?h:f.trackResult(h)}function is(e,t){return ns(e,Kt)}const as="_appLayout_10g0g_5",os="_header_10g0g_22",ls="_platformBar_10g0g_32",cs="_logo_10g0g_38",us="_tools_10g0g_48",ds="_leftPanel_10g0g_58",hs="_panelHeader_10g0g_70",fs="_panelTitleWrapper_10g0g_78",ms="_panelCaption_10g0g_82",ps="_shiftIconRight_10g0g_86",gs="_subheader_10g0g_90",vs="_searchInput_10g0g_106",xs="_subheaderActions_10g0g_110",bs="_tabList_10g0g_114",js="_emptyState_10g0g_119",Cs="_skeletonTree_10g0g_128",ys="_skeletonTreeItem_10g0g_135",Ss="_canvasWrapper_10g0g_144",Is="_canvas_10g0g_144",Rs="_splitter_10g0g_181",_s="_tree_10g0g_235",ws="_action_10g0g_239",Ts="_slider_10g0g_256",Fs="_colorSwatch_10g0g_265",C={appLayout:as,header:os,platformBar:ls,logo:cs,tools:us,leftPanel:ds,panelHeader:hs,panelTitleWrapper:fs,panelCaption:ms,shiftIconRight:ps,subheader:gs,searchInput:vs,subheaderActions:xs,tabList:bs,emptyState:js,skeletonTree:Cs,skeletonTreeItem:ys,canvasWrapper:Ss,canvas:Is,splitter:Rs,tree:_s,action:ws,slider:Ts,colorSwatch:Fs},ks="/451/assets/sandbox.model1-CoozF5xy.json",Ms="/451/assets/sandbox.model2-Bi69Ub92.json",Ds="data:application/json;base64,ewoJIm5hbWUiOiAiRXBvY2ggU3lzdGVtIGlNb2RlbCAzIiwKCSJ2ZXJzaW9uIjogIjIwMjQgUmVmcmVzaCIsCgkiZGF0YSI6IHsKCQkiZGVmYXVsdCI6IFtdCgl9Cn0K",he={model1:{name:"Epoch System iModel 1",url:ks},model2:{name:"Epoch System iModel 2",url:Ms},model3:{name:"Epoch System iModel 3",url:Ds}};async function Ns(e){if(e in he){const t=await fetch(he[e].url).then(s=>s.json());return t.slow&&await new Promise(s=>setTimeout(s,Math.random()*2e3)),t}return{name:"Unknown",version:"Unknown",data:{default:[]}}}const Ze="Kiwi sandbox",Br=()=>[{title:Ze}],Ur=st(function(){var l,a;const[t,s]=rt(),n=t.get("model")||"model1",d=is({queryKey:["sandbox-data",n],queryFn:()=>Ns(n)});return r.jsxs(Ps,{panelContent:r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:C.panelHeader,children:[r.jsxs("div",{children:[r.jsxs(ct,{children:[r.jsx(ee,{render:r.jsx(ut,{}),children:"Choose Model"}),r.jsx(dt,{className:C.panelTitleWrapper,children:r.jsx(ht,{variant:"ghost",defaultValue:n,onChange:u=>s({model:u.currentTarget.value}),children:Object.entries(he).map(([u,{name:f}])=>r.jsx("option",{value:u,children:f},u))})})]}),r.jsxs("hgroup",{role:"group",children:[r.jsx(ee,{render:r.jsx("h2",{}),children:(l=he[n])==null?void 0:l.name}),r.jsx(de,{className:C.panelCaption,variant:"body-sm",render:r.jsx("p",{}),children:((a=d.data)==null?void 0:a.version)||""})]})]}),r.jsx("div",{className:C.actions,children:r.jsx(ne,{className:C.shiftIconRight,icon:Ft,label:"Dock panel",variant:"ghost",disabled:!0})})]}),r.jsx(o.Suspense,{fallback:r.jsx(Es,{}),children:r.jsx(Os,{query:d})},n)]}),children:[r.jsxs("header",{className:C.header,children:[r.jsx("div",{className:C.logo,children:r.jsx(H,{href:se,size:"large"})}),r.jsx(de,{render:u=>r.jsx("h1",{...u}),variant:"body-md",children:Ze})]}),r.jsx("div",{className:C.platformBar,children:r.jsxs("div",{className:C.tools,children:[r.jsx(H,{href:se,size:"large"}),r.jsx(H,{href:se,size:"large"}),r.jsx(H,{href:se,size:"large"})]})}),r.jsx("div",{className:C.canvasWrapper,children:r.jsx("div",{className:C.canvas})})]})});function Ps(e){const{sliderProps:t,panelProps:s,panelMinSize:n,panelMaxSize:d,resizing:l}=Qs({minSize:{px:256,pct:20},maxSize:{pct:30}}),a=o.useId();return r.jsxs("div",{className:C.appLayout,style:{"--_panel-min-size":n,"--_panel-max-size":d},children:[r.jsx("div",{...s,className:C.leftPanel,style:{position:"relative",...s.style},children:e.panelContent}),r.jsxs("div",{className:C.splitter,"data-resizing":l?"true":void 0,children:[r.jsx(ee,{render:u=>r.jsx("label",{...u,htmlFor:a,children:"Resize layers panel"}),children:"Resize layers panel"}),r.jsx("input",{id:a,type:"range",className:C.slider,...t})]}),e.children]})}const zs=(()=>{let e=1;function t(){const s=Math.random();let n=e;s<.4?n=e-1:s<.8&&(n=e+1),e=Je(n,1,5)}return()=>{const s=e;return t(),s}})();function Es(){const[e,t]=o.useState(()=>new Array(30).fill(null).map(()=>zs()));return r.jsxs("div",{className:C.skeletonTree,children:[e.map((s,n)=>r.jsx(Ls,{style:{"--level":s}},`${n}-${s}`)),r.jsx(ee,{children:"Loadingâ€¦"})]})}function Ls(e){return r.jsxs("div",{...e,className:$(C.skeletonTreeItem,e.className),children:[r.jsx(Ne,{variant:"object",size:"small"}),r.jsx(Ne,{variant:"text"})]})}function Os(e){var a;const{data:t}=o.use(e.query.promise),s=o.useMemo(()=>Object.entries(t).map(([u,f])=>{const h=f.length<=1?[]:f.map(({label:m})=>m);return{name:u,filters:h,content:f.length>0?r.jsx(Vs,{data:f}):r.jsxs(Bs,{children:[r.jsx(de,{variant:"body-sm",children:"No layers"}),r.jsx(at,{children:"Create a layer"})]})}}),[t]),[n,d]=o.useState((a=s[0])==null?void 0:a.name),l=o.useMemo(()=>{var u;return n?((u=s.find(f=>f.name===n))==null?void 0:u.filters)||[]:s[0].filters},[s,n]);return s.length===1?r.jsxs(He,{allFilters:l,children:[r.jsx(Ae,{}),s[0].content]}):r.jsx(He,{allFilters:l,children:r.jsxs(ft,{selectOnMove:!1,setSelectedId:d,children:[r.jsx(Ae,{tabs:s.map(u=>r.jsx(mt,{id:u.name,children:jt(u.name)},u.name))}),s.map(u=>r.jsx(pt,{tabId:u.name,unmountOnHide:!0,children:u.content},u.name))]})})}function Bs({children:e}){return r.jsx("div",{className:C.emptyState,children:e})}function Us(){return r.jsx("div",{style:{textAlign:"center"},children:r.jsx(de,{variant:"body-sm",children:"No results found"})})}function Je(e,t,s){return Math.min(Math.max(e,t),s)}function Qs(e){const{minSize:t,maxSize:s,onCollapse:n}=e??{},d=o.useId(),l=o.useRef(null),[a,u]=o.useState(void 0),[f,h]=o.useState(void 0),[m,c]=o.useState(void 0),[g,b]=o.useState(!1),[T,p]=o.useState(void 0),x=o.useMemo(()=>{if(t&&f)return Math.min(t.px,t.pct/100*f)},[t,f]),I=o.useMemo(()=>{if(x&&s&&f)return Math.max(x,s.pct/100*f)},[s,f,x]),F=o.useMemo(()=>{if(m==="smallest")return x??0;if(m==="largest")return I??0;if(a&&x&&I)return Je(a,x,I)},[a,x,I,m]);o.useEffect(()=>{const y=l.current;if(!y)return;const _=y.parentElement;if(!_)return;const U=new ResizeObserver(()=>{const me=_.getBoundingClientRect(),pe=y.getBoundingClientRect();h(me.width),u(pe.width)});return U.observe(_),U.observe(y),()=>{U.disconnect()}},[]);const E=o.useCallback(y=>{const _=l.current;if(!_)return;const U=_.getBoundingClientRect();p(U.width+y),c(void 0),b(!0)},[]),G=o.useCallback(y=>{const _=l.current;if(!_)return;const U=_.parentElement;if(!U)return;const me=U.getBoundingClientRect(),pe=y*(me.width*.005),tt=_.getBoundingClientRect();p(tt.width+pe),c(void 0)},[]),R=o.useCallback(()=>{l.current&&(p(void 0),b(!1))},[]),{moveableProps:X}=As({onMove:E,onMoveEnd:R,onKeyMove:G}),P=o.useMemo(()=>({...X,onKeyDown:y=>{var _;if((_=X.onKeyDown)==null||_.call(X,y),!y.defaultPrevented)switch(y.key){case"Enter":y.preventDefault(),n==null||n();break;case"Home":y.preventDefault(),c("smallest");break;case"End":y.preventDefault(),c("largest");break}},onChange:y=>{if(g)return;const _=Number(y.target.value);p(_)},value:F===void 0?0:Math.floor(F),min:x===void 0?void 0:Math.floor(x),max:I===void 0?void 0:Math.floor(I)}),[X,F,x,I,n,g]),ce=o.useMemo(()=>({style:{WebkitUserSelect:T===void 0?void 0:"none"},id:d,ref:l}),[d,T]),k=x===void 0?void 0:`${Math.floor(x)}px`,B=o.useMemo(()=>{if(T!==void 0&&s!==void 0&&m===void 0)return`min(${Math.floor(T)}px, ${s.pct}%)`;if(F!==void 0)return`${Math.floor(F)}px`},[s,T,F,m]);return{sliderProps:P,panelProps:ce,panelMinSize:k,panelMaxSize:B,resizing:g}}function As(e){const{onMove:t,onMoveEnd:s,onKeyMove:n}=e??{},d=o.useRef(null),l=o.useRef(void 0),a=o.useRef(void 0),u=o.useCallback(()=>{a.current!==void 0&&(a.current=void 0,s==null||s())},[s]);return{moveableProps:o.useMemo(()=>({onPointerDown:h=>{if(h.button!==0||h.ctrlKey)return;const m=d.current;if(!m)return;const c=m.getBoundingClientRect(),g=h.clientX-c.left;a.current=g,h.preventDefault(),m.setPointerCapture(h.pointerId)},onPointerMove:h=>{const m=a.current;if(m===void 0)return;const c=d.current;if(!c)return;const g=c.getBoundingClientRect(),b=h.clientX-m-g.left;h.preventDefault(),t==null||t(b)},onPointerUp:u,onPointerCancel:u,onKeyDown:h=>{if(!h.defaultPrevented)switch(h.key){case"ArrowLeft":h.preventDefault(),n==null||n(-1);break;case"ArrowRight":h.preventDefault(),n==null||n(1);break}},ref:h=>{var c;if(d.current=h,(c=l.current)==null||c.call(l),l.current=void 0,!h)return;const m=g=>{g.preventDefault()};h.addEventListener("touchstart",m),l.current=()=>{h.removeEventListener("touchstart",m)}}}),[n,t,u])}}const Ye=(()=>{let e=0;return t=>({id:`${e++}`,label:`Tree Item ${e}`,expanded:!0,...t,items:((t==null?void 0:t.items)??[]).map(Ye)})})();function Hs({items:e,filters:t,search:s}){const n=o.useMemo(()=>t.length===0?e:e.reduce((a,u)=>(t.includes(u.label)&&a.push(u),a),[]),[e,t]),d=o.useMemo(()=>{function a(u){return u.reduce((f,h)=>{const m=a(h.items??[]);return(h.label.toLowerCase().includes(s.toLowerCase())||m.length>0)&&f.push({...h,items:m}),f},[])}return s===""?n:a(n)},[n,s]),l=o.useMemo(()=>{if(t.length===0&&s==="")return;function a(u){return u.reduce((f,h)=>{const m=h.items?a(h.items):0;return f+1+m},0)}return a(d)},[d,t,s]);return{filteredTree:d,itemCount:l}}function Ks(e,t,s){return o.useMemo(()=>{function n(d,l,a,u,f){const h=[];let m=1;for(const c of d){const g=c.id===t||u,b=s.includes(c.id)||f;h.push({...c,level:a,parentItem:l,selected:g,hidden:b,parentHidden:f,position:m++,size:d.length}),c.expanded&&h.push(...n(c.items,c,a+1,g,b))}return h}return n(e,void 0,1,!1,!1)},[e,t,s])}function et(e,t){for(const s of e){if(s.id===t)return s;const n=et(s.items,t);if(n)return n}}function Vs({data:e}){const{appliedFilters:t,search:s,setItemCount:n}=o.useContext(fe),[d,l]=o.useState(),[a,u]=o.useState([]),f=o.useCallback(p=>{u(x=>x.includes(p)?x.filter(I=>I!==p):[...x,p])},[]),[h,m]=o.useState(()=>e.map(p=>Ye(p))),{filteredTree:c,itemCount:g}=Hs({items:h,filters:t,search:s}),b=Ks(c,d,a);o.useEffect(()=>{n(g)},[n,g]);const T=o.useDeferredValue(b);return T.length===0?r.jsx(Us,{}):r.jsx(o.Suspense,{fallback:"Loading...",children:r.jsx(Ht,{className:C.tree,children:T.map(p=>r.jsx(Bt,{label:p.label,description:p.description,"aria-level":p.level,"aria-posinset":p.position,"aria-setsize":p.size,selected:p.selected,onSelectedChange:()=>{if(d===p.id){l(void 0);return}l(p.id)},expanded:p.items.length===0?void 0:p.expanded,onExpandedChange:x=>{m(I=>{const F=et(I,p.id);if(!F)return I;const E=[...I];return F.expanded=x,E})},unstable_decorations:r.jsxs(r.Fragment,{children:[p.color?r.jsx(Gs,{color:p.color,alt:p.color}):null,r.jsx(H,{href:se})]}),actions:[r.jsx(be,{className:C.action,icon:kt,label:"Lock","aria-hidden":p.hidden},"lock"),r.jsx(be,{className:C.action,icon:p.hidden?Mt:zt,label:p.hidden?"Show":"Hide",visible:p.hidden?!0:void 0,onClick:()=>{f(p.id)}},"visibility"),r.jsx(Ws,{hidden:p.hidden},"more")]},p.id))})})}function Ws({hidden:e}){return r.jsxs(Ve,{children:[r.jsx(We,{className:C.action,"aria-hidden":e,render:r.jsx(be,{icon:Dt,label:"More"})}),r.jsxs($e,{style:{minInlineSize:164},children:[r.jsx(z,{label:"Copy",shortcuts:"Command+C"}),r.jsx(z,{label:"Paste",shortcuts:"Command+P"}),r.jsx(z,{label:"Copy/Paste as",shortcuts:"Command+V"}),r.jsx(z,{label:"Move to",shortcuts:"Command+M"}),r.jsx(z,{label:"Bring to front",shortcuts:"]"}),r.jsx(z,{label:"Send to back",shortcuts:"["}),r.jsx(z,{label:"Group selection",shortcuts:"Command+G"}),r.jsx(z,{label:"Ungroup",shortcuts:"Command+U"}),r.jsx(z,{label:"Rename",shortcuts:"Command+R"}),r.jsx(z,{label:"Show/hide",shortcuts:"Shift+Command+V"}),r.jsx(z,{label:"Lock/unlock",shortcuts:"Shift+Command+L"}),r.jsx(z,{label:"Isolate object",shortcuts:"I"})]})]})}function Ae({tabs:e}){const{itemCount:t,isFiltered:s,search:n,setSearch:d}=o.useContext(fe),l=o.useRef(null),a=o.useRef(null),[u,f]=o.useState(!e),h=s||!!n,m=u?r.jsxs(r.Fragment,{children:[r.jsx($s,{}),e?r.jsx(ne,{className:C.shiftIconRight,icon:Nt,label:"Close",variant:"ghost",onClick:()=>{var g;ke.flushSync(()=>f(!1)),(g=a.current)==null||g.focus()}}):null]}):r.jsx(ne,{className:C.shiftIconRight,icon:Le,label:"Search",dot:h?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var g;ke.flushSync(()=>f(!0)),(g=l.current)==null||g.focus()}}),c=o.useMemo(()=>{if(s)return t===void 0?"Showing all tree items":`Showing ${t} tree items`},[s,t]);return r.jsxs("div",{className:C.subheader,children:[r.jsx(ee,{"aria-live":"polite","aria-atomic":!0,children:c}),e&&!u?r.jsx(gt,{className:C.tabList,tone:"accent",ref:a,children:e}):null,u?r.jsxs(vt,{className:C.searchInput,children:[r.jsx(xt,{href:Le}),r.jsx(bt,{placeholder:"Search",ref:l,onChange:g=>d(g.currentTarget.value)})]}):null,r.jsx("div",{className:C.subheaderActions,children:m})]})}function $s(){const e=o.useContext(fe),t=e.appliedFilters.length>0;return r.jsxs(Ve,{children:[r.jsx(We,{render:r.jsx(ne,{icon:Pt,label:"Filter",dot:t?"Some filters applied":void 0,variant:"ghost",disabled:e.allFilters.length===0})}),r.jsx($e,{children:e.allFilters.map(s=>{const n=e.appliedFilters.includes(s);return r.jsx(lt,{name:s,label:s,checked:n,onChange:()=>{e.toggleFilter(s)}},s)})})]})}function He(e){const[t,s]=o.useState(!1),[n,d]=o.useState([]),[l,a]=o.useState(""),[u,f]=o.useState(void 0),h=o.useCallback(g=>{const b=n.includes(g)?n.filter(T=>T!==g):[...n,g];d(b),s(b.length>0)},[n]),m=o.useCallback(()=>{d([]),s(!1)},[]),c=o.useCallback(g=>{a(g),s(!!g)},[]);return r.jsx(fe.Provider,{value:o.useMemo(()=>({allFilters:e.allFilters,appliedFilters:n,isFiltered:t,toggleFilter:h,clearFilters:m,search:l,setSearch:c,itemCount:u,setItemCount:f}),[e.allFilters,n,t,h,m,l,c,u]),children:e.children})}const fe=o.createContext({allFilters:[],appliedFilters:[],isFiltered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}});function Gs(e){return r.jsx("div",{className:C.colorSwatch,style:{"--_color":`var(--_color--${e.color})`},children:e.alt?r.jsx(ee,{children:e.alt}):null})}export{Ur as default,Br as meta};
