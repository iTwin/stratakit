/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/

.ğŸ¥NavigationListRoot {
	@layer base {
		position: relative;
	}

	@layer modifiers {
		/* Faint indentation line that runs across all items */
		&:where([data-_sk-indented]) {
			&::before {
				content: "";
				position: absolute;
				inset-inline-start: var(--stratakit-space-x4);
				inset-block: 0;
				border-inline-start: 1px solid var(--stratakit-color-border-page-base);
				border-radius: 4px;
			}
		}
	}
}

.ğŸ¥NavigationListItemAction {
	--âœ¨height--default: 2rem;
	--âœ¨padding-inline: var(--stratakit-space-x2);

	--âœ¨bg--default: transparent;
	--âœ¨bg--hover: var(--stratakit-color-bg-glow-on-surface-neutral-hover);
	--âœ¨bg--pressed: var(--stratakit-color-bg-glow-on-surface-neutral-pressed);
	--âœ¨bg--active: var(--stratakit-color-bg-glow-on-surface-accent-pressed);

	--âœ¨color--default: var(--stratakit-color-text-neutral-primary);
	--âœ¨color--active: var(--stratakit-color-text-accent-strong);
	--âœ¨color--disabled: var(--stratakit-color-text-neutral-disabled);

	--âœ¨icon--default: var(--stratakit-color-icon-neutral-secondary);
	--âœ¨icon--hover: var(--stratakit-color-icon-neutral-primary);
	--âœ¨icon--pressed: var(--stratakit-color-icon-neutral-primary);
	--âœ¨icon--active: var(--stratakit-color-icon-accent-strong);
	--âœ¨icon--disabled: var(--stratakit-color-icon-neutral-disabled);

	@layer base {
		position: relative;
		display: flex;
		align-items: center;
		gap: var(--stratakit-space-x2);

		inline-size: stretch;
		min-block-size: var(--âœ¨height--default);
		padding-inline: var(--âœ¨padding-inline);
		border-radius: 4px;
		padding-block: var(--stratakit-space-x1);

		font-size: var(--stratakit-font-size-12);
		line-height: 1.2;
		text-decoration: none;
		cursor: pointer;

		color: var(--ğŸŒ€NavigationListAnchor-state--default, var(--âœ¨color--default))
			var(--ğŸŒ€NavigationListAnchor-state--hover, var(--âœ¨color--default))
			var(--ğŸŒ€NavigationListAnchor-state--pressed, var(--âœ¨color--default))
			var(--ğŸŒ€NavigationListAnchor-state--active, var(--âœ¨color--active))
			var(--ğŸŒ€NavigationListAnchor-state--disabled, var(--âœ¨color--disabled));

		background-color: var(--ğŸŒ€NavigationListAnchor-state--default, var(--âœ¨bg--default))
			var(--ğŸŒ€NavigationListAnchor-state--hover, var(--âœ¨bg--hover))
			var(--ğŸŒ€NavigationListAnchor-state--pressed, var(--âœ¨bg--pressed))
			var(--ğŸŒ€NavigationListAnchor-state--active, var(--âœ¨bg--active))
			var(--ğŸŒ€NavigationListAnchor-state--disabled, var(--âœ¨bg--default));

		--ğŸ¥Icon-color: var(--ğŸŒ€NavigationListAnchor-state--default, var(--âœ¨icon--default))
			var(--ğŸŒ€NavigationListAnchor-state--hover, var(---âœ¨icon--hover))
			var(--ğŸŒ€NavigationListAnchor-state--pressed, var(--âœ¨icon--pressed))
			var(--ğŸŒ€NavigationListAnchor-state--active, var(--âœ¨icon--active))
			var(--ğŸŒ€NavigationListAnchor-state--disabled, var(--âœ¨icon--disabled));

		-webkit-tap-highlight-color: var(--stratakit-color-bg-glow-on-surface-neutral-pressed);
	}

	@layer modifiers {
		/* Indentation (empty space at the start) */
		:where(.ğŸ¥NavigationListItem[data-_sk-indented]) & {
			&::before {
				content: "";
				display: inline-block;
				inline-size: var(--stratakit-space-x4);
			}
		}
	}

	@layer states {
		@media (any-hover: hover) {
			&:where(:hover) {
				--ğŸŒ€NavigationListAnchor-state: var(--ğŸŒ€NavigationListAnchor-state--hover);
			}
		}

		&:where(:active) {
			--ğŸŒ€NavigationListAnchor-state: var(--ğŸŒ€NavigationListAnchor-state--pressed);
		}

		&:where([aria-current]:not([aria-current="false"])) {
			--ğŸŒ€NavigationListAnchor-state: var(--ğŸŒ€NavigationListAnchor-state--active);

			/* Border around the entire item */
			&::after {
				content: "";
				position: absolute;
				inset: 0;
				color: var(--stratakit-color-border-accent-strong);
				border: 1px solid;
				border-radius: inherit;
				will-change: transform;
			}

			/* For indented listitems, use a stripe instead of border */
			:where(.ğŸ¥NavigationListItem[data-_sk-indented]) & {
				&::after {
					inset: unset;
					border: none;
					inset-inline-start: var(--stratakit-space-x4);
					transform: translateX(-0.5px); /* Place on top of the faint indentation line */
					inline-size: 2px;
					block-size: 1rem;
					background-color: currentColor;
				}
			}
		}

		&:where(:disabled, [aria-disabled="true"]) {
			--ğŸŒ€NavigationListAnchor-state: var(--ğŸŒ€NavigationListAnchor-state--disabled);

			cursor: not-allowed;
		}
	}

	@layer base.ğŸŒ€ {
		/* See https://kizu.dev/cyclic-toggles/ */
		--ğŸŒ€NavigationListAnchor-state: var(--ğŸŒ€NavigationListAnchor-state--default);
		--ğŸŒ€NavigationListAnchor-state--default: var(--ğŸŒ€NavigationListAnchor-state,);
		--ğŸŒ€NavigationListAnchor-state--hover: var(--ğŸŒ€NavigationListAnchor-state,);
		--ğŸŒ€NavigationListAnchor-state--pressed: var(--ğŸŒ€NavigationListAnchor-state,);
		--ğŸŒ€NavigationListAnchor-state--active: var(--ğŸŒ€NavigationListAnchor-state,);
		--ğŸŒ€NavigationListAnchor-state--disabled: var(--ğŸŒ€NavigationListAnchor-state,)
	}
}

.ğŸ¥NavigationListSubgroupChevron {
	@layer base {
		margin-inline-start: auto;
	}

	@layer modifiers {
		:where(.ğŸ¥NavigationListSubgroupButton[aria-expanded="true"]) & {
			--ğŸ¥ChevronDown-rotate: 180deg;
		}
	}
}

@media (forced-colors: active) {
	.ğŸ¥NavigationListItemAction {
		&:where([aria-current]:not([aria-current="false"])) {
			forced-color-adjust: none;
			background-color: SelectedItem;
			color: SelectedItemText;

			&::after {
				color: SelectedItemText;
			}
		}
		&:where(:disabled, [aria-disabled="true"]) {
			color: GrayText;
		}
	}
}
