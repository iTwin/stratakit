import{a as K,f as Y,d as U,b as _e,aJ as Te,aC as T,bj as Le,ap as P,p as q,aj as G,a8 as de,ah as me,an as k,ag as A,h as Oe,af as ut,al as it,bk as Be,bl as ct,bm as at,b7 as ue,R as Me,bh as ft,n as lt,ad as qe,i as dt,z as ie,q as gt,ak as vt}from"./ExamplePreview.CTvTvUIj.js";import{b as ce,c as He,r as mt,d as ht,e as bt,i as Et,g as pt,j as xt,k as J,u as yt,l as Pt}from"./U6HHPQDW.Cp5pcTo0.js";import{r as f}from"./index.DIfZGIpv.js";import{j as p}from"./jsx-runtime.D_zvdyIk.js";import{u as V,f as St,a as Dt}from"./Q5W46E73.BtmAtDbb.js";import{c as wt,i as We,j as Ft,k as At,b as he,l as Ct,D as Rt,g as jt,m as Tt}from"./WLZ6H5FH.Dz3c9mcS.js";var Lt="span",Ye=K(function(t){return t={...t,style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px",...t.style}},t});Y(function(t){const n=Ye(t);return U(Lt,n)});var Mt="span",Ht=K(function(t){return t={"data-focus-trap":"",tabIndex:0,"aria-hidden":!0,...t,style:{position:"fixed",top:0,left:0,...t.style}},t=Ye(t),t}),re=Y(function(t){const n=Ht(t);return U(Mt,n)}),Nt="div";function Vt(e){return P(e).body}function kt(e,t){return t?typeof t=="function"?t(e):t:P(e).createElement("div")}function It(e="id"){return`${e?`${e}-`:""}${Math.random().toString(36).slice(2,8)}`}function N(e){queueMicrotask(()=>{e?.focus()})}var ze=K(function({preserveTabOrder:t,preserveTabOrderAnchor:n,portalElement:r,portalRef:u,portal:s=!0,...o}){const a=f.useRef(null),d=_e(a,o.ref),E=f.useContext(Te),[l,C]=f.useState(null),[x,H]=f.useState(null),I=f.useRef(null),L=f.useRef(null),O=f.useRef(null),M=f.useRef(null);return T(()=>{const c=a.current;if(!c||!s){C(null);return}const m=kt(c,r);if(!m){C(null);return}const b=m.isConnected;if(b||(E||Vt(c)).appendChild(m),m.id||(m.id=c.id?`portal/${c.id}`:It()),C(m),Le(u,m),!b)return()=>{m.remove(),Le(u,null)}},[s,r,E,u]),T(()=>{if(!s||!t||!n)return;const m=P(n).createElement("span");return m.style.position="fixed",n.insertAdjacentElement("afterend",m),H(m),()=>{m.remove(),H(null)}},[s,t,n]),f.useEffect(()=>{if(!l||!t)return;let c=0;const m=b=>{if(!G(b))return;const g=b.type==="focusin";if(cancelAnimationFrame(c),g)return mt(l);c=requestAnimationFrame(()=>{ht(l,!0)})};return l.addEventListener("focusin",m,!0),l.addEventListener("focusout",m,!0),()=>{cancelAnimationFrame(c),l.removeEventListener("focusin",m,!0),l.removeEventListener("focusout",m,!0)}},[l,t]),o=q(o,c=>{if(c=p.jsx(Te.Provider,{value:l||E,children:c}),!s)return c;if(!l)return p.jsx("span",{ref:d,id:o.id,style:{position:"fixed"},hidden:!0});c=p.jsxs(p.Fragment,{children:[t&&l&&p.jsx(re,{ref:L,"data-focus-trap":o.id,className:"__focus-trap-inner-before",onFocus:b=>{G(b,l)?N(ce()):N(I.current)}}),c,t&&l&&p.jsx(re,{ref:O,"data-focus-trap":o.id,className:"__focus-trap-inner-after",onFocus:b=>{G(b,l)?N(He()):N(M.current)}})]}),l&&(c=de.createPortal(c,l));let m=p.jsxs(p.Fragment,{children:[t&&l&&p.jsx(re,{ref:I,"data-focus-trap":o.id,className:"__focus-trap-outer-before",onFocus:b=>{!(b.relatedTarget===M.current)&&G(b,l)?N(L.current):N(He())}}),t&&p.jsx("span",{"aria-owns":l?.id,style:{position:"fixed"}}),t&&l&&p.jsx(re,{ref:M,"data-focus-trap":o.id,className:"__focus-trap-outer-after",onFocus:b=>{if(G(b,l))N(O.current);else{const g=ce();if(g===L.current){requestAnimationFrame(()=>{var B;return(B=ce())==null?void 0:B.focus()});return}N(g)}}})]});return x&&t&&(m=de.createPortal(m,x)),p.jsxs(p.Fragment,{children:[m,c]})},[l,E,s,o.id,t,x]),o={...o,ref:d},o}),yn=Y(function(t){const n=ze(t);return U(Nt,n)}),Ne=f.createContext(0);function $t({level:e,children:t}){const n=f.useContext(Ne),r=Math.max(Math.min(e||n+1,6),1);return p.jsx(Ne.Provider,{value:r,children:t})}var _t="div",Xe=K(function({autoFocusOnShow:t=!0,...n}){return n=q(n,r=>p.jsx(bt.Provider,{value:t,children:r}),[t]),n});Y(function(t){const n=Xe(t);return U(_t,n)});function Ot(e,t){const r=P(e).createElement("button");return r.type="button",r.tabIndex=-1,r.textContent="Dismiss popup",Object.assign(r.style,{border:"0px",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}),r.addEventListener("click",t),e.prepend(r),()=>{r.removeEventListener("click",t),r.remove()}}function Bt(e){const t=f.useRef(null);return f.useEffect(()=>{if(!e){t.current=null;return}return me("mousedown",r=>{t.current=r.target},!0)},[e]),t}var ae=new WeakMap;function Q(e,t,n){ae.has(e)||ae.set(e,new Map);const r=ae.get(e),u=r.get(t);if(!u)return r.set(t,n()),()=>{var a;(a=r.get(t))==null||a(),r.delete(t)};const s=n(),o=()=>{s(),u(),r.delete(t)};return r.set(t,o),()=>{r.get(t)===o&&(s(),r.set(t,u))}}function be(e,t,n){return Q(e,t,()=>{const u=e.getAttribute(t);return e.setAttribute(t,n),()=>{u==null?e.removeAttribute(t):e.setAttribute(t,u)}})}function _(e,t,n){return Q(e,t,()=>{const u=t in e,s=e[t];return e[t]=n,()=>{u?e[t]=s:delete e[t]}})}function ge(e,t){return e?Q(e,"style",()=>{const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}):()=>{}}function qt(e,t,n){return e?Q(e,t,()=>{const u=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{u?e.style.setProperty(t,u):e.style.removeProperty(t)}}):()=>{}}var Wt=["SCRIPT","STYLE"];function ve(e){return`__ariakit-dialog-snapshot-${e}`}function Yt(e,t){const n=P(t),r=ve(e);if(!n.body[r])return!0;do{if(t===n.body)return!1;if(t[r])return!0;if(!t.parentElement)return!1;t=t.parentElement}while(!0)}function zt(e,t,n){return Wt.includes(t.tagName)||!Yt(e,t)?!1:!n.some(r=>r&&A(t,r))}function Ee(e,t,n,r){for(let u of t){if(!u?.isConnected)continue;const s=t.some(d=>!d||d===u?!1:d.contains(u)),o=P(u),a=u;for(;u.parentElement&&u!==o.body;){if(r?.(u.parentElement,a),!s)for(const d of u.parentElement.children)zt(e,d,t)&&n(d,a);u=u.parentElement}}}function Xt(e,t){const{body:n}=P(t[0]),r=[];return Ee(e,t,s=>{r.push(_(s,ve(e),!0))}),k(_(n,ve(e),!0),()=>{for(const s of r)s()})}function Ge(e,...t){if(!e)return!1;const n=e.getAttribute("data-backdrop");return n==null?!1:n===""||n==="true"||!t.length?!0:t.some(r=>n===r)}function W(e="",t=!1){return`__ariakit-dialog-${t?"ancestor":"outside"}${e?`-${e}`:""}`}function Gt(e,t=""){return k(_(e,W(),!0),_(e,W(t),!0))}function Je(e,t=""){return k(_(e,W("",!0),!0),_(e,W(t,!0),!0))}function pe(e,t){const n=W(t,!0);if(e[n])return!0;const r=W(t);do{if(e[r])return!0;if(!e.parentElement)return!1;e=e.parentElement}while(!0)}function Ve(e,t){const n=[],r=t.map(s=>s?.id);return Ee(e,t,s=>{Ge(s,...r)||n.unshift(Gt(s,e))},(s,o)=>{o.hasAttribute("data-dialog")&&o.id!==e||n.unshift(Je(s,e))}),()=>{for(const s of n)s()}}function Jt(e){return e.tagName==="HTML"?!0:A(P(e).body,e)}function Kt(e,t){if(!e)return!1;if(A(e,t))return!0;const n=t.getAttribute("aria-activedescendant");if(n){const r=P(e).getElementById(n);if(r)return A(e,r)}return!1}function Ut(e,t){if(!("clientY"in e))return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function fe({store:e,type:t,listener:n,capture:r,domReady:u}){const s=Oe(n),o=V(e,"open"),a=f.useRef(!1);T(()=>{if(!o||!u)return;const{contentElement:d}=e.getState();if(!d)return;const E=()=>{a.current=!0};return d.addEventListener("focusin",E,!0),()=>d.removeEventListener("focusin",E,!0)},[e,o,u]),f.useEffect(()=>o?me(t,E=>{const{contentElement:l,disclosureElement:C}=e.getState(),x=E.target;!l||!x||!Jt(x)||A(l,x)||Kt(C,x)||x.hasAttribute("data-focus-trap")||Ut(E,l)||a.current&&!pe(x,l.id)||Et(x)||s(E)},r):void 0,[o,r])}function le(e,t){return typeof e=="function"?e(t):!!e}function Qt(e,t,n){const r=V(e,"open"),u=Bt(r),s={store:e,domReady:n,capture:!0};fe({...s,type:"click",listener:o=>{const{contentElement:a}=e.getState(),d=u.current;d&&ut(d)&&pe(d,a?.id)&&le(t,o)&&e.hide()}}),fe({...s,type:"focusin",listener:o=>{const{contentElement:a}=e.getState();a&&o.target!==P(a)&&le(t,o)&&e.hide()}}),fe({...s,type:"contextmenu",listener:o=>{le(t,o)&&e.hide()}})}var ke=f.createContext({});function Zt(e){const t=f.useContext(ke),[n,r]=f.useState([]),u=f.useCallback(a=>{var d;return r(E=>[...E,a]),k((d=t.add)==null?void 0:d.call(t,a),()=>{r(E=>E.filter(l=>l!==a))})},[t]);T(()=>St(e,["open","contentElement"],a=>{var d;if(a.open&&a.contentElement)return(d=t.add)==null?void 0:d.call(t,e)}),[e,t]);const s=f.useMemo(()=>({store:e,add:u}),[e,u]);return{wrapElement:f.useCallback(a=>p.jsx(ke.Provider,{value:s,children:a}),[s]),nestedDialogs:n}}function en({attribute:e,contentId:t,contentElement:n,enabled:r}){const[u,s]=it(),o=f.useCallback(()=>{if(!r||!n)return!1;const{body:a}=P(n),d=a.getAttribute(e);return!d||d===t},[u,r,n,e,t]);return f.useEffect(()=>{if(!r||!t||!n)return;const{body:a}=P(n);if(o())return a.setAttribute(e,t),()=>a.removeAttribute(e);const d=new MutationObserver(()=>de.flushSync(s));return d.observe(a,{attributeFilter:[e]}),()=>d.disconnect()},[u,r,t,n,o,e]),o}function tn(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function nn(e,t,n){const r=en({attribute:"data-dialog-prevent-body-scroll",contentElement:e,contentId:t,enabled:n});f.useEffect(()=>{if(!r()||!e)return;const u=P(e),s=Be(e),{documentElement:o,body:a}=u,d=o.style.getPropertyValue("--scrollbar-width"),E=d?Number.parseInt(d,10):s.innerWidth-o.clientWidth,l=()=>qt(o,"--scrollbar-width",`${E}px`),C=tn(o),x=()=>ge(a,{overflow:"hidden",[C]:`${E}px`}),H=()=>{var L,O;const{scrollX:M,scrollY:c,visualViewport:m}=s,b=(L=m?.offsetLeft)!=null?L:0,g=(O=m?.offsetTop)!=null?O:0,B=ge(a,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(g))}px`,left:`${-(M-Math.floor(b))}px`,right:"0",[C]:`${E}px`});return()=>{B(),s.scrollTo({left:M,top:c,behavior:"instant"})}},I=ct()&&!at();return k(l(),I?H():x())},[r,e])}function rn(e,...t){if(!e)return!1;const n=e.getAttribute("data-focus-trap");return n==null?!1:t.length?n===""?!1:t.some(r=>n===r):!0}function Ke(){return"inert"in HTMLElement.prototype}function sn(e){return be(e,"aria-hidden","true")}function Ue(e,t){if(!("style"in e))return ue;if(Ke())return _(e,"inert",!0);const r=pt(e,!0).map(u=>{if(t?.some(o=>o&&A(o,u)))return ue;const s=Q(u,"focus",()=>(u.focus=ue,()=>{delete u.focus}));return k(be(u,"tabindex","-1"),s)});return k(...r,sn(e),ge(e,{pointerEvents:"none",userSelect:"none",cursor:"default"}))}function on(e,t){const n=[],r=t.map(s=>s?.id);return Ee(e,t,s=>{Ge(s,...r)||rn(s,...r)||n.unshift(Ue(s,t))},s=>{s.hasAttribute("role")&&(t.some(o=>o&&A(o,s))||n.unshift(be(s,"role","none")))}),()=>{for(const s of n)s()}}function un({store:e,backdrop:t,alwaysVisible:n,hidden:r}){const u=f.useRef(null),s=wt({disclosure:e}),o=V(e,"contentElement");f.useEffect(()=>{const E=u.current,l=o;E&&l&&(E.style.zIndex=getComputedStyle(l).zIndex)},[o]),T(()=>{const E=o?.id;if(!E)return;const l=u.current;if(l)return Je(l,E)},[o]);const a=We({ref:u,store:s,role:"presentation","data-backdrop":o?.id||"",alwaysVisible:n,hidden:r??void 0,style:{position:"fixed",top:0,right:0,bottom:0,left:0}});if(!t)return null;if(f.isValidElement(t))return p.jsx(Me,{...a,render:t});const d=typeof t!="boolean"?t:"div";return p.jsx(Me,{...a,render:p.jsx(d,{})})}function cn(e={}){return Ft(e)}function an(e,t,n){return At(e,t,n)}function fn(e={}){const[t,n]=Dt(cn,e);return an(t,n,e)}var ln="div",Ie=vt();function dn(e){const t=qe();return!t||e&&A(e,t)?!1:!!J(t)}function $e(e,t=!1){if(!e)return null;const n="current"in e?e.current:e;return n?t?J(n)?n:null:n:null}var gn=K(function({store:t,open:n,onClose:r,focusable:u=!0,modal:s=!0,portal:o=!!s,backdrop:a=!!s,hideOnEscape:d=!0,hideOnInteractOutside:E=!0,getPersistentElements:l,preventBodyScroll:C=!!s,autoFocusOnShow:x=!0,autoFocusOnHide:H=!0,initialFocus:I,finalFocus:L,unmountOnHide:O,unstable_treeSnapshotKey:M,...c}){const m=he(),b=f.useRef(null),g=fn({store:t||m,open:n,setOpen(i){if(i)return;const h=b.current;if(!h)return;const y=new Event("close",{bubbles:!1,cancelable:!0});r&&h.addEventListener("close",r,{once:!0}),h.dispatchEvent(y),y.defaultPrevented&&g.setOpen(!0)}}),{portalRef:B,domReady:S}=ft(o,c.portalRef),Qe=c.preserveTabOrder,se=V(g,i=>Qe&&!s&&i.mounted),R=lt(c.id),w=V(g,"open"),F=V(g,"mounted"),$=V(g,"contentElement"),Ze=Ct(F,c.hidden,c.alwaysVisible);nn($,R,C&&!Ze),Qt(g,E,S);const{wrapElement:xe,nestedDialogs:ye}=Zt(g);c=q(c,xe,[xe]),T(()=>{if(!w)return;const i=b.current,h=qe(i,!0);h&&h.tagName!=="BODY"&&(i&&A(i,h)||g.setDisclosureElement(h))},[g,w]),Ie&&f.useEffect(()=>{if(!F)return;const{disclosureElement:i}=g.getState();if(!i||!dt(i))return;const h=()=>{let y=!1;const v=()=>{y=!0},D={capture:!0,once:!0};i.addEventListener("focusin",v,D),gt(i,"mouseup",()=>{i.removeEventListener("focusin",v,!0),!y&&Pt(i)})};return i.addEventListener("mousedown",h),()=>{i.removeEventListener("mousedown",h)}},[g,F]),f.useEffect(()=>{if(!F||!S)return;const i=b.current;if(!i)return;const h=Be(i),y=h.visualViewport||h,v=()=>{var D,j;const X=(j=(D=h.visualViewport)==null?void 0:D.height)!=null?j:h.innerHeight;i.style.setProperty("--dialog-viewport-height",`${X}px`)};return v(),y.addEventListener("resize",v),()=>{y.removeEventListener("resize",v)}},[F,S]),f.useEffect(()=>{if(!s||!F||!S)return;const i=b.current;if(!(!i||i.querySelector("[data-dialog-dismiss]")))return Ot(i,g.hide)},[g,s,F,S]),T(()=>{if(!Ke()||w||!F||!S)return;const i=b.current;if(i)return Ue(i)},[w,F,S]);const Z=w&&S;T(()=>{if(!R||!Z)return;const i=b.current;return Xt(R,[i])},[R,Z,M]);const Pe=Oe(l);T(()=>{if(!R||!Z)return;const{disclosureElement:i}=g.getState(),h=b.current,y=Pe()||[],v=[h,...y,...ye.map(D=>D.getState().contentElement)];return s?k(Ve(R,v),on(R,v)):Ve(R,[i,...v])},[R,g,Z,Pe,ye,s,M]);const Se=!!x,De=ie(x),[et,tt]=f.useState(!1);f.useEffect(()=>{if(!w||!Se||!S||!$?.isConnected)return;const i=$e(I,!0)||$.querySelector("[data-autofocus=true],[autofocus]")||xt($,!0,o&&se)||$,h=J(i);De(h?i:null)&&(tt(!0),queueMicrotask(()=>{i.focus(),Ie&&h&&i.scrollIntoView({block:"nearest",inline:"nearest"})}))},[w,Se,S,$,I,o,se,De]);const ee=!!H,we=ie(H),[te,Fe]=f.useState(!1);f.useEffect(()=>{if(w)return Fe(!0),()=>Fe(!1)},[w]);const z=f.useCallback((i,h=!0)=>{const{disclosureElement:y}=g.getState();if(dn(i))return;let v=$e(L)||y;if(v?.id){const j=P(v),X=`[aria-activedescendant="${v.id}"]`,ne=j.querySelector(X);ne&&(v=ne)}if(v&&!J(v)){const j=v.closest("[data-dialog]");if(j?.id){const X=P(j),ne=`[aria-controls~="${j.id}"]`,je=X.querySelector(ne);je&&(v=je)}}const D=v&&J(v);if(!D&&h){requestAnimationFrame(()=>z(i,!1));return}we(D?v:null)&&D&&v?.focus({preventScroll:!0})},[g,L,we]),oe=f.useRef(!1);T(()=>{if(w||!te||!ee)return;const i=b.current;oe.current=!0,z(i)},[w,te,S,ee,z]),f.useEffect(()=>{if(!te||!ee)return;const i=b.current;return()=>{if(oe.current){oe.current=!1;return}z(i)}},[te,ee,z]);const Ae=ie(d);f.useEffect(()=>!S||!F?void 0:me("keydown",h=>{if(h.key!=="Escape"||h.defaultPrevented)return;const y=b.current;if(!y||pe(y))return;const v=h.target;if(!v)return;const{disclosureElement:D}=g.getState();!!(v.tagName==="BODY"||A(y,v)||!D||A(D,v))&&Ae(h)&&g.hide()},!0),[g,S,F,Ae]),c=q(c,i=>p.jsx($t,{level:s?1:void 0,children:i}),[s]);const Ce=c.hidden,Re=c.alwaysVisible;c=q(c,i=>a?p.jsxs(p.Fragment,{children:[p.jsx(un,{store:g,backdrop:a,hidden:Ce,alwaysVisible:Re}),i]}):i,[g,a,Ce,Re]);const[nt,rt]=f.useState(),[st,ot]=f.useState();return c=q(c,i=>p.jsx(Rt,{value:g,children:p.jsx(jt.Provider,{value:rt,children:p.jsx(Tt.Provider,{value:ot,children:i})})}),[g]),c={id:R,"data-dialog":"",role:"dialog",tabIndex:u?-1:void 0,"aria-labelledby":nt,"aria-describedby":st,...c,ref:_e(b,c.ref)},c=Xe({...c,autoFocusOnShow:et}),c=We({store:g,...c}),c=yt({...c,focusable:u}),c=ze({portal:o,...c,portalRef:B,preserveTabOrder:se}),c});function vn(e,t=he){return Y(function(r){const u=t(),s=r.store||u;return V(s,a=>!r.unmountOnHide||a?.mounted||!!r.open)?p.jsx(e,{...r}):null})}var Pn=vn(Y(function(t){const n=gn(t);return U(ln,n)}),he);export{Pn as D,Ne as H,yn as P,gn as a,cn as b,vn as c,an as d,fn as u};
