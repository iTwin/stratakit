import{w as H}from"./LMDWO4NN-AdQVI40z.js";import{n as e,a as n}from"./chunk-D52XG6IA-BPj3SxYk.js";import{a as N}from"./index-Dh4JygWN.js";import{D as U,a as q,b as J,c as b}from"./DropdownMenu-5GQzcYna.js";import{D as Q}from"./Divider-CMpo5Zhs.js";import{I as C}from"./Icon-DRPsd_jo.js";import{I as y}from"./IconButton-DcEbyEuY.js";import{T as Y,a as Z,b as ee}from"./TextBox-b79ZpE4X.js";import{V as E}from"./VisuallyHidden-lfLZ5qm_.js";import{T as te,a as ne,b as se,c as re}from"./Tree-CHjrwjed.js";import{p as I}from"./placeholder-ByhhEg5M.js";import{p as oe,l as ie,s as ae,a as B,d as le,f as ce}from"./visibility-show-dIjr--SP.js";import{R as de}from"./XL7CSKGW-DDU26wbd.js";import"./index-LDMScfjX.js";import"./Button-B0xhYNln.js";import"./KUU7WJ55-t09PjvBK.js";import"./LVA2YJMS-CkBCxIVR.js";import"./Kbd-C0GvkwA_.js";import"./~utils-YFcEjjdk.js";import"./P2CTZE2T-BT-mtSx2.js";import"./YV4JVR4I-7LgjLGcz.js";import"./BYC7LY2E-9GYEBff6.js";import"./VGCJ63VH-DjYMlTD4.js";import"./XX67R432-Cv_HVTJr.js";import"./MTZPJQMC-BeFKSML9.js";import"./ITI7HKP4-CKgdTtAx.js";import"./P4IRICAX-v-6bqxP5.js";import"./Tooltip-DDwD56QE.js";import"./Field-CTkCeEwQ.js";import"./~hooks-KbN8yI3B.js";import"./Icon-TLEIVBJG.js";const ue="_appLayout_1xb0k_5",pe="_platformBar_1xb0k_14",xe="_logo_1xb0k_19",he="_tools_1xb0k_29",me="_leftPanel_1xb0k_39",fe="_header_1xb0k_50",be="_panelTitle_1xb0k_58",ve="_panelCaption_1xb0k_64",je="_shiftIconRight_1xb0k_68",ge="_subheader_1xb0k_72",_e="_subheaderTitle_1xb0k_82",Se="_searchInput_1xb0k_87",ke="_subheaderActions_1xb0k_91",ye="_tree_1xb0k_95",Pe="_canvasWrapper_1xb0k_103",Re="_canvas_1xb0k_103",Ce="_splitter_1xb0k_125",Ie="_action_1xb0k_156",we="_slider_1xb0k_162",i={appLayout:ue,platformBar:pe,logo:xe,tools:he,leftPanel:me,header:fe,panelTitle:be,panelCaption:ve,shiftIconRight:je,subheader:ge,subheaderTitle:_e,searchInput:Se,subheaderActions:ke,tree:ye,canvasWrapper:Pe,canvas:Re,splitter:Ce,action:Ie,slider:we},A="Kiwi sandbox",xt=()=>[{title:A}],ht=H(function(){const{sliderProps:r,panelProps:a,panelMinSize:l,panelMaxSize:x,resizing:o}=Me({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs(e.Fragment,{children:[e.jsx(E,{render:f=>e.jsx("h1",{...f}),children:A}),e.jsxs("div",{className:i.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":x},children:[e.jsxs("div",{className:i.platformBar,children:[e.jsx("div",{className:i.logo,children:e.jsx(C,{href:I,size:"large"})}),e.jsxs("div",{className:i.tools,children:[e.jsx(C,{href:I,size:"large"}),e.jsx(C,{href:I,size:"large"}),e.jsx(C,{href:I,size:"large"})]})]}),e.jsxs("div",{...a,className:i.leftPanel,style:{position:"relative",...a.style},children:[e.jsxs("div",{className:i.header,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:i.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:i.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:i.actions,children:e.jsx(y,{className:i.shiftIconRight,icon:oe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Be,{}),e.jsx(Ne,{}),e.jsx(Q,{presentational:!0,className:i.splitter,"data-resizing":o?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:i.slider,...r})})]}),e.jsx("div",{className:i.canvasWrapper,children:e.jsx("div",{className:i.canvas})})]})]})});function ze(c,r,a){return Math.min(Math.max(c,r),a)}function Me(c){const{minSize:r,maxSize:a,onCollapse:l}=c??{},x=n.useId(),o=n.useRef(null),[f,g]=n.useState(void 0),[v,t]=n.useState(void 0),[u,h]=n.useState(void 0),[j,w]=n.useState(!1),[P,z]=n.useState(void 0),m=n.useMemo(()=>{if(r&&v)return Math.min(r.px,r.pct/100*v)},[r,v]),S=n.useMemo(()=>{if(m&&a&&v)return Math.max(m,a.pct/100*v)},[a,v,m]),k=n.useMemo(()=>{if(u==="smallest")return m??0;if(u==="largest")return S??0;if(f&&m&&S)return ze(f,m,S)},[f,m,S,u]);n.useEffect(()=>{const d=o.current;if(!d)return;const p=d.parentElement;if(!p)return;const _=new ResizeObserver(()=>{const M=p.getBoundingClientRect(),D=d.getBoundingClientRect();t(M.width),g(D.width)});return _.observe(p),_.observe(d),()=>{_.disconnect()}},[]);const K=n.useCallback(d=>{const p=o.current;if(!p)return;const _=p.getBoundingClientRect();z(_.width+d),h(void 0),w(!0)},[]),G=n.useCallback(d=>{const p=o.current;if(!p)return;const _=p.parentElement;if(!_)return;const M=_.getBoundingClientRect(),D=d*(M.width*.005),X=p.getBoundingClientRect();z(X.width+D),h(void 0)},[]),O=n.useCallback(()=>{o.current&&(z(void 0),w(!1))},[]),{moveableProps:R}=De({onMove:K,onMoveEnd:O,onKeyMove:G}),W=n.useMemo(()=>({...R,onKeyDown:d=>{var p;if((p=R.onKeyDown)==null||p.call(R,d),!d.defaultPrevented)switch(d.key){case"Enter":d.preventDefault(),l==null||l();break;case"Home":d.preventDefault(),h("smallest");break;case"End":d.preventDefault(),h("largest");break}},onChange:d=>{if(j)return;const p=Number(d.target.value);z(p)},value:k===void 0?0:Math.floor(k),min:m===void 0?void 0:Math.floor(m),max:S===void 0?void 0:Math.floor(S)}),[R,k,m,S,l,j]),$=n.useMemo(()=>({style:{WebkitUserSelect:P===void 0?void 0:"none"},id:x,ref:o}),[x,P]),F=m===void 0?void 0:`${m}px`,V=n.useMemo(()=>{if(P!==void 0&&a!==void 0&&u===void 0)return`min(${P}px, ${a.pct}%)`;if(k!==void 0)return`${k}px`},[a,P,k,u]);return{sliderProps:W,panelProps:$,panelMinSize:F,panelMaxSize:V,resizing:j}}function De(c){const{onMove:r,onMoveEnd:a,onKeyMove:l}=c??{},x=n.useRef(null),o=n.useRef(void 0),f=n.useRef(void 0),g=n.useCallback(()=>{f.current!==void 0&&(f.current=void 0,a==null||a())},[a]);return{moveableProps:n.useMemo(()=>({onPointerDown:t=>{if(t.button!==0||t.ctrlKey)return;const u=x.current;if(!u)return;const h=u.getBoundingClientRect(),j=t.clientX-h.left;f.current=j,t.preventDefault(),u.setPointerCapture(t.pointerId)},onPointerMove:t=>{const u=f.current;if(u===void 0)return;const h=x.current;if(!h)return;const j=h.getBoundingClientRect(),w=t.clientX-u-j.left;t.preventDefault(),r==null||r(w)},onPointerUp:g,onPointerCancel:g,onKeyDown:t=>{if(!t.defaultPrevented)switch(t.key){case"ArrowLeft":t.preventDefault(),l==null||l(-1);break;case"ArrowRight":t.preventDefault(),l==null||l(1);break}},ref:t=>{var h;if(x.current=t,(h=o.current)==null||h.call(o),o.current=void 0,!t)return;const u=j=>{j.preventDefault()};t.addEventListener("touchstart",u),o.current=()=>{t.removeEventListener("touchstart",u)}}}),[l,r,g])}}const L=n.createContext({selected:void 0,setSelected:()=>{}});function Ne(){const[c,r]=n.useState();return e.jsx(L.Provider,{value:{selected:c,setSelected:r},children:e.jsxs(te,{className:i.tree,children:[e.jsx(s,{label:"Guides",children:e.jsxs(s,{label:"Tree",children:[e.jsx(s,{label:"Guide 4"}),e.jsx(s,{label:"Guide 3"}),e.jsx(s,{label:"Guide 2"}),e.jsx(s,{label:"Guide 1",lockAction:!0})]})}),e.jsxs(s,{label:"Other",children:[e.jsx(s,{label:"Object 2",children:e.jsx(s,{label:"Path 3"})}),e.jsx(s,{label:"Object 1",visibilityAction:!0})]}),e.jsxs(s,{label:"Road",children:[e.jsx(s,{label:"Parking lot access"}),e.jsx(s,{label:"Site access",lockAction:!0,visibilityAction:!0})]}),e.jsx(s,{label:"Parking lot",children:e.jsxs(s,{label:"Parking area",children:[e.jsx(s,{label:"Bay point 2"}),e.jsx(s,{label:"Bay point 1"}),e.jsx(s,{label:"Space point 1"}),e.jsx(s,{label:"Path 6"})]})}),e.jsx(s,{label:"Building",children:e.jsx(s,{label:"Building area",children:e.jsx(s,{label:"Path 5"})})}),e.jsx(s,{label:"Sewer",children:e.jsx(s,{label:"Run off pipe",children:e.jsx(s,{label:"Path 4"})})}),e.jsx(s,{label:"Project boundary",children:e.jsx(s,{label:"Property area",children:e.jsx(s,{label:"Path 1"})})}),e.jsx(s,{label:"Map",children:e.jsx(s,{label:"Location",children:e.jsx(s,{label:"Terrain"})})})]})})}const T=n.createContext({selected:!1});function s(c){const r=n.useId(),a=n.Children.count(c.children)>0,[l,x]=n.useState(!0),o=n.useContext(L),g=n.useContext(T).selected||r===o.selected,v=n.useCallback(()=>{o.setSelected(t=>{if(t!==r)return r})},[r,o]);return e.jsx(T.Provider,{value:{selected:g},children:e.jsx(ne,{tabIndex:0,content:e.jsxs(e.Fragment,{children:[e.jsx(se,{onClick:t=>{x(u=>!u),t.stopPropagation()},onKeyDown:t=>{t.stopPropagation()}}),e.jsx(C,{href:I,style:{display:"inline"}}),e.jsx(re,{children:c.label}),e.jsxs("div",{style:{display:"flex",gap:4,marginInlineStart:"auto"},children:[e.jsx(y,{className:i.action,icon:ie,label:"Lock",variant:"ghost","aria-hidden":!c.lockAction,onClick:t=>{t.stopPropagation()},onKeyDown:t=>{t.stopPropagation()}}),e.jsx(y,{className:i.action,icon:ae,label:"Show",variant:"ghost","aria-hidden":!c.visibilityAction,onClick:t=>{t.stopPropagation()},onKeyDown:t=>{t.stopPropagation()}})]})]}),expanded:a?l:void 0,selected:g,onClick:()=>{v()},onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&v()},children:l?c.children:void 0})})}function Be(){const[c,r]=n.useState(!1),a=n.useRef(null),l=n.useRef(null),x=c?e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),e.jsx(y,{className:i.shiftIconRight,icon:le,label:"Close",variant:"ghost",onClick:()=>{var o;N.flushSync(()=>r(!1)),(o=l.current)==null||o.focus()}})]}):e.jsx(y,{className:i.shiftIconRight,icon:B,label:"Search",variant:"ghost",onClick:()=>{var o;N.flushSync(()=>r(!0)),(o=a.current)==null||o.focus()}});return e.jsxs("div",{className:i.subheader,children:[e.jsx(de.h3,{className:i.subheaderTitle,tabIndex:-1,ref:l,render:c?e.jsx(E,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),c?e.jsxs(Y,{className:i.searchInput,children:[e.jsx(Z,{href:B}),e.jsx(ee,{placeholder:"Search",ref:a})]}):null,e.jsx("div",{className:i.subheaderActions,children:x})]})}function Te(){return e.jsxs(U,{children:[e.jsx(q,{render:e.jsx(y,{icon:ce,label:"Filter",variant:"ghost"})}),e.jsxs(J,{style:{minInlineSize:164},children:[e.jsx(b,{children:"Show all"}),e.jsx(b,{children:"Guides"}),e.jsx(b,{children:"Other"}),e.jsx(b,{children:"Roadway"}),e.jsx(b,{children:"Parking"}),e.jsx(b,{children:"Building"}),e.jsx(b,{children:"Dry utility"}),e.jsx(b,{children:"Stormwater"}),e.jsx(b,{children:"Sewer"}),e.jsx(b,{children:"Boundary"}),e.jsx(b,{children:"Map"})]})]})}export{ht as default,xt as meta};
