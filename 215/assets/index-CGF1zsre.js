import{x as te,y as ue,z as $,A as M,B as N,O as Q,e as h,b as v,D as X,c as B,_ as K,i as z,E as se,H as me,k as H,m as be,f as U,d as q,v as oe,u as fe,w as ve}from"./LMDWO4NN-AdQVI40z.js";import{a as T,n as a}from"./chunk-D52XG6IA-BPj3SxYk.js";import{d as Ie}from"./~utils-Droq8jMV.js";import{a as pe}from"./index-Dh4JygWN.js";import{c as G}from"./index-LDMScfjX.js";import{a as xe}from"./~hooks-KbN8yI3B.js";import{f as J}from"./~utils-DlLScLBX.js";import{c as Se,d as he,e as Te,a as Pe,b as Ce}from"./ITI7HKP4-CKgdTtAx.js";import{C as ne,a as re,c as Y,b as ge,d as je}from"./P2CTZE2T-BT-mtSx2.js";import{P as Ee,a as _e}from"./MTZPJQMC-BeFKSML9.js";import{m as ye,o as Z,s as V,a as _,e as we,c as De,u as ae,b as ee,d as A}from"./YV4JVR4I-7LgjLGcz.js";import{u as Re,d as ke}from"./VGCJ63VH-DjYMlTD4.js";import{g as Fe,u as Le}from"./LVA2YJMS-CkBCxIVR.js";import"./KUU7WJ55-t09PjvBK.js";var Oe=te([_e,re],[Ee,ne]),Me=Oe.useContext;T.createContext(!1);T.createContext(null);function Ne(t={}){var o=t,{composite:s,combobox:e}=o,n=ue(o,["composite","combobox"]);const c=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],I=ye(n.store,Z(s,c),Z(e,c)),d=I==null?void 0:I.getState(),m=Se($(N({},n),{store:I,includesBaseElement:M(n.includesBaseElement,d==null?void 0:d.includesBaseElement,!1),orientation:M(n.orientation,d==null?void 0:d.orientation,"horizontal"),focusLoop:M(n.focusLoop,d==null?void 0:d.focusLoop,!0)})),r=he(),w=$(N({},m.getState()),{selectedId:M(n.selectedId,d==null?void 0:d.selectedId,n.defaultSelectedId),selectOnMove:M(n.selectOnMove,d==null?void 0:d.selectOnMove,!0)}),i=De(w,m,I);V(i,()=>_(i,["moves"],()=>{const{activeId:u,selectOnMove:f}=i.getState();if(!f||!u)return;const p=m.item(u);p&&(p.dimmed||p.disabled||i.setState("selectedId",p.id))}));let P=!0;V(i,()=>we(i,["selectedId"],(u,f)=>{if(!P){P=!0;return}s&&u.selectedId===f.selectedId||i.setState("activeId",u.selectedId)})),V(i,()=>_(i,["selectedId","renderedItems"],u=>{if(u.selectedId!==void 0)return;const{activeId:f,renderedItems:p}=i.getState(),x=m.item(f);if(x&&!x.disabled&&!x.dimmed)i.setState("selectedId",x.id);else{const j=p.find(C=>!C.disabled&&!C.dimmed);i.setState("selectedId",j==null?void 0:j.id)}})),V(i,()=>_(i,["renderedItems"],u=>{const f=u.renderedItems;if(f.length)return _(r,["renderedItems"],p=>{const x=p.renderedItems;x.some(C=>!C.tabId)&&x.forEach((C,D)=>{if(C.tabId)return;const L=f[D];L&&r.renderItem($(N({},C),{tabId:L.id}))})})}));let S=null;return V(i,()=>{const u=()=>{S=i.getState().selectedId},f=()=>{P=!1,i.setState("selectedId",S)};if(s&&"setSelectElement"in s)return Q(_(s,["value"],u),_(s,["mounted"],f));if(e)return Q(_(e,["selectedValue"],u),_(e,["mounted"],f))}),$(N(N({},m),i),{panels:r,setSelectedId:u=>i.setState("selectedId",u),select:u=>{i.setState("selectedId",u),m.move(u)}})}function Ve(t,o,s){X(o,[s.composite,s.combobox]),t=Pe(t,o,s),ee(t,s,"selectedId","setSelectedId"),ee(t,s,"selectOnMove");const[e,n]=ae(()=>t.panels,{});return X(n,[t,n]),Object.assign(T.useMemo(()=>h(v({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function $e(t={}){const o=Te(),s=Me()||o;t=h(v({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:o});const[e,n]=ae(Ne,t);return Ve(e,n,t)}var W=te([re],[ne]),Ae=W.useScopedContext,ce=W.useProviderContext,We=W.ContextProvider,ie=W.ScopedContextProvider,He="button",Be=B(function(o){var s=o,{store:e,getItem:n}=s,c=K(s,["store","getItem"]),I;const d=Ae();e=e||d,z(e,!1);const m=se(),r=c.id||m,w=me(c),i=T.useCallback(b=>{const y=h(v({},b),{dimmed:w});return n?n(y):y},[w,n]),P=c.onClick,S=H(b=>{P==null||P(b),!b.defaultPrevented&&(e==null||e.setSelectedId(r))}),u=e.panels.useState(b=>{var y;return(y=b.items.find(l=>l.tabId===r))==null?void 0:y.id}),f=m?c.shouldRegisterItem:!1,p=e.useState(b=>!!r&&b.activeId===r),x=e.useState(b=>!!r&&b.selectedId===r),j=e.useState(b=>!!e.item(b.activeId)),C=p||x&&!j,D=x||((I=c.accessibleWhenDisabled)!=null?I:!0);if(A(e.combobox||e.composite,"virtualFocus")&&(c=h(v({},c),{tabIndex:-1})),c=h(v({id:r,role:"tab","aria-selected":x,"aria-controls":u||void 0},c),{onClick:S}),e.composite){const b={id:r,accessibleWhenDisabled:D,store:e.composite,shouldRegisterItem:C&&f,rowId:c.rowId,render:c.render};c=h(v({},c),{render:a.jsx(Y,h(v({},b),{render:e.combobox&&e.composite!==e.combobox?a.jsx(Y,h(v({},b),{store:e.combobox})):b.render}))})}return c=ge(h(v({store:e},c),{accessibleWhenDisabled:D,getItem:i,shouldRegisterItem:f})),c}),Ke=be(U(function(o){const s=Be(o);return q(He,s)}));function ze(t={}){const o=$e(t);return a.jsx(We,{value:o,children:t.children})}var Ue="div",qe=B(function(o){var s=o,{store:e}=s,n=K(s,["store"]);const c=ce();e=e||c,z(e,!1);const I=e.useState(d=>d.orientation==="both"?void 0:d.orientation);return n=oe(n,d=>a.jsx(ie,{value:e,children:d}),[e]),e.composite&&(n=v({focusable:!1},n)),n=v({role:"tablist","aria-orientation":I},n),n=Ce(v({store:e},n)),n}),Ge=U(function(o){const s=qe(o);return q(Ue,s)}),Je="div",Qe=B(function(o){var s=o,{store:e,unmountOnHide:n,tabId:c,getItem:I,scrollRestoration:d,scrollElement:m}=s,r=K(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const w=ce();e=e||w,z(e,!1);const i=T.useRef(null),P=se(r.id),S=A(e.panels,()=>{var l;return c||((l=e==null?void 0:e.panels.item(P))==null?void 0:l.tabId)}),u=A(e,l=>!!S&&l.selectedId===S),f=Re({open:u}),p=A(f,"mounted"),x=T.useRef(new Map),j=H(()=>{const l=i.current;return l?m?typeof m=="function"?m(l):"current"in m?m.current:m:l:null});T.useEffect(()=>{var l,E;if(!d||!p)return;const g=j();if(!g)return;if(d==="reset"){g.scroll(0,0);return}if(!S)return;const R=x.current.get(S);g.scroll((l=R==null?void 0:R.x)!=null?l:0,(E=R==null?void 0:R.y)!=null?E:0);const O=()=>{x.current.set(S,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",O),()=>{g.removeEventListener("scroll",O)}},[d,p,S,j,e]);const[C,D]=T.useState(!1);T.useEffect(()=>{const l=i.current;if(!l)return;const E=Fe(l);D(!!E.length)},[]);const L=T.useCallback(l=>{const E=h(v({},l),{id:P||l.id,tabId:c});return I?I(E):E},[P,c,I]),b=r.onKeyDown,y=H(l=>{if(b==null||b(l),l.defaultPrevented||!(e!=null&&e.composite))return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!g)return;const{selectedId:R}=e.getState(),O=g({activeId:R});O&&(l.preventDefault(),e.move(O))});return r=oe(r,l=>a.jsx(ie,{value:e,children:l}),[e]),r=h(v({id:P,role:"tabpanel","aria-labelledby":S||void 0},r),{children:n&&!p?null:r.children,ref:fe(i,r.ref),onKeyDown:y}),r=Le(v({focusable:!e.composite&&!C},r)),r=ke(v({store:f},r)),r=je(h(v({store:e.panels},r),{getItem:L})),r}),Xe=U(function(o){const s=Qe(o);return q(Je,s)});function le(t){const{defaultSelectedId:o,selectedId:s,setSelectedId:e,selectOnMove:n,children:c}=t,[I,d]=xe(o,s,e);return a.jsx(ze,{selectedId:I,setSelectedId:T.useCallback(m=>{document.startViewTransition?document.startViewTransition(()=>{pe.flushSync(()=>{d(m)})}):d(m)},[d]),selectOnMove:n,children:c})}const de=J((t,o)=>{const{tone:s="neutral",...e}=t,n=`active-stripe-${T.useId().replaceAll(":","_")}`;return a.jsx(Ge,{"data-kiwi-tone":s,...e,className:G("-tab-list",t.className),style:{"--tab-active-stripe-view-transition-name":n,...t.style},ref:o})}),k=J((t,o)=>a.jsx(Ke,{accessibleWhenDisabled:!0,...t,className:G("-tab",t.className),ref:o})),F=J((t,o)=>a.jsx(Xe,{...t,className:G("-tab-panel",t.className),ref:o})),bt={title:"Tabs"},ft=ve(Ie(function({defaultSelectedId:o,disabled:s}){return a.jsx(a.Fragment,{children:a.jsxs(le,{defaultSelectedId:o,children:[a.jsxs(de,{children:[a.jsx(k,{id:"tab1",children:"Tab 1"}),a.jsx(k,{id:"tab2",disabled:!!s,children:"Tab 2"}),a.jsx(k,{id:"tab3",children:"Tab 3"})]}),a.jsx(F,{tabId:"tab1",children:"Tab 1 content"}),a.jsx(F,{tabId:"tab2",children:"Tab 2 content"}),a.jsx(F,{tabId:"tab3",children:"Tab 3 content"})]})})},{visual:Ye}));function Ye(){const t=["neutral","accent"];return a.jsx("div",{style:{display:"grid",gap:4},children:t.map(o=>a.jsxs(le,{children:[a.jsxs(de,{tone:o,children:[a.jsx(k,{id:"tab1",children:"Tab 1"}),a.jsx(k,{id:"tab2",disabled:!0,children:"Tab 2"}),a.jsx(k,{id:"tab3",children:"Tab 3"})]}),a.jsx(F,{tabId:"tab1",children:"Tab 1 content"}),a.jsx(F,{tabId:"tab2",children:"Tab 2 content"}),a.jsx(F,{tabId:"tab3",children:"Tab 3 content"})]},o))})}export{ft as default,bt as handle};
