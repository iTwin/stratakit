import{w as se}from"./~utils-42rWkPQx.js";import{n as e,a as t,t as re}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as k}from"./index-Dr3kRIaJ.js";import{B as ae}from"./Button-Dn1kz9_p.js";import{D as G,a as F,b as O,c as j}from"./DropdownMenu-tjDjg3Ch.js";import{I as y}from"./Icon-D6MlhXH2.js";import{I as A}from"./IconButton-Dcsfv1Pg.js";import{T as w,a as le,b as K,c as ie}from"./Tabs-CjxEKjPC.js";import{T as H}from"./Text-B4saWMO2.js";import{T as oe,a as ce,b as de}from"./TextBox-IKP9wi9C.js";import{V as ue}from"./VisuallyHidden-DtwYsb7a.js";import{T as he,a as pe}from"./Tree-Caijawy3.js";import{p as R}from"./placeholder-BZbhP9Qz.js";import{p as fe,l as me,d as xe,h as be,m as je,a as Ce,s as E,f as ge}from"./state-inherited-dot-C3qYly_3.js";import{s as _e}from"./visibility-show-xDtdrfyN.js";import"./index-jyeBNHV5.js";import"./KUU7WJ55-C0RLZClQ.js";import"./LVA2YJMS-D0yZJUEw.js";import"./XL7CSKGW-a1N_3wQ-.js";import"./Kbd-IEm351ps.js";import"./P2CTZE2T-DgRy-haM.js";import"./YV4JVR4I-uTAyjRpX.js";import"./BYC7LY2E-iNtzBA08.js";import"./VGCJ63VH-CbkuzlRm.js";import"./MTZPJQMC-B-I-MbTc.js";import"./VEVQD5MH-B0U-cqvC.js";import"./ITI7HKP4-elanz_P2.js";import"./P4IRICAX-DWAu2dnW.js";import"./Tooltip-CuB_vRTl.js";import"./~hooks-CeXQBooN.js";import"./Field-CfqK8QrC.js";import"./ListItem-Bwl9oEq-.js";const Se="_appLayout_1rhac_5",Pe="_header_1rhac_22",ve="_platformBar_1rhac_32",Ae="_logo_1rhac_38",Ie="_tools_1rhac_48",ye="_leftPanel_1rhac_58",Me="_panelHeader_1rhac_70",Re="_panelTitle_1rhac_78",Ne="_panelCaption_1rhac_84",Te="_shiftIconRight_1rhac_88",Be="_subheader_1rhac_92",De="_subheaderTitle_1rhac_103",ze="_searchInput_1rhac_108",ke="_subheaderActions_1rhac_112",we="_tabList_1rhac_116",Ke="_emptyState_1rhac_121",Ee="_canvasWrapper_1rhac_130",Le="_canvas_1rhac_130",Xe="_splitter_1rhac_167",Ge="_tabPanel_1rhac_209",Fe="_tree_1rhac_215",Oe="_action_1rhac_219",He="_actionIcon_1rhac_227",$e="_slider_1rhac_238",o={appLayout:Se,header:Pe,platformBar:ve,logo:Ae,tools:Ie,leftPanel:ye,panelHeader:Me,panelTitle:Re,panelCaption:Ne,shiftIconRight:Te,subheader:Be,subheaderTitle:De,searchInput:ze,subheaderActions:ke,tabList:we,emptyState:Ke,canvasWrapper:Ee,canvas:Le,splitter:Xe,tabPanel:Ge,tree:Fe,action:Oe,actionIcon:He,slider:$e},$="Kiwi sandbox",wt=()=>[{title:$}],Kt=se(function(){return e.jsxs(Ve,{panelContent:e.jsx(nt,{children:e.jsxs(st,{children:[e.jsxs("div",{className:o.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(A,{className:o.shiftIconRight,icon:fe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(et,{}),e.jsx(w,{tabId:"simple",className:o.tabPanel,focusable:!1,children:e.jsx(L,{tree:"simple"})}),e.jsx(w,{tabId:"complex",className:o.tabPanel,focusable:!1,children:e.jsx(L,{tree:"complex"})})]})}),children:[e.jsxs("header",{className:o.header,children:[e.jsx("div",{className:o.logo,children:e.jsx(y,{href:R,size:"large"})}),e.jsx(H,{render:n=>e.jsx("h1",{...n}),variant:"body-md",children:$})]}),e.jsx("div",{className:o.platformBar,children:e.jsxs("div",{className:o.tools,children:[e.jsx(y,{href:R,size:"large"}),e.jsx(y,{href:R,size:"large"}),e.jsx(y,{href:R,size:"large"})]})}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})});function Ve(l){const{sliderProps:n,panelProps:a,panelMinSize:s,panelMaxSize:h,resizing:d}=qe({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":s,"--_panel-max-size":h},children:[e.jsx("div",{...a,className:o.leftPanel,style:{position:"relative",...a.style},children:l.panelContent}),e.jsx("div",{className:o.splitter,"data-resizing":d?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...n})}),l.children]})}function We({children:l}){return e.jsx("div",{className:o.emptyState,children:l})}function Ue(l,n,a){return Math.min(Math.max(l,n),a)}function qe(l){const{minSize:n,maxSize:a,onCollapse:s}=l,h=t.useId(),d=t.useRef(null),[f,u]=t.useState(void 0),[p,i]=t.useState(void 0),[c,m]=t.useState(void 0),[g,S]=t.useState(!1),[P,N]=t.useState(void 0),C=t.useMemo(()=>{if(n&&p)return Math.min(n.px,n.pct/100*p)},[n,p]),v=t.useMemo(()=>{if(C&&a&&p)return Math.max(C,a.pct/100*p)},[a,p,C]),I=t.useMemo(()=>{if(c==="smallest")return C??0;if(c==="largest")return v??0;if(f&&C&&v)return Ue(f,C,v)},[f,C,v,c]);t.useEffect(()=>{const x=d.current;if(!x)return;const b=x.parentElement;if(!b)return;const _=new ResizeObserver(()=>{const B=b.getBoundingClientRect(),D=x.getBoundingClientRect();i(B.width),u(D.width)});return _.observe(b),_.observe(x),()=>{_.disconnect()}},[]);const q=t.useCallback(x=>{const b=d.current;if(!b)return;const _=b.getBoundingClientRect();N(_.width+x),m(void 0),S(!0)},[]),J=t.useCallback(x=>{const b=d.current;if(!b)return;const _=b.parentElement;if(!_)return;const B=_.getBoundingClientRect(),D=x*(B.width*.005),ne=b.getBoundingClientRect();N(ne.width+D),m(void 0)},[]),Q=t.useCallback(()=>{d.current&&(N(void 0),S(!1))},[]),{moveableProps:M}=Je({onMove:q,onMoveEnd:Q,onKeyMove:J}),Y=t.useMemo(()=>({...M,onKeyDown:x=>{var b;if((b=M.onKeyDown)==null||b.call(M,x),!x.defaultPrevented)switch(x.key){case"Enter":x.preventDefault(),s==null||s();break;case"Home":x.preventDefault(),m("smallest");break;case"End":x.preventDefault(),m("largest");break}},onChange:x=>{if(g)return;const b=Number(x.target.value);N(b)},value:I===void 0?0:Math.floor(I),min:C===void 0?void 0:Math.floor(C),max:v===void 0?void 0:Math.floor(v)}),[M,I,C,v,s,g]),Z=t.useMemo(()=>({style:{WebkitUserSelect:P===void 0?void 0:"none"},id:h,ref:d}),[h,P]),ee=C===void 0?void 0:`${Math.floor(C)}px`,te=t.useMemo(()=>{if(P!==void 0&&a!==void 0&&c===void 0)return`min(${Math.floor(P)}px, ${a.pct}%)`;if(I!==void 0)return`${Math.floor(I)}px`},[a,P,I,c]);return{sliderProps:Y,panelProps:Z,panelMinSize:ee,panelMaxSize:te,resizing:g}}function Je(l){const{onMove:n,onMoveEnd:a,onKeyMove:s}=l,h=t.useRef(null),d=t.useRef(void 0),f=t.useRef(void 0),u=t.useCallback(()=>{f.current!==void 0&&(f.current=void 0,a==null||a())},[a]);return{moveableProps:t.useMemo(()=>({onPointerDown:i=>{if(i.button!==0||i.ctrlKey)return;const c=h.current;if(!c)return;const m=c.getBoundingClientRect(),g=i.clientX-m.left;f.current=g,i.preventDefault(),c.setPointerCapture(i.pointerId)},onPointerMove:i=>{const c=f.current;if(c===void 0)return;const m=h.current;if(!m)return;const g=m.getBoundingClientRect(),S=i.clientX-c-g.left;i.preventDefault(),n==null||n(S)},onPointerUp:u,onPointerCancel:u,onKeyDown:i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowLeft":i.preventDefault(),s==null||s(-1);break;case"ArrowRight":i.preventDefault(),s==null||s(1);break}},ref:i=>{var m;if(h.current=i,(m=d.current)==null||m.call(d),d.current=void 0,!i)return;const c=g=>{g.preventDefault()};i.addEventListener("touchstart",c),d.current=()=>{i.removeEventListener("touchstart",c)}}}),[s,n,u])}}const V=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function L({tree:l}){const[n]=re(),a=n.get("tree"),s=t.useContext(T),[h,d]=t.useState(),[f,u]=t.useState([]),p=t.useCallback(i=>{u(c=>c.includes(i)?c.filter(m=>m!==i):[...c,i])},[]);return a==="empty"?e.jsxs(We,{children:[e.jsx(H,{children:"No layers"}),e.jsx(ae,{children:"Create a layer"})]}):e.jsx(V.Provider,{value:t.useMemo(()=>({selected:h,setSelected:d,hidden:f,toggleHidden:p}),[f,h,p]),children:e.jsx(he,{className:o.tree,children:l==="complex"?e.jsx(Ye,{}):e.jsx(Qe,{tree:z,activeFilters:s.filters})})})}const z={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function W({item:l}){var n;return e.jsx(r,{label:l.label,children:(n=l.items)==null?void 0:n.map(a=>e.jsx(W,{item:a},a.label))})}function Qe({tree:l,activeFilters:n}){var a;return(a=l.items)==null?void 0:a.map(s=>n.length>0&&(!s.type||!n.includes(s.type))?null:e.jsx(W,{item:s},s.label))}function Ye(){return e.jsxs(e.Fragment,{children:[e.jsxs(r,{label:"ITC_Master",children:[e.jsx(r,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(r,{label:"002_Substation_A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(r,{label:"007-aa_master.dgn",children:[e.jsx(r,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(r,{label:"A-CLNG-LITE-A"})}),e.jsx(r,{label:"A-CLNG-TILE",children:e.jsxs(r,{label:"A-DOOR-2D-PLAN",children:[e.jsx(r,{label:"P00003 [2-KA62]",children:e.jsx(r,{label:"Cell [2-KA63]",children:e.jsxs(r,{label:"Cell [2-KA64]",children:[e.jsx(r,{label:"Complex Chain [2-KA6A]"}),e.jsx(r,{label:"Complex Chain [2-KA6B]"}),e.jsx(r,{label:"Complex Chain [2-KA6C]"}),e.jsx(r,{label:"Complex Chain [2-KA6D]"}),e.jsx(r,{label:"Complex Chain [2-KA6E]"}),e.jsx(r,{label:"Complex Chain [2-KA6F]"}),e.jsx(r,{label:"Complex Chain [2-KA6G]"}),e.jsx(r,{label:"Complex Chain [2-KA6H]"}),e.jsx(r,{label:"Complex Chain [2-KA61]"}),e.jsx(r,{label:"Complex Chain [2-KA65]"}),e.jsx(r,{label:"Complex Chain [2-KA66]"}),e.jsx(r,{label:"Complex Chain [2-KA67]"}),e.jsx(r,{label:"Complex Chain [2-KA68]"}),e.jsx(r,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(r,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KA74-A]"})}),e.jsx(r,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KA74-A]"})}),e.jsx(r,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KA98-A]"})}),e.jsx(r,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(r,{label:"ITC_Main"})]})}const X=t.createContext({selected:!1,hidden:!1});function r(l){const n=t.useContext(V),a=t.useContext(X),s=t.useId(),[h,d]=t.useState(l.defaultCollapsed===void 0?!0:!l.defaultCollapsed),f=t.Children.count(l.children)>0,u=t.useMemo(()=>a.hidden?!0:n.hidden.includes(s),[s,n.hidden,a.hidden]),p=a.selected||s===n.selected,i=t.useCallback(c=>{n.setSelected(c?s:void 0)},[s,n]);return e.jsx(X.Provider,{value:t.useMemo(()=>({selected:p,hidden:u}),[u,p]),children:e.jsx(pe,{expanded:f?h:void 0,onExpandedChange:d,selected:p,onSelectedChange:i,icon:e.jsx(y,{href:R,style:{display:"inline"}}),label:l.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(A,{className:o.action,icon:me,label:"Lock",variant:"ghost","aria-hidden":u}),a.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(y,{href:xe})}):e.jsx(A,{className:o.action,icon:u?be:_e,label:u?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(s)}}),e.jsx(Ze,{hidden:u})]}),children:h?l.children:void 0})})}function Ze({hidden:l}){return e.jsxs(G,{children:[e.jsx(F,{className:o.action,"aria-hidden":l,render:e.jsx(A,{icon:je,label:"More",variant:"ghost"})}),e.jsxs(O,{style:{minInlineSize:164},children:[e.jsx(j,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(j,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(j,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(j,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(j,{shortcuts:"]",children:"Bring to front"}),e.jsx(j,{shortcuts:"[",children:"Send to back"}),e.jsx(j,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(j,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(j,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(j,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(j,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(j,{shortcuts:"I",children:"Isolate object"})]})]})}function et(){const{selectedId:l}=t.useContext(U),{filters:n,filtered:a}=t.useContext(T),[s,h]=t.useState(!1),d=t.useRef(null),f=t.useMemo(()=>{if(l!=="simple"||n.length===0)return;const i=z.items.filter(m=>m.type?n.includes(m.type):!1);function c(m){return m.reduce((g,S)=>{const P=S.items?c(S.items):0;return g+1+P},0)}return c(i)},[n,l]),u=t.useRef(null),p=s?e.jsxs(e.Fragment,{children:[e.jsx(tt,{filters:l==="simple"?z.filters:[]}),e.jsx(A,{className:o.shiftIconRight,icon:Ce,label:"Close",variant:"ghost",onClick:()=>{var i;k.flushSync(()=>h(!1)),(i=u.current)==null||i.focus()}})]}):e.jsx(A,{className:o.shiftIconRight,icon:E,label:"Search",variant:"ghost",onClick:()=>{var i;k.flushSync(()=>h(!0)),(i=d.current)==null||i.focus()}});return e.jsxs("div",{className:o.subheader,children:[e.jsx(ue,{"aria-live":a?"polite":"off","aria-atomic":!0,children:f===void 0?"Showing all tree items":`Showing ${f} tree items`}),s?void 0:e.jsxs(le,{className:o.tabList,tone:"accent",ref:u,children:[e.jsx(K,{id:"simple",children:"Simple"}),e.jsx(K,{id:"complex",children:"Complex"})]}),s?e.jsxs(oe,{className:o.searchInput,children:[e.jsx(ce,{href:E}),e.jsx(de,{placeholder:"Search",ref:d})]}):null,e.jsx("div",{className:o.subheaderActions,children:p})]})}function tt({filters:l}){const n=t.useContext(T);return e.jsxs(G,{children:[e.jsx(F,{render:e.jsx(A,{icon:ge,label:"Filter",variant:"ghost"})}),e.jsxs(O,{style:{minInlineSize:164},children:[e.jsx(j,{onClick:()=>{n.clearFilters()},children:"Show all"}),l.map(a=>e.jsx(j,{onClick:()=>{n.toggleFilter(a)},children:a},a))]})]})}function nt(l){const[n,a]=t.useState(!1),[s,h]=t.useState([]),d=t.useCallback(u=>{h(p=>p.includes(u)?p.filter(i=>i!==u):[...p,u]),a(!0)},[]),f=t.useCallback(()=>{h([]),a(!0)},[]);return e.jsx(T.Provider,{value:t.useMemo(()=>({filters:s,filtered:n,toggleFilter:d,clearFilters:f}),[s,n,d,f]),children:l.children})}function st(l){const[n,a]=t.useState("simple");return e.jsx(U.Provider,{value:t.useMemo(()=>({selectedId:n,setSelectedId:s=>{s!=="simple"&&s!=="complex"||a(s)}}),[n]),children:e.jsx(ie,{setSelectedId:s=>{s!=="simple"&&s!=="complex"||a(s)},selectedId:n,children:l.children})})}const T=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}}),U=t.createContext({selectedId:"simple",setSelectedId:()=>{}});export{Kt as default,wt as meta};
