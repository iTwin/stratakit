import{w as te}from"./~utils-ChHMGsjo.js";import{a as t,n as e,t as ne}from"./chunk-K6AXKMTT-BHCV6zel.js";import{a as D}from"./index-B0znaqTz.js";import{B as se}from"./Button-DyBCsApF.js";import{D as L,a as X,b as G,c as v}from"./DropdownMenu-5Mb4BMfP.js";import{I as P}from"./Icon-CxSOk06C.js";import{I as y}from"./IconButton-Bf8wK8rF.js";import{T as F}from"./Text-CZoq4tSz.js";import{T as re,a as le,b as ae}from"./TextBox-CcSg3ufW.js";import{V as z}from"./VisuallyHidden-BP9HqvzW.js";import{T as ie,a as oe,b as ce,c as de,d as ue}from"./Tree-CRK_27e0.js";import{p as w}from"./placeholder-BZbhP9Qz.js";import{p as me,l as he,d as pe,h as xe,m as fe,a as be,s as K,f as je}from"./state-inherited-dot-C3qYly_3.js";import{s as ve}from"./visibility-show-xDtdrfyN.js";import{R as Ce}from"./XL7CSKGW-DWaBDxUb.js";import"./index-DeGJKKUv.js";import"./KUU7WJ55-BzS6MnHA.js";import"./LVA2YJMS-BjFMiyma.js";import"./Kbd-Cj6Skv7H.js";import"./P2CTZE2T-DAWgHJTO.js";import"./YV4JVR4I-I4X5ERHE.js";import"./BYC7LY2E-DBPNoNeE.js";import"./VGCJ63VH-B3pkzvNN.js";import"./MTZPJQMC-JL08V7FT.js";import"./VEVQD5MH-L19U6RXN.js";import"./ITI7HKP4-CHaTCS48.js";import"./P4IRICAX-fyxZbr4a.js";import"./Tooltip-jvOvcPmr.js";import"./Field-BzgRBOfM.js";import"./~hooks-DuYLhjin.js";import"./ListItem-KFIqU5yd.js";const ge="_appLayout_mt7mw_5",_e="_header_mt7mw_22",Se="_platformBar_mt7mw_32",Ae="_logo_mt7mw_38",ye="_tools_mt7mw_48",Ie="_leftPanel_mt7mw_58",Pe="_panelHeader_mt7mw_70",Re="_panelTitle_mt7mw_78",we="_panelCaption_mt7mw_84",Me="_shiftIconRight_mt7mw_88",Ne="_subheader_mt7mw_92",Te="_subheaderTitle_mt7mw_102",Be="_searchInput_mt7mw_107",ke="_subheaderActions_mt7mw_111",De="_emptyState_mt7mw_115",ze="_canvasWrapper_mt7mw_124",Ke="_canvas_mt7mw_124",Ee="_splitter_mt7mw_161",Le="_tree_mt7mw_203",Xe="_action_mt7mw_208",Ge="_actionIcon_mt7mw_216",Fe="_slider_mt7mw_227",o={appLayout:ge,header:_e,platformBar:Se,logo:Ae,tools:ye,leftPanel:Ie,panelHeader:Pe,panelTitle:Re,panelCaption:we,shiftIconRight:Me,subheader:Ne,subheaderTitle:Te,searchInput:Be,subheaderActions:ke,emptyState:De,canvasWrapper:ze,canvas:Ke,splitter:Ee,tree:Le,action:Xe,actionIcon:Ge,slider:Fe},O="Kiwi sandbox",Mt=()=>[{title:O}],Nt=te(function(){const{sliderProps:r,panelProps:s,panelMinSize:i,panelMaxSize:f,resizing:m}=Ve({minSize:{px:256,pct:20},maxSize:{pct:30}}),[h,d]=t.useState(!1),[p,a]=t.useState([]),u=t.useCallback(b=>{a(g=>g.includes(b)?g.filter(_=>_!==b):[...g,b]),d(!0)},[]),c=t.useCallback(()=>{a([]),d(!0)},[]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":i,"--_panel-max-size":f},children:[e.jsxs("header",{className:o.header,children:[e.jsx("div",{className:o.logo,children:e.jsx(P,{href:w,size:"large"})}),e.jsx(F,{render:b=>e.jsx("h1",{...b}),variant:"body-md",children:O})]}),e.jsx("div",{className:o.platformBar,children:e.jsxs("div",{className:o.tools,children:[e.jsx(P,{href:w,size:"large"}),e.jsx(P,{href:w,size:"large"}),e.jsx(P,{href:w,size:"large"})]})}),e.jsx(N,{value:t.useMemo(()=>({filters:p,filtered:h,toggleFilter:u,clearFilters:c}),[p,h,u,c]),children:e.jsxs("div",{...s,className:o.leftPanel,style:{position:"relative",...s.style},children:[e.jsxs("div",{className:o.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(y,{className:o.shiftIconRight,icon:me,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Qe,{}),e.jsx(We,{})]})}),e.jsx("div",{className:o.splitter,"data-resizing":m?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...r})}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})})});function Oe({children:l}){return e.jsx("div",{className:o.emptyState,children:l})}function He(l,r,s){return Math.min(Math.max(l,r),s)}function Ve(l){const{minSize:r,maxSize:s,onCollapse:i}=l,f=t.useId(),m=t.useRef(null),[h,d]=t.useState(void 0),[p,a]=t.useState(void 0),[u,c]=t.useState(void 0),[b,g]=t.useState(!1),[_,M]=t.useState(void 0),C=t.useMemo(()=>{if(r&&p)return Math.min(r.px,r.pct/100*p)},[r,p]),A=t.useMemo(()=>{if(C&&s&&p)return Math.max(C,s.pct/100*p)},[s,p,C]),I=t.useMemo(()=>{if(u==="smallest")return C??0;if(u==="largest")return A??0;if(h&&C&&A)return He(h,C,A)},[h,C,A,u]);t.useEffect(()=>{const x=m.current;if(!x)return;const j=x.parentElement;if(!j)return;const S=new ResizeObserver(()=>{const T=j.getBoundingClientRect(),B=x.getBoundingClientRect();a(T.width),d(B.width)});return S.observe(j),S.observe(x),()=>{S.disconnect()}},[]);const W=t.useCallback(x=>{const j=m.current;if(!j)return;const S=j.getBoundingClientRect();M(S.width+x),c(void 0),g(!0)},[]),U=t.useCallback(x=>{const j=m.current;if(!j)return;const S=j.parentElement;if(!S)return;const T=S.getBoundingClientRect(),B=x*(T.width*.005),ee=j.getBoundingClientRect();M(ee.width+B),c(void 0)},[]),q=t.useCallback(()=>{m.current&&(M(void 0),g(!1))},[]),{moveableProps:R}=$e({onMove:W,onMoveEnd:q,onKeyMove:U}),J=t.useMemo(()=>({...R,onKeyDown:x=>{var j;if((j=R.onKeyDown)==null||j.call(R,x),!x.defaultPrevented)switch(x.key){case"Enter":x.preventDefault(),i==null||i();break;case"Home":x.preventDefault(),c("smallest");break;case"End":x.preventDefault(),c("largest");break}},onChange:x=>{if(b)return;const j=Number(x.target.value);M(j)},value:I===void 0?0:Math.floor(I),min:C===void 0?void 0:Math.floor(C),max:A===void 0?void 0:Math.floor(A)}),[R,I,C,A,i,b]),Q=t.useMemo(()=>({style:{WebkitUserSelect:_===void 0?void 0:"none"},id:f,ref:m}),[f,_]),Y=C===void 0?void 0:`${Math.floor(C)}px`,Z=t.useMemo(()=>{if(_!==void 0&&s!==void 0&&u===void 0)return`min(${Math.floor(_)}px, ${s.pct}%)`;if(I!==void 0)return`${Math.floor(I)}px`},[s,_,I,u]);return{sliderProps:J,panelProps:Q,panelMinSize:Y,panelMaxSize:Z,resizing:b}}function $e(l){const{onMove:r,onMoveEnd:s,onKeyMove:i}=l,f=t.useRef(null),m=t.useRef(void 0),h=t.useRef(void 0),d=t.useCallback(()=>{h.current!==void 0&&(h.current=void 0,s==null||s())},[s]);return{moveableProps:t.useMemo(()=>({onPointerDown:a=>{if(a.button!==0||a.ctrlKey)return;const u=f.current;if(!u)return;const c=u.getBoundingClientRect(),b=a.clientX-c.left;h.current=b,a.preventDefault(),u.setPointerCapture(a.pointerId)},onPointerMove:a=>{const u=h.current;if(u===void 0)return;const c=f.current;if(!c)return;const b=c.getBoundingClientRect(),g=a.clientX-u-b.left;a.preventDefault(),r==null||r(g)},onPointerUp:d,onPointerCancel:d,onKeyDown:a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowLeft":a.preventDefault(),i==null||i(-1);break;case"ArrowRight":a.preventDefault(),i==null||i(1);break}},ref:a=>{var c;if(f.current=a,(c=m.current)==null||c.call(m),m.current=void 0,!a)return;const u=b=>{b.preventDefault()};a.addEventListener("touchstart",u),m.current=()=>{a.removeEventListener("touchstart",u)}}}),[i,r,d])}}const H=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function V(){const[l]=ne(),r=l.get("tree");return r==="complex"?"complex":r==="empty"?"empty":"ideal"}function We(){const l=t.useContext(N),r=V(),[s,i]=t.useState(),[f,m]=t.useState([]),h=t.useCallback(d=>{m(p=>p.includes(d)?p.filter(a=>a!==d):[...p,d])},[]);return r==="empty"?e.jsxs(Oe,{children:[e.jsx(F,{children:"No layers"}),e.jsx(se,{children:"Create a layer"})]}):e.jsx(H.Provider,{value:t.useMemo(()=>({selected:s,setSelected:i,hidden:f,toggleHidden:h}),[f,s,h]),children:e.jsx(ie,{className:o.tree,children:r==="complex"?e.jsx(qe,{}):e.jsx(Ue,{tree:k,activeFilters:l.filters})})})}const k={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function $({item:l}){var r;return e.jsx(n,{label:l.label,children:(r=l.items)==null?void 0:r.map(s=>e.jsx($,{item:s},s.label))})}function Ue({tree:l,activeFilters:r}){var s;return(s=l.items)==null?void 0:s.map(i=>r.length>0&&(!i.type||!r.includes(i.type))?null:e.jsx($,{item:i},i.label))}function qe(){return e.jsxs(e.Fragment,{children:[e.jsxs(n,{label:"ITC_Master",children:[e.jsx(n,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(n,{label:"002_Substation_A"})}),e.jsx(n,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",actions:!0,defaultCollapsed:!0,children:e.jsx(n,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(n,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",actions:!0,defaultCollapsed:!0,children:e.jsx(n,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(n,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(n,{label:"005-BENROAD-00-XX-M3-G-00002-A",actions:!0})}),e.jsx(n,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(n,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(n,{label:"007-aa_master.dgn",children:[e.jsx(n,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(n,{label:"A-CLNG-LITE-A"})}),e.jsx(n,{label:"A-CLNG-TILE",children:e.jsxs(n,{label:"A-DOOR-2D-PLAN",children:[e.jsx(n,{label:"P00003 [2-KA62]",actions:!0,children:e.jsx(n,{label:"Cell [2-KA63]",children:e.jsxs(n,{label:"Cell [2-KA64]",children:[e.jsx(n,{label:"Complex Chain [2-KA6A]"}),e.jsx(n,{label:"Complex Chain [2-KA6B]",actions:!0}),e.jsx(n,{label:"Complex Chain [2-KA6C]",actions:!0}),e.jsx(n,{label:"Complex Chain [2-KA6D]",actions:!0}),e.jsx(n,{label:"Complex Chain [2-KA6E]"}),e.jsx(n,{label:"Complex Chain [2-KA6F]"}),e.jsx(n,{label:"Complex Chain [2-KA6G]"}),e.jsx(n,{label:"Complex Chain [2-KA6H]"}),e.jsx(n,{label:"Complex Chain [2-KA61]"}),e.jsx(n,{label:"Complex Chain [2-KA65]"}),e.jsx(n,{label:"Complex Chain [2-KA66]"}),e.jsx(n,{label:"Complex Chain [2-KA67]"}),e.jsx(n,{label:"Complex Chain [2-KA68]"}),e.jsx(n,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(n,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(n,{label:"P00003 [2-KA74-A]"})}),e.jsx(n,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(n,{label:"P00003 [2-KA74-A]"})}),e.jsx(n,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(n,{label:"P00003 [2-KA98-A]"})}),e.jsx(n,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(n,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(n,{label:"ITC_Main",actions:!0})]})}const E=t.createContext({selected:!1,hidden:!1});function n(l){const r=t.useContext(H),s=t.useContext(E),i=t.useId(),[f,m]=t.useState(l.defaultCollapsed===void 0?!0:!l.defaultCollapsed),h=t.Children.count(l.children)>0,d=t.useMemo(()=>s.hidden?!0:r.hidden.includes(i),[i,r.hidden,s.hidden]),p=s.selected||i===r.selected,a=t.useCallback(()=>{r.setSelected(c=>{if(c!==i)return i})},[i,r]),u=l.actions||d;return e.jsx(E.Provider,{value:t.useMemo(()=>({selected:p,hidden:d}),[d,p]),children:e.jsx(oe,{content:e.jsxs(e.Fragment,{children:[e.jsx(ce,{onClick:()=>{m(c=>!c)}}),e.jsx(P,{href:w,style:{display:"inline"}}),e.jsx(de,{onClick:()=>{a()},children:l.label}),u&&e.jsxs(ue,{children:[e.jsx(y,{className:o.action,icon:he,label:"Lock",variant:"ghost","aria-hidden":!l.actions||d}),s.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(P,{href:pe})}):e.jsx(y,{className:o.action,icon:d?xe:ve,label:d?"Show":"Hide",variant:"ghost","aria-hidden":!l.actions,onClick:()=>{r.toggleHidden(i)}}),e.jsx(Je,{hidden:!l.actions||d})]})]}),expanded:h?f:void 0,selected:p,children:f?l.children:void 0})})}function Je({hidden:l}){return e.jsxs(L,{children:[e.jsx(X,{className:o.action,"aria-hidden":l,render:e.jsx(y,{icon:fe,label:"More",variant:"ghost"})}),e.jsxs(G,{style:{minInlineSize:164},children:[e.jsx(v,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(v,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(v,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(v,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(v,{shortcuts:"]",children:"Bring to front"}),e.jsx(v,{shortcuts:"[",children:"Send to back"}),e.jsx(v,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(v,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(v,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(v,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(v,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(v,{shortcuts:"I",children:"Isolate object"})]})]})}function Qe(){const{filters:l,filtered:r}=t.useContext(N),[s,i]=t.useState(!1),f=t.useRef(null),m=t.useRef(null),h=V(),d=t.useMemo(()=>{if(h!=="ideal"||l.length===0)return;const a=k.items.filter(c=>c.type?l.includes(c.type):!1);function u(c){return c.reduce((b,g)=>{const _=g.items?u(g.items):0;return b+1+_},0)}return u(a)},[l,h]),p=s?e.jsxs(e.Fragment,{children:[e.jsx(Ye,{filters:h==="ideal"?k.filters:[]}),e.jsx(y,{className:o.shiftIconRight,icon:be,label:"Close",variant:"ghost",onClick:()=>{var a;D.flushSync(()=>i(!1)),(a=m.current)==null||a.focus()}})]}):e.jsx(y,{className:o.shiftIconRight,icon:K,label:"Search",variant:"ghost",onClick:()=>{var a;D.flushSync(()=>i(!0)),(a=f.current)==null||a.focus()}});return e.jsxs("div",{className:o.subheader,children:[e.jsx(Ce.h3,{className:o.subheaderTitle,tabIndex:-1,ref:m,render:s?e.jsx(z,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),e.jsx(z,{"aria-live":r?"polite":"off","aria-atomic":!0,children:d===void 0?"Showing all tree items":`Showing ${d} tree items`}),s?e.jsxs(re,{className:o.searchInput,children:[e.jsx(le,{href:K}),e.jsx(ae,{placeholder:"Search",ref:f})]}):null,e.jsx("div",{className:o.subheaderActions,children:p})]})}function Ye({filters:l}){const r=t.useContext(N);return e.jsxs(L,{children:[e.jsx(X,{render:e.jsx(y,{icon:je,label:"Filter",variant:"ghost"})}),e.jsxs(G,{style:{minInlineSize:164},children:[e.jsx(v,{onClick:()=>{r.clearFilters()},children:"Show all"}),l.map(s=>e.jsx(v,{onClick:()=>{r.toggleFilter(s)},children:s},s))]})]})}const N=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}});export{Nt as default,Mt as meta};
