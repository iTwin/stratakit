import{u as h}from"./U6HHPQDW.BKqIZ52J.js";import{a as p,i as m,e as q,g as x,h as b,k as A,l as B,m as F,q as I,n as T,b as Y,f as H,d as L}from"./ExamplePreview.C3-GKwUG.js";import{r as u}from"./index.DIfZGIpv.js";var j="button";function v(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?m(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?m(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var z=Symbol("command"),G=p(function({clickOnEnter:t=!0,clickOnSpace:n=!0,...r}){const o=u.useRef(null),[C,D]=u.useState(!1);u.useEffect(()=>{o.current&&D(m(o.current))},[]);const[M,d]=u.useState(!1),f=u.useRef(!1),y=q(r),[k,S]=x(r,z,!0),E=r.onKeyDown,K=b(e=>{E?.(e);const s=e.currentTarget;if(e.defaultPrevented||k||y||!A(e)||B(s)||s.isContentEditable)return;const i=t&&e.key==="Enter",c=n&&e.key===" ",l=e.key==="Enter"&&!t,w=e.key===" "&&!n;if(l||w){e.preventDefault();return}if(i||c){const P=v(e);if(i){if(!P){e.preventDefault();const{view:J,...U}=e,N=()=>T(s,U);F()?I(s,"keyup",N):queueMicrotask(N)}}else c&&(f.current=!0,P||(e.preventDefault(),d(!0)))}}),g=r.onKeyUp,R=b(e=>{if(g?.(e),e.defaultPrevented||k||y||e.metaKey)return;const s=n&&e.key===" ";if(f.current&&s&&(f.current=!1,!v(e))){e.preventDefault(),d(!1);const i=e.currentTarget,{view:c,...l}=e;queueMicrotask(()=>T(i,l))}});return r={"data-active":M||void 0,type:C?"button":void 0,...S,...r,ref:Y(o,r.ref),onKeyDown:K,onKeyUp:R},r=h(r),r});H(function(t){const n=G(t);return L(j,n)});export{G as u};
