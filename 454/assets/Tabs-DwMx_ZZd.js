import{a as C,n as g}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{a as ce}from"./index-ChOFKjs3.js";import{c as W}from"./~utils-CXPSt6v1.js";import{e as ie}from"./~hooks-CG0nKyDT.js";import{f as H}from"./~utils-26sRqX9k.js";import{a as le}from"./VEVQD5MH-Ba0P5p1F.js";import{a as Z,b as ee,C as U,c as de}from"./P2CTZE2T-Je5rf-Zr.js";import{P as ue,a as me}from"./MTZPJQMC-12L8Y8RX.js";import{c as te,e as be,_ as N,d as F,b as M,Q as G,g as S,h as f,u as J,I as fe,q as B,i as K,t as q,j as z,k as Q,v as oe,C as ve,l as A,x as se,y as Ie}from"./LMDWO4NN-DUubhdkr.js";import{c as pe,a as xe,b as Se}from"./ITI7HKP4-C5EJ2Ulc.js";import{m as Ce,o as X,c as Pe,s as O,b as y,e as he,u as ne,a as Y,d as $}from"./YV4JVR4I-DzguEf2c.js";import{c as Te}from"./C3IKGW5T-BaLKfk0m.js";import{u as ge}from"./RZ4GPYOB-DvprUfEa.js";import{u as Ee,d as _e}from"./VGCJ63VH-B5YFul0-.js";import{g as ye,u as Re}from"./LVA2YJMS-WngChXeY.js";var we=te([me,ee],[ue,Z]),De=we.useContext;C.createContext(!1);C.createContext(null);function je(t={}){var n=t,{composite:o,combobox:e}=n,s=be(n,["composite","combobox"]);const a=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],v=Ce(s.store,X(o,a),X(e,a)),l=v==null?void 0:v.getState(),u=pe(N(M({},s),{store:v,includesBaseElement:F(s.includesBaseElement,l==null?void 0:l.includesBaseElement,!1),orientation:F(s.orientation,l==null?void 0:l.orientation,"horizontal"),focusLoop:F(s.focusLoop,l==null?void 0:l.focusLoop,!0)})),r=Te(),w=N(M({},u.getState()),{selectedId:F(s.selectedId,l==null?void 0:l.selectedId,s.defaultSelectedId),selectOnMove:F(s.selectOnMove,l==null?void 0:l.selectOnMove,!0)}),c=Pe(w,u,v);O(c,()=>y(c,["moves"],()=>{const{activeId:d,selectOnMove:b}=c.getState();if(!b||!d)return;const I=u.item(d);I&&(I.dimmed||I.disabled||c.setState("selectedId",I.id))}));let P=!0;O(c,()=>he(c,["selectedId"],(d,b)=>{if(!P){P=!0;return}o&&d.selectedId===b.selectedId||c.setState("activeId",d.selectedId)})),O(c,()=>y(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:b,renderedItems:I}=c.getState(),p=u.item(b);if(p&&!p.disabled&&!p.dimmed)c.setState("selectedId",p.id);else{const E=I.find(h=>!h.disabled&&!h.dimmed);c.setState("selectedId",E==null?void 0:E.id)}})),O(c,()=>y(c,["renderedItems"],d=>{const b=d.renderedItems;if(b.length)return y(r,["renderedItems"],I=>{const p=I.renderedItems;p.some(h=>!h.tabId)&&p.forEach((h,D)=>{if(h.tabId)return;const k=b[D];k&&r.renderItem(N(M({},h),{tabId:k.id}))})})}));let x=null;return O(c,()=>{const d=()=>{x=c.getState().selectedId},b=()=>{P=!1,c.setState("selectedId",x)};if(o&&"setSelectElement"in o)return G(y(o,["value"],d),y(o,["mounted"],b));if(e)return G(y(e,["selectedValue"],d),y(e,["mounted"],b))}),N(M(M({},u),c),{panels:r,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),u.move(d)}})}function ke(t,n,o){J(n,[o.composite,o.combobox]),t=xe(t,n,o),Y(t,o,"selectedId","setSelectedId"),Y(t,o,"selectOnMove");const[e,s]=ne(()=>t.panels,{});return J(s,[t,s]),Object.assign(C.useMemo(()=>S(f({},t),{panels:e}),[t,e]),{composite:o.composite,combobox:o.combobox})}function Le(t={}){const n=le(),o=De()||n;t=S(f({},t),{composite:t.composite!==void 0?t.composite:o,combobox:t.combobox!==void 0?t.combobox:n});const[e,s]=ne(je,t);return ke(e,s,t)}var V=te([ee],[Z]),Fe=V.useScopedContext,re=V.useProviderContext,Me=V.ContextProvider,ae=V.ScopedContextProvider,Oe="button",Ne=K(function(n){var o=n,{store:e,getItem:s}=o,a=z(o,["store","getItem"]),v;const l=Fe();e=e||l,Q(e,!1);const u=oe(),r=a.id||u,w=ve(a),c=C.useCallback(m=>{const R=S(f({},m),{dimmed:w});return s?s(R):R},[w,s]),P=a.onClick,x=A(m=>{P==null||P(m),!m.defaultPrevented&&(e==null||e.setSelectedId(r))}),d=e.panels.useState(m=>{var R;return(R=m.items.find(i=>i.tabId===r))==null?void 0:R.id}),b=u?a.shouldRegisterItem:!1,I=e.useState(m=>!!r&&m.activeId===r),p=e.useState(m=>!!r&&m.selectedId===r),E=e.useState(m=>!!e.item(m.activeId)),h=I||p&&!E,D=p||((v=a.accessibleWhenDisabled)!=null?v:!0);if($(e.combobox||e.composite,"virtualFocus")&&(a=S(f({},a),{tabIndex:-1})),a=S(f({id:r,role:"tab","aria-selected":p,"aria-controls":d||void 0},a),{onClick:x}),e.composite){const m={id:r,accessibleWhenDisabled:D,store:e.composite,shouldRegisterItem:h&&b,rowId:a.rowId,render:a.render};a=S(f({},a),{render:g.jsx(U,S(f({},m),{render:e.combobox&&e.composite!==e.combobox?g.jsx(U,S(f({},m),{store:e.combobox})):m.render}))})}return a=de(S(f({store:e},a),{accessibleWhenDisabled:D,getItem:c,shouldRegisterItem:b})),a}),$e=fe(B(function(n){const o=Ne(n);return q(Oe,o)}));function Ve(t={}){const n=Le(t);return g.jsx(Me,{value:n,children:t.children})}var Ae="div",We=K(function(n){var o=n,{store:e}=o,s=z(o,["store"]);const a=re();e=e||a,Q(e,!1);const v=e.useState(l=>l.orientation==="both"?void 0:l.orientation);return s=se(s,l=>g.jsx(ae,{value:e,children:l}),[e]),e.composite&&(s=f({focusable:!1},s)),s=f({role:"tablist","aria-orientation":v},s),s=Se(f({store:e},s)),s}),He=B(function(n){const o=We(n);return q(Ae,o)}),Be="div",Ke=K(function(n){var o=n,{store:e,unmountOnHide:s,tabId:a,getItem:v,scrollRestoration:l,scrollElement:u}=o,r=z(o,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const w=re();e=e||w,Q(e,!1);const c=C.useRef(null),P=oe(r.id),x=$(e.panels,()=>{var i;return a||((i=e==null?void 0:e.panels.item(P))==null?void 0:i.tabId)}),d=$(e,i=>!!x&&i.selectedId===x),b=Ee({open:d}),I=$(b,"mounted"),p=C.useRef(new Map),E=A(()=>{const i=c.current;return i?u?typeof u=="function"?u(i):"current"in u?u.current:u:i:null});C.useEffect(()=>{var i,_;if(!l||!I)return;const T=E();if(!T)return;if(l==="reset"){T.scroll(0,0);return}if(!x)return;const j=p.current.get(x);T.scroll((i=j==null?void 0:j.x)!=null?i:0,(_=j==null?void 0:j.y)!=null?_:0);const L=()=>{p.current.set(x,{x:T.scrollLeft,y:T.scrollTop})};return T.addEventListener("scroll",L),()=>{T.removeEventListener("scroll",L)}},[l,I,x,E,e]);const[h,D]=C.useState(!1);C.useEffect(()=>{const i=c.current;if(!i)return;const _=ye(i);D(!!_.length)},[]);const k=C.useCallback(i=>{const _=S(f({},i),{id:P||i.id,tabId:a});return v?v(_):_},[P,a,v]),m=r.onKeyDown,R=A(i=>{if(m==null||m(i),i.defaultPrevented||!(e!=null&&e.composite))return;const T={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[i.key];if(!T)return;const{selectedId:j}=e.getState(),L=T({activeId:j});L&&(i.preventDefault(),e.move(L))});return r=se(r,i=>g.jsx(ae,{value:e,children:i}),[e]),r=S(f({id:P,role:"tabpanel","aria-labelledby":x||void 0},r),{children:s&&!I?null:r.children,ref:Ie(c,r.ref),onKeyDown:R}),r=Re(f({focusable:!e.composite&&!h},r)),r=_e(f({store:b},r)),r=ge(S(f({store:e.panels},r),{getItem:k})),r}),qe=B(function(n){const o=Ke(n);return q(Be,o)});function ct(t){const{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:a}=t,[v,l]=ie(n,o,e);return g.jsx(Ve,{selectedId:v,setSelectedId:C.useCallback(u=>{document.startViewTransition?document.startViewTransition(()=>{ce.flushSync(()=>{l(u)})}):l(u)},[l]),selectOnMove:s,children:a})}const it=H((t,n)=>{const{tone:o="neutral",...e}=t,s=`active-stripe-${C.useId().replaceAll(":","_")}`;return g.jsx(He,{...e,"data-kiwi-tone":o,className:W("-tab-list",t.className),style:{"--tab-active-stripe-view-transition-name":s,...t.style},ref:n})}),lt=H((t,n)=>g.jsx($e,{accessibleWhenDisabled:!0,...t,className:W("-tab",t.className),ref:n})),dt=H((t,n)=>g.jsx(qe,{...t,className:W("-tab-panel",t.className),ref:n}));export{ct as T,lt as a,dt as b,it as c};
