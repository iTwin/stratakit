import{a as T,p as E}from"./chunk-C37GKA54-CQGMo0Pk.js";import{v as le,q as de,w as ue,x as Q,y as me,z as F,E as y,J as be,K as Z,L as U,l as j,M as fe,N as ve,O as pe,Q as Ie}from"./~utils-CRVGrJco.js";import{f as W,p as xe,c as V,i as ee}from"./sun-nn-xDiT_.js";import{a as te,b as oe,C as q,u as Se}from"./6VRAQV3D-DS5SupTZ.js";import{T as se,S as Ce,M as $,Q as N,l as O,J as G,b as h,d as v,R as Y,a1 as he,f as H,c as K,a as X,_ as z,F as J,h as ne,t as ge,u as A,p as re,g as Pe}from"./LMDWO4NN-anhR_Der.js";import{c as Te,a as Ee,b as Re}from"./5JTVDSTH-CwpgwLi-.js";import{u as _e}from"./S43UC3DV-Bp97eVks.js";import{c as ye}from"./VDHZ5F7K-Cj73fNpC.js";import{u as we}from"./RZ4GPYOB-D3OTXs7H.js";var Me=se([de,oe],[le,te]),Le=Me.useContext;T.createContext(!1);T.createContext(null);function je(t={}){var n=t,{composite:o,combobox:e}=n,s=Ce(n,["composite","combobox"]);const c=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],f=ue(s.store,Q(o,c),Q(e,c)),l=f?.getState(),u=Te($(O({},s),{store:f,includesBaseElement:N(s.includesBaseElement,l?.includesBaseElement,!1),orientation:N(s.orientation,l?.orientation,"horizontal"),focusLoop:N(s.focusLoop,l?.focusLoop,!0)})),r=ye(),C=$(O({},u.getState()),{selectedId:N(s.selectedId,l?.selectedId,s.defaultSelectedId),selectOnMove:N(s.selectOnMove,l?.selectOnMove,!0)}),a=me(C,u,f);F(a,()=>y(a,["moves"],()=>{const{activeId:d,selectOnMove:m}=a.getState();if(!m||!d)return;const x=u.item(d);x&&(x.dimmed||x.disabled||a.setState("selectedId",x.id))}));let I=!0;F(a,()=>be(a,["selectedId"],(d,m)=>{if(!I){I=!0;return}o&&d.selectedId===m.selectedId||a.setState("activeId",d.selectedId)})),F(a,()=>y(a,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:m,renderedItems:x}=a.getState(),S=u.item(m);if(S&&!S.disabled&&!S.dimmed)a.setState("selectedId",S.id);else{const R=x.find(g=>!g.disabled&&!g.dimmed);a.setState("selectedId",R?.id)}})),F(a,()=>y(a,["renderedItems"],d=>{const m=d.renderedItems;if(m.length)return y(r,["renderedItems"],x=>{const S=x.renderedItems;S.some(g=>!g.tabId)&&S.forEach((g,M)=>{if(g.tabId)return;const k=m[M];k&&r.renderItem($(O({},g),{tabId:k.id}))})})}));let p=null;return F(a,()=>{const d=()=>{p=a.getState().selectedId},m=()=>{I=!1,a.setState("selectedId",p)};if(o&&"setSelectElement"in o)return G(y(o,["value"],d),y(o,["mounted"],m));if(e)return G(y(e,["selectedValue"],d),y(e,["mounted"],m))}),$(O(O({},u),a),{panels:r,setSelectedId:d=>a.setState("selectedId",d),select:d=>{a.setState("selectedId",d),u.move(d)}})}function ke(t,n,o){Y(n,[o.composite,o.combobox]),t=Ee(t,n,o),U(t,o,"selectedId","setSelectedId"),U(t,o,"selectOnMove");const[e,s]=Z(()=>t.panels,{});return Y(s,[t,s]),Object.assign(T.useMemo(()=>h(v({},t),{panels:e}),[t,e]),{composite:o.composite,combobox:o.combobox})}function ae(t={}){const n=_e(),o=Le()||n;t=h(v({},t),{composite:t.composite!==void 0?t.composite:o,combobox:t.combobox!==void 0?t.combobox:n});const[e,s]=Z(je,t);return ke(e,s,t)}var B=se([oe],[te]),De=B.useScopedContext,ce=B.useProviderContext,Fe=B.ContextProvider,ie=B.ScopedContextProvider,Ne="button",Oe=K(function(n){var o=n,{store:e,getItem:s}=o,c=z(o,["store","getItem"]),f;const l=De();e=e||l,J(e,!1);const u=ne(),r=c.id||u,C=ge(c),a=T.useCallback(b=>{const w=h(v({},b),{dimmed:C});return s?s(w):w},[C,s]),I=c.onClick,p=A(b=>{I?.(b),!b.defaultPrevented&&e?.setSelectedId(r)}),d=e.panels.useState(b=>{var w;return(w=b.items.find(i=>i.tabId===r))==null?void 0:w.id}),m=u?c.shouldRegisterItem:!1,x=e.useState(b=>!!r&&b.activeId===r),S=e.useState(b=>!!r&&b.selectedId===r),R=e.useState(b=>!!e.item(b.activeId)),g=x||S&&!R,M=S||((f=c.accessibleWhenDisabled)!=null?f:!0);if(j(e.combobox||e.composite,"virtualFocus")&&(c=h(v({},c),{tabIndex:-1})),c=h(v({id:r,role:"tab","aria-selected":S,"aria-controls":d||void 0},c),{onClick:p}),e.composite){const b={id:r,accessibleWhenDisabled:M,store:e.composite,shouldRegisterItem:g&&m,rowId:c.rowId,render:c.render};c=h(v({},c),{render:E.jsx(q,h(v({},b),{render:e.combobox&&e.composite!==e.combobox?E.jsx(q,h(v({},b),{store:e.combobox})):b.render}))})}return c=Se(h(v({store:e},c),{accessibleWhenDisabled:M,getItem:a,shouldRegisterItem:m})),c}),$e=he(H(function(n){const o=Oe(n);return X(Ne,o)}));function Be(t={}){const n=ae(t);return E.jsx(Fe,{value:n,children:t.children})}var Ae="div",We=K(function(n){var o=n,{store:e}=o,s=z(o,["store"]);const c=ce();e=e||c,J(e,!1);const f=e.useState(l=>l.orientation==="both"?void 0:l.orientation);return s=re(s,l=>E.jsx(ie,{value:e,children:l}),[e]),e.composite&&(s=v({focusable:!1},s)),s=v({role:"tablist","aria-orientation":f},s),s=Re(v({store:e},s)),s}),Ve=H(function(n){const o=We(n);return X(Ae,o)}),He="div",Ke=K(function(n){var o=n,{store:e,unmountOnHide:s,tabId:c,getItem:f,scrollRestoration:l,scrollElement:u}=o,r=z(o,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const C=ce();e=e||C,J(e,!1);const a=T.useRef(null),I=ne(r.id),p=j(e.panels,()=>{var i;return c||((i=e?.panels.item(I))==null?void 0:i.tabId)}),d=j(e,i=>!!p&&i.selectedId===p),m=fe({open:d}),x=j(m,"mounted"),S=T.useRef(new Map),R=A(()=>{const i=a.current;return i?u?typeof u=="function"?u(i):"current"in u?u.current:u:i:null});T.useEffect(()=>{var i,_;if(!l||!x)return;const P=R();if(!P)return;if(l==="reset"){P.scroll(0,0);return}if(!p)return;const L=S.current.get(p);P.scroll((i=L?.x)!=null?i:0,(_=L?.y)!=null?_:0);const D=()=>{S.current.set(p,{x:P.scrollLeft,y:P.scrollTop})};return P.addEventListener("scroll",D),()=>{P.removeEventListener("scroll",D)}},[l,x,p,R,e]);const[g,M]=T.useState(!1);T.useEffect(()=>{const i=a.current;if(!i)return;const _=ve(i);M(!!_.length)},[]);const k=T.useCallback(i=>{const _=h(v({},i),{id:I||i.id,tabId:c});return f?f(_):_},[I,c,f]),b=r.onKeyDown,w=A(i=>{if(b?.(i),i.defaultPrevented||!e?.composite)return;const P={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[i.key];if(!P)return;const{selectedId:L}=e.getState(),D=P({activeId:L});D&&(i.preventDefault(),e.move(D))});return r=re(r,i=>E.jsx(ie,{value:e,children:i}),[e]),r=h(v({id:I,role:"tabpanel","aria-labelledby":p||void 0},r),{children:s&&!x?null:r.children,ref:Pe(a,r.ref),onKeyDown:w}),r=pe(v({focusable:!e.composite&&!g},r)),r=Ie(v({store:m},r)),r=we(h(v({store:e.panels},r),{getItem:k})),r}),Xe=H(function(n){const o=Ke(n);return X(He,o)});const ze=ee&&CSS?.supports("anchor-name: --foo"),Je=()=>ee&&window.matchMedia("(prefers-reduced-motion)").matches;function st(t){const{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:c}=t,f=ae({defaultSelectedId:n}),l=j(f,"baseElement"),u=j(f,"selectedId"),r=C=>{if(!ze)return;const a=l?.getRootNode();if(!a||!u||!C)return;const I=a.getElementById?.(u)?.getBoundingClientRect(),p=a.getElementById?.(C)?.getBoundingClientRect();if(!I||!p)return;const d=I.left-p.left,m=I.width/p.width;l?.animate([{transform:`translateX(${d}px) scaleX(${m})`},{transform:"none"}],{pseudoElement:"::after",duration:150,easing:"ease-in-out"})};return E.jsx(Be,{store:f,selectedId:o,setSelectedId:xe(C=>{Je()||r(C),e?.(C)}),selectOnMove:s,children:c})}const nt=W((t,n)=>{const{tone:o="neutral",...e}=t;return E.jsx(Ve,{...e,"data-kiwi-tone":o,className:V("ğŸ¥-tab-list",t.className),ref:n})}),rt=W((t,n)=>E.jsx($e,{accessibleWhenDisabled:!0,...t,className:V("ğŸ¥-tab",t.className),ref:n})),at=W((t,n)=>E.jsx(Xe,{...t,className:V("ğŸ¥-tab-panel",t.className),ref:n}));export{st as T,rt as a,at as b,nt as c};
