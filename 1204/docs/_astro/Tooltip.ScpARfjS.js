import{x as V,f as A,a as B,z as R,s as D,j as S,bb as C,ah as _,d as F,ao as $,h as E,an as h,ax as z,aL as L,w as U,c as W}from"./ExamplePreview.CsDDtgxO.js";import{r as p}from"./index.DIfZGIpv.js";import{c as I,f as H,a as q,d as k,u as w}from"./Q5W46E73.DsiwnS57.js";import{u as G}from"./~utils.useInit.Dk7gaBNb.js";import{f as J}from"./styles.internal.BwFdDu8v.js";import{H as K,a as Q,u as X,b as Y,c as Z,d as ee}from"./ECBEZ4YM.D-wHomqf.js";import{c as te}from"./Z32PU2LQ.BxZlpwpL.js";var g=V([Q],[K]),y=g.useProviderContext,ne=g.ContextProvider,oe=g.ScopedContextProvider,re="div",ae=B(function({store:e,portal:n=!0,gutter:r=8,preserveTabOrder:d=!1,hideOnHoverOutside:u=!0,hideOnInteractOutside:s=!0,...a}){const f=y();return e=e||f,R(e,!1),a=D(a,i=>S.jsx(oe,{value:e,children:i}),[e]),a={role:e.useState(i=>i.type==="description"?"tooltip":"none"),...a},a=X({...a,store:e,portal:n,gutter:r,preserveTabOrder:d,hideOnHoverOutside(i){if(C(u,i))return!1;const c=e?.getState().anchorElement;return c?!("focusVisible"in c.dataset):!0},hideOnInteractOutside:i=>{if(C(s,i))return!1;const c=e?.getState().anchorElement;return c?!_(c,i.target):!0}}),a}),ie=te(A(function(e){const n=ae(e);return F(re,n)}),y),ue="div",v=I({activeStore:null});function j(t){return()=>{const{activeStore:e}=v.getState();e===t&&v.setState("activeStore",null)}}var le=B(function({store:e,showOnHover:n=!0,...r}){const d=y();e=e||d,R(e,!1);const u=p.useRef(!1);p.useEffect(()=>H(e,["mounted"],o=>{o.mounted||(u.current=!1)}),[e]),p.useEffect(()=>{if(e)return $(j(e),H(e,["mounted","skipTimeout"],o=>{if(!e)return;if(o.mounted){const{activeStore:m}=v.getState();return m!==e&&m?.hide(),v.setState("activeStore",e)}const l=setTimeout(j(e),o.skipTimeout);return()=>clearTimeout(l)}))},[e]);const s=r.onMouseEnter,a=E(o=>{s?.(o),u.current=!0}),f=r.onFocusVisible,T=E(o=>{f?.(o),!o.defaultPrevented&&(e?.setAnchorElement(o.currentTarget),e?.show())}),i=r.onBlur,c=E(o=>{if(i?.(o),o.defaultPrevented)return;const{activeStore:l}=v.getState();u.current=!1,l===e&&v.setState("activeStore",null)}),x=e.useState("type"),P=e.useState(o=>{var l;return(l=o.contentElement)==null?void 0:l.id});return r={"aria-labelledby":x==="label"?P:void 0,...r,onMouseEnter:a,onFocusVisible:T,onBlur:c},r=Y({store:e,showOnHover(o){if(!u.current||C(n,o))return!1;const{activeStore:l}=v.getState();return l?(e?.show(),!1):!0},...r}),r}),ce=A(function(e){const n=le(e);return F(ue,n)});function se(t={}){var e;const n=(e=t.store)==null?void 0:e.getState(),r=Z({...t,placement:h(t.placement,n?.placement,"top"),hideTimeout:h(t.hideTimeout,n?.hideTimeout,0)}),d={...r.getState(),type:h(t.type,n?.type,"description"),skipTimeout:h(t.skipTimeout,n?.skipTimeout,300)},u=I(d,r,t.store);return{...r,...u}}function de(t,e,n){return k(t,n,"type"),k(t,n,"skipTimeout"),ee(t,e,n)}function M(t={}){const[e,n]=q(se,t);return de(e,n,t)}function ve(t={}){const e=M(t);return S.jsx(ne,{value:e,children:t.children})}const fe=p.createContext({placement:void 0}),pe=J((t,e)=>{G();const n=p.useId(),r=p.useContext(fe),{content:d,children:u,type:s="description",id:a=n,defaultOpen:f,open:T,setOpen:i,unmountOnHide:c=s==="none",placement:x=r.placement,...P}=t,o=M(),l=w(o,"open"),m=w(o,"popoverElement"),N=z(o.setOpen),O=L({element:m,open:l,setOpen:N});return S.jsxs(ve,{store:o,defaultOpen:f,open:T,setOpen:i,placement:x,children:[S.jsx(ce,{render:u,onContextMenu:U(u.props?.onContextMenu,b=>{(b.currentTarget.localName==="button"||b.currentTarget.role==="button")&&(b.preventDefault(),o.setOpen(!0))}),"data-has-popover-open":l||void 0,...s==="description"&&{"aria-describedby":a},...s==="label"&&{"aria-labelledby":a}}),S.jsx(ie,{portal:!0,...P,unmountOnHide:c,className:W("ü•ùTooltip",t.className),ref:e,id:a,style:{...O.style,...t.style},wrapperProps:{popover:O.popover},children:d})]})});var Ce=pe;export{Ce as T,fe as a};
