import{b as T,p as g}from"./index-DDCMeoDP.js";import{a0 as G,aC as ce,a1 as ee,b3 as le,a2 as te,a5 as ie,a6 as de,a7 as J,W as N,Q as k,X as w,U as ue,aa as F,ab as R,b4 as me,b5 as Q,ad as S,N as b,Y as oe,Z as X,$ as Y,aL as be,J as A,K as H,L as K,M as B,ag as U,ap as se,aD as fe,ah as V,aq as $,b6 as Z,aO as ve,ar as ne,e as Ie,b7 as pe,at as xe,b8 as Se,b9 as Ce,ba as Pe,l as q,d as z}from"./~utils-BNfkyBbq.js";import{a as he}from"./VEVQD5MH-qlCP6fWi.js";import{c as Te,u as ge,a as Ee}from"./ITI7HKP4-CKmBopnC.js";import{c as _e}from"./C3IKGW5T-B-ZDEykI.js";var Re=G([le,te],[ce,ee]),Le=Re.useContext;T.createContext(!1);T.createContext(null);function ye(t={}){var n=t,{composite:o,combobox:e}=n,s=ie(n,["composite","combobox"]);const r=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],p=de(s.store,J(o,r),J(e,r)),i=p==null?void 0:p.getState(),f=Te(N(w({},s),{store:p,includesBaseElement:k(s.includesBaseElement,i==null?void 0:i.includesBaseElement,!1),orientation:k(s.orientation,i==null?void 0:i.orientation,"horizontal"),focusLoop:k(s.focusLoop,i==null?void 0:i.focusLoop,!0)})),a=_e(),y=N(w({},f.getState()),{selectedId:k(s.selectedId,i==null?void 0:i.selectedId,s.defaultSelectedId),selectOnMove:k(s.selectOnMove,i==null?void 0:i.selectOnMove,!0)}),c=ue(y,f,p);F(c,()=>R(c,["moves"],()=>{const{activeId:d,selectOnMove:m}=c.getState();if(!m||!d)return;const v=f.item(d);v&&(v.dimmed||v.disabled||c.setState("selectedId",v.id))}));let C=!0;F(c,()=>me(c,["selectedId"],(d,m)=>{if(!C){C=!0;return}o&&d.selectedId===m.selectedId||c.setState("activeId",d.selectedId)})),F(c,()=>R(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:m,renderedItems:v}=c.getState(),I=f.item(m);if(I&&!I.disabled&&!I.dimmed)c.setState("selectedId",I.id);else{const E=v.find(P=>!P.disabled&&!P.dimmed);c.setState("selectedId",E==null?void 0:E.id)}})),F(c,()=>R(c,["renderedItems"],d=>{const m=d.renderedItems;if(m.length)return R(a,["renderedItems"],v=>{const I=v.renderedItems;I.some(P=>!P.tabId)&&I.forEach((P,j)=>{if(P.tabId)return;const M=m[j];M&&a.renderItem(N(w({},P),{tabId:M.id}))})})}));let x=null;return F(c,()=>{const d=()=>{x=c.getState().selectedId},m=()=>{C=!1,c.setState("selectedId",x)};if(o&&"setSelectElement"in o)return Q(R(o,["value"],d),R(o,["mounted"],m));if(e)return Q(R(e,["selectedValue"],d),R(e,["mounted"],m))}),N(w(w({},f),c),{panels:a,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),f.move(d)}})}function je(t,n,o){X(n,[o.composite,o.combobox]),t=ge(t,n,o),Y(t,o,"selectedId","setSelectedId"),Y(t,o,"selectOnMove");const[e,s]=oe(()=>t.panels,{});return X(s,[t,s]),Object.assign(T.useMemo(()=>S(b({},t),{panels:e}),[t,e]),{composite:o.composite,combobox:o.combobox})}function De(t={}){const n=he(),o=Le()||n;t=S(b({},t),{composite:t.composite!==void 0?t.composite:o,combobox:t.combobox!==void 0?t.combobox:n});const[e,s]=oe(ye,t);return je(e,s,t)}var W=G([te],[ee]),Me=W.useScopedContext,ae=W.useProviderContext,Oe=W.ContextProvider,re=W.ScopedContextProvider,ke="button",we=H(function(n){var o=n,{store:e,getItem:s}=o,r=B(o,["store","getItem"]),p;const i=Me();e=e||i,U(e,!1);const f=se(),a=r.id||f,y=fe(r),c=T.useCallback(u=>{const L=S(b({},u),{dimmed:y});return s?s(L):L},[y,s]),C=r.onClick,x=V(u=>{C==null||C(u),!u.defaultPrevented&&(e==null||e.setSelectedId(a))}),d=e.panels.useState(u=>{var L;return(L=u.items.find(l=>l.tabId===a))==null?void 0:L.id}),m=f?r.shouldRegisterItem:!1,v=e.useState(u=>!!a&&u.activeId===a),I=e.useState(u=>!!a&&u.selectedId===a),E=e.useState(u=>!!e.item(u.activeId)),P=v||I&&!E,j=I||((p=r.accessibleWhenDisabled)!=null?p:!0);if($(e.combobox||e.composite,"virtualFocus")&&(r=S(b({},r),{tabIndex:-1})),r=S(b({id:a,role:"tab","aria-selected":I,"aria-controls":d||void 0},r),{onClick:x}),e.composite){const u={id:a,accessibleWhenDisabled:j,store:e.composite,shouldRegisterItem:P&&m,rowId:r.rowId,render:r.render};r=S(b({},r),{render:g.jsx(Z,S(b({},u),{render:e.combobox&&e.composite!==e.combobox?g.jsx(Z,S(b({},u),{store:e.combobox})):u.render}))})}return r=ve(S(b({store:e},r),{accessibleWhenDisabled:j,getItem:c,shouldRegisterItem:m})),r}),Fe=be(A(function(n){const o=we(n);return K(ke,o)}));function Ne(t={}){const n=De(t);return g.jsx(Oe,{value:n,children:t.children})}var $e="div",We=H(function(n){var o=n,{store:e}=o,s=B(o,["store"]);const r=ae();e=e||r,U(e,!1);const p=e.useState(i=>i.orientation==="both"?void 0:i.orientation);return s=ne(s,i=>g.jsx(re,{value:e,children:i}),[e]),e.composite&&(s=b({focusable:!1},s)),s=b({role:"tablist","aria-orientation":p},s),s=Ee(b({store:e},s)),s}),Ve=A(function(n){const o=We(n);return K($e,o)}),Ae="div",He=H(function(n){var o=n,{store:e,unmountOnHide:s,tabId:r,getItem:p,scrollRestoration:i,scrollElement:f}=o,a=B(o,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const y=ae();e=e||y,U(e,!1);const c=T.useRef(null),C=se(a.id),x=$(e.panels,()=>{var l;return r||((l=e==null?void 0:e.panels.item(C))==null?void 0:l.tabId)}),d=$(e,l=>!!x&&l.selectedId===x),m=Ie({open:d}),v=$(m,"mounted"),I=T.useRef(new Map),E=V(()=>{const l=c.current;return l?f?typeof f=="function"?f(l):"current"in f?f.current:f:l:null});T.useEffect(()=>{var l,_;if(!i||!v)return;const h=E();if(!h)return;if(i==="reset"){h.scroll(0,0);return}if(!x)return;const D=I.current.get(x);h.scroll((l=D==null?void 0:D.x)!=null?l:0,(_=D==null?void 0:D.y)!=null?_:0);const O=()=>{I.current.set(x,{x:h.scrollLeft,y:h.scrollTop})};return h.addEventListener("scroll",O),()=>{h.removeEventListener("scroll",O)}},[i,v,x,E,e]);const[P,j]=T.useState(!1);T.useEffect(()=>{const l=c.current;if(!l)return;const _=pe(l);j(!!_.length)},[]);const M=T.useCallback(l=>{const _=S(b({},l),{id:C||l.id,tabId:r});return p?p(_):_},[C,r,p]),u=a.onKeyDown,L=V(l=>{if(u==null||u(l),l.defaultPrevented||!(e!=null&&e.composite))return;const h={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!h)return;const{selectedId:D}=e.getState(),O=h({activeId:D});O&&(l.preventDefault(),e.move(O))});return a=ne(a,l=>g.jsx(re,{value:e,children:l}),[e]),a=S(b({id:C,role:"tabpanel","aria-labelledby":x||void 0},a),{children:s&&!v?null:a.children,ref:xe(c,a.ref),onKeyDown:L}),a=Se(b({focusable:!e.composite&&!P},a)),a=Ce(b({store:m},a)),a=Pe(S(b({store:e.panels},a),{getItem:M})),a}),Ke=A(function(n){const o=He(n);return K(Ae,o)});function Qe(t){const{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:r}=t;return g.jsx(Ne,{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:r})}const Xe=q((t,n)=>{const{tone:o="neutral",...e}=t;return g.jsx(Ve,{...e,"data-kiwi-tone":o,className:z("ğŸ¥-tab-list",t.className),ref:n})}),Ye=q((t,n)=>g.jsx(Fe,{accessibleWhenDisabled:!0,...t,className:z("ğŸ¥-tab",t.className),ref:n})),Ze=q((t,n)=>g.jsx(Ke,{...t,className:z("ğŸ¥-tab-panel",t.className),ref:n}));export{Qe as T,Ye as a,Ze as b,Xe as c};
