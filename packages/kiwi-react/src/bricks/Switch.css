/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/
.ğŸ¥-switch {
	--âœ¨width: 2rem;
	--âœ¨thumb-size: 1rem;

	--âœ¨shadow-border: 0px 0px 0px 1px var(--ids-color-border-shadow-base) inset;

	--âœ¨glow--border-hover: var(--ids-color-glow-hue) var(--ids-color-border-glow-base-hover-\%);
	--âœ¨glow--border-press: var(--ids-color-glow-hue) var(--ids-color-border-glow-base-pressed-\%);
	--âœ¨glow--border-checked: var(--ids-color-glow-hue) var(--ids-color-border-glow-strong-hover-\%);
	--âœ¨glow--bg-hover: var(--ids-color-glow-hue) var(--ids-color-bg-glow-base-hover-\%);
	--âœ¨glow--bg-checked-hover: var(--ids-color-glow-hue) var(--ids-color-bg-glow-strong-hover-\%);

	--âœ¨bg--default: var(--ids-color-bg-page-base);
	--âœ¨bg--hover: color-mix(in oklch, var(--âœ¨bg--default) 100%, var(--âœ¨glow--bg-hover));
	--âœ¨bg--checked: var(--ids-color-bg-accent-base);
	--âœ¨bg--checked-hover: color-mix(
		in oklch,
		var(--âœ¨bg--checked) 100%,
		var(--âœ¨glow--bg-checked-hover)
	);

	--âœ¨border--default: var(--ids-color-border-neutral-base);
	--âœ¨border--hover: color-mix(in oklch, var(--âœ¨border--default) 100%, var(--âœ¨glow--border-hover));
	--âœ¨border--pressed: color-mix(
		in oklch,
		var(--âœ¨border--default) 100%,
		var(--âœ¨glow--border-press)
	);
	--âœ¨border--checked: color-mix(in oklch, var(--âœ¨bg--checked) 100%, var(--âœ¨glow--border-checked));
	--âœ¨border--disabled: var(--ids-color-border-glow-on-surface-disabled);

	@layer base {
		--ğŸ¥switch-thumb-color: var(--ids-color-bg-neutral-inverse);
		--ğŸ¥switch-thumb-placement: start;
		--ğŸ¥switch-thumb-aspect-ratio: 1 / 1;

		appearance: none;
		border: 1px solid transparent;
		cursor: pointer;

		display: inline-grid;
		align-items: center;

		position: relative;
		border-radius: 9999px;
		inline-size: var(--âœ¨width);

		background-color: var(--ğŸŒ€switch-state--default, var(--âœ¨bg--default))
			var(--ğŸŒ€switch-state--hover, var(--âœ¨bg--hover))
			var(--ğŸŒ€switch-state--pressed, var(--âœ¨bg--hover))
			var(--ğŸŒ€switch-state--checked, var(--âœ¨bg--checked))
			var(--ğŸŒ€switch-state--checked-hover, var(--âœ¨bg--checked-hover))
			var(--ğŸŒ€switch-state--disabled, var(--âœ¨bg--default));
		border-color: var(--ğŸŒ€switch-state--default, var(--âœ¨border--default))
			var(--ğŸŒ€switch-state--hover, var(--âœ¨border--hover))
			var(--ğŸŒ€switch-state--pressed, var(--âœ¨border--pressed))
			var(--ğŸŒ€switch-state--checked, var(--âœ¨border--checked))
			var(--ğŸŒ€switch-state--checked-hover, var(--âœ¨border--checked))
			var(--ğŸŒ€switch-state--disabled, var(--âœ¨border--disabled));
		transition: all 150ms ease-out;
		transition-property: background-color, border-color;

		&::before,
		&::after {
			content: "";
			display: block;
			grid-area: 1 / 1 / -1 / -1;
		}

		/* This pseudo-element increases the tap target size so it's >=24px tall  */
		&::before {
			position: absolute;
			inline-size: var(--âœ¨width);
			block-size: 24px;
			margin: -1px; /* account for border */
		}

		/* This pseudo-element creates the "thumb" */
		&::after {
			aspect-ratio: var(--ğŸ¥switch-thumb-aspect-ratio);
			block-size: var(--âœ¨thumb-size);
			border-radius: 9999px;
			margin: calc(0.125rem - 1px) /* spacing-2 - 1px to account for border */;
			background-color: var(--ğŸ¥switch-thumb-color);
			box-shadow: var(--ids-shadow-button-base-inset), var(--âœ¨shadow-border),
				var(--ids-shadow-button-base-drop);
			justify-self: var(--ğŸ¥switch-thumb-placement);

			@media (prefers-reduced-motion: no-preference) {
				transition: aspect-ratio 150ms ease-out;
				will-change: aspect-ratio;
			}
		}
	}

	@layer states {
		@media (any-hover: hover) {
			&:where(:hover) {
				--ğŸŒ€switch-state: var(--ğŸŒ€switch-state--hover);
			}
		}

		&:where(:checked, [aria-checked="true"]) {
			--ğŸŒ€switch-state: var(--ğŸŒ€switch-state--checked);
			--ğŸ¥switch-thumb-placement: end;

			@media (any-hover: hover) {
				&:where(:hover) {
					--ğŸŒ€switch-state: var(--ğŸŒ€switch-state--checked-hover);
				}
			}
		}

		&:where(:active) {
			--ğŸŒ€switch-state: var(--ğŸŒ€switch-state--pressed);
			--ğŸ¥switch-thumb-aspect-ratio: 1.75;
		}

		&:where([disabled], :disabled, [aria-disabled="true"]) {
			--ğŸŒ€switch-state: var(--ğŸŒ€switch-state--disabled);
			--ğŸ¥switch-thumb-color: var(--ids-color-icon-neutral-disabled);
			cursor: not-allowed;

			&::after {
				box-shadow: none;
			}
		}
	}

	@layer base.ğŸŒ€ {
		/* Cyclic toggles for default/hover/pressed/checked/checked+hover states. See https://kizu.dev/cyclic-toggles/ */
		--ğŸŒ€switch-state: var(--ğŸŒ€switch-state--default);
		--ğŸŒ€switch-state--default: var(--ğŸŒ€switch-state,);
		--ğŸŒ€switch-state--hover: var(--ğŸŒ€switch-state,);
		--ğŸŒ€switch-state--pressed: var(--ğŸŒ€switch-state,);
		--ğŸŒ€switch-state--checked: var(--ğŸŒ€switch-state,);
		--ğŸŒ€switch-state--checked-hover: var(--ğŸŒ€switch-state,);
		--ğŸŒ€switch-state--disabled: var(--ğŸŒ€switch-state,);
	}
}

@media (forced-colors: active) {
	.ğŸ¥-switch {
		border-color: CanvasText;
		--ğŸ¥switch-thumb-color: CanvasText;

		&:where(:checked, [aria-checked="true"]) {
			background-color: SelectedItem;
			--ğŸ¥switch-thumb-color: SelectedItemText;
		}

		&:where([disabled], :disabled, [aria-disabled="true"]) {
			background-color: Canvas;
			border-color: GrayText;
			--ğŸ¥switch-thumb-color: GrayText;
		}
	}
}
