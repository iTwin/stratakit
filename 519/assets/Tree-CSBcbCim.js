import{p as e,b as l}from"./index-DDCMeoDP.js";import{b5 as O,ab as S,l as j,d as b,b3 as h,b6 as B,o as v,I as E,a9 as A,b as G,S as H,b7 as _,O as q,b8 as z}from"./~utils-IsZB_QMP.js";import{b as U}from"./P2CTZE2T-B9atwGIw.js";import{a as V,T as W}from"./BOLVLGVE-BOdWtp1j.js";import{L as J,e as C,f as g,d as Q,D as X,a as Y,b as Z}from"./DropdownMenu-BqhiJjXf.js";import{b as $,C as ee}from"./ITI7HKP4-DCrJx5YE.js";function te(t={}){const i=O(t);return e.jsx(S,{value:i,children:t.children})}const I=l.createContext(void 0),fe=j((t,i)=>{const{"aria-level":s,selected:n,expanded:r,icon:u,unstable_decorations:a,label:c,description:x,actions:N,error:m,onSelectedChange:p,onExpandedChange:f,onClick:F,onKeyDown:K,...T}=t,M=o=>{n!==void 0&&(o.stopPropagation(),p==null||p(!n))},R=o=>{o.altKey||o.ctrlKey||o.metaKey||o.shiftKey||r!==void 0&&(o.key==="ArrowRight"||o.key==="ArrowLeft")&&(o.preventDefault(),f==null||f(o.key==="ArrowRight"))},k=l.useId(),w=l.useId(),D=l.useId(),y=typeof m=="string"?m:void 0,d=m?e.jsx(H,{}):u,L=l.useMemo(()=>{const o=[];return x&&o.push(w),(a||d)&&o.push(D),y&&o.push(y),o.length>0?o.join(" "):void 0},[a,d,D,x,w,y]);return e.jsx(I.Provider,{value:l.useMemo(()=>({level:s,expanded:r,selected:n,error:m}),[s,r,n,m]),children:e.jsx(U,{render:e.jsx(v,{...T}),onClick:h(F,M),onKeyDown:h(K,R),role:"treeitem","aria-expanded":r,"aria-selected":n,"aria-labelledby":k,"aria-describedby":L,"aria-level":s,className:b("-tree-item",t.className),ref:i,children:e.jsxs(J,{"data-kiwi-expanded":r,"data-kiwi-selected":n,"data-kiwi-error":m?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":s},role:void 0,children:[e.jsxs(C,{children:[e.jsx(B,{align:x?"block":void 0,children:e.jsx(ie,{onClick:()=>{r!==void 0&&(f==null||f(!r))}})}),d||a?e.jsx(v,{className:"-tree-item-decoration",id:D,render:l.isValidElement(d)?d:typeof d=="string"?e.jsx(E,{href:d}):void 0,children:d?null:a}):null]}),e.jsx(g,{id:k,className:"-tree-item-content",children:c}),x?e.jsx(g,{id:w,className:"-tree-item-description",children:x}):void 0,e.jsx(C,{render:e.jsx(re,{children:N})})]})})})}),re=j((t,i)=>{const{children:s,...n}=t,r=l.Children.toArray(s).filter(Boolean),{error:u}=A(I),a=u?2:3;return e.jsxs(W,{...n,onClick:h(t.onClick,c=>c.stopPropagation()),onKeyDown:h(t.onKeyDown,c=>c.stopPropagation()),className:b("-tree-item-actions-container",t.className),focusLoop:!1,ref:i,children:[r.slice(0,a-1),r.length===a?r[a-1]:null,r.length>a?e.jsx(se,{children:r.slice(a-1)}):null]})}),oe=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],P=l.createContext(!1);function se({children:t}){const[i,s]=l.useState(!1),n=l.useRef(!1);return e.jsx(te,{placement:"right-start",children:e.jsxs(X,{open:i,setOpen:l.useCallback(r=>{r&&!n.current?s(!0):s(!1)},[]),children:[e.jsx(Y,{onKeyDown:r=>{oe.includes(r.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:e.jsx(ne,{label:"More",icon:e.jsx(z,{})})}),e.jsx(P.Provider,{value:!0,children:e.jsx(Z,{children:t})})]})})}const ne=j((t,i)=>{const{error:s}=A(I),{visible:n=s?!0:void 0,label:r,icon:u,dot:a,...c}=t;return l.useContext(P)?e.jsx(Q,{...c,label:r,icon:u,unstable_dot:a,ref:i}):e.jsx(V,{render:e.jsx(G,{label:r,icon:u,inert:n===!1?!0:void 0,...c,dot:a,variant:"ghost",className:b("-tree-item-action",t.className),"data-kiwi-visible":n,ref:i})})}),ie=j((t,i)=>e.jsx(v.span,{"aria-hidden":"true",...t,onClick:h(t.onClick,s=>s.stopPropagation()),className:b("-button","-icon-button","-ghost-aligner","-tree-item-expander",t.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":_(),ref:i,children:e.jsx(q,{})})),xe=j((t,i)=>{const s=$({orientation:"vertical"});return e.jsx(v.div,{role:"tree",...t,render:e.jsx(ee,{store:s}),className:b("-tree",t.className),ref:i,children:t.children})});export{xe as T,fe as a,ne as b};
