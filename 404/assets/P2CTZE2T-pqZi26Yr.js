import{C as ae,d as le,u as fe}from"./RZ4GPYOB-Dm-kc06G.js";import{u as de}from"./KUU7WJ55-Bv_iLcLW.js";import{e as ce,B as W,z as me,c as pe,_ as Ie,u as be,h as ge,k as v,b as h,j as R,J as V,x as Ce,l as xe,r as Se,m as Pe,f as we,d as ve,W as he,X as F,C as O,Y as Ee,Z as ye,$ as Te,a0 as De,a1 as Re}from"./LMDWO4NN-CjgXNlKs.js";import{a as p,n as Fe}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{f as Oe}from"./YV4JVR4I-CifQtgWA.js";var x=ce([le],[ae]),Ae=x.useContext;x.useScopedContext;var qe=x.useProviderContext,Qe=x.ContextProvider,et=x.ScopedContextProvider,_e=p.createContext(void 0),ke=p.createContext(void 0),ze={id:null};function tt(n,r,i=!1){const t=n.findIndex(f=>f.id===r);return[...n.slice(t+1),...i?[ze]:[],...n.slice(0,t)]}function nt(n,r){return n.find(i=>!i.disabled)}function Ke(n,r){return r&&n.item(r)||null}function rt(n){const r=[];for(const i of n){const t=r.find(f=>{var c;return((c=f[0])==null?void 0:c.rowId)===i.rowId});t?t.push(i):r.push([i])}return r}function Le(n,r=!1){if(W(n))n.setSelectionRange(r?n.value.length:0,n.value.length);else if(n.isContentEditable){const i=me(n).getSelection();i==null||i.selectAllChildren(n),r&&(i==null||i.collapseToEnd())}}var A=Symbol("FOCUS_SILENTLY");function Be(n){n[A]=!0,n.focus({preventScroll:!0})}function it(n){const r=n[A];return delete n[A],r}function Y(n,r,i){return!(!r||r===i||!n.item(r.id))}var Ne="button";function Me(n){return F(n)?!0:n.tagName==="INPUT"&&!De(n)}function He(n,r=!1){const i=n.clientHeight,{top:t}=n.getBoundingClientRect(),f=Math.max(i*.875,i-40)*1.5,c=r?i-f+t:f+t;return n.tagName==="HTML"?c+n.scrollTop:c}function Ue(n,r=!1){const{top:i}=n.getBoundingClientRect();return r?i+n.clientHeight:i}function j(n,r,i,t=!1){var f;if(!r||!i)return;const{renderedItems:c}=r.getState(),S=Re(n);if(!S)return;const E=He(S,t);let d,I;for(let b=0;b<c.length;b+=1){const o=d;if(d=i(b),!d)break;if(d===o)continue;const P=(f=Ke(r,d))==null?void 0:f.element;if(!P)continue;const g=Ue(P,t)-E,a=Math.abs(g);if(t&&g<=0||!t&&g>=0){I!==void 0&&I<a&&(d=o);break}I=a}return d}function Ve(n,r){return O(n)?!1:Y(r,n.target)}var je=pe(function(r){var i=r,{store:t,rowId:f,preventScrollOnKeyDown:c=!1,moveOnKeyPress:S=!0,tabbable:E=!1,getItem:d,"aria-setsize":I,"aria-posinset":b}=i,o=Ie(i,["store","rowId","preventScrollOnKeyDown","moveOnKeyPress","tabbable","getItem","aria-setsize","aria-posinset"]);const P=Ae();t=t||P;const l=be(o.id),g=p.useRef(null),a=p.useContext(ke),_=ge(o)&&!o.accessibleWhenDisabled,{rowId:y,baseElement:k,isActiveItem:G,ariaSetSize:J,ariaPosInSet:X,isTabbable:Z}=Oe(t,{rowId(e){if(f)return f;if(e&&a!=null&&a.baseElement&&a.baseElement===e.baseElement)return a.id},baseElement(e){return(e==null?void 0:e.baseElement)||void 0},isActiveItem(e){return!!e&&e.activeId===l},ariaSetSize(e){if(I!=null)return I;if(e&&a!=null&&a.ariaSetSize&&a.baseElement===e.baseElement)return a.ariaSetSize},ariaPosInSet(e){if(b!=null)return b;if(!e||!(a!=null&&a.ariaPosInSet)||a.baseElement!==e.baseElement)return;const s=e.renderedItems.filter(u=>u.rowId===y);return a.ariaPosInSet+s.findIndex(u=>u.id===l)},isTabbable(e){if(!(e!=null&&e.renderedItems.length))return!0;if(e.virtualFocus)return!1;if(E)return!0;if(e.activeId===null)return!1;const s=t==null?void 0:t.item(e.activeId);return s!=null&&s.disabled||!(s!=null&&s.element)?!0:e.activeId===l}}),$=p.useCallback(e=>{var s;const u=v(h({},e),{id:l||e.id,rowId:y,disabled:!!_,children:(s=e.element)==null?void 0:s.textContent});return d?d(u):u},[l,y,_,d]),z=o.onFocus,T=p.useRef(!1),q=R(e=>{if(z==null||z(e),e.defaultPrevented||he(e)||!l||!t||Ve(e,t))return;const{virtualFocus:s,baseElement:u}=t.getState();if(t.setActiveId(l),F(e.currentTarget)&&Le(e.currentTarget),!s||!O(e)||Me(e.currentTarget)||!(u!=null&&u.isConnected))return;Ee()&&e.currentTarget.hasAttribute("data-autofocus")&&e.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),T.current=!0,e.relatedTarget===u||Y(t,e.relatedTarget)?Be(u):u.focus()}),K=o.onBlurCapture,Q=R(e=>{if(K==null||K(e),e.defaultPrevented)return;const s=t==null?void 0:t.getState();s!=null&&s.virtualFocus&&T.current&&(T.current=!1,e.preventDefault(),e.stopPropagation())}),L=o.onKeyDown,ee=V(c),te=V(S),ne=R(e=>{if(L==null||L(e),e.defaultPrevented||!O(e)||!t)return;const{currentTarget:s}=e,u=t.getState(),D=t.item(l),m=!!(D!=null&&D.rowId),w=u.orientation!=="horizontal",C=u.orientation!=="vertical",N=()=>!!(m||C||!u.baseElement||!W(u.baseElement)),M={ArrowUp:(m||w)&&t.up,ArrowRight:(m||C)&&t.next,ArrowDown:(m||w)&&t.down,ArrowLeft:(m||C)&&t.previous,Home:()=>{if(N())return!m||e.ctrlKey?t==null?void 0:t.first():t==null?void 0:t.previous(-1)},End:()=>{if(N())return!m||e.ctrlKey?t==null?void 0:t.last():t==null?void 0:t.next(-1)},PageUp:()=>j(s,t,t==null?void 0:t.up,!0),PageDown:()=>j(s,t,t==null?void 0:t.down)}[e.key];if(M){if(F(s)){const U=ye(s),re=C&&e.key==="ArrowLeft",ie=C&&e.key==="ArrowRight",oe=w&&e.key==="ArrowUp",se=w&&e.key==="ArrowDown";if(ie||se){const{length:ue}=Te(s);if(U.end!==ue)return}else if((re||oe)&&U.start!==0)return}const H=M();if(ee(e)||H!==void 0){if(!te(e))return;e.preventDefault(),t.move(H)}}}),B=p.useMemo(()=>({id:l,baseElement:k}),[l,k]);return o=Ce(o,e=>Fe.jsx(_e.Provider,{value:B,children:e}),[B]),o=v(h({id:l,"data-active-item":G||void 0},o),{ref:xe(g,o.ref),tabIndex:Z?o.tabIndex:-1,onFocus:q,onBlurCapture:Q,onKeyDown:ne}),o=de(o),o=fe(v(h({store:t},o),{getItem:$,shouldRegisterItem:l?o.shouldRegisterItem:!1})),Se(v(h({},o),{"aria-setsize":J,"aria-posinset":X}))}),ot=Pe(we(function(r){const i=je(r);return ve(Ne,i)}));export{et as C,Qe as a,ot as b,Ae as c,qe as d,nt as e,tt as f,Ke as g,rt as h,Y as i,it as s,je as u};
