import{w as J}from"./~utils-QeuuISRZ.js";import{n as e,a as n,t as Q}from"./chunk-K6AXKMTT-BHCV6zel.js";import{a as D}from"./index-B0znaqTz.js";import{B as Y}from"./Button-BhFrsEvL.js";import{D as k,a as E,b as K,c as d}from"./DropdownMenu-DEyBuYB1.js";import{I as w}from"./Icon-W-Xz2y7E.js";import{I as S}from"./IconButton-BTvBnhP6.js";import{T as L}from"./Text-Cr-9ZkTy.js";import{T as Z,a as ee,b as te}from"./TextBox-p0bHeYAi.js";import{V as ne}from"./VisuallyHidden--wMbwkoK.js";import{T as se,a as re,b as ae,c as le,d as oe}from"./Tree-OAMEACCk.js";import{p as M}from"./placeholder-Bapxid5q.js";import{p as ie,l as ce,d as de,h as ue,m as he,s as z,a as xe,f as me}from"./state-inherited-dot-BMSmuDXK.js";import{s as pe}from"./visibility-show-B0dbmQeI.js";import{R as je}from"./XL7CSKGW-ljzOK7sQ.js";import"./index-DeGJKKUv.js";import"./KUU7WJ55-BqoVd5kI.js";import"./LVA2YJMS-CSMPKIyC.js";import"./Kbd-hBK3p-qd.js";import"./P2CTZE2T-7dxqU1Px.js";import"./YV4JVR4I-B6YhGKv6.js";import"./BYC7LY2E-D0CFC92x.js";import"./VGCJ63VH-z3cMRjtT.js";import"./MTZPJQMC-BjB39itI.js";import"./VEVQD5MH-D8eZV1U2.js";import"./ITI7HKP4-9pOuItup.js";import"./P4IRICAX-CtPEgDjH.js";import"./Tooltip-Bz3i3WYK.js";import"./Field-DKvXBQ1W.js";import"./~hooks-DuYLhjin.js";import"./ListItem-BO7Ree_f.js";const fe="_appLayout_mt7mw_5",be="_header_mt7mw_22",ve="_platformBar_mt7mw_32",Ce="_logo_mt7mw_38",ge="_tools_mt7mw_48",_e="_leftPanel_mt7mw_58",Se="_panelHeader_mt7mw_70",Ae="_panelTitle_mt7mw_78",Ie="_panelCaption_mt7mw_84",we="_shiftIconRight_mt7mw_88",Pe="_subheader_mt7mw_92",Re="_subheaderTitle_mt7mw_102",Me="_searchInput_mt7mw_107",ye="_subheaderActions_mt7mw_111",Ne="_emptyState_mt7mw_115",Be="_canvasWrapper_mt7mw_124",De="_canvas_mt7mw_124",ze="_splitter_mt7mw_161",Te="_tree_mt7mw_203",ke="_action_mt7mw_208",Ee="_actionIcon_mt7mw_216",Ke="_slider_mt7mw_227",a={appLayout:fe,header:be,platformBar:ve,logo:Ce,tools:ge,leftPanel:_e,panelHeader:Se,panelTitle:Ae,panelCaption:Ie,shiftIconRight:we,subheader:Pe,subheaderTitle:Re,searchInput:Me,subheaderActions:ye,emptyState:Ne,canvasWrapper:Be,canvas:De,splitter:ze,tree:Te,action:ke,actionIcon:Ee,slider:Ke},X="Kiwi sandbox",wt=()=>[{title:X}],Pt=J(function(){const{sliderProps:o,panelProps:s,panelMinSize:r,panelMaxSize:m,resizing:c}=Ge({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:a.appLayout,style:{"--_panel-min-size":r,"--_panel-max-size":m},children:[e.jsxs("header",{className:a.header,children:[e.jsx("div",{className:a.logo,children:e.jsx(w,{href:M,size:"large"})}),e.jsx(L,{render:p=>e.jsx("h1",{...p}),variant:"body-md",children:X})]}),e.jsx("div",{className:a.platformBar,children:e.jsxs("div",{className:a.tools,children:[e.jsx(w,{href:M,size:"large"}),e.jsx(w,{href:M,size:"large"}),e.jsx(w,{href:M,size:"large"})]})}),e.jsxs("div",{...s,className:a.leftPanel,style:{position:"relative",...s.style},children:[e.jsxs("div",{className:a.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:a.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:a.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:a.actions,children:e.jsx(S,{className:a.shiftIconRight,icon:ie,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx($e,{}),e.jsx(He,{})]}),e.jsx("div",{className:a.splitter,"data-resizing":c?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:a.slider,...o})}),e.jsx("div",{className:a.canvasWrapper,children:e.jsx("div",{className:a.canvas})})]})})});function Le({children:l}){return e.jsx("div",{className:a.emptyState,children:l})}function Xe(l,o,s){return Math.min(Math.max(l,o),s)}function Ge(l){const{minSize:o,maxSize:s,onCollapse:r}=l,m=n.useId(),c=n.useRef(null),[p,x]=n.useState(void 0),[j,i]=n.useState(void 0),[u,b]=n.useState(void 0),[v,A]=n.useState(!1),[P,y]=n.useState(void 0),C=n.useMemo(()=>{if(o&&j)return Math.min(o.px,o.pct/100*j)},[o,j]),_=n.useMemo(()=>{if(C&&s&&j)return Math.max(C,s.pct/100*j)},[s,j,C]),I=n.useMemo(()=>{if(u==="smallest")return C??0;if(u==="largest")return _??0;if(p&&C&&_)return Xe(p,C,_)},[p,C,_,u]);n.useEffect(()=>{const h=c.current;if(!h)return;const f=h.parentElement;if(!f)return;const g=new ResizeObserver(()=>{const N=f.getBoundingClientRect(),B=h.getBoundingClientRect();i(N.width),x(B.width)});return g.observe(f),g.observe(h),()=>{g.disconnect()}},[]);const O=n.useCallback(h=>{const f=c.current;if(!f)return;const g=f.getBoundingClientRect();y(g.width+h),b(void 0),A(!0)},[]),H=n.useCallback(h=>{const f=c.current;if(!f)return;const g=f.parentElement;if(!g)return;const N=g.getBoundingClientRect(),B=h*(N.width*.005),q=f.getBoundingClientRect();y(q.width+B),b(void 0)},[]),F=n.useCallback(()=>{c.current&&(y(void 0),A(!1))},[]),{moveableProps:R}=Oe({onMove:O,onMoveEnd:F,onKeyMove:H}),V=n.useMemo(()=>({...R,onKeyDown:h=>{var f;if((f=R.onKeyDown)==null||f.call(R,h),!h.defaultPrevented)switch(h.key){case"Enter":h.preventDefault(),r==null||r();break;case"Home":h.preventDefault(),b("smallest");break;case"End":h.preventDefault(),b("largest");break}},onChange:h=>{if(v)return;const f=Number(h.target.value);y(f)},value:I===void 0?0:Math.floor(I),min:C===void 0?void 0:Math.floor(C),max:_===void 0?void 0:Math.floor(_)}),[R,I,C,_,r,v]),W=n.useMemo(()=>({style:{WebkitUserSelect:P===void 0?void 0:"none"},id:m,ref:c}),[m,P]),$=C===void 0?void 0:`${Math.floor(C)}px`,U=n.useMemo(()=>{if(P!==void 0&&s!==void 0&&u===void 0)return`min(${Math.floor(P)}px, ${s.pct}%)`;if(I!==void 0)return`${Math.floor(I)}px`},[s,P,I,u]);return{sliderProps:V,panelProps:W,panelMinSize:$,panelMaxSize:U,resizing:v}}function Oe(l){const{onMove:o,onMoveEnd:s,onKeyMove:r}=l,m=n.useRef(null),c=n.useRef(void 0),p=n.useRef(void 0),x=n.useCallback(()=>{p.current!==void 0&&(p.current=void 0,s==null||s())},[s]);return{moveableProps:n.useMemo(()=>({onPointerDown:i=>{if(i.button!==0||i.ctrlKey)return;const u=m.current;if(!u)return;const b=u.getBoundingClientRect(),v=i.clientX-b.left;p.current=v,i.preventDefault(),u.setPointerCapture(i.pointerId)},onPointerMove:i=>{const u=p.current;if(u===void 0)return;const b=m.current;if(!b)return;const v=b.getBoundingClientRect(),A=i.clientX-u-v.left;i.preventDefault(),o==null||o(A)},onPointerUp:x,onPointerCancel:x,onKeyDown:i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowLeft":i.preventDefault(),r==null||r(-1);break;case"ArrowRight":i.preventDefault(),r==null||r(1);break}},ref:i=>{var b;if(m.current=i,(b=c.current)==null||b.call(c),c.current=void 0,!i)return;const u=v=>{v.preventDefault()};i.addEventListener("touchstart",u),c.current=()=>{i.removeEventListener("touchstart",u)}}}),[r,o,x])}}const G=n.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function He(){const[l]=Q(),o=l.get("tree"),[s,r]=n.useState(),[m,c]=n.useState([]),p=n.useCallback(x=>{c(j=>j.includes(x)?j.filter(i=>i!==x):[...j,x])},[]);return o==="empty"?e.jsxs(Le,{children:[e.jsx(L,{children:"No layers"}),e.jsx(Y,{children:"Create a layer"})]}):e.jsx(G.Provider,{value:n.useMemo(()=>({selected:s,setSelected:r,hidden:m,toggleHidden:p}),[m,s,p]),children:e.jsx(se,{className:a.tree,children:o==="complex"?e.jsx(Ve,{}):e.jsx(Fe,{})})})}function Fe(){return e.jsxs(e.Fragment,{children:[e.jsx(t,{label:"Guides",children:e.jsxs(t,{label:"Tree",actions:!0,children:[e.jsx(t,{label:"Guide 4"}),e.jsx(t,{label:"Guide 3"}),e.jsx(t,{label:"Guide 2"}),e.jsx(t,{label:"Guide 1"})]})}),e.jsxs(t,{label:"Other",children:[e.jsx(t,{label:"Object 2",actions:!0,children:e.jsx(t,{label:"Path 3"})}),e.jsx(t,{label:"Object 1"})]}),e.jsxs(t,{label:"Road",children:[e.jsx(t,{label:"Parking lot access"}),e.jsx(t,{label:"Site access"})]}),e.jsx(t,{label:"Parking lot",actions:!0,children:e.jsxs(t,{label:"Parking area",actions:!0,children:[e.jsx(t,{label:"Bay point 2"}),e.jsx(t,{label:"Bay point 1",actions:!0}),e.jsx(t,{label:"Space point 1",actions:!0}),e.jsx(t,{label:"Path 6"})]})}),e.jsx(t,{label:"Building",children:e.jsx(t,{label:"Building area",children:e.jsx(t,{label:"Path 5"})})}),e.jsx(t,{label:"Sewer",children:e.jsx(t,{label:"Run off pipe",children:e.jsx(t,{label:"Path 4"})})}),e.jsx(t,{label:"Project boundary",children:e.jsx(t,{label:"Property area",children:e.jsx(t,{label:"Path 1"})})}),e.jsx(t,{label:"Map",children:e.jsx(t,{label:"Location",children:e.jsx(t,{label:"Terrain"})})})]})}function Ve(){return e.jsxs(e.Fragment,{children:[e.jsxs(t,{label:"ITC_Master",children:[e.jsx(t,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(t,{label:"002_Substation_A"})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",actions:!0,defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",actions:!0,defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00002-A",actions:!0})}),e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(t,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(t,{label:"007-aa_master.dgn",children:[e.jsx(t,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(t,{label:"A-CLNG-LITE-A"})}),e.jsx(t,{label:"A-CLNG-TILE",children:e.jsxs(t,{label:"A-DOOR-2D-PLAN",children:[e.jsx(t,{label:"P00003 [2-KA62]",actions:!0,children:e.jsx(t,{label:"Cell [2-KA63]",children:e.jsxs(t,{label:"Cell [2-KA64]",children:[e.jsx(t,{label:"Complex Chain [2-KA6A]"}),e.jsx(t,{label:"Complex Chain [2-KA6B]",actions:!0}),e.jsx(t,{label:"Complex Chain [2-KA6C]",actions:!0}),e.jsx(t,{label:"Complex Chain [2-KA6D]",actions:!0}),e.jsx(t,{label:"Complex Chain [2-KA6E]"}),e.jsx(t,{label:"Complex Chain [2-KA6F]"}),e.jsx(t,{label:"Complex Chain [2-KA6G]"}),e.jsx(t,{label:"Complex Chain [2-KA6H]"}),e.jsx(t,{label:"Complex Chain [2-KA61]"}),e.jsx(t,{label:"Complex Chain [2-KA65]"}),e.jsx(t,{label:"Complex Chain [2-KA66]"}),e.jsx(t,{label:"Complex Chain [2-KA67]"}),e.jsx(t,{label:"Complex Chain [2-KA68]"}),e.jsx(t,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(t,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KA74-A]"})}),e.jsx(t,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KA74-A]"})}),e.jsx(t,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KA98-A]"})}),e.jsx(t,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(t,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(t,{label:"ITC_Main",actions:!0})]})}const T=n.createContext({selected:!1,hidden:!1});function t(l){const o=n.useContext(G),s=n.useContext(T),r=n.useId(),[m,c]=n.useState(l.defaultCollapsed===void 0?!0:!l.defaultCollapsed),p=n.Children.count(l.children)>0,x=n.useMemo(()=>s.hidden?!0:o.hidden.includes(r),[r,o.hidden,s.hidden]),j=s.selected||r===o.selected,i=n.useCallback(()=>{o.setSelected(v=>{if(v!==r)return r})},[r,o]),u=n.useCallback(v=>{c(A=>v??!A)},[]),b=l.actions||x;return e.jsx(T.Provider,{value:n.useMemo(()=>({selected:j,hidden:x}),[x,j]),children:e.jsx(re,{content:e.jsxs(e.Fragment,{children:[e.jsx(ae,{onClick:()=>u()}),e.jsx(w,{href:M}),e.jsx(le,{children:l.label}),b&&e.jsxs(oe,{children:[e.jsx(S,{className:a.action,icon:ce,label:"Lock",variant:"ghost","aria-hidden":!l.actions||x}),s.hidden?e.jsx("span",{className:a.actionIcon,children:e.jsx(w,{href:de})}):e.jsx(S,{className:a.action,icon:x?ue:pe,label:x?"Show":"Hide",variant:"ghost","aria-hidden":!l.actions,onClick:()=>{o.toggleHidden(r)}}),e.jsx(We,{hidden:!l.actions||x})]})]}),selected:j,onSelectedChange:i,expanded:p?m:void 0,onExpandedChange:u,children:m?l.children:void 0})})}function We({hidden:l}){return e.jsxs(k,{children:[e.jsx(E,{className:a.action,"aria-hidden":l,render:e.jsx(S,{icon:he,label:"More",variant:"ghost"})}),e.jsxs(K,{style:{minInlineSize:164},children:[e.jsx(d,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(d,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(d,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(d,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(d,{shortcuts:"]",children:"Bring to front"}),e.jsx(d,{shortcuts:"[",children:"Send to back"}),e.jsx(d,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(d,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(d,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(d,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(d,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(d,{shortcuts:"I",children:"Isolate object"})]})]})}function $e(){const[l,o]=n.useState(!1),s=n.useRef(null),r=n.useRef(null),m=l?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{}),e.jsx(S,{className:a.shiftIconRight,icon:xe,label:"Close",variant:"ghost",onClick:()=>{var c;D.flushSync(()=>o(!1)),(c=r.current)==null||c.focus()}})]}):e.jsx(S,{className:a.shiftIconRight,icon:z,label:"Search",variant:"ghost",onClick:()=>{var c;D.flushSync(()=>o(!0)),(c=s.current)==null||c.focus()}});return e.jsxs("div",{className:a.subheader,children:[e.jsx(je.h3,{className:a.subheaderTitle,tabIndex:-1,ref:r,render:l?e.jsx(ne,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),l?e.jsxs(Z,{className:a.searchInput,children:[e.jsx(ee,{href:z}),e.jsx(te,{placeholder:"Search",ref:s})]}):null,e.jsx("div",{className:a.subheaderActions,children:m})]})}function Ue(){return e.jsxs(k,{children:[e.jsx(E,{render:e.jsx(S,{icon:me,label:"Filter",variant:"ghost"})}),e.jsxs(K,{style:{minInlineSize:164},children:[e.jsx(d,{children:"Show all"}),e.jsx(d,{children:"Guides"}),e.jsx(d,{children:"Other"}),e.jsx(d,{children:"Roadway"}),e.jsx(d,{children:"Parking"}),e.jsx(d,{children:"Building"}),e.jsx(d,{children:"Dry utility"}),e.jsx(d,{children:"Stormwater"}),e.jsx(d,{children:"Sewer"}),e.jsx(d,{children:"Boundary"}),e.jsx(d,{children:"Map"})]})]})}export{Pt as default,wt as meta};
