import{a as C,n as g}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as ce}from"./index-Dr3kRIaJ.js";import{c as W}from"./index-jyeBNHV5.js";import{a as le}from"./~hooks-Wdjhtx2E.js";import{H as Z,I as ie,J as de,K as J,v as O,q as F,x as M,a3 as ue,s as me,M as N,N as y,a4 as fe,a5 as Q,g as S,b,y as ee,z as U,A as X,c as H,_ as K,h as B,P as te,T as be,m as A,Q as $,n as Ie,d as z,e as q,G as se,u as pe,a6 as ve,f as G}from"./~utils-DQmYdTuY.js";import{a as xe}from"./VEVQD5MH-Bb0TWb_S.js";import{C as ne,a as oe,c as Y,b as Se}from"./P2CTZE2T-JMM0FKW0.js";import{P as Ce,a as Pe}from"./MTZPJQMC-DX-ieDRb.js";import{c as he,u as Te,a as ge}from"./ITI7HKP4-CauTjtST.js";import{u as Ee,d as _e}from"./VGCJ63VH-DN5hT00w.js";import{g as ye,u as Re}from"./LVA2YJMS-CDLsEuG0.js";var we=Z([Pe,oe],[Ce,ne]),De=we.useContext;C.createContext(!1);C.createContext(null);function je(t={}){var o=t,{composite:s,combobox:e}=o,n=ie(o,["composite","combobox"]);const a=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],I=de(n.store,J(s,a),J(e,a)),i=I==null?void 0:I.getState(),u=he(O(M({},n),{store:I,includesBaseElement:F(n.includesBaseElement,i==null?void 0:i.includesBaseElement,!1),orientation:F(n.orientation,i==null?void 0:i.orientation,"horizontal"),focusLoop:F(n.focusLoop,i==null?void 0:i.focusLoop,!0)})),r=ue(),w=O(M({},u.getState()),{selectedId:F(n.selectedId,i==null?void 0:i.selectedId,n.defaultSelectedId),selectOnMove:F(n.selectOnMove,i==null?void 0:i.selectOnMove,!0)}),c=me(w,u,I);N(c,()=>y(c,["moves"],()=>{const{activeId:d,selectOnMove:f}=c.getState();if(!f||!d)return;const p=u.item(d);p&&(p.dimmed||p.disabled||c.setState("selectedId",p.id))}));let P=!0;N(c,()=>fe(c,["selectedId"],(d,f)=>{if(!P){P=!0;return}s&&d.selectedId===f.selectedId||c.setState("activeId",d.selectedId)})),N(c,()=>y(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:f,renderedItems:p}=c.getState(),v=u.item(f);if(v&&!v.disabled&&!v.dimmed)c.setState("selectedId",v.id);else{const E=p.find(h=>!h.disabled&&!h.dimmed);c.setState("selectedId",E==null?void 0:E.id)}})),N(c,()=>y(c,["renderedItems"],d=>{const f=d.renderedItems;if(f.length)return y(r,["renderedItems"],p=>{const v=p.renderedItems;v.some(h=>!h.tabId)&&v.forEach((h,D)=>{if(h.tabId)return;const L=f[D];L&&r.renderItem(O(M({},h),{tabId:L.id}))})})}));let x=null;return N(c,()=>{const d=()=>{x=c.getState().selectedId},f=()=>{P=!1,c.setState("selectedId",x)};if(s&&"setSelectElement"in s)return Q(y(s,["value"],d),y(s,["mounted"],f));if(e)return Q(y(e,["selectedValue"],d),y(e,["mounted"],f))}),O(M(M({},u),c),{panels:r,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),u.move(d)}})}function Le(t,o,s){U(o,[s.composite,s.combobox]),t=Te(t,o,s),X(t,s,"selectedId","setSelectedId"),X(t,s,"selectOnMove");const[e,n]=ee(()=>t.panels,{});return U(n,[t,n]),Object.assign(C.useMemo(()=>S(b({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function ke(t={}){const o=xe(),s=De()||o;t=S(b({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:o});const[e,n]=ee(je,t);return Le(e,n,t)}var V=Z([oe],[ne]),Fe=V.useScopedContext,re=V.useProviderContext,Me=V.ContextProvider,ae=V.ScopedContextProvider,Ne="button",Oe=H(function(o){var s=o,{store:e,getItem:n}=s,a=K(s,["store","getItem"]),I;const i=Fe();e=e||i,B(e,!1);const u=te(),r=a.id||u,w=be(a),c=C.useCallback(m=>{const R=S(b({},m),{dimmed:w});return n?n(R):R},[w,n]),P=a.onClick,x=A(m=>{P==null||P(m),!m.defaultPrevented&&(e==null||e.setSelectedId(r))}),d=e.panels.useState(m=>{var R;return(R=m.items.find(l=>l.tabId===r))==null?void 0:R.id}),f=u?a.shouldRegisterItem:!1,p=e.useState(m=>!!r&&m.activeId===r),v=e.useState(m=>!!r&&m.selectedId===r),E=e.useState(m=>!!e.item(m.activeId)),h=p||v&&!E,D=v||((I=a.accessibleWhenDisabled)!=null?I:!0);if($(e.combobox||e.composite,"virtualFocus")&&(a=S(b({},a),{tabIndex:-1})),a=S(b({id:r,role:"tab","aria-selected":v,"aria-controls":d||void 0},a),{onClick:x}),e.composite){const m={id:r,accessibleWhenDisabled:D,store:e.composite,shouldRegisterItem:h&&f,rowId:a.rowId,render:a.render};a=S(b({},a),{render:g.jsx(Y,S(b({},m),{render:e.combobox&&e.composite!==e.combobox?g.jsx(Y,S(b({},m),{store:e.combobox})):m.render}))})}return a=Se(S(b({store:e},a),{accessibleWhenDisabled:D,getItem:c,shouldRegisterItem:f})),a}),$e=Ie(z(function(o){const s=Oe(o);return q(Ne,s)}));function Ve(t={}){const o=ke(t);return g.jsx(Me,{value:o,children:t.children})}var Ae="div",We=H(function(o){var s=o,{store:e}=s,n=K(s,["store"]);const a=re();e=e||a,B(e,!1);const I=e.useState(i=>i.orientation==="both"?void 0:i.orientation);return n=se(n,i=>g.jsx(ae,{value:e,children:i}),[e]),e.composite&&(n=b({focusable:!1},n)),n=b({role:"tablist","aria-orientation":I},n),n=ge(b({store:e},n)),n}),He=z(function(o){const s=We(o);return q(Ae,s)}),Ke="div",Be=H(function(o){var s=o,{store:e,unmountOnHide:n,tabId:a,getItem:I,scrollRestoration:i,scrollElement:u}=s,r=K(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const w=re();e=e||w,B(e,!1);const c=C.useRef(null),P=te(r.id),x=$(e.panels,()=>{var l;return a||((l=e==null?void 0:e.panels.item(P))==null?void 0:l.tabId)}),d=$(e,l=>!!x&&l.selectedId===x),f=Ee({open:d}),p=$(f,"mounted"),v=C.useRef(new Map),E=A(()=>{const l=c.current;return l?u?typeof u=="function"?u(l):"current"in u?u.current:u:l:null});C.useEffect(()=>{var l,_;if(!i||!p)return;const T=E();if(!T)return;if(i==="reset"){T.scroll(0,0);return}if(!x)return;const j=v.current.get(x);T.scroll((l=j==null?void 0:j.x)!=null?l:0,(_=j==null?void 0:j.y)!=null?_:0);const k=()=>{v.current.set(x,{x:T.scrollLeft,y:T.scrollTop})};return T.addEventListener("scroll",k),()=>{T.removeEventListener("scroll",k)}},[i,p,x,E,e]);const[h,D]=C.useState(!1);C.useEffect(()=>{const l=c.current;if(!l)return;const _=ye(l);D(!!_.length)},[]);const L=C.useCallback(l=>{const _=S(b({},l),{id:P||l.id,tabId:a});return I?I(_):_},[P,a,I]),m=r.onKeyDown,R=A(l=>{if(m==null||m(l),l.defaultPrevented||!(e!=null&&e.composite))return;const T={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!T)return;const{selectedId:j}=e.getState(),k=T({activeId:j});k&&(l.preventDefault(),e.move(k))});return r=se(r,l=>g.jsx(ae,{value:e,children:l}),[e]),r=S(b({id:P,role:"tabpanel","aria-labelledby":x||void 0},r),{children:n&&!p?null:r.children,ref:pe(c,r.ref),onKeyDown:R}),r=Re(b({focusable:!e.composite&&!h},r)),r=_e(b({store:f},r)),r=ve(S(b({store:e.panels},r),{getItem:L})),r}),ze=z(function(o){const s=Be(o);return q(Ke,s)});function nt(t){const{defaultSelectedId:o,selectedId:s,setSelectedId:e,selectOnMove:n,children:a}=t,[I,i]=le(o,s,e);return g.jsx(Ve,{selectedId:I,setSelectedId:C.useCallback(u=>{document.startViewTransition?document.startViewTransition(()=>{ce.flushSync(()=>{i(u)})}):i(u)},[i]),selectOnMove:n,children:a})}const ot=G((t,o)=>{const{tone:s="neutral",...e}=t,n=`active-stripe-${C.useId().replaceAll(":","_")}`;return g.jsx(He,{...e,"data-kiwi-tone":s,className:W("-tab-list",t.className),style:{"--tab-active-stripe-view-transition-name":n,...t.style},ref:o})}),rt=G((t,o)=>g.jsx($e,{accessibleWhenDisabled:!0,...t,className:W("-tab",t.className),ref:o})),at=G((t,o)=>g.jsx(ze,{...t,className:W("-tab-panel",t.className),ref:o}));export{nt as T,at as a,ot as b,rt as c};
