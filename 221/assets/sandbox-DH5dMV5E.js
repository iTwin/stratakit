import{w as X}from"./LMDWO4NN-AdQVI40z.js";import{n as e,a as t}from"./chunk-D52XG6IA-BPj3SxYk.js";import{a as B}from"./index-Dh4JygWN.js";import{D as U,a as q,b as J,c as g}from"./DropdownMenu-D5p_oUQe.js";import{D as Q}from"./Divider-BMWncsDM.js";import{I}from"./Icon-DEgQPAjc.js";import{I as R}from"./IconButton-B54qSjjk.js";import{T as Y,a as Z,b as ee}from"./TextBox-CsSVqrpy.js";import{V as E}from"./VisuallyHidden-oT9Xbpr4.js";import{T as te,a as ne,b as se,c as re}from"./Tree-CIQLp_GR.js";import{p as y}from"./placeholder-CFNFvMam.js";import{p as ae,l as ie,d as oe,h as le,s as ce,a as D,b as de,f as ue}from"./state-inherited-dot-DtTsQKCw.js";import{R as he}from"./XL7CSKGW-DDU26wbd.js";import"./index-LDMScfjX.js";import"./~utils-DlLScLBX.js";import"./Button-BOMamjQ5.js";import"./KUU7WJ55-t09PjvBK.js";import"./LVA2YJMS-CkBCxIVR.js";import"./Kbd-DT0wV_hE.js";import"./P2CTZE2T-BT-mtSx2.js";import"./YV4JVR4I-7LgjLGcz.js";import"./BYC7LY2E-9GYEBff6.js";import"./VGCJ63VH-DjYMlTD4.js";import"./XX67R432-Cv_HVTJr.js";import"./MTZPJQMC-BeFKSML9.js";import"./ITI7HKP4-CKgdTtAx.js";import"./P4IRICAX-DJ57dGqX.js";import"./Tooltip-DC4kSuMm.js";import"./Field-zFWJHpWk.js";import"./~hooks-KbN8yI3B.js";import"./Icon-BExUKRen.js";const pe="_appLayout_1akge_5",xe="_platformBar_1akge_14",me="_logo_1akge_19",fe="_tools_1akge_29",je="_leftPanel_1akge_39",ve="_header_1akge_50",ge="_panelTitle_1akge_58",be="_panelCaption_1akge_64",_e="_shiftIconRight_1akge_68",Se="_subheader_1akge_72",ke="_subheaderTitle_1akge_82",Ie="_searchInput_1akge_87",Re="_subheaderActions_1akge_91",Ce="_tree_1akge_95",Pe="_canvasWrapper_1akge_99",ye="_canvas_1akge_99",ze="_splitter_1akge_121",Me="_action_1akge_152",we="_actionIcon_1akge_160",Ne="_slider_1akge_169",o={appLayout:pe,platformBar:xe,logo:me,tools:fe,leftPanel:je,header:ve,panelTitle:ge,panelCaption:be,shiftIconRight:_e,subheader:Se,subheaderTitle:ke,searchInput:Ie,subheaderActions:Re,tree:Ce,canvasWrapper:Pe,canvas:ye,splitter:ze,action:Me,actionIcon:we,slider:Ne},L="Kiwi sandbox",ft=()=>[{title:L}],jt=X(function(){const{sliderProps:a,panelProps:s,panelMinSize:r,panelMaxSize:h,resizing:i}=De({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs(e.Fragment,{children:[e.jsx(E,{render:p=>e.jsx("h1",{...p}),children:L}),e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":r,"--_panel-max-size":h},children:[e.jsxs("div",{className:o.platformBar,children:[e.jsx("div",{className:o.logo,children:e.jsx(I,{href:y,size:"large"})}),e.jsxs("div",{className:o.tools,children:[e.jsx(I,{href:y,size:"large"}),e.jsx(I,{href:y,size:"large"}),e.jsx(I,{href:y,size:"large"})]})]}),e.jsxs("div",{...s,className:o.leftPanel,style:{position:"relative",...s.style},children:[e.jsxs("div",{className:o.header,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(R,{className:o.shiftIconRight,icon:ae,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Le,{}),e.jsx(Ee,{}),e.jsx(Q,{presentational:!0,className:o.splitter,"data-resizing":i?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...a})})]}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})]})});function Be(c,a,s){return Math.min(Math.max(c,a),s)}function De(c){const{minSize:a,maxSize:s,onCollapse:r}=c??{},h=t.useId(),i=t.useRef(null),[p,m]=t.useState(void 0),[v,l]=t.useState(void 0),[d,f]=t.useState(void 0),[b,z]=t.useState(!1),[C,M]=t.useState(void 0),j=t.useMemo(()=>{if(a&&v)return Math.min(a.px,a.pct/100*v)},[a,v]),S=t.useMemo(()=>{if(j&&s&&v)return Math.max(j,s.pct/100*v)},[s,v,j]),k=t.useMemo(()=>{if(d==="smallest")return j??0;if(d==="largest")return S??0;if(p&&j&&S)return Be(p,j,S)},[p,j,S,d]);t.useEffect(()=>{const u=i.current;if(!u)return;const x=u.parentElement;if(!x)return;const _=new ResizeObserver(()=>{const w=x.getBoundingClientRect(),N=u.getBoundingClientRect();l(w.width),m(N.width)});return _.observe(x),_.observe(u),()=>{_.disconnect()}},[]);const A=t.useCallback(u=>{const x=i.current;if(!x)return;const _=x.getBoundingClientRect();M(_.width+u),f(void 0),z(!0)},[]),G=t.useCallback(u=>{const x=i.current;if(!x)return;const _=x.parentElement;if(!_)return;const w=_.getBoundingClientRect(),N=u*(w.width*.005),V=x.getBoundingClientRect();M(V.width+N),f(void 0)},[]),O=t.useCallback(()=>{i.current&&(M(void 0),z(!1))},[]),{moveableProps:P}=Te({onMove:A,onMoveEnd:O,onKeyMove:G}),W=t.useMemo(()=>({...P,onKeyDown:u=>{var x;if((x=P.onKeyDown)==null||x.call(P,u),!u.defaultPrevented)switch(u.key){case"Enter":u.preventDefault(),r==null||r();break;case"Home":u.preventDefault(),f("smallest");break;case"End":u.preventDefault(),f("largest");break}},onChange:u=>{if(b)return;const x=Number(u.target.value);M(x)},value:k===void 0?0:Math.floor(k),min:j===void 0?void 0:Math.floor(j),max:S===void 0?void 0:Math.floor(S)}),[P,k,j,S,r,b]),$=t.useMemo(()=>({style:{WebkitUserSelect:C===void 0?void 0:"none"},id:h,ref:i}),[h,C]),F=j===void 0?void 0:`${j}px`,K=t.useMemo(()=>{if(C!==void 0&&s!==void 0&&d===void 0)return`min(${C}px, ${s.pct}%)`;if(k!==void 0)return`${k}px`},[s,C,k,d]);return{sliderProps:W,panelProps:$,panelMinSize:F,panelMaxSize:K,resizing:b}}function Te(c){const{onMove:a,onMoveEnd:s,onKeyMove:r}=c??{},h=t.useRef(null),i=t.useRef(void 0),p=t.useRef(void 0),m=t.useCallback(()=>{p.current!==void 0&&(p.current=void 0,s==null||s())},[s]);return{moveableProps:t.useMemo(()=>({onPointerDown:l=>{if(l.button!==0||l.ctrlKey)return;const d=h.current;if(!d)return;const f=d.getBoundingClientRect(),b=l.clientX-f.left;p.current=b,l.preventDefault(),d.setPointerCapture(l.pointerId)},onPointerMove:l=>{const d=p.current;if(d===void 0)return;const f=h.current;if(!f)return;const b=f.getBoundingClientRect(),z=l.clientX-d-b.left;l.preventDefault(),a==null||a(z)},onPointerUp:m,onPointerCancel:m,onKeyDown:l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowLeft":l.preventDefault(),r==null||r(-1);break;case"ArrowRight":l.preventDefault(),r==null||r(1);break}},ref:l=>{var f;if(h.current=l,(f=i.current)==null||f.call(i),i.current=void 0,!l)return;const d=b=>{b.preventDefault()};l.addEventListener("touchstart",d),i.current=()=>{l.removeEventListener("touchstart",d)}}}),[r,a,m])}}const H=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function Ee(){const[c,a]=t.useState(),[s,r]=t.useState([]),h=t.useCallback(i=>{r(p=>p.includes(i)?p.filter(m=>m!==i):[...p,i])},[]);return e.jsx(H.Provider,{value:t.useMemo(()=>({selected:c,setSelected:a,hidden:s,toggleHidden:h}),[s,c,h]),children:e.jsxs(te,{className:o.tree,children:[e.jsx(n,{label:"Guides",children:e.jsxs(n,{label:"Tree",actions:!0,children:[e.jsx(n,{label:"Guide 4"}),e.jsx(n,{label:"Guide 3"}),e.jsx(n,{label:"Guide 2"}),e.jsx(n,{label:"Guide 1"})]})}),e.jsxs(n,{label:"Other",children:[e.jsx(n,{label:"Object 2",actions:!0,children:e.jsx(n,{label:"Path 3"})}),e.jsx(n,{label:"Object 1"})]}),e.jsxs(n,{label:"Road",children:[e.jsx(n,{label:"Parking lot access"}),e.jsx(n,{label:"Site access"})]}),e.jsx(n,{label:"Parking lot",actions:!0,children:e.jsxs(n,{label:"Parking area",actions:!0,children:[e.jsx(n,{label:"Bay point 2"}),e.jsx(n,{label:"Bay point 1",actions:!0}),e.jsx(n,{label:"Space point 1",actions:!0}),e.jsx(n,{label:"Path 6"})]})}),e.jsx(n,{label:"Building",children:e.jsx(n,{label:"Building area",children:e.jsx(n,{label:"Path 5"})})}),e.jsx(n,{label:"Sewer",children:e.jsx(n,{label:"Run off pipe",children:e.jsx(n,{label:"Path 4"})})}),e.jsx(n,{label:"Project boundary",children:e.jsx(n,{label:"Property area",children:e.jsx(n,{label:"Path 1"})})}),e.jsx(n,{label:"Map",children:e.jsx(n,{label:"Location",children:e.jsx(n,{label:"Terrain"})})})]})})}const T=t.createContext({selected:!1,hidden:!1});function n(c){const a=t.useContext(H),s=t.useContext(T),r=t.useId(),[h,i]=t.useState(!0),p=t.Children.count(c.children)>0,m=t.useMemo(()=>s.hidden?!0:a.hidden.includes(r),[r,a.hidden,s.hidden]),v=s.selected||r===a.selected,l=t.useCallback(()=>{a.setSelected(d=>{if(d!==r)return r})},[r,a]);return e.jsx(T.Provider,{value:t.useMemo(()=>({selected:v,hidden:m}),[m,v]),children:e.jsx(ne,{content:e.jsxs(e.Fragment,{children:[e.jsx(se,{onClick:()=>{i(d=>!d)}}),e.jsx(I,{href:y,style:{display:"inline"}}),e.jsx(re,{onClick:()=>{l()},children:c.label}),e.jsxs("div",{style:{display:"flex",gap:4,marginInlineStart:"auto"},children:[e.jsx(R,{className:o.action,icon:ie,label:"Lock",variant:"ghost","aria-hidden":!c.actions||m}),s.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(I,{href:oe})}):e.jsx(R,{className:o.action,icon:m?le:ce,label:m?"Show":"Hide",variant:"ghost","aria-hidden":!c.actions,onClick:()=>{a.toggleHidden(r)}})]})]}),expanded:p?h:void 0,selected:v,children:h?c.children:void 0})})}function Le(){const[c,a]=t.useState(!1),s=t.useRef(null),r=t.useRef(null),h=c?e.jsxs(e.Fragment,{children:[e.jsx(He,{}),e.jsx(R,{className:o.shiftIconRight,icon:de,label:"Close",variant:"ghost",onClick:()=>{var i;B.flushSync(()=>a(!1)),(i=r.current)==null||i.focus()}})]}):e.jsx(R,{className:o.shiftIconRight,icon:D,label:"Search",variant:"ghost",onClick:()=>{var i;B.flushSync(()=>a(!0)),(i=s.current)==null||i.focus()}});return e.jsxs("div",{className:o.subheader,children:[e.jsx(he.h3,{className:o.subheaderTitle,tabIndex:-1,ref:r,render:c?e.jsx(E,{render:e.jsx("h3",{})}):void 0,children:"Layers"}),c?e.jsxs(Y,{className:o.searchInput,children:[e.jsx(Z,{href:D}),e.jsx(ee,{placeholder:"Search",ref:s})]}):null,e.jsx("div",{className:o.subheaderActions,children:h})]})}function He(){return e.jsxs(U,{children:[e.jsx(q,{render:e.jsx(R,{icon:ue,label:"Filter",variant:"ghost"})}),e.jsxs(J,{style:{minInlineSize:164},children:[e.jsx(g,{children:"Show all"}),e.jsx(g,{children:"Guides"}),e.jsx(g,{children:"Other"}),e.jsx(g,{children:"Roadway"}),e.jsx(g,{children:"Parking"}),e.jsx(g,{children:"Building"}),e.jsx(g,{children:"Dry utility"}),e.jsx(g,{children:"Stormwater"}),e.jsx(g,{children:"Sewer"}),e.jsx(g,{children:"Boundary"}),e.jsx(g,{children:"Map"})]})]})}export{jt as default,ft as meta};
