import{u as A}from"./U6HHPQDW-DOIoK6mh.js";import{z as I,a2 as m,E as h,ad as p,G as T,ae as x,af as B,ag as F,a4 as q,ah as b,I as Y,y as z,A as G}from"./~utils-SRcNCTJ9.js";import{a as u}from"./chunk-EPOLDU6W-CvAF3MIU.js";var H="button";function v(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?m(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?m(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var L=Symbol("command"),j=I(function({clickOnEnter:t=!0,clickOnSpace:n=!0,...r}){const o=u.useRef(null),[C,D]=u.useState(!1);u.useEffect(()=>{o.current&&D(m(o.current))},[]);const[M,d]=u.useState(!1),f=u.useRef(!1),y=h(r),[E,S]=p(r,L,!0),g=r.onKeyDown,K=T(e=>{g?.(e);const s=e.currentTarget;if(e.defaultPrevented||E||y||!x(e)||B(s)||s.isContentEditable)return;const i=t&&e.key==="Enter",c=n&&e.key===" ",l=e.key==="Enter"&&!t,w=e.key===" "&&!n;if(l||w){e.preventDefault();return}if(i||c){const P=v(e);if(i){if(!P){e.preventDefault();const{view:J,...U}=e,N=()=>b(s,U);F()?q(s,"keyup",N):queueMicrotask(N)}}else c&&(f.current=!0,P||(e.preventDefault(),d(!0)))}}),k=r.onKeyUp,R=T(e=>{if(k?.(e),e.defaultPrevented||E||y||e.metaKey)return;const s=n&&e.key===" ";if(f.current&&s&&(f.current=!1,!v(e))){e.preventDefault(),d(!1);const i=e.currentTarget,{view:c,...l}=e;queueMicrotask(()=>b(i,l))}});return r={"data-active":M||void 0,type:C?"button":void 0,...S,...r,ref:Y(o,r.ref),onKeyDown:K,onKeyUp:R},r=A(r),r});z(function(t){const n=j(t);return G(H,n)});export{j as u};
