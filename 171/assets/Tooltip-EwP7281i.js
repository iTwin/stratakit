import{l as S,r as T}from"./chunk-7R3XDUXW-DxTo8O6G.js";import{c as z}from"./index-6yh6O1FZ.js";import{u as W}from"./~hooks-0F5RvH8b.js";import{s as k}from"./~utils-YFcEjjdk.js";import{c as q,u as G,H as J,a as K,b as L,d as Q,e as U}from"./BYC7LY2E-BkUN-JnQ.js";import{c as F,u as X,b as j,a as R,d as Y}from"./YV4JVR4I-IQnN8q1u.js";import{x as V,y as b,z as g,v as Z,c as I,_ as M,i as N,t as ee,b as y,a as B,D as H,k as te,f as $,d as w,M as oe,j as E}from"./LMDWO4NN-DZi_YyQu.js";function re(t={}){var r;const o=(r=t.store)==null?void 0:r.getState(),e=q(V(g({},t),{placement:b(t.placement,o==null?void 0:o.placement,"top"),hideTimeout:b(t.hideTimeout,o==null?void 0:o.hideTimeout,0)})),f=V(g({},e.getState()),{type:b(t.type,o==null?void 0:o.type,"description"),skipTimeout:b(t.skipTimeout,o==null?void 0:o.skipTimeout,300)}),s=F(f,e,t.store);return g(g({},e),s)}function ne(t,r,o){return j(t,o,"type"),j(t,o,"skipTimeout"),G(t,r,o)}function D(t={}){const[r,o]=X(re,t);return ne(r,o,t)}var _=Z([K],[J]),C=_.useProviderContext,se=_.ContextProvider,ae=_.ScopedContextProvider,ie="div",ue=I(function(r){var o=r,{store:e,portal:f=!0,gutter:s=8,preserveTabOrder:m=!1,hideOnHoverOutside:v=!0,hideOnInteractOutside:P=!0}=o,l=M(o,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const p=C();e=e||p,N(e,!1),l=ee(l,a=>S.jsx(ae,{value:e,children:a}),[e]);const O=e.useState(a=>a.type==="description"?"tooltip":"none");return l=y({role:O},l),l=L(B(y({},l),{store:e,portal:f,gutter:s,preserveTabOrder:m,hideOnHoverOutside(a){if(H(v,a))return!1;const c=e==null?void 0:e.getState().anchorElement;return c?!("focusVisible"in c.dataset):!0},hideOnInteractOutside:a=>{if(H(P,a))return!1;const c=e==null?void 0:e.getState().anchorElement;return c?!te(c,a.target):!0}})),l}),le=Q($(function(r){const o=ue(r);return w(ie,o)}),C);function ce(t={}){const r=D(t);return S.jsx(se,{value:r,children:t.children})}var de="div",h=F({activeStore:null});function A(t){return()=>{const{activeStore:r}=h.getState();r===t&&h.setState("activeStore",null)}}var ve=I(function(r){var o=r,{store:e,showOnHover:f=!0}=o,s=M(o,["store","showOnHover"]);const m=C();e=e||m,N(e,!1);const v=T.useRef(!1);T.useEffect(()=>R(e,["mounted"],n=>{n.mounted||(v.current=!1)}),[e]),T.useEffect(()=>{if(e)return oe(A(e),R(e,["mounted","skipTimeout"],n=>{if(!e)return;if(n.mounted){const{activeStore:d}=h.getState();return d!==e&&(d==null||d.hide()),h.setState("activeStore",e)}const u=setTimeout(A(e),n.skipTimeout);return()=>clearTimeout(u)}))},[e]);const P=s.onMouseEnter,l=E(n=>{P==null||P(n),v.current=!0}),p=s.onFocusVisible,O=E(n=>{p==null||p(n),!n.defaultPrevented&&(e==null||e.setAnchorElement(n.currentTarget),e==null||e.show())}),a=s.onBlur,c=E(n=>{if(a==null||a(n),n.defaultPrevented)return;const{activeStore:u}=h.getState();v.current=!1,u===e&&h.setState("activeStore",null)}),x=e.useState("type"),i=e.useState(n=>{var u;return(u=n.contentElement)==null?void 0:u.id});return s=B(y({"aria-labelledby":x==="label"?i:void 0},s),{onMouseEnter:l,onFocusVisible:O,onBlur:c}),s=U(y({store:e,showOnHover(n){if(!v.current||H(f,n))return!1;const{activeStore:u}=h.getState();return u?(e==null||e.show(),!1):!0}},s)),s}),pe=$(function(r){const o=ve(r);return w(de,o)});const fe=T.forwardRef((t,r)=>{const{content:o,children:e,className:f,type:s="description",id:m=T.useId(),defaultOpen:v,open:P,setOpen:l,unmountOnHide:p=s==="none",...O}=t,[a,c]=W(v,P,l),x=D(),i=Y(x,u=>u.popoverElement);T.useEffect(function(){var d;p&&a&&((d=i==null?void 0:i.togglePopover)==null||d.call(i,!0))},[a,i,p]);const n=s==="description"?{"aria-describedby":m}:s==="label"?{"aria-labelledby":m}:{};return S.jsx(S.Fragment,{children:S.jsxs(ce,{store:x,open:a,setOpen:T.useCallback(u=>{var d;c(u),(d=i==null?void 0:i.togglePopover)==null||d.call(i,u)},[c,i]),children:[S.jsx(pe,{render:e,...n}),S.jsx(le,{...O,unmountOnHide:p,className:z("ü•ù-tooltip",f),ref:r,id:m,style:{zIndex:k?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!k,children:o})]})})});fe.displayName="Tooltip";export{fe as T};
