import{p as S,a as p}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{s as H,c as j,a as V,b as k,u as w}from"./Q5W46E73-Di3Lk8ax.js";import{w as _,y as B,z as M,A as N,aa as R,W as D,ab as y,_ as W,Z as $,G as E,ac as h,o as z,M as G,N as U,S as Z,a as q}from"./~utils-DWZR7FF2.js";import{u as J}from"./~utils.useInit-Bkw6stTs.js";import{H as K,a as L,u as Q,b as X,c as Y,d as ee}from"./ECBEZ4YM-B4xdOZz6.js";import{c as te}from"./Z32PU2LQ-B87hqSD1.js";var C=_([L],[K]),g=C.useProviderContext,ne=C.ContextProvider,oe=C.ScopedContextProvider,re="div",ae=N(function({store:e,portal:n=!0,gutter:r=8,preserveTabOrder:d=!1,hideOnHoverOutside:u=!0,hideOnInteractOutside:s=!0,...a}){const f=g();return e=e||f,R(e,!1),a=D(a,i=>S.jsx(oe,{value:e,children:i}),[e]),a={role:e.useState(i=>i.type==="description"?"tooltip":"none"),...a},a=Q({...a,store:e,portal:n,gutter:r,preserveTabOrder:d,hideOnHoverOutside(i){if(y(u,i))return!1;const c=e?.getState().anchorElement;return c?!("focusVisible"in c.dataset):!0},hideOnInteractOutside:i=>{if(y(s,i))return!1;const c=e?.getState().anchorElement;return c?!W(c,i.target):!0}}),a}),ie=te(B(function(e){const n=ae(e);return M(re,n)}),g),ue="div",v=j({activeStore:null});function A(t){return()=>{const{activeStore:e}=v.getState();e===t&&v.setState("activeStore",null)}}var le=N(function({store:e,showOnHover:n=!0,...r}){const d=g();e=e||d,R(e,!1);const u=p.useRef(!1);p.useEffect(()=>H(e,["mounted"],o=>{o.mounted||(u.current=!1)}),[e]),p.useEffect(()=>{if(e)return $(A(e),H(e,["mounted","skipTimeout"],o=>{if(!e)return;if(o.mounted){const{activeStore:m}=v.getState();return m!==e&&m?.hide(),v.setState("activeStore",e)}const l=setTimeout(A(e),o.skipTimeout);return()=>clearTimeout(l)}))},[e]);const s=r.onMouseEnter,a=E(o=>{s?.(o),u.current=!0}),f=r.onFocusVisible,T=E(o=>{f?.(o),!o.defaultPrevented&&(e?.setAnchorElement(o.currentTarget),e?.show())}),i=r.onBlur,c=E(o=>{if(i?.(o),o.defaultPrevented)return;const{activeStore:l}=v.getState();u.current=!1,l===e&&v.setState("activeStore",null)}),x=e.useState("type"),P=e.useState(o=>{var l;return(l=o.contentElement)==null?void 0:l.id});return r={"aria-labelledby":x==="label"?P:void 0,...r,onMouseEnter:a,onFocusVisible:T,onBlur:c},r=X({store:e,showOnHover(o){if(!u.current||y(n,o))return!1;const{activeStore:l}=v.getState();return l?(e?.show(),!1):!0},...r}),r}),ce=B(function(e){const n=le(e);return M(ue,n)});function se(t={}){var e;const n=(e=t.store)==null?void 0:e.getState(),r=Y({...t,placement:h(t.placement,n?.placement,"top"),hideTimeout:h(t.hideTimeout,n?.hideTimeout,0)}),d={...r.getState(),type:h(t.type,n?.type,"description"),skipTimeout:h(t.skipTimeout,n?.skipTimeout,300)},u=j(d,r,t.store);return{...r,...u}}function de(t,e,n){return k(t,n,"type"),k(t,n,"skipTimeout"),ee(t,e,n)}function F(t={}){const[e,n]=V(se,t);return de(e,n,t)}function ve(t={}){const e=F(t);return S.jsx(ne,{value:e,children:t.children})}const fe=p.createContext({placement:void 0}),pe=z((t,e)=>{J();const n=p.useId(),r=p.useContext(fe),{content:d,children:u,type:s="description",id:a=n,defaultOpen:f,open:T,setOpen:i,unmountOnHide:c=s==="none",placement:x=r.placement,...P}=t,o=F(),l=w(o,"open"),m=w(o,"popoverElement"),I=G(o.setOpen),O=U({element:m,open:l,setOpen:I});return S.jsxs(ve,{store:o,defaultOpen:f,open:T,setOpen:i,placement:x,children:[S.jsx(ce,{render:u,onContextMenu:Z(u.props?.onContextMenu,b=>{(b.currentTarget.localName==="button"||b.currentTarget.role==="button")&&(b.preventDefault(),o.setOpen(!0))}),"data-has-popover-open":l||void 0,...s==="description"&&{"aria-describedby":a},...s==="label"&&{"aria-labelledby":a}}),S.jsx(ie,{portal:!0,...P,unmountOnHide:c,className:q("ü•ùTooltip",t.className),ref:e,id:a,style:{...O.style,...t.style},wrapperProps:{popover:O.popover},children:d})]})});var Ee=pe;export{Ee as T,fe as a};
