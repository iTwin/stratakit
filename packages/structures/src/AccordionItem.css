/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/

.ğŸ¥-accordion-item {
	--ğŸ¥accordion-item-gap: 12px;
	--ğŸ¥accordion-item-padding: 12px;

	@layer base {
		contain: paint;
		display: grid;
		/* biome-ignore format: improve readability */
		grid-template-columns:
			[marker-before-start] auto [marker-before-end
			decoration-before-start] auto [decoration-before-end
			content-start] minmax(0, 1fr) [content-end
			decoration-after-start] auto [decoration-after-end
			marker-after-start] auto [marker-after-end];
		grid-template-rows: [header-start] auto [header-end content-start] auto [content-end];
		border-block-end: 1px solid var(--ids-color-border-neutral-muted);
	}

	@layer states {
		&:where([data-kiwi-open="true"]) {
			--ğŸ¥chevron-down-rotate: -0.5turn;
		}
	}
}

.ğŸ¥-accordion-item-header {
	@layer base {
		grid-row: header;
		grid-column: marker-before-start / marker-after-end;

		position: relative;
		display: grid;
		align-items: center;
		padding: var(--ğŸ¥accordion-item-padding);

		/* TODO: improve the layout for the fallback (i.e. content doesnâ€™t align with the label if thereâ€™s a decoration) */
		grid-template-columns: inherit;

		@supports (grid-template-columns: subgrid) {
			grid-template-columns: subgrid;
		}
	}
}

.ğŸ¥-accordion-item-marker {
	@layer base {
		grid-row: 1;
		grid-column: marker-before;
		margin-inline-end: var(--ğŸ¥accordion-item-gap);
		/* TODO: We can only use GhostAligner to apply alignment to block or inline, so weâ€™re manually applying it here. */
		margin-inline-start: calc(-1 * var(--ğŸ¥ghost-inline-offset));
		pointer-events: none;

		:where(.ğŸ¥-accordion-item-heading, .ğŸ¥-accordion-item-button) ~ & {
			grid-column: marker-after;
			margin-inline-start: var(--ğŸ¥accordion-item-gap);
			margin-inline-end: calc(-1 * var(--ğŸ¥ghost-inline-offset));
		}
	}

	@layer states {
		@media (any-hover: hover) {
			:where(.ğŸ¥-accordion-item-header:hover) & {
				--ğŸŒ€button-state: var(--ğŸŒ€button-state--hover);
			}
		}
	}
}

.ğŸ¥-accordion-item-label:is(.ğŸ¥-text) {
	@layer base {
		display: inline-block;
		hyphens: auto;
		overflow-wrap: break-word;
		text-box: cap alphabetic;
		font-weight: 500;
	}
}

.ğŸ¥-accordion-item-button {
	@layer base {
		grid-column: content;
		cursor: pointer;
		border-radius: 12px;
		--ğŸ¥focus-outline-offset: -4px;

		&::after {
			content: "";
			position: absolute;
			inset: 0;
			border-radius: inherit;
		}
	}

	@layer states {
		&:focus-visible {
			outline: 0;

			&::after {
				outline: var(--ğŸ¥focus-outline);
				outline-offset: var(--ğŸ¥focus-outline-offset);
			}
		}
	}
}

.ğŸ¥-accordion-item-content {
	@layer base {
		grid-row: content;
		grid-column: content;
		padding-block-end: var(--ğŸ¥accordion-item-padding);
		text-box: cap alphabetic;
		color: var(--ids-color-text-neutral-secondary);
	}
}

.ğŸ¥-accordion-item-decoration {
	@layer base {
		grid-column: decoration-before;
		margin-inline-end: var(--ğŸ¥accordion-item-gap);

		:where(.ğŸ¥-accordion-item-heading, .ğŸ¥-accordion-item-button) ~ & {
			grid-column: decoration-after;
			margin-inline-start: var(--ğŸ¥accordion-item-gap);
			margin-inline-end: 0;
		}
	}
}

.ğŸ¥-accordion-item-heading {
	@layer base {
		grid-column: content;
		margin-block: 0;
		text-box: cap alphabetic;
	}
}
