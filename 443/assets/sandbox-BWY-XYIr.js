var Te=t=>{throw TypeError(t)};var pe=(t,e,s)=>e.has(t)||Te("Cannot "+s);var o=(t,e,s)=>(pe(t,e,"read from private field"),s?s.call(t):e.get(t)),M=(t,e,s)=>e.has(t)?Te("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),S=(t,e,s,n)=>(pe(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),w=(t,e,s)=>(pe(t,e,"access private method"),s);import{w as rt}from"./LMDWO4NN-B4nGdrVW.js";import{a,n as r,t as nt}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{a as Pe}from"./index-ChOFKjs3.js";import{G as it,u as ot,B as at}from"./Button-DYjHMJW7.js";import{L as lt,a as Me,b as De,D as We,c as $e,d as qe,e as N,f as ct}from"./DropdownMenu-CpSaGM1J.js";import{I as H}from"./Icon-CSfO3Lr6.js";import{I as re}from"./IconButton-BLFC_6zb.js";import{F as ut,L as dt}from"./Label-DKRqbU8E.js";import{S as ht,H as ft}from"./Select-8c4Fwpfo.js";import{S as mt}from"./Spinner-DPOtr1C_.js";import{T as pt,a as vt,b as xt,c as bt}from"./Tabs-k-tOcBKs.js";import{T as ne}from"./Text-DaWqngLF.js";import{T as gt,a as jt,b as yt}from"./TextBox-B38i4Nyv.js";import{c as Y,a as Ct}from"./~utils-DTWOYS-y.js";import{R as ie}from"./XL7CSKGW-VRHdm9RR.js";import{u as St,C as Rt}from"./ITI7HKP4-DyOCSj03.js";import{f as ee}from"./~utils-CDNTHryc.js";import{V as oe}from"./VisuallyHidden-58zOs0MC.js";import{S as _t,l as ke,q as O,t as xe,r as de,b as It,u as be,v as Ee,w as wt,g as Ft,x as Tt,y as Ne,n as Ge,z as Pt}from"./QueryClientProvider-CsjJmbma.js";import{p as te}from"./placeholder-C8pWe6ts.js";import{p as Mt,l as Dt,h as kt,s as Le,m as Et,d as Nt,f as Lt}from"./visibility-hide-B04-xgCX.js";import{s as zt}from"./visibility-show-D27IKcQb.js";import{C as Ot}from"./P2CTZE2T-ByoAb3fq.js";import{T as Bt}from"./toolbar-DVYZ-QJ4.js";import{u as ae}from"./~hooks-C89o1Mum.js";import"./X5NMLKT6-a9o7urAl.js";import"./KUU7WJ55-zF_I0nM_.js";import"./LVA2YJMS-DPFT3gfI.js";import"./Kbd-DnsshMYe.js";import"./BYC7LY2E-CafT9SQD.js";import"./YV4JVR4I-_qJ7xRSW.js";import"./VGCJ63VH-BjWQ6_Pt.js";import"./XX67R432-D0T8Ja6l.js";import"./AOQQTIBO-B4HjLz2q.js";import"./MTZPJQMC-CbCSI5km.js";import"./VEVQD5MH-CW2KIuBD.js";import"./P4IRICAX-CT3osQZB.js";import"./ASMQKSDT-DzeBetzC.js";import"./BOLVLGVE-EEBhAZTS.js";import"./Tooltip-CTwXi8l7.js";import"./tooltip-anchor-C3DLwafb.js";import"./C3IKGW5T-uPzpq7Mq.js";import"./RZ4GPYOB-DKE3AABr.js";const At=a.createContext(void 0),Qt=ee((t,e)=>{const{"aria-level":s,selected:n,expanded:f,icon:l,unstable_decorations:i,label:u,description:d,actions:h,onSelectedChange:m,onExpandedChange:c,onClick:p,onKeyDown:g,...F}=t,v=_=>{n!==void 0&&(_.stopPropagation(),m==null||m(!n))},b=_=>{_.altKey||_.ctrlKey||_.metaKey||_.shiftKey||f!==void 0&&(_.key==="ArrowRight"||_.key==="ArrowLeft")&&(_.preventDefault(),c==null||c(_.key==="ArrowRight"))},R=a.useId(),T=a.useId(),L=a.useId(),$=a.useMemo(()=>{const _=[];return d&&_.push(T),(i||l)&&_.push(L),_.length>0?_.join(" "):void 0},[i,l,L,d,T]);return r.jsx(At.Provider,{value:a.useMemo(()=>({level:s,expanded:f,selected:n}),[s,f,n]),children:r.jsx(Ot,{render:r.jsx(ie,{...F}),onClick:ae(p,v),onKeyDown:ae(g,b),role:"treeitem","aria-expanded":f,"aria-selected":n,"aria-labelledby":R,"aria-describedby":$,"aria-level":s,className:Y("ðŸ¥-tree-item",t.className),ref:e,children:r.jsxs(lt,{"data-kiwi-expanded":f,"data-kiwi-selected":n,className:"ðŸ¥-tree-item-node",style:{"--ðŸ¥tree-item-level":s},role:void 0,children:[r.jsxs(Me,{children:[r.jsx(it,{align:d?"block":void 0,children:r.jsx(Ht,{onClick:()=>{f!==void 0&&(c==null||c(!f))}})}),l||i?r.jsx(ie,{className:"ðŸ¥-tree-item-decoration",id:L,render:a.isValidElement(l)?l:typeof l=="string"?r.jsx(H,{href:l}):void 0,children:l?null:i}):null]}),r.jsx(De,{id:R,className:"ðŸ¥-tree-item-content",children:u}),d?r.jsx(De,{id:T,className:"ðŸ¥-tree-item-description",children:d}):void 0,r.jsx(Me,{render:r.jsx(Ut,{children:h})})]})})})}),Ut=ee((t,e)=>r.jsx(Bt,{...t,onClick:ae(t.onClick,s=>s.stopPropagation()),onKeyDown:ae(t.onKeyDown,s=>s.stopPropagation()),className:Y("ðŸ¥-tree-item-actions",t.className),ref:e,children:t.children})),ge=ee((t,e)=>{const{visible:s,...n}=t;return r.jsx(re,{inert:s===!1?!0:void 0,...n,variant:"ghost",className:Y("ðŸ¥-tree-item-action",t.className),"data-kiwi-visible":s,ref:e})}),Ht=ee((t,e)=>r.jsx(ie.span,{"aria-hidden":"true",...t,onClick:ae(t.onClick,s=>s.stopPropagation()),className:Y("ðŸ¥-button","ðŸ¥-icon-button","ðŸ¥-ghost-aligner","ðŸ¥-tree-item-expander",t.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":ot(),ref:e,children:r.jsx(Vt,{})})),Vt=ee((t,e)=>r.jsx(H,{...t,render:r.jsx(ie.svg,{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",render:t.render,children:r.jsx("path",{d:"M4.146 6.146a.5.5 0 0 1 .708 0L8 9.293l3.146-3.147a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708Z"})}),className:Y("ðŸ¥-tree-chevron",t.className),ref:e})),Kt=ee((t,e)=>{const s=St({orientation:"vertical"});return r.jsx(ie.div,{role:"tree",...t,render:r.jsx(Rt,{store:s}),className:Y("ðŸ¥-tree",t.className),ref:e,children:t.children})});var k,x,le,D,V,G,Q,z,ce,X,Z,K,W,U,J,j,se,je,ye,Ce,Se,Re,_e,Ie,Xe,Ke,Wt=(Ke=class extends _t{constructor(e,s){super();M(this,j);M(this,k);M(this,x);M(this,le);M(this,D);M(this,V);M(this,G);M(this,Q);M(this,z);M(this,ce);M(this,X);M(this,Z);M(this,K);M(this,W);M(this,U);M(this,J,new Set);this.options=s,S(this,k,e),S(this,z,null),S(this,Q,ke()),this.options.experimental_prefetchInRender||o(this,Q).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(o(this,x).addObserver(this),ze(o(this,x),this.options)?w(this,j,se).call(this):this.updateResult(),w(this,j,Se).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return we(o(this,x),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return we(o(this,x),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,w(this,j,Re).call(this),w(this,j,_e).call(this),o(this,x).removeObserver(this)}setOptions(e,s){const n=this.options,f=o(this,x);if(this.options=o(this,k).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,o(this,x))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");w(this,j,Ie).call(this),o(this,x).setOptions(this.options),n._defaulted&&!xe(this.options,n)&&o(this,k).getQueryCache().notify({type:"observerOptionsUpdated",query:o(this,x),observer:this});const l=this.hasListeners();l&&Oe(o(this,x),f,this.options,n)&&w(this,j,se).call(this),this.updateResult(s),l&&(o(this,x)!==f||O(this.options.enabled,o(this,x))!==O(n.enabled,o(this,x))||de(this.options.staleTime,o(this,x))!==de(n.staleTime,o(this,x)))&&w(this,j,je).call(this);const i=w(this,j,ye).call(this);l&&(o(this,x)!==f||O(this.options.enabled,o(this,x))!==O(n.enabled,o(this,x))||i!==o(this,U))&&w(this,j,Ce).call(this,i)}getOptimisticResult(e){const s=o(this,k).getQueryCache().build(o(this,k),e),n=this.createResult(s,e);return qt(this,n)&&(S(this,D,n),S(this,G,this.options),S(this,V,o(this,x).state)),n}getCurrentResult(){return o(this,D)}trackResult(e,s){const n={};return Object.keys(e).forEach(f=>{Object.defineProperty(n,f,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(f),s==null||s(f),e[f])})}),n}trackProp(e){o(this,J).add(e)}getCurrentQuery(){return o(this,x)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=o(this,k).defaultQueryOptions(e),n=o(this,k).getQueryCache().build(o(this,k),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return w(this,j,se).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),o(this,D)))}createResult(e,s){var ue;const n=o(this,x),f=this.options,l=o(this,D),i=o(this,V),u=o(this,G),h=e!==n?e.state:o(this,le),{state:m}=e;let c={...m},p=!1,g;if(s._optimisticResults){const P=this.hasListeners(),B=!P&&ze(e,s),C=P&&Oe(e,n,s,f);(B||C)&&(c={...c,...Tt(m.data,e.options)}),s._optimisticResults==="isRestoring"&&(c.fetchStatus="idle")}let{error:F,errorUpdatedAt:v,status:b}=c;if(s.select&&c.data!==void 0)if(l&&c.data===(i==null?void 0:i.data)&&s.select===o(this,ce))g=o(this,X);else try{S(this,ce,s.select),g=s.select(c.data),g=Ne(l==null?void 0:l.data,g,s),S(this,X,g),S(this,z,null)}catch(P){S(this,z,P)}else g=c.data;if(s.placeholderData!==void 0&&g===void 0&&b==="pending"){let P;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(u==null?void 0:u.placeholderData))P=l.data;else if(P=typeof s.placeholderData=="function"?s.placeholderData((ue=o(this,Z))==null?void 0:ue.state.data,o(this,Z)):s.placeholderData,s.select&&P!==void 0)try{P=s.select(P),S(this,z,null)}catch(B){S(this,z,B)}P!==void 0&&(b="success",g=Ne(l==null?void 0:l.data,P,s),p=!0)}o(this,z)&&(F=o(this,z),g=o(this,X),v=Date.now(),b="error");const R=c.fetchStatus==="fetching",T=b==="pending",L=b==="error",$=T&&R,_=g!==void 0,E={status:b,fetchStatus:c.fetchStatus,isPending:T,isSuccess:b==="success",isError:L,isInitialLoading:$,isLoading:$,data:g,dataUpdatedAt:c.dataUpdatedAt,error:F,errorUpdatedAt:v,failureCount:c.fetchFailureCount,failureReason:c.fetchFailureReason,errorUpdateCount:c.errorUpdateCount,isFetched:c.dataUpdateCount>0||c.errorUpdateCount>0,isFetchedAfterMount:c.dataUpdateCount>h.dataUpdateCount||c.errorUpdateCount>h.errorUpdateCount,isFetching:R,isRefetching:R&&!T,isLoadingError:L&&!_,isPaused:c.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:L&&_,isStale:Fe(e,s),refetch:this.refetch,promise:o(this,Q)};if(this.options.experimental_prefetchInRender){const P=I=>{E.status==="error"?I.reject(E.error):E.data!==void 0&&I.resolve(E.data)},B=()=>{const I=S(this,Q,E.promise=ke());P(I)},C=o(this,Q);switch(C.status){case"pending":e.queryHash===n.queryHash&&P(C);break;case"fulfilled":(E.status==="error"||E.data!==C.value)&&B();break;case"rejected":(E.status!=="error"||E.error!==C.reason)&&B();break}}return E}updateResult(e){const s=o(this,D),n=this.createResult(o(this,x),this.options);if(S(this,V,o(this,x).state),S(this,G,this.options),o(this,V).data!==void 0&&S(this,Z,o(this,x)),xe(n,s))return;S(this,D,n);const f={},l=()=>{if(!s)return!0;const{notifyOnChangeProps:i}=this.options,u=typeof i=="function"?i():i;if(u==="all"||!u&&!o(this,J).size)return!0;const d=new Set(u??o(this,J));return this.options.throwOnError&&d.add("error"),Object.keys(o(this,D)).some(h=>{const m=h;return o(this,D)[m]!==s[m]&&d.has(m)})};(e==null?void 0:e.listeners)!==!1&&l()&&(f.listeners=!0),w(this,j,Xe).call(this,{...f,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&w(this,j,Se).call(this)}},k=new WeakMap,x=new WeakMap,le=new WeakMap,D=new WeakMap,V=new WeakMap,G=new WeakMap,Q=new WeakMap,z=new WeakMap,ce=new WeakMap,X=new WeakMap,Z=new WeakMap,K=new WeakMap,W=new WeakMap,U=new WeakMap,J=new WeakMap,j=new WeakSet,se=function(e){w(this,j,Ie).call(this);let s=o(this,x).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(It)),s},je=function(){w(this,j,Re).call(this);const e=de(this.options.staleTime,o(this,x));if(be||o(this,D).isStale||!Ee(e))return;const n=wt(o(this,D).dataUpdatedAt,e)+1;S(this,K,setTimeout(()=>{o(this,D).isStale||this.updateResult()},n))},ye=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(o(this,x)):this.options.refetchInterval)??!1},Ce=function(e){w(this,j,_e).call(this),S(this,U,e),!(be||O(this.options.enabled,o(this,x))===!1||!Ee(o(this,U))||o(this,U)===0)&&S(this,W,setInterval(()=>{(this.options.refetchIntervalInBackground||Ft.isFocused())&&w(this,j,se).call(this)},o(this,U)))},Se=function(){w(this,j,je).call(this),w(this,j,Ce).call(this,w(this,j,ye).call(this))},Re=function(){o(this,K)&&(clearTimeout(o(this,K)),S(this,K,void 0))},_e=function(){o(this,W)&&(clearInterval(o(this,W)),S(this,W,void 0))},Ie=function(){const e=o(this,k).getQueryCache().build(o(this,k),this.options);if(e===o(this,x))return;const s=o(this,x);S(this,x,e),S(this,le,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Xe=function(e){Ge.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(o(this,D))}),o(this,k).getQueryCache().notify({query:o(this,x),type:"observerResultsUpdated"})})},Ke);function $t(t,e){return O(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ze(t,e){return $t(t,e)||t.state.data!==void 0&&we(t,e,e.refetchOnMount)}function we(t,e,s){if(O(e.enabled,t)!==!1){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&Fe(t,e)}return!1}function Oe(t,e,s,n){return(t!==e||O(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Fe(t,s)}function Fe(t,e){return O(e.enabled,t)!==!1&&t.isStaleByTime(de(e.staleTime,t))}function qt(t,e){return!xe(t.getCurrentResult(),e)}var Ze=a.createContext(!1),Gt=()=>a.useContext(Ze);Ze.Provider;function Xt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Zt=a.createContext(Xt()),Jt=()=>a.useContext(Zt);function Yt(t,e){return typeof t=="function"?t(...e):!!t}function Be(){}var es=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},ts=t=>{a.useEffect(()=>{t.clearReset()},[t])},ss=({result:t,errorResetBoundary:e,throwOnError:s,query:n,suspense:f})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&(f&&t.data===void 0||Yt(s,[t.error,n])),rs=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},ns=(t,e)=>t.isLoading&&t.isFetching&&!e,is=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ae=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function os(t,e,s){var c,p,g,F,v;const n=Pt(),f=Gt(),l=Jt(),i=n.defaultQueryOptions(t);(p=(c=n.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||p.call(c,i),i._optimisticResults=f?"isRestoring":"optimistic",rs(i),es(i,l),ts(l);const u=!n.getQueryCache().get(i.queryHash),[d]=a.useState(()=>new e(n,i)),h=d.getOptimisticResult(i),m=!f&&t.subscribed!==!1;if(a.useSyncExternalStore(a.useCallback(b=>{const R=m?d.subscribe(Ge.batchCalls(b)):Be;return d.updateResult(),R},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),a.useEffect(()=>{d.setOptions(i,{listeners:!1})},[i,d]),is(i,h))throw Ae(i,d,l);if(ss({result:h,errorResetBoundary:l,throwOnError:i.throwOnError,query:n.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw h.error;if((F=(g=n.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||F.call(g,i,h),i.experimental_prefetchInRender&&!be&&ns(h,f)){const b=u?Ae(i,d,l):(v=n.getQueryCache().get(i.queryHash))==null?void 0:v.promise;b==null||b.catch(Be).finally(()=>{d.updateResult()})}return i.notifyOnChangeProps?h:d.trackResult(h)}function as(t,e){return os(t,Wt)}const ls="modulepreload",cs=function(t){return"/"+t},Qe={},ve=function(e,s,n){let f=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),u=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));f=Promise.allSettled(s.map(d=>{if(d=cs(d),d in Qe)return;Qe[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const c=document.createElement("link");if(c.rel=h?"stylesheet":ls,h||(c.as="script"),c.crossOrigin="",c.href=d,u&&c.setAttribute("nonce",u),document.head.appendChild(c),h)return new Promise((p,g)=>{c.addEventListener("load",p),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function l(i){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i}return f.then(i=>{for(const u of i||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})},us="_appLayout_1i9n6_5",ds="_header_1i9n6_22",hs="_platformBar_1i9n6_32",fs="_logo_1i9n6_38",ms="_tools_1i9n6_48",ps="_leftPanel_1i9n6_58",vs="_panelHeader_1i9n6_70",xs="_panelTitleWrapper_1i9n6_78",bs="_panelCaption_1i9n6_82",gs="_shiftIconRight_1i9n6_86",js="_subheader_1i9n6_90",ys="_searchInput_1i9n6_106",Cs="_subheaderActions_1i9n6_110",Ss="_tabList_1i9n6_114",Rs="_emptyState_1i9n6_119",_s="_canvasWrapper_1i9n6_128",Is="_canvas_1i9n6_128",ws="_splitter_1i9n6_165",Fs="_tree_1i9n6_219",Ts="_action_1i9n6_223",Ps="_slider_1i9n6_240",Ms="_colorSwatch_1i9n6_249",y={appLayout:us,header:ds,platformBar:hs,logo:fs,tools:ms,leftPanel:ps,panelHeader:vs,panelTitleWrapper:xs,panelCaption:bs,shiftIconRight:gs,subheader:js,searchInput:ys,subheaderActions:Cs,tabList:Ss,emptyState:Rs,canvasWrapper:_s,canvas:Is,splitter:ws,tree:Fs,action:Ts,slider:Ps,colorSwatch:Ms},Ue={model1:"Epoch System iModel 1",model2:"Epoch System iModel 2",model3:"Epoch System iModel 3"};async function Ds(t){return t==="model1"?await ve(()=>import("./sandbox.model1-CaWEMVkP.js"),[]):t==="model2"?(await new Promise(e=>setTimeout(e,2e3)),await ve(()=>import("./sandbox.model2-CarNwmiW.js"),[])):await ve(()=>import("./sandbox.model3-DxffybUv.js"),[])}const Je="Kiwi sandbox",Lr=()=>[{title:Je}],zr=rt(function(){var l;const[e,s]=nt(),n=e.get("model")||"model1",f=as({queryKey:["sandbox-data",n],queryFn:()=>Ds(n)});return r.jsxs(ks,{panelContent:r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:y.panelHeader,children:[r.jsxs("div",{children:[r.jsxs(ut,{children:[r.jsx(oe,{render:r.jsx(dt,{}),children:"Choose Model"}),r.jsx(ht,{className:y.panelTitleWrapper,children:r.jsx(ft,{variant:"ghost",defaultValue:n,onChange:i=>s({model:i.currentTarget.value}),children:Object.entries(Ue).map(([i,u])=>r.jsx("option",{value:i,children:u},i))})})]}),r.jsxs("hgroup",{role:"group",children:[r.jsx(oe,{render:r.jsx("h2",{}),children:Ue[n]}),r.jsx(ne,{className:y.panelCaption,variant:"body-sm",render:r.jsx("p",{}),children:((l=f.data)==null?void 0:l.version)||""})]})]}),r.jsx("div",{className:y.actions,children:r.jsx(re,{className:y.shiftIconRight,icon:Mt,label:"Dock panel",variant:"ghost",disabled:!0})})]}),r.jsx(a.Suspense,{fallback:r.jsx(Es,{}),children:r.jsx(Ns,{query:f})},n)]}),children:[r.jsxs("header",{className:y.header,children:[r.jsx("div",{className:y.logo,children:r.jsx(H,{href:te,size:"large"})}),r.jsx(ne,{render:i=>r.jsx("h1",{...i}),variant:"body-md",children:Je})]}),r.jsx("div",{className:y.platformBar,children:r.jsxs("div",{className:y.tools,children:[r.jsx(H,{href:te,size:"large"}),r.jsx(H,{href:te,size:"large"}),r.jsx(H,{href:te,size:"large"})]})}),r.jsx("div",{className:y.canvasWrapper,children:r.jsx("div",{className:y.canvas})})]})});function ks(t){const{sliderProps:e,panelProps:s,panelMinSize:n,panelMaxSize:f,resizing:l}=Os({minSize:{px:256,pct:20},maxSize:{pct:30}}),i=a.useId();return r.jsxs("div",{className:y.appLayout,style:{"--_panel-min-size":n,"--_panel-max-size":f},children:[r.jsx("div",{...s,className:y.leftPanel,style:{position:"relative",...s.style},children:t.panelContent}),r.jsxs("div",{className:y.splitter,"data-resizing":l?"true":void 0,children:[r.jsx(oe,{render:u=>r.jsx("label",{...u,htmlFor:i,children:"Resize layers panel"}),children:"Resize layers panel"}),r.jsx("input",{id:i,type:"range",className:y.slider,...e})]}),t.children]})}function Es(){return r.jsxs(Ye,{children:[r.jsx(mt,{"aria-hidden":"true"}),r.jsx(ne,{variant:"body-sm",children:"Loadingâ€¦"})]})}function Ns(t){var i;const{data:e}=a.use(t.query.promise),s=a.useMemo(()=>Object.entries(e).map(([u,d])=>{const h=d.length<=1?[]:d.map(({label:m})=>m);return{name:u,filters:h,content:d.length>0?r.jsx(Us,{data:d}):r.jsxs(Ye,{children:[r.jsx(ne,{variant:"body-sm",children:"No layers"}),r.jsx(at,{children:"Create a layer"})]})}}),[e]),[n,f]=a.useState((i=s[0])==null?void 0:i.name),l=a.useMemo(()=>{var u;return n?((u=s.find(d=>d.name===n))==null?void 0:u.filters)||[]:s[0].filters},[s,n]);return s.length===1?r.jsxs(Ve,{allFilters:l,children:[r.jsx(He,{}),s[0].content]}):r.jsx(Ve,{allFilters:l,children:r.jsxs(pt,{selectOnMove:!1,setSelectedId:f,children:[r.jsx(He,{tabs:s.map(u=>r.jsx(vt,{id:u.name,children:Ct(u.name)},u.name))}),s.map(u=>r.jsx(xt,{tabId:u.name,unmountOnHide:!0,children:u.content},u.name))]})})}function Ye({children:t}){return r.jsx("div",{className:y.emptyState,children:t})}function Ls(){return r.jsx("div",{style:{textAlign:"center"},children:r.jsx(ne,{variant:"body-sm",children:"No results found"})})}function zs(t,e,s){return Math.min(Math.max(t,e),s)}function Os(t){const{minSize:e,maxSize:s,onCollapse:n}=t??{},f=a.useId(),l=a.useRef(null),[i,u]=a.useState(void 0),[d,h]=a.useState(void 0),[m,c]=a.useState(void 0),[p,g]=a.useState(!1),[F,v]=a.useState(void 0),b=a.useMemo(()=>{if(e&&d)return Math.min(e.px,e.pct/100*d)},[e,d]),R=a.useMemo(()=>{if(b&&s&&d)return Math.max(b,s.pct/100*d)},[s,d,b]),T=a.useMemo(()=>{if(m==="smallest")return b??0;if(m==="largest")return R??0;if(i&&b&&R)return zs(i,b,R)},[i,b,R,m]);a.useEffect(()=>{const C=l.current;if(!C)return;const I=C.parentElement;if(!I)return;const A=new ResizeObserver(()=>{const fe=I.getBoundingClientRect(),me=C.getBoundingClientRect();h(fe.width),u(me.width)});return A.observe(I),A.observe(C),()=>{A.disconnect()}},[]);const L=a.useCallback(C=>{const I=l.current;if(!I)return;const A=I.getBoundingClientRect();v(A.width+C),c(void 0),g(!0)},[]),$=a.useCallback(C=>{const I=l.current;if(!I)return;const A=I.parentElement;if(!A)return;const fe=A.getBoundingClientRect(),me=C*(fe.width*.005),st=I.getBoundingClientRect();v(st.width+me),c(void 0)},[]),_=a.useCallback(()=>{l.current&&(v(void 0),g(!1))},[]),{moveableProps:q}=Bs({onMove:L,onMoveEnd:_,onKeyMove:$}),E=a.useMemo(()=>({...q,onKeyDown:C=>{var I;if((I=q.onKeyDown)==null||I.call(q,C),!C.defaultPrevented)switch(C.key){case"Enter":C.preventDefault(),n==null||n();break;case"Home":C.preventDefault(),c("smallest");break;case"End":C.preventDefault(),c("largest");break}},onChange:C=>{if(p)return;const I=Number(C.target.value);v(I)},value:T===void 0?0:Math.floor(T),min:b===void 0?void 0:Math.floor(b),max:R===void 0?void 0:Math.floor(R)}),[q,T,b,R,n,p]),ue=a.useMemo(()=>({style:{WebkitUserSelect:F===void 0?void 0:"none"},id:f,ref:l}),[f,F]),P=b===void 0?void 0:`${Math.floor(b)}px`,B=a.useMemo(()=>{if(F!==void 0&&s!==void 0&&m===void 0)return`min(${Math.floor(F)}px, ${s.pct}%)`;if(T!==void 0)return`${Math.floor(T)}px`},[s,F,T,m]);return{sliderProps:E,panelProps:ue,panelMinSize:P,panelMaxSize:B,resizing:p}}function Bs(t){const{onMove:e,onMoveEnd:s,onKeyMove:n}=t??{},f=a.useRef(null),l=a.useRef(void 0),i=a.useRef(void 0),u=a.useCallback(()=>{i.current!==void 0&&(i.current=void 0,s==null||s())},[s]);return{moveableProps:a.useMemo(()=>({onPointerDown:h=>{if(h.button!==0||h.ctrlKey)return;const m=f.current;if(!m)return;const c=m.getBoundingClientRect(),p=h.clientX-c.left;i.current=p,h.preventDefault(),m.setPointerCapture(h.pointerId)},onPointerMove:h=>{const m=i.current;if(m===void 0)return;const c=f.current;if(!c)return;const p=c.getBoundingClientRect(),g=h.clientX-m-p.left;h.preventDefault(),e==null||e(g)},onPointerUp:u,onPointerCancel:u,onKeyDown:h=>{if(!h.defaultPrevented)switch(h.key){case"ArrowLeft":h.preventDefault(),n==null||n(-1);break;case"ArrowRight":h.preventDefault(),n==null||n(1);break}},ref:h=>{var c;if(f.current=h,(c=l.current)==null||c.call(l),l.current=void 0,!h)return;const m=p=>{p.preventDefault()};h.addEventListener("touchstart",m),l.current=()=>{h.removeEventListener("touchstart",m)}}}),[n,e,u])}}const et=(()=>{let t=0;return e=>({id:`${t++}`,label:`Tree Item ${t}`,expanded:!0,...e,items:((e==null?void 0:e.items)??[]).map(et)})})();function As({items:t,filters:e,search:s}){const n=a.useMemo(()=>e.length===0?t:t.reduce((i,u)=>(e.includes(u.label)&&i.push(u),i),[]),[t,e]),f=a.useMemo(()=>{function i(u){return u.reduce((d,h)=>{const m=i(h.items??[]);return(h.label.toLowerCase().includes(s.toLowerCase())||m.length>0)&&d.push({...h,items:m}),d},[])}return s===""?n:i(n)},[n,s]),l=a.useMemo(()=>{if(e.length===0&&s==="")return;function i(u){return u.reduce((d,h)=>{const m=h.items?i(h.items):0;return d+1+m},0)}return i(f)},[f,e,s]);return{filteredTree:f,itemCount:l}}function Qs(t,e,s){return a.useMemo(()=>{function n(f,l,i,u,d){const h=[];let m=1;for(const c of f){const p=c.id===e||u,g=s.includes(c.id)||d;h.push({...c,level:i,parentItem:l,selected:p,hidden:g,parentHidden:d,position:m++,size:f.length}),c.expanded&&h.push(...n(c.items,c,i+1,p,g))}return h}return n(t,void 0,1,!1,!1)},[t,e,s])}function tt(t,e){for(const s of t){if(s.id===e)return s;const n=tt(s.items,e);if(n)return n}}function Us({data:t}){const{appliedFilters:e,search:s,setItemCount:n}=a.useContext(he),[f,l]=a.useState(),[i,u]=a.useState([]),d=a.useCallback(v=>{u(b=>b.includes(v)?b.filter(R=>R!==v):[...b,v])},[]),[h,m]=a.useState(()=>t.map(v=>et(v))),{filteredTree:c,itemCount:p}=As({items:h,filters:e,search:s}),g=Qs(c,f,i);a.useEffect(()=>{n(p)},[n,p]);const F=a.useDeferredValue(g);return F.length===0?r.jsx(Ls,{}):r.jsx(a.Suspense,{fallback:"Loading...",children:r.jsx(Kt,{className:y.tree,children:F.map(v=>r.jsx(Qt,{label:v.label,description:v.description,"aria-level":v.level,"aria-posinset":v.position,"aria-setsize":v.size,selected:v.selected,onSelectedChange:()=>{if(f===v.id){l(void 0);return}l(v.id)},expanded:v.items.length===0?void 0:v.expanded,onExpandedChange:b=>{m(R=>{const T=tt(R,v.id);if(!T)return R;const L=[...R];return T.expanded=b,L})},unstable_decorations:r.jsxs(r.Fragment,{children:[v.color?r.jsx(Ks,{color:v.color,alt:v.color}):null,r.jsx(H,{href:te})]}),actions:[r.jsx(ge,{className:y.action,icon:Dt,label:"Lock","aria-hidden":v.hidden},"lock"),r.jsx(ge,{className:y.action,icon:v.hidden?kt:zt,label:v.hidden?"Show":"Hide",visible:v.hidden?!0:void 0,onClick:()=>{d(v.id)}},"visibility"),r.jsx(Hs,{hidden:v.hidden},"more")]},v.id))})})}function Hs({hidden:t}){return r.jsxs(We,{children:[r.jsx($e,{className:y.action,"aria-hidden":t,render:r.jsx(ge,{icon:Et,label:"More"})}),r.jsxs(qe,{style:{minInlineSize:164},children:[r.jsx(N,{label:"Copy",shortcuts:"Command+C"}),r.jsx(N,{label:"Paste",shortcuts:"Command+P"}),r.jsx(N,{label:"Copy/Paste as",shortcuts:"Command+V"}),r.jsx(N,{label:"Move to",shortcuts:"Command+M"}),r.jsx(N,{label:"Bring to front",shortcuts:"]"}),r.jsx(N,{label:"Send to back",shortcuts:"["}),r.jsx(N,{label:"Group selection",shortcuts:"Command+G"}),r.jsx(N,{label:"Ungroup",shortcuts:"Command+U"}),r.jsx(N,{label:"Rename",shortcuts:"Command+R"}),r.jsx(N,{label:"Show/hide",shortcuts:"Shift+Command+V"}),r.jsx(N,{label:"Lock/unlock",shortcuts:"Shift+Command+L"}),r.jsx(N,{label:"Isolate object",shortcuts:"I"})]})]})}function He({tabs:t}){const{itemCount:e,isFiltered:s,search:n,setSearch:f}=a.useContext(he),l=a.useRef(null),i=a.useRef(null),[u,d]=a.useState(!t),h=s||!!n,m=u?r.jsxs(r.Fragment,{children:[r.jsx(Vs,{}),t?r.jsx(re,{className:y.shiftIconRight,icon:Nt,label:"Close",variant:"ghost",onClick:()=>{var p;Pe.flushSync(()=>d(!1)),(p=i.current)==null||p.focus()}}):null]}):r.jsx(re,{className:y.shiftIconRight,icon:Le,label:"Search",dot:h?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var p;Pe.flushSync(()=>d(!0)),(p=l.current)==null||p.focus()}}),c=a.useMemo(()=>{if(s)return e===void 0?"Showing all tree items":`Showing ${e} tree items`},[s,e]);return r.jsxs("div",{className:y.subheader,children:[r.jsx(oe,{"aria-live":"polite","aria-atomic":!0,children:c}),t&&!u?r.jsx(bt,{className:y.tabList,tone:"accent",ref:i,children:t}):null,u?r.jsxs(gt,{className:y.searchInput,children:[r.jsx(jt,{href:Le}),r.jsx(yt,{placeholder:"Search",ref:l,onChange:p=>f(p.currentTarget.value)})]}):null,r.jsx("div",{className:y.subheaderActions,children:m})]})}function Vs(){const t=a.useContext(he),e=t.appliedFilters.length>0;return r.jsxs(We,{children:[r.jsx($e,{render:r.jsx(re,{icon:Lt,label:"Filter",dot:e?"Some filters applied":void 0,variant:"ghost",disabled:t.allFilters.length===0})}),r.jsx(qe,{children:t.allFilters.map(s=>{const n=t.appliedFilters.includes(s);return r.jsx(ct,{name:s,label:s,checked:n,onChange:()=>{t.toggleFilter(s)}},s)})})]})}function Ve(t){const[e,s]=a.useState(!1),[n,f]=a.useState([]),[l,i]=a.useState(""),[u,d]=a.useState(void 0),h=a.useCallback(p=>{const g=n.includes(p)?n.filter(F=>F!==p):[...n,p];f(g),s(g.length>0)},[n]),m=a.useCallback(()=>{f([]),s(!1)},[]),c=a.useCallback(p=>{i(p),s(!!p)},[]);return r.jsx(he.Provider,{value:a.useMemo(()=>({allFilters:t.allFilters,appliedFilters:n,isFiltered:e,toggleFilter:h,clearFilters:m,search:l,setSearch:c,itemCount:u,setItemCount:d}),[t.allFilters,n,e,h,m,l,c,u]),children:t.children})}const he=a.createContext({allFilters:[],appliedFilters:[],isFiltered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}});function Ks(t){return r.jsx("div",{className:y.colorSwatch,style:{"--_color":`var(--_color--${t.color})`},children:t.alt?r.jsx(oe,{children:t.alt}):null})}export{zr as default,Lr as meta};
