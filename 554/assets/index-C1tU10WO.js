import{w as P,k as U,I as p}from"./~utils-D0qSbmMf.js";import{b as r,p as o}from"./index-DDCMeoDP.js";import{p as v,T as j,a as g,b as m}from"./immer-BpDPwe2G.js";import{p as l}from"./placeholder-gUCX-h4c.js";import{r as D,u as F}from"./refresh-BAzeHmAJ.js";import{s as M}from"./visibility-show-xvYChKDP.js";import"./P2CTZE2T-CrfJiSL1.js";import"./RZ4GPYOB-C7VWaauT.js";import"./BOLVLGVE-DaR5LDnc.js";import"./ITI7HKP4-BKv-1_bq.js";import"./DropdownMenu-DFtfQ03B.js";import"./Text-repL-_Vj.js";import"./Kbd-CQOi2E-p.js";import"./VEVQD5MH-C1V73OBp.js";import"./AXB53BZF-CSxX2VBV.js";import"./P4IRICAX-Dk_KcFUW.js";import"./ASMQKSDT-BbBPeIwd.js";const ne={title:"Tree"},re=P(U(function({overflow:i=!1,selected:s=!1,description:x,error:c,items:u}){const[O,S]=r.useTransition(),f=i?" with a super long label that is overflown":"",T=x?"Additional description":void 0,[w,k]=r.useState(!!c),C=u?Number(u):0,[b,I]=r.useState(()=>[{label:`Item 1${f}`,selected:!!s,expanded:!0,children:[{label:"Item 1.1",selected:!!s},{label:"Item 1.2",selected:!!s},{label:`Item 1.3${f}`,selected:!!s}]},{label:"Item 2",selected:!1,expanded:!0,children:[{label:`Item 2.1${f}`,selected:!1}]},{label:"Item 3",selected:!1},...Array.from({length:C}).map((e,t)=>({label:`Item ${t+4}`,selected:!1}))]),y=r.useMemo(()=>b.flatMap((e,t,a)=>{const n={...e,level:1,index:t,setSize:a.length,childIndex:void 0};if(!e.expanded)return n;const d=e.children?e.children.map(($,R,_)=>({...$,level:2,index:t,childIndex:R,setSize:_.length,expanded:void 0})):[];return[n,...d]}),[b]),z=r.useCallback((e,t)=>{I(v(a=>{var d;const n=t===void 0?a[e]:(d=a[e].children)==null?void 0:d[t];n&&(n.selected=!n.selected)}))},[]),A=r.useCallback(e=>{S(()=>{I(v(t=>{const a=t[e];a.expanded!==void 0&&(a.expanded=!a.expanded)}))})},[]),E=r.useCallback(()=>{k(!1)},[]);return o.jsx(j,{style:{maxInlineSize:i?300:void 0},children:y.map(e=>{const{index:t,childIndex:a}=e,n=w&&t===0&&a===void 0;return o.jsx(g,{"aria-level":e.level,"aria-posinset":t+1,"aria-setsize":e.setSize,label:e.label,description:t===0?T:void 0,expanded:e.expanded,selected:e.selected,error:n,onSelectedChange:()=>{z(t,a)},onExpandedChange:()=>{A(t)},icon:a===void 0?o.jsx(p,{href:l,alt:"decoration"}):void 0,unstable_decorations:a===0?o.jsxs(o.Fragment,{children:[o.jsx(p,{href:l}),o.jsx(p,{href:l})]}):o.jsx(p,{href:l}),actions:[n&&o.jsx(m,{icon:D,label:"Retry",onClick:E},"retry"),o.jsx(m,{icon:F,label:"Unlock"},"unlock"),o.jsx(m,{icon:M,label:"Show"},"show")]},e.label)})})},{_actionsOverflow:N}));function N({count:h=5,dot:i=!1}){const s=Array.from({length:Number(h)}).map((x,c)=>o.jsx(m,{label:`Action ${c+1}`,icon:l,dot:i?"Something's going on":void 0},`${c+1}`));return o.jsx(j,{children:o.jsx(g,{label:"Foo","aria-level":1,"aria-posinset":1,"aria-setsize":1,actions:s})})}export{re as default,ne as handle};
