import{w as se}from"./LMDWO4NN-C51_mRdy.js";import{t as le,a as n,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as K}from"./index-Dr3kRIaJ.js";import{B as oe}from"./Button-BDThzTLR.js";import{D as W,a as V,b as $,c as _,d as ae}from"./DropdownMenu-C6nmbmpt.js";import{I as M}from"./Icon-DHyQLpiG.js";import{I as N}from"./IconButton-BYdnlU1F.js";import{S as ie,H as ce}from"./Select-Dq8nQn7C.js";import{T as F,a as de,b as O,c as ue}from"./Tabs-lsZ7ZotU.js";import{T as E}from"./Text-CeOMu6x9.js";import{T as pe,a as me,b as fe}from"./TextBox-Bp_puRpt.js";import{V as T}from"./VisuallyHidden-CldqyofG.js";import{T as he,a as xe,b as L}from"./Tree-hvWyDTbF.js";import{p as R}from"./placeholder-ABKmVBbW.js";import{p as be,l as Ce,h as ge,m as je,s as G,d as Se,f as ve}from"./visibility-hide-CDyItsLE.js";import{s as _e}from"./visibility-show-wA9JF-6e.js";import"./index-jyeBNHV5.js";import"./X5NMLKT6-CF4rYh6u.js";import"./KUU7WJ55-D3HZtQ3a.js";import"./LVA2YJMS-BfjlbvRt.js";import"./~utils-Cznddkjz.js";import"./XL7CSKGW-DyJHwI7D.js";import"./Kbd-Bfau54n-.js";import"./~hooks-jA6mLbHf.js";import"./YV4JVR4I-BIG7SmE9.js";import"./P2CTZE2T-B-sWCdSQ.js";import"./RZ4GPYOB-Bz8g_oo0.js";import"./BYC7LY2E-BxKc6YiQ.js";import"./VGCJ63VH-rGTei5h5.js";import"./XX67R432-Bv9x3_cY.js";import"./MTZPJQMC-BU0naf6q.js";import"./ITI7HKP4-JdhCx63u.js";import"./C3IKGW5T-DEtV1wWG.js";import"./VEVQD5MH-BTci7YJt.js";import"./P4IRICAX-CacsgStX.js";import"./ASMQKSDT-D3gVBJb5.js";import"./BOLVLGVE-C-Pift6v.js";import"./Tooltip-CoaxzYfH.js";import"./tooltip-anchor-oD8_qmTK.js";import"./Field-CMPyXgSP.js";import"./ListItem-ZsUg26uu.js";import"./~utils-KZaJJO_T.js";import"./~hooks-oFT9fZS9.js";const Ie="_appLayout_12vqq_5",ye="_header_12vqq_22",Ae="_platformBar_12vqq_32",Pe="_logo_12vqq_38",Me="_tools_12vqq_48",Re="_leftPanel_12vqq_58",qe="_panelHeader_12vqq_70",Ne="_panelTitleWrapper_12vqq_78",Te="_panelCaption_12vqq_82",Be="_shiftIconRight_12vqq_86",we="_subheader_12vqq_90",ze="_subheaderTitle_12vqq_101",ke="_searchInput_12vqq_106",Le="_subheaderActions_12vqq_110",Ee="_tabList_12vqq_114",De="_emptyState_12vqq_119",Ke="_canvasWrapper_12vqq_128",Fe="_canvas_12vqq_128",Oe="_splitter_12vqq_165",Ge="_tabPanel_12vqq_211",He="_tree_12vqq_219",Xe="_action_12vqq_223",We="_actionIcon_12vqq_229",Ve="_slider_12vqq_240",$e="_colorTile_12vqq_249",m={appLayout:Ie,header:ye,platformBar:Ae,logo:Pe,tools:Me,leftPanel:Re,panelHeader:qe,panelTitleWrapper:Ne,panelCaption:Te,shiftIconRight:Be,subheader:we,subheaderTitle:ze,searchInput:ke,subheaderActions:Le,tabList:Ee,emptyState:De,canvasWrapper:Ke,canvas:Fe,splitter:Oe,tabPanel:Ge,tree:He,action:Xe,actionIcon:We,slider:Ve,colorTile:$e},U="Kiwi sandbox",Jt=()=>[{title:U}],Qt=se(function(){const[s,r]=le(),o=s.get("tree")==="empty"?"epoch-2":"epoch-1",b=n.useCallback(a=>{r(f=>(a==="epoch-2"?f.set("tree","empty"):f.delete("tree"),f))},[r]),u=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),d=n.useId();return e.jsxs(Ue,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:m.panelHeader,children:[e.jsxs("div",{children:[e.jsx(T,{render:a=>e.jsx("label",{...a,htmlFor:d}),children:"Choose Model"}),e.jsx(ie,{className:m.panelTitleWrapper,children:e.jsx(ce,{id:d,variant:"ghost",defaultValue:o,onChange:a=>b(a.target.value),children:Object.entries(u).map(([a,f])=>e.jsx("option",{value:a,children:f},a))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(T,{render:a=>e.jsx("h2",{...a}),children:u[o]}),e.jsx("p",{className:m.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:m.actions,children:e.jsx(N,{className:m.shiftIconRight,icon:be,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(at,{children:e.jsxs(ot,{children:[e.jsx(st,{}),e.jsx(F,{tabId:"simple",className:m.tabPanel,focusable:!1,children:o==="epoch-2"?e.jsx(H,{}):e.jsx(X,{tree:"simple"})}),e.jsx(F,{tabId:"complex",className:m.tabPanel,focusable:!1,children:o==="epoch-2"?e.jsx(H,{}):e.jsx(X,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:m.header,children:[e.jsx("div",{className:m.logo,children:e.jsx(M,{href:R,size:"large"})}),e.jsx(E,{render:a=>e.jsx("h1",{...a}),variant:"body-md",children:U})]}),e.jsx("div",{className:m.platformBar,children:e.jsxs("div",{className:m.tools,children:[e.jsx(M,{href:R,size:"large"}),e.jsx(M,{href:R,size:"large"}),e.jsx(M,{href:R,size:"large"})]})}),e.jsx("div",{className:m.canvasWrapper,children:e.jsx("div",{className:m.canvas})})]})});function Ue(c){const{sliderProps:s,panelProps:r,panelMinSize:o,panelMaxSize:b,resizing:u}=Qe({minSize:{px:256,pct:20},maxSize:{pct:30}}),d=n.useId();return e.jsxs("div",{className:m.appLayout,style:{"--_panel-min-size":o,"--_panel-max-size":b},children:[e.jsx("div",{...r,className:m.leftPanel,style:{position:"relative",...r.style},children:c.panelContent}),e.jsxs("div",{className:m.splitter,"data-resizing":u?"true":void 0,children:[e.jsx(T,{render:a=>e.jsx("label",{...a,htmlFor:d,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:d,type:"range",className:m.slider,...s})]}),c.children]})}function H(){return e.jsxs("div",{className:m.emptyState,children:[e.jsx(E,{variant:"body-sm",children:"No layers"}),e.jsx(oe,{children:"Create a layer"})]})}function Ze(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(E,{variant:"body-sm",children:"No results found"})})}function Je(c,s,r){return Math.min(Math.max(c,s),r)}function Qe(c){const{minSize:s,maxSize:r,onCollapse:o}=c,b=n.useId(),u=n.useRef(null),[d,a]=n.useState(void 0),[f,l]=n.useState(void 0),[p,x]=n.useState(void 0),[h,j]=n.useState(!1),[I,A]=n.useState(void 0),i=n.useMemo(()=>{if(s&&f)return Math.min(s.px,s.pct/100*f)},[s,f]),S=n.useMemo(()=>{if(i&&r&&f)return Math.max(i,r.pct/100*f)},[r,f,i]),v=n.useMemo(()=>{if(p==="smallest")return i??0;if(p==="largest")return S??0;if(d&&i&&S)return Je(d,i,S)},[d,i,S,p]);n.useEffect(()=>{const C=u.current;if(!C)return;const g=C.parentElement;if(!g)return;const y=new ResizeObserver(()=>{const z=g.getBoundingClientRect(),k=C.getBoundingClientRect();l(z.width),a(k.width)});return y.observe(g),y.observe(C),()=>{y.disconnect()}},[]);const q=n.useCallback(C=>{const g=u.current;if(!g)return;const y=g.getBoundingClientRect();A(y.width+C),x(void 0),j(!0)},[]),w=n.useCallback(C=>{const g=u.current;if(!g)return;const y=g.parentElement;if(!y)return;const z=y.getBoundingClientRect(),k=C*(z.width*.005),re=g.getBoundingClientRect();A(re.width+k),x(void 0)},[]),Q=n.useCallback(()=>{u.current&&(A(void 0),j(!1))},[]),{moveableProps:P}=Ye({onMove:q,onMoveEnd:Q,onKeyMove:w}),Y=n.useMemo(()=>({...P,onKeyDown:C=>{var g;if((g=P.onKeyDown)==null||g.call(P,C),!C.defaultPrevented)switch(C.key){case"Enter":C.preventDefault(),o==null||o();break;case"Home":C.preventDefault(),x("smallest");break;case"End":C.preventDefault(),x("largest");break}},onChange:C=>{if(h)return;const g=Number(C.target.value);A(g)},value:v===void 0?0:Math.floor(v),min:i===void 0?void 0:Math.floor(i),max:S===void 0?void 0:Math.floor(S)}),[P,v,i,S,o,h]),ee=n.useMemo(()=>({style:{WebkitUserSelect:I===void 0?void 0:"none"},id:b,ref:u}),[b,I]),te=i===void 0?void 0:`${Math.floor(i)}px`,ne=n.useMemo(()=>{if(I!==void 0&&r!==void 0&&p===void 0)return`min(${Math.floor(I)}px, ${r.pct}%)`;if(v!==void 0)return`${Math.floor(v)}px`},[r,I,v,p]);return{sliderProps:Y,panelProps:ee,panelMinSize:te,panelMaxSize:ne,resizing:h}}function Ye(c){const{onMove:s,onMoveEnd:r,onKeyMove:o}=c,b=n.useRef(null),u=n.useRef(void 0),d=n.useRef(void 0),a=n.useCallback(()=>{d.current!==void 0&&(d.current=void 0,r==null||r())},[r]);return{moveableProps:n.useMemo(()=>({onPointerDown:l=>{if(l.button!==0||l.ctrlKey)return;const p=b.current;if(!p)return;const x=p.getBoundingClientRect(),h=l.clientX-x.left;d.current=h,l.preventDefault(),p.setPointerCapture(l.pointerId)},onPointerMove:l=>{const p=d.current;if(p===void 0)return;const x=b.current;if(!x)return;const h=x.getBoundingClientRect(),j=l.clientX-p-h.left;l.preventDefault(),s==null||s(j)},onPointerUp:a,onPointerCancel:a,onKeyDown:l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowLeft":l.preventDefault(),o==null||o(-1);break;case"ArrowRight":l.preventDefault(),o==null||o(1);break}},ref:l=>{var x;if(b.current=l,(x=u.current)==null||x.call(u),u.current=void 0,!l)return;const p=h=>{h.preventDefault()};l.addEventListener("touchstart",p),u.current=()=>{l.removeEventListener("touchstart",p)}}}),[o,s,a])}}const t=(()=>{let c=0;return s=>({id:`${c++}`,label:`Tree Item ${c}`,items:[],expanded:!0,...s})})(),Z={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},et={filters:[],items:[t({label:"ITC_Master",color:"purple",items:[t({label:"002_Substation",expanded:!1,color:"red",items:[t({label:"002_Substation_A"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-COLS",description:"Columns",expanded:!1,color:"yellow",items:[t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-JOIS-ENVL",description:"Bar Joist: Envelopes",color:"teal"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-SLAB-CONC",description:"Slabs: Concrete",color:"green"}),t({label:"003-BENSTR-ZO-LG2-M3-S-00001 - S-BEAM-PURL",description:"Columns: concrete",color:"yellow"}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,color:"yellow",items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A",color:"red"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",color:"yellow",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A",color:"blue"})]}),t({label:"007-aa_master.dgn",color:"green",items:[t({label:"A-CLNG-LITE",expanded:!1,color:"blue",items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",color:"gray",items:[t({label:"A-DOOR-2D-PLAN",color:"green",items:[t({label:"P00003 [2-KA62]",color:"yellow",items:[t({label:"Cell [2-KA63]",color:"teal",items:[t({label:"Cell [2-KA64]",color:"red",items:[t({label:"Complex Chain [2-KA6A]",color:"purple"}),t({label:"Complex Chain [2-KA6B]",color:"purple"}),t({label:"Complex Chain [2-KA6C]",color:"purple"}),t({label:"Complex Chain [2-KA6D]",color:"purple"}),t({label:"Complex Chain [2-KA6E]",color:"purple"}),t({label:"Complex Chain [2-KA6F]",color:"purple"}),t({label:"Complex Chain [2-KA6G]",color:"purple"}),t({label:"Complex Chain [2-KA6H]",color:"purple"}),t({label:"Complex Chain [2-KA61]",color:"purple"}),t({label:"Complex Chain [2-KA65]",color:"purple"}),t({label:"Complex Chain [2-KA66]",color:"purple"}),t({label:"Complex Chain [2-KA67]",color:"purple"}),t({label:"Complex Chain [2-KA68]",color:"purple"}),t({label:"Complex Chain [2-KA69]",color:"purple"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,color:"yellow",items:[t({label:"P00003 [2-KA74-A]",color:"green"})]}),t({label:"P00003 [2-KA86]",expanded:!1,color:"teal",items:[t({label:"P00003 [2-KA74-A]",color:"blue"})]}),t({label:"P00003 [2-KA98]",expanded:!1,color:"red",items:[t({label:"P00003 [2-KA98-A]",color:"purple"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,color:"teal",items:[t({label:"P00003 [2-KAAA-A]",color:"gray"})]})]})]})]})]})]};function tt({items:c,filters:s,search:r}){const o=n.useMemo(()=>s.length===0?c:c.reduce((d,a)=>(!a.type||!s.includes(a.type)||d.push(a),d),[]),[c,s]),b=n.useMemo(()=>{function d(a){return a.reduce((f,l)=>{const p=d(l.items??[]);return(l.label.toLowerCase().includes(r.toLowerCase())||p.length>0)&&f.push({...l,items:p}),f},[])}return r===""?o:d(o)},[o,r]),u=n.useMemo(()=>{if(s.length===0&&r==="")return;function d(a){return a.reduce((f,l)=>{const p=l.items?d(l.items):0;return f+1+p},0)}return d(b)},[b,s,r]);return{filteredTree:b,itemCount:u}}function nt(c,s,r){return n.useMemo(()=>{function o(b,u,d,a,f){const l=[];let p=1;for(const x of b){const h=x.id===s||a,j=r.includes(x.id)||f;l.push({...x,level:d,parentItem:u,selected:h,hidden:j,parentHidden:f,position:p++,size:b.length}),x.expanded&&l.push(...o(x.items,x,d+1,h,j))}return l}return o(c,void 0,1,!1,!1)},[c,s,r])}function J(c,s){for(const r of c){if(r.id===s)return r;const o=J(r.items,s);if(o)return o}}function X({tree:c}){const{selectedId:s}=n.useContext(D),{filters:r,search:o,setItemCount:b}=n.useContext(B),[u,d]=n.useState(),[a,f]=n.useState([]),l=n.useCallback(i=>{f(S=>S.includes(i)?S.filter(v=>v!==i):[...S,i])},[]),[p,x]=n.useState(()=>c==="complex"?et.items:Z.items),{filteredTree:h,itemCount:j}=tt({items:p,filters:r,search:o}),I=nt(h,u,a);n.useEffect(()=>{c===s&&b(j)},[c,s,b,j]);const A=n.useDeferredValue(I);return A.length===0?e.jsx(Ze,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(he,{className:m.tree,children:A.map(i=>e.jsx(xe,{label:i.label,description:i.description,"aria-level":i.level,"aria-posinset":i.position,"aria-setsize":i.size,selected:i.selected,onSelectedChange:()=>{if(u===i.id){d(void 0);return}d(i.id)},expanded:i.items.length===0?void 0:i.expanded,onExpandedChange:S=>{x(v=>{const q=J(v,i.id);if(!q)return v;const w=[...v];return q.expanded=S,w})},decoration:e.jsxs(e.Fragment,{children:[i.color?e.jsx("div",{style:{"--color":`var(--color--${i.color})`},className:m.colorTile}):null,e.jsx(M,{href:R,style:{display:"inline"}})]}),actions:[e.jsx(L,{className:m.action,icon:Ce,label:"Lock","aria-hidden":i.hidden},"lock"),e.jsx(L,{className:m.action,icon:i.hidden?ge:_e,label:i.hidden?"Show":"Hide",visible:i.hidden?!0:void 0,onClick:()=>{l(i.id)}},"visibility"),e.jsx(rt,{hidden:i.hidden},"more")]},i.id))})})}function rt({hidden:c}){return e.jsxs(W,{children:[e.jsx(V,{className:m.action,"aria-hidden":c,render:e.jsx(L,{icon:je,label:"More"})}),e.jsxs($,{style:{minInlineSize:164},children:[e.jsx(_,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(_,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(_,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(_,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(_,{shortcuts:"]",children:"Bring to front"}),e.jsx(_,{shortcuts:"[",children:"Send to back"}),e.jsx(_,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(_,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(_,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(_,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(_,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(_,{shortcuts:"I",children:"Isolate object"})]})]})}function st(){const{selectedId:c}=n.useContext(D),{itemCount:s,filtered:r,clearFilters:o,search:b,setSearch:u}=n.useContext(B),[d,a]=n.useState(!1),f=n.useRef(null),l=n.useRef(null),p=d?e.jsxs(e.Fragment,{children:[e.jsx(lt,{filters:c==="simple"?Z.filters:[]}),e.jsx(N,{className:m.shiftIconRight,icon:Se,label:"Close",variant:"ghost",onClick:()=>{var h;u(""),o(),K.flushSync(()=>a(!1)),(h=l.current)==null||h.focus()}})]}):e.jsx(N,{className:m.shiftIconRight,icon:G,label:"Search",variant:"ghost",onClick:()=>{var h;K.flushSync(()=>a(!0)),(h=f.current)==null||h.focus()}}),x=n.useMemo(()=>{if(r)return s===void 0?"Showing all tree items":`Showing ${s} tree items`},[r,s]);return e.jsxs("div",{className:m.subheader,children:[e.jsx(T,{"aria-live":"polite","aria-atomic":!0,children:x}),d?void 0:e.jsxs(de,{className:m.tabList,tone:"accent",ref:l,children:[e.jsx(O,{id:"simple",children:"Simple"}),e.jsx(O,{id:"complex",children:"Complex"})]}),d?e.jsxs(pe,{className:m.searchInput,children:[e.jsx(me,{href:G}),e.jsx(fe,{placeholder:"Search",ref:f,onChange:h=>{u(h.target.value)},value:b})]}):null,e.jsx("div",{className:m.subheaderActions,children:p})]})}function lt({filters:c}){const s=n.useContext(B);return e.jsxs(W,{children:[e.jsx(V,{render:e.jsx(N,{icon:ve,label:"Filter",variant:"ghost",disabled:c.length===0,isActive:s.filters.length>0})}),e.jsx($,{children:c.map(r=>{const o=s.filters.includes(r);return e.jsx(ae,{name:r,checked:o,onChange:()=>{s.toggleFilter(r)},children:r},r)})})]})}function ot(c){const[s,r]=n.useState(!1),[o,b]=n.useState([]),[u,d]=n.useState(""),[a,f]=n.useState(void 0),l=n.useCallback(h=>{b(j=>j.includes(h)?j.filter(I=>I!==h):[...j,h]),r(!0)},[]),p=n.useCallback(()=>{b([]),r(!0)},[]),x=n.useCallback(h=>{d(h),r(!0)},[]);return e.jsx(B.Provider,{value:n.useMemo(()=>({filters:o,filtered:s,toggleFilter:l,clearFilters:p,search:u,setSearch:x,itemCount:a,setItemCount:f}),[o,s,l,p,u,x,a]),children:c.children})}function at(c){const[s,r]=n.useState(void 0);return e.jsx(D.Provider,{value:n.useMemo(()=>({selectedId:s??""}),[s]),children:e.jsx(ue,{setSelectedId:r,selectedId:s,children:c.children})})}const B=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),D=n.createContext({selectedId:""});export{Qt as default,Jt as meta};
