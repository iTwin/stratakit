import{w as ne}from"./~utils-ChHMGsjo.js";import{a as t,n as e,t as se}from"./chunk-K6AXKMTT-BHCV6zel.js";import{a as k}from"./index-B0znaqTz.js";import{B as ae}from"./Button-Dzu8Ycyw.js";import{D as G,a as O,b as F,c as j}from"./DropdownMenu-mt3m7mgc.js";import{I}from"./Icon-Bc7nfctV.js";import{I as A}from"./IconButton-DhP8DM50.js";import{T as re,a as w,b as le,c as K}from"./Tabs-BfMnVMKt.js";import{T as H}from"./Text-CZoq4tSz.js";import{T as oe,a as ie,b as ce}from"./TextBox-pOcuejsf.js";import{V as de}from"./VisuallyHidden-BP9HqvzW.js";import{T as ue,a as he}from"./Tree-DFOzIGpX.js";import{p as M}from"./placeholder-BZbhP9Qz.js";import{p as pe,l as me,d as xe,h as fe,m as be,a as je,s as E,f as Ce}from"./state-inherited-dot-C3qYly_3.js";import{s as ve}from"./visibility-show-xDtdrfyN.js";import"./index-DeGJKKUv.js";import"./KUU7WJ55-BzFoYYyi.js";import"./LVA2YJMS-BoyOwnvI.js";import"./XL7CSKGW-DWaBDxUb.js";import"./Kbd-Cq5-4jwi.js";import"./P2CTZE2T-Dc6QpFC1.js";import"./YV4JVR4I-I4X5ERHE.js";import"./BYC7LY2E-t-z_0C6Y.js";import"./VGCJ63VH-B3pkzvNN.js";import"./MTZPJQMC-JL08V7FT.js";import"./VEVQD5MH-OG2h05rd.js";import"./ITI7HKP4-BWzdjh-N.js";import"./P4IRICAX-BEG6FZ7o.js";import"./Tooltip-BLc4PUA3.js";import"./~hooks-DuYLhjin.js";import"./Field-yTJIy2wa.js";import"./ListItem-KFIqU5yd.js";const ge="_appLayout_1rhac_5",_e="_header_1rhac_22",Se="_platformBar_1rhac_32",Pe="_logo_1rhac_38",Ae="_tools_1rhac_48",ye="_leftPanel_1rhac_58",Ie="_panelHeader_1rhac_70",Re="_panelTitle_1rhac_78",Me="_panelCaption_1rhac_84",Ne="_shiftIconRight_1rhac_88",Te="_subheader_1rhac_92",Be="_subheaderTitle_1rhac_103",De="_searchInput_1rhac_108",ze="_subheaderActions_1rhac_112",ke="_tabList_1rhac_116",we="_emptyState_1rhac_121",Ke="_canvasWrapper_1rhac_130",Ee="_canvas_1rhac_130",Le="_splitter_1rhac_167",Xe="_tabPanel_1rhac_209",Ge="_tree_1rhac_215",Oe="_action_1rhac_219",Fe="_actionIcon_1rhac_227",He="_slider_1rhac_238",i={appLayout:ge,header:_e,platformBar:Se,logo:Pe,tools:Ae,leftPanel:ye,panelHeader:Ie,panelTitle:Re,panelCaption:Me,shiftIconRight:Ne,subheader:Te,subheaderTitle:Be,searchInput:De,subheaderActions:ze,tabList:ke,emptyState:we,canvasWrapper:Ke,canvas:Ee,splitter:Le,tabPanel:Xe,tree:Ge,action:Oe,actionIcon:Fe,slider:He},$="Kiwi sandbox",Dt=()=>[{title:$}],zt=ne(function(){const[a,r]=t.useState(!1),[l,h]=t.useState([]),d=t.useCallback(n=>{h(c=>c.includes(n)?c.filter(u=>u!==n):[...c,n]),r(!0)},[]),m=t.useCallback(()=>{h([]),r(!0)},[]),[p,x]=t.useState("simple");return e.jsx(T.Provider,{value:t.useMemo(()=>({filters:l,filtered:a,toggleFilter:d,clearFilters:m}),[l,a,d,m]),children:e.jsxs($e,{panelContent:e.jsxs(re,{setSelectedId:n=>{n!=="simple"&&n!=="complex"||x(n)},selectedId:p,children:[e.jsxs("div",{className:i.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:i.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:i.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:i.actions,children:e.jsx(A,{className:i.shiftIconRight,icon:pe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Ze,{tree:p}),e.jsx(w,{tabId:"simple",className:i.tabPanel,focusable:!1,children:e.jsx(L,{tree:"simple"})}),e.jsx(w,{tabId:"complex",className:i.tabPanel,focusable:!1,children:e.jsx(L,{tree:"complex"})})]}),children:[e.jsxs("header",{className:i.header,children:[e.jsx("div",{className:i.logo,children:e.jsx(I,{href:M,size:"large"})}),e.jsx(H,{render:n=>e.jsx("h1",{...n}),variant:"body-md",children:$})]}),e.jsx("div",{className:i.platformBar,children:e.jsxs("div",{className:i.tools,children:[e.jsx(I,{href:M,size:"large"}),e.jsx(I,{href:M,size:"large"}),e.jsx(I,{href:M,size:"large"})]})}),e.jsx("div",{className:i.canvasWrapper,children:e.jsx("div",{className:i.canvas})})]})})});function $e(o){const{sliderProps:a,panelProps:r,panelMinSize:l,panelMaxSize:h,resizing:d}=Ue({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs("div",{className:i.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":h},children:[e.jsx("div",{...r,className:i.leftPanel,style:{position:"relative",...r.style},children:o.panelContent}),e.jsx("div",{className:i.splitter,"data-resizing":d?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:i.slider,...a})}),o.children]})}function Ve({children:o}){return e.jsx("div",{className:i.emptyState,children:o})}function We(o,a,r){return Math.min(Math.max(o,a),r)}function Ue(o){const{minSize:a,maxSize:r,onCollapse:l}=o,h=t.useId(),d=t.useRef(null),[m,p]=t.useState(void 0),[x,n]=t.useState(void 0),[c,u]=t.useState(void 0),[v,_]=t.useState(!1),[S,N]=t.useState(void 0),C=t.useMemo(()=>{if(a&&x)return Math.min(a.px,a.pct/100*x)},[a,x]),P=t.useMemo(()=>{if(C&&r&&x)return Math.max(C,r.pct/100*x)},[r,x,C]),y=t.useMemo(()=>{if(c==="smallest")return C??0;if(c==="largest")return P??0;if(m&&C&&P)return We(m,C,P)},[m,C,P,c]);t.useEffect(()=>{const f=d.current;if(!f)return;const b=f.parentElement;if(!b)return;const g=new ResizeObserver(()=>{const B=b.getBoundingClientRect(),D=f.getBoundingClientRect();n(B.width),p(D.width)});return g.observe(b),g.observe(f),()=>{g.disconnect()}},[]);const U=t.useCallback(f=>{const b=d.current;if(!b)return;const g=b.getBoundingClientRect();N(g.width+f),u(void 0),_(!0)},[]),q=t.useCallback(f=>{const b=d.current;if(!b)return;const g=b.parentElement;if(!g)return;const B=g.getBoundingClientRect(),D=f*(B.width*.005),te=b.getBoundingClientRect();N(te.width+D),u(void 0)},[]),J=t.useCallback(()=>{d.current&&(N(void 0),_(!1))},[]),{moveableProps:R}=qe({onMove:U,onMoveEnd:J,onKeyMove:q}),Q=t.useMemo(()=>({...R,onKeyDown:f=>{var b;if((b=R.onKeyDown)==null||b.call(R,f),!f.defaultPrevented)switch(f.key){case"Enter":f.preventDefault(),l==null||l();break;case"Home":f.preventDefault(),u("smallest");break;case"End":f.preventDefault(),u("largest");break}},onChange:f=>{if(v)return;const b=Number(f.target.value);N(b)},value:y===void 0?0:Math.floor(y),min:C===void 0?void 0:Math.floor(C),max:P===void 0?void 0:Math.floor(P)}),[R,y,C,P,l,v]),Y=t.useMemo(()=>({style:{WebkitUserSelect:S===void 0?void 0:"none"},id:h,ref:d}),[h,S]),Z=C===void 0?void 0:`${Math.floor(C)}px`,ee=t.useMemo(()=>{if(S!==void 0&&r!==void 0&&c===void 0)return`min(${Math.floor(S)}px, ${r.pct}%)`;if(y!==void 0)return`${Math.floor(y)}px`},[r,S,y,c]);return{sliderProps:Q,panelProps:Y,panelMinSize:Z,panelMaxSize:ee,resizing:v}}function qe(o){const{onMove:a,onMoveEnd:r,onKeyMove:l}=o,h=t.useRef(null),d=t.useRef(void 0),m=t.useRef(void 0),p=t.useCallback(()=>{m.current!==void 0&&(m.current=void 0,r==null||r())},[r]);return{moveableProps:t.useMemo(()=>({onPointerDown:n=>{if(n.button!==0||n.ctrlKey)return;const c=h.current;if(!c)return;const u=c.getBoundingClientRect(),v=n.clientX-u.left;m.current=v,n.preventDefault(),c.setPointerCapture(n.pointerId)},onPointerMove:n=>{const c=m.current;if(c===void 0)return;const u=h.current;if(!u)return;const v=u.getBoundingClientRect(),_=n.clientX-c-v.left;n.preventDefault(),a==null||a(_)},onPointerUp:p,onPointerCancel:p,onKeyDown:n=>{if(!n.defaultPrevented)switch(n.key){case"ArrowLeft":n.preventDefault(),l==null||l(-1);break;case"ArrowRight":n.preventDefault(),l==null||l(1);break}},ref:n=>{var u;if(h.current=n,(u=d.current)==null||u.call(d),d.current=void 0,!n)return;const c=v=>{v.preventDefault()};n.addEventListener("touchstart",c),d.current=()=>{n.removeEventListener("touchstart",c)}}}),[l,a,p])}}const V=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function L({tree:o}){const[a]=se(),r=a.get("tree"),l=t.useContext(T),[h,d]=t.useState(),[m,p]=t.useState([]),x=t.useCallback(n=>{p(c=>c.includes(n)?c.filter(u=>u!==n):[...c,n])},[]);return r==="empty"?e.jsxs(Ve,{children:[e.jsx(H,{children:"No layers"}),e.jsx(ae,{children:"Create a layer"})]}):e.jsx(V.Provider,{value:t.useMemo(()=>({selected:h,setSelected:d,hidden:m,toggleHidden:x}),[m,h,x]),children:e.jsx(ue,{className:i.tree,children:o==="complex"?e.jsx(Qe,{}):e.jsx(Je,{tree:z,activeFilters:l.filters})})})}const z={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function W({item:o}){var a;return e.jsx(s,{label:o.label,children:(a=o.items)==null?void 0:a.map(r=>e.jsx(W,{item:r},r.label))})}function Je({tree:o,activeFilters:a}){var r;return(r=o.items)==null?void 0:r.map(l=>a.length>0&&(!l.type||!a.includes(l.type))?null:e.jsx(W,{item:l},l.label))}function Qe(){return e.jsxs(e.Fragment,{children:[e.jsxs(s,{label:"ITC_Master",children:[e.jsx(s,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(s,{label:"002_Substation_A"})}),e.jsx(s,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(s,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(s,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(s,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(s,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(s,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(s,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(s,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(s,{label:"007-aa_master.dgn",children:[e.jsx(s,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(s,{label:"A-CLNG-LITE-A"})}),e.jsx(s,{label:"A-CLNG-TILE",children:e.jsxs(s,{label:"A-DOOR-2D-PLAN",children:[e.jsx(s,{label:"P00003 [2-KA62]",children:e.jsx(s,{label:"Cell [2-KA63]",children:e.jsxs(s,{label:"Cell [2-KA64]",children:[e.jsx(s,{label:"Complex Chain [2-KA6A]"}),e.jsx(s,{label:"Complex Chain [2-KA6B]"}),e.jsx(s,{label:"Complex Chain [2-KA6C]"}),e.jsx(s,{label:"Complex Chain [2-KA6D]"}),e.jsx(s,{label:"Complex Chain [2-KA6E]"}),e.jsx(s,{label:"Complex Chain [2-KA6F]"}),e.jsx(s,{label:"Complex Chain [2-KA6G]"}),e.jsx(s,{label:"Complex Chain [2-KA6H]"}),e.jsx(s,{label:"Complex Chain [2-KA61]"}),e.jsx(s,{label:"Complex Chain [2-KA65]"}),e.jsx(s,{label:"Complex Chain [2-KA66]"}),e.jsx(s,{label:"Complex Chain [2-KA67]"}),e.jsx(s,{label:"Complex Chain [2-KA68]"}),e.jsx(s,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(s,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(s,{label:"P00003 [2-KA74-A]"})}),e.jsx(s,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(s,{label:"P00003 [2-KA74-A]"})}),e.jsx(s,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(s,{label:"P00003 [2-KA98-A]"})}),e.jsx(s,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(s,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(s,{label:"ITC_Main"})]})}const X=t.createContext({selected:!1,hidden:!1});function s(o){const a=t.useContext(V),r=t.useContext(X),l=t.useId(),[h,d]=t.useState(o.defaultCollapsed===void 0?!0:!o.defaultCollapsed),m=t.Children.count(o.children)>0,p=t.useMemo(()=>r.hidden?!0:a.hidden.includes(l),[l,a.hidden,r.hidden]),x=r.selected||l===a.selected,n=t.useCallback(c=>{a.setSelected(c?l:void 0)},[l,a]);return e.jsx(X.Provider,{value:t.useMemo(()=>({selected:x,hidden:p}),[p,x]),children:e.jsx(he,{expanded:m?h:void 0,onExpandedChange:d,selected:x,onSelectedChange:n,icon:e.jsx(I,{href:M,style:{display:"inline"}}),label:o.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(A,{className:i.action,icon:me,label:"Lock",variant:"ghost","aria-hidden":p}),r.hidden?e.jsx("span",{className:i.actionIcon,children:e.jsx(I,{href:xe})}):e.jsx(A,{className:i.action,icon:p?fe:ve,label:p?"Show":"Hide",variant:"ghost",onClick:()=>{a.toggleHidden(l)}}),e.jsx(Ye,{hidden:p})]}),children:h?o.children:void 0})})}function Ye({hidden:o}){return e.jsxs(G,{children:[e.jsx(O,{className:i.action,"aria-hidden":o,render:e.jsx(A,{icon:be,label:"More",variant:"ghost"})}),e.jsxs(F,{style:{minInlineSize:164},children:[e.jsx(j,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(j,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(j,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(j,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(j,{shortcuts:"]",children:"Bring to front"}),e.jsx(j,{shortcuts:"[",children:"Send to back"}),e.jsx(j,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(j,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(j,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(j,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(j,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(j,{shortcuts:"I",children:"Isolate object"})]})]})}function Ze({tree:o}){const{filters:a,filtered:r}=t.useContext(T),[l,h]=t.useState(!1),d=t.useRef(null),m=t.useMemo(()=>{if(o!=="simple"||a.length===0)return;const n=z.items.filter(u=>u.type?a.includes(u.type):!1);function c(u){return u.reduce((v,_)=>{const S=_.items?c(_.items):0;return v+1+S},0)}return c(n)},[a,o]),p=t.useRef(null),x=l?e.jsxs(e.Fragment,{children:[e.jsx(et,{filters:o==="simple"?z.filters:[]}),e.jsx(A,{className:i.shiftIconRight,icon:je,label:"Close",variant:"ghost",onClick:()=>{var n;k.flushSync(()=>h(!1)),(n=p.current)==null||n.focus()}})]}):e.jsx(A,{className:i.shiftIconRight,icon:E,label:"Search",variant:"ghost",onClick:()=>{var n;k.flushSync(()=>h(!0)),(n=d.current)==null||n.focus()}});return e.jsxs("div",{className:i.subheader,children:[e.jsx(de,{"aria-live":r?"polite":"off","aria-atomic":!0,children:m===void 0?"Showing all tree items":`Showing ${m} tree items`}),l?void 0:e.jsxs(le,{className:i.tabList,tone:"accent",ref:p,children:[e.jsx(K,{id:"simple",children:"Simple"}),e.jsx(K,{id:"complex",children:"Complex"})]}),l?e.jsxs(oe,{className:i.searchInput,children:[e.jsx(ie,{href:E}),e.jsx(ce,{placeholder:"Search",ref:d})]}):null,e.jsx("div",{className:i.subheaderActions,children:x})]})}function et({filters:o}){const a=t.useContext(T);return e.jsxs(G,{children:[e.jsx(O,{render:e.jsx(A,{icon:Ce,label:"Filter",variant:"ghost"})}),e.jsxs(F,{style:{minInlineSize:164},children:[e.jsx(j,{onClick:()=>{a.clearFilters()},children:"Show all"}),o.map(r=>e.jsx(j,{onClick:()=>{a.toggleFilter(r)},children:r},r))]})]})}const T=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}});export{zt as default,Dt as meta};
