import{a as x,p as T}from"./chunk-EF7DTUVF-kG7VDEF3.js";import{s as ie,q as ce,v as le,w as Q,x as de,y as F,z as y,E as ue,H as Z,J as U,n as j,i as me,K as be,L as fe,M as ve}from"./~utils-BYV3BH5q.js";import{f as A,u as Ie,c as B}from"./sun-BSOLKypC.js";import{a as ee,b as te,C as X,u as pe}from"./6VRAQV3D-BxyDIAhu.js";import{S as oe,R as xe,L as V,P as O,d as $,I as G,_ as C,b as f,Q as Y,a1 as Se,f as H,c as z,a as K,j as q,E as J,X as se,p as Ce,q as W,m as ne,u as Pe}from"./LMDWO4NN-L4HmYCAu.js";import{c as he,a as ge,b as Te}from"./5JTVDSTH-1Gv1MQI3.js";import{u as Ee}from"./S43UC3DV-DT2Ark9n.js";import{c as _e}from"./VDHZ5F7K-BftdCvxP.js";import{u as Re}from"./RZ4GPYOB-D_T-CSDI.js";var ye=oe([ce,te],[ie,ee]),we=ye.useContext;x.createContext(!1);x.createContext(null);function Le(t={}){var r=t,{composite:s,combobox:e}=r,o=xe(r,["composite","combobox"]);const n=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],v=le(o.store,Q(s,n),Q(e,n)),i=v?.getState(),m=he(V($({},o),{store:v,includesBaseElement:O(o.includesBaseElement,i?.includesBaseElement,!1),orientation:O(o.orientation,i?.orientation,"horizontal"),focusLoop:O(o.focusLoop,i?.focusLoop,!0)})),a=_e(),E=V($({},m.getState()),{selectedId:O(o.selectedId,i?.selectedId,o.defaultSelectedId),selectOnMove:O(o.selectOnMove,i?.selectOnMove,!0)}),c=de(E,m,v);F(c,()=>y(c,["moves"],()=>{const{activeId:d,selectOnMove:b}=c.getState();if(!b||!d)return;const I=m.item(d);I&&(I.dimmed||I.disabled||c.setState("selectedId",I.id))}));let P=!0;F(c,()=>ue(c,["selectedId"],(d,b)=>{if(!P){P=!0;return}s&&d.selectedId===b.selectedId||c.setState("activeId",d.selectedId)})),F(c,()=>y(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:b,renderedItems:I}=c.getState(),p=m.item(b);if(p&&!p.disabled&&!p.dimmed)c.setState("selectedId",p.id);else{const _=I.find(h=>!h.disabled&&!h.dimmed);c.setState("selectedId",_?.id)}})),F(c,()=>y(c,["renderedItems"],d=>{const b=d.renderedItems;if(b.length)return y(a,["renderedItems"],I=>{const p=I.renderedItems;p.some(h=>!h.tabId)&&p.forEach((h,L)=>{if(h.tabId)return;const k=b[L];k&&a.renderItem(V($({},h),{tabId:k.id}))})})}));let S=null;return F(c,()=>{const d=()=>{S=c.getState().selectedId},b=()=>{P=!1,c.setState("selectedId",S)};if(s&&"setSelectElement"in s)return G(y(s,["value"],d),y(s,["mounted"],b));if(e)return G(y(e,["selectedValue"],d),y(e,["mounted"],b))}),V($($({},m),c),{panels:a,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),m.move(d)}})}function Me(t,r,s){Y(r,[s.composite,s.combobox]),t=ge(t,r,s),U(t,s,"selectedId","setSelectedId"),U(t,s,"selectOnMove");const[e,o]=Z(()=>t.panels,{});return Y(o,[t,o]),Object.assign(x.useMemo(()=>C(f({},t),{panels:e}),[t,e]),{composite:s.composite,combobox:s.combobox})}function je(t={}){const r=Ee(),s=we()||r;t=C(f({},t),{composite:t.composite!==void 0?t.composite:s,combobox:t.combobox!==void 0?t.combobox:r});const[e,o]=Z(Le,t);return Me(e,o,t)}var N=oe([te],[ee]),ke=N.useContext,De=N.useScopedContext,re=N.useProviderContext,Fe=N.ContextProvider,ae=N.ScopedContextProvider,Oe="button",$e=z(function(r){var s=r,{store:e,getItem:o}=s,n=q(s,["store","getItem"]),v;const i=De();e=e||i,J(e,!1);const m=se(),a=n.id||m,E=Ce(n),c=x.useCallback(u=>{const w=C(f({},u),{dimmed:E});return o?o(w):w},[E,o]),P=n.onClick,S=W(u=>{P?.(u),!u.defaultPrevented&&e?.setSelectedId(a)}),d=e.panels.useState(u=>{var w;return(w=u.items.find(l=>l.tabId===a))==null?void 0:w.id}),b=m?n.shouldRegisterItem:!1,I=e.useState(u=>!!a&&u.activeId===a),p=e.useState(u=>!!a&&u.selectedId===a),_=e.useState(u=>!!e.item(u.activeId)),h=I||p&&!_,L=p||((v=n.accessibleWhenDisabled)!=null?v:!0);if(j(e.combobox||e.composite,"virtualFocus")&&(n=C(f({},n),{tabIndex:-1})),n=C(f({id:a,role:"tab","aria-selected":p,"aria-controls":d||void 0},n),{onClick:S}),e.composite){const u={id:a,accessibleWhenDisabled:L,store:e.composite,shouldRegisterItem:h&&b,rowId:n.rowId,render:n.render};n=C(f({},n),{render:T.jsx(X,C(f({},u),{render:e.combobox&&e.composite!==e.combobox?T.jsx(X,C(f({},u),{store:e.combobox})):u.render}))})}return n=pe(C(f({store:e},n),{accessibleWhenDisabled:L,getItem:c,shouldRegisterItem:b})),n}),Ne=Se(H(function(r){const s=$e(r);return K(Oe,s)}));function Ve(t={}){const r=je(t);return T.jsx(Fe,{value:r,children:t.children})}var We="div",Ae=z(function(r){var s=r,{store:e}=s,o=q(s,["store"]);const n=re();e=e||n,J(e,!1);const v=e.useState(i=>i.orientation==="both"?void 0:i.orientation);return o=ne(o,i=>T.jsx(ae,{value:e,children:i}),[e]),e.composite&&(o=f({focusable:!1},o)),o=f({role:"tablist","aria-orientation":v},o),o=Te(f({store:e},o)),o}),Be=H(function(r){const s=Ae(r);return K(We,s)}),He="div",ze=z(function(r){var s=r,{store:e,unmountOnHide:o,tabId:n,getItem:v,scrollRestoration:i,scrollElement:m}=s,a=q(s,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const E=re();e=e||E,J(e,!1);const c=x.useRef(null),P=se(a.id),S=j(e.panels,()=>{var l;return n||((l=e?.panels.item(P))==null?void 0:l.tabId)}),d=j(e,l=>!!S&&l.selectedId===S),b=me({open:d}),I=j(b,"mounted"),p=x.useRef(new Map),_=W(()=>{const l=c.current;return l?m?typeof m=="function"?m(l):"current"in m?m.current:m:l:null});x.useEffect(()=>{var l,R;if(!i||!I)return;const g=_();if(!g)return;if(i==="reset"){g.scroll(0,0);return}if(!S)return;const M=p.current.get(S);g.scroll((l=M?.x)!=null?l:0,(R=M?.y)!=null?R:0);const D=()=>{p.current.set(S,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",D),()=>{g.removeEventListener("scroll",D)}},[i,I,S,_,e]);const[h,L]=x.useState(!1);x.useEffect(()=>{const l=c.current;if(!l)return;const R=be(l);L(!!R.length)},[]);const k=x.useCallback(l=>{const R=C(f({},l),{id:P||l.id,tabId:n});return v?v(R):R},[P,n,v]),u=a.onKeyDown,w=W(l=>{if(u?.(l),l.defaultPrevented||!e?.composite)return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!g)return;const{selectedId:M}=e.getState(),D=g({activeId:M});D&&(l.preventDefault(),e.move(D))});return a=ne(a,l=>T.jsx(ae,{value:e,children:l}),[e]),a=C(f({id:P,role:"tabpanel","aria-labelledby":S||void 0},a),{children:o&&!I?null:a.children,ref:Pe(c,a.ref),onKeyDown:w}),a=fe(f({focusable:!e.composite&&!h},a)),a=ve(f({store:b},a)),a=Re(C(f({store:e.panels},a),{getItem:k})),a}),Ke=H(function(r){const s=ze(r);return K(He,s)});function tt(t){const{defaultSelectedId:r,selectedId:s,setSelectedId:e,selectOnMove:o,children:n}=t;return T.jsx(Ve,{defaultSelectedId:r,selectedId:s,setSelectedId:e,selectOnMove:o,children:n})}const ot=A((t,r)=>{const{tone:s="neutral",...e}=t,[o,n]=x.useState(!1);return x.useEffect(()=>{n(!0)},[]),T.jsx(Be,{...e,"data-kiwi-initialized":o?"true":void 0,"data-kiwi-tone":s,className:B("-tab-list",t.className),ref:r})}),st=A((t,r)=>{const s=ke(),e=j(s,"selectedId"),o=j(s,"baseElement"),n=x.useCallback(({tab:i})=>{if(!o)return;const{left:m,width:a}=i.getBoundingClientRect(),E=m-o.getBoundingClientRect().left;o.style.setProperty("--tab-active-stripe-position",`${Math.round(E)}px`),o.style.setProperty("--tab-active-stripe-width",`${Math.round(a)}px`)},[o]),v=x.useCallback(i=>{!i||!o||e===t.id&&n({tab:i})},[n,o,t.id,e]);return T.jsx(Ne,{accessibleWhenDisabled:!0,...t,className:B("-tab",t.className),ref:Ie(r,v)})}),nt=A((t,r)=>T.jsx(Ke,{...t,className:B("-tab-panel",t.className),ref:r}));export{tt as T,st as a,nt as b,ot as c};
