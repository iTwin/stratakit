import{u as A}from"./LVA2YJMS-CEef_-N2.js";import{b as B,_ as p,n as m,o as F,d as I,e as _,p as O,q as j,r as Y,s as H,t as T,g as L,h as V,j as C,f as z,k as G}from"./index-DksOGUVp.js";import{r as a}from"./chunk-K6AXKMTT-DG8v5gpF.js";var J="button";function D(s){if(!s.isTrusted)return!1;const t=s.currentTarget;return s.key==="Enter"?m(t)||t.tagName==="SUMMARY"||t.tagName==="A":s.key===" "?m(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=B(function(t){var u=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=u,r=p(u,["clickOnEnter","clickOnSpace"]);const f=a.useRef(null),[M,R]=a.useState(!1);a.useEffect(()=>{f.current&&R(m(f.current))},[]);const[K,y]=a.useState(!1),l=a.useRef(!1),E=F(r),[g,w]=I(r,Q,!0),P=r.onKeyDown,U=_(e=>{P==null||P(e);const n=e.currentTarget;if(e.defaultPrevented||g||E||!O(e)||j(n)||n.isContentEditable)return;const o=k&&e.key==="Enter",i=c&&e.key===" ",d=e.key==="Enter"&&!k,h=e.key===" "&&!c;if(d||h){e.preventDefault();return}if(o||i){const b=D(e);if(o){if(!b){e.preventDefault();const q=e,x=p(q,["view"]),N=()=>T(n,x);Y()?H(n,"keyup",N):queueMicrotask(N)}}else i&&(l.current=!0,b||(e.preventDefault(),y(!0)))}}),S=r.onKeyUp,v=_(e=>{if(S==null||S(e),e.defaultPrevented||g||E||e.metaKey)return;const n=c&&e.key===" ";if(l.current&&n&&(l.current=!1,!D(e))){e.preventDefault(),y(!1);const o=e.currentTarget,i=e,d=p(i,["view"]);queueMicrotask(()=>T(o,d))}});return r=L(C(C({"data-active":K||void 0,type:M?"button":void 0},w),r),{ref:V(f,r.ref),onKeyDown:U,onKeyUp:v}),r=A(r),r});z(function(t){const u=W(t);return G(J,u)});export{W as u};
