import{w as ne}from"./~utils-BuKH_XhK.js";import{n as e,t as se,a as t}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as w}from"./index-Dr3kRIaJ.js";import{B as H}from"./Button-GPjBmsog.js";import{C as re}from"./Checkbox-3L_hKWRf.js";import{D as le,a as ae,b as ie,c as C,P as oe}from"./DropdownMenu-CavWPnff.js";import{I}from"./Icon-SCaGVORA.js";import{I as y}from"./IconButton-DMp7u8pv.js";import{F as ce,L as de}from"./Label-BYWRrVWG.js";import{S as ue,H as xe}from"./Select-ByZvr07_.js";import{T as q,a as he,b as E,c as pe}from"./Tabs-CdvRLEhK.js";import{T as L}from"./Text-BIOJgVYR.js";import{T as fe,a as me,b as be}from"./TextBox-Coy-k2EM.js";import{V as T}from"./VisuallyHidden-mupLk8qe.js";import{T as je,a as Ce}from"./Tree-CXiEolhb.js";import{p as M}from"./placeholder-BZbhP9Qz.js";import{p as ge,l as _e,d as Se,h as ve,m as Pe,a as Ie,s as K,f as ye}from"./state-inherited-dot-C3qYly_3.js";import{s as Ae}from"./visibility-show-xDtdrfyN.js";import{P as Me}from"./MTZPJQMC-CVivV6_0.js";import{u as Re,P as Ne}from"./BYC7LY2E-CerAE2iM.js";import"./index-jyeBNHV5.js";import"./KUU7WJ55-CvL3dvMd.js";import"./LVA2YJMS-BcAd7OG7.js";import"./ASMQKSDT-B4DAV8zs.js";import"./YV4JVR4I-xwnP9gdF.js";import"./XL7CSKGW-Cbj4nsUL.js";import"./Kbd-w5YbJL_k.js";import"./P2CTZE2T-0Rzru3XZ.js";import"./VEVQD5MH-CjUkblYO.js";import"./ITI7HKP4-DgilCbB6.js";import"./VGCJ63VH-DCVYONhf.js";import"./P4IRICAX-CKK7238k.js";import"./Tooltip-soHKzgPi.js";import"./~hooks-Wdjhtx2E.js";import"./ListItem-DeA1AzYL.js";function Te(s={}){const n=Re(s);return e.jsx(Me,{value:n,children:s.children})}const Be="_appLayout_5xq8x_5",De="_header_5xq8x_22",ke="_platformBar_5xq8x_32",ze="_logo_5xq8x_38",Le="_tools_5xq8x_48",we="_leftPanel_5xq8x_58",qe="_panelHeader_5xq8x_70",Ee="_panelTitleWrapper_5xq8x_78",Ke="_panelCaption_5xq8x_82",Fe="_shiftIconRight_5xq8x_86",Xe="_subheader_5xq8x_90",He="_subheaderTitle_5xq8x_101",Ge="_searchInput_5xq8x_106",Oe="_subheaderActions_5xq8x_110",We="_tabList_5xq8x_114",Ve="_emptyState_5xq8x_119",$e="_canvasWrapper_5xq8x_128",Ue="_canvas_5xq8x_128",Je="_splitter_5xq8x_165",Qe="_tabPanel_5xq8x_207",Ye="_tree_5xq8x_213",Ze="_action_5xq8x_217",et="_actionIcon_5xq8x_223",tt="_slider_5xq8x_234",nt="_popover_5xq8x_243",st="_filter_5xq8x_249",rt="_filterHeader_5xq8x_253",lt="_filters_5xq8x_260",at="_filterLabel_5xq8x_266",c={appLayout:Be,header:De,platformBar:ke,logo:ze,tools:Le,leftPanel:we,panelHeader:qe,panelTitleWrapper:Ee,panelCaption:Ke,shiftIconRight:Fe,subheader:Xe,subheaderTitle:He,searchInput:Ge,subheaderActions:Oe,tabList:We,emptyState:Ve,canvasWrapper:$e,canvas:Ue,splitter:Je,tabPanel:Qe,tree:Ye,action:Ze,actionIcon:et,slider:tt,popover:nt,filter:st,filterHeader:rt,filters:lt,filterLabel:at},G="Kiwi sandbox",nn=()=>[{title:G}],sn=ne(function(){const[n,r]=se(),l=n.get("tree")==="empty"?"epoch-2":"epoch-1",h=t.useCallback(i=>{r(u=>(i==="epoch-2"?u.set("tree","empty"):u.delete("tree"),u))},[r]),d=t.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),x=t.useId();return e.jsxs(it,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:c.panelHeader,children:[e.jsxs("div",{children:[e.jsx(T,{render:i=>e.jsx("label",{...i,htmlFor:x}),children:"Choose Model"}),e.jsx(ue,{className:c.panelTitleWrapper,children:e.jsx(xe,{id:x,variant:"ghost",defaultValue:l,onChange:i=>h(i.target.value),children:Object.entries(d).map(([i,u])=>e.jsx("option",{value:i,children:u},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(T,{render:i=>e.jsx("h2",{...i}),children:d[l]}),e.jsx("p",{className:c.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:c.actions,children:e.jsx(y,{className:c.shiftIconRight,icon:ge,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Ct,{children:e.jsxs(gt,{children:[e.jsx(bt,{}),e.jsx(q,{tabId:"simple",className:c.tabPanel,focusable:!1,children:e.jsx(F,{tree:l==="epoch-2"?"empty":"simple"})}),e.jsx(q,{tabId:"complex",className:c.tabPanel,focusable:!1,children:e.jsx(F,{tree:l==="epoch-2"?"empty":"complex"})})]})})]}),children:[e.jsxs("header",{className:c.header,children:[e.jsx("div",{className:c.logo,children:e.jsx(I,{href:M,size:"large"})}),e.jsx(L,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:G})]}),e.jsx("div",{className:c.platformBar,children:e.jsxs("div",{className:c.tools,children:[e.jsx(I,{href:M,size:"large"}),e.jsx(I,{href:M,size:"large"}),e.jsx(I,{href:M,size:"large"})]})}),e.jsx("div",{className:c.canvasWrapper,children:e.jsx("div",{className:c.canvas})})]})});function it(s){const{sliderProps:n,panelProps:r,panelMinSize:l,panelMaxSize:h,resizing:d}=dt({minSize:{px:256,pct:20},maxSize:{pct:30}}),x=t.useId();return e.jsxs("div",{className:c.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":h},children:[e.jsx("div",{...r,className:c.leftPanel,style:{position:"relative",...r.style},children:s.panelContent}),e.jsxs("div",{className:c.splitter,"data-resizing":d?"true":void 0,children:[e.jsx(T,{render:i=>e.jsx("label",{...i,htmlFor:x,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:x,type:"range",className:c.slider,...n})]}),s.children]})}function ot({children:s}){return e.jsx("div",{className:c.emptyState,children:s})}function ct(s,n,r){return Math.min(Math.max(s,n),r)}function dt(s){const{minSize:n,maxSize:r,onCollapse:l}=s,h=t.useId(),d=t.useRef(null),[x,i]=t.useState(void 0),[u,o]=t.useState(void 0),[p,m]=t.useState(void 0),[g,S]=t.useState(!1),[v,N]=t.useState(void 0),j=t.useMemo(()=>{if(n&&u)return Math.min(n.px,n.pct/100*u)},[n,u]),P=t.useMemo(()=>{if(j&&r&&u)return Math.max(j,r.pct/100*u)},[r,u,j]),A=t.useMemo(()=>{if(p==="smallest")return j??0;if(p==="largest")return P??0;if(x&&j&&P)return ct(x,j,P)},[x,j,P,p]);t.useEffect(()=>{const f=d.current;if(!f)return;const b=f.parentElement;if(!b)return;const _=new ResizeObserver(()=>{const D=b.getBoundingClientRect(),k=f.getBoundingClientRect();o(D.width),i(k.width)});return _.observe(b),_.observe(f),()=>{_.disconnect()}},[]);const $=t.useCallback(f=>{const b=d.current;if(!b)return;const _=b.getBoundingClientRect();N(_.width+f),m(void 0),S(!0)},[]),U=t.useCallback(f=>{const b=d.current;if(!b)return;const _=b.parentElement;if(!_)return;const D=_.getBoundingClientRect(),k=f*(D.width*.005),te=b.getBoundingClientRect();N(te.width+k),m(void 0)},[]),J=t.useCallback(()=>{d.current&&(N(void 0),S(!1))},[]),{moveableProps:R}=ut({onMove:$,onMoveEnd:J,onKeyMove:U}),Q=t.useMemo(()=>({...R,onKeyDown:f=>{var b;if((b=R.onKeyDown)==null||b.call(R,f),!f.defaultPrevented)switch(f.key){case"Enter":f.preventDefault(),l==null||l();break;case"Home":f.preventDefault(),m("smallest");break;case"End":f.preventDefault(),m("largest");break}},onChange:f=>{if(g)return;const b=Number(f.target.value);N(b)},value:A===void 0?0:Math.floor(A),min:j===void 0?void 0:Math.floor(j),max:P===void 0?void 0:Math.floor(P)}),[R,A,j,P,l,g]),Y=t.useMemo(()=>({style:{WebkitUserSelect:v===void 0?void 0:"none"},id:h,ref:d}),[h,v]),Z=j===void 0?void 0:`${Math.floor(j)}px`,ee=t.useMemo(()=>{if(v!==void 0&&r!==void 0&&p===void 0)return`min(${Math.floor(v)}px, ${r.pct}%)`;if(A!==void 0)return`${Math.floor(A)}px`},[r,v,A,p]);return{sliderProps:Q,panelProps:Y,panelMinSize:Z,panelMaxSize:ee,resizing:g}}function ut(s){const{onMove:n,onMoveEnd:r,onKeyMove:l}=s,h=t.useRef(null),d=t.useRef(void 0),x=t.useRef(void 0),i=t.useCallback(()=>{x.current!==void 0&&(x.current=void 0,r==null||r())},[r]);return{moveableProps:t.useMemo(()=>({onPointerDown:o=>{if(o.button!==0||o.ctrlKey)return;const p=h.current;if(!p)return;const m=p.getBoundingClientRect(),g=o.clientX-m.left;x.current=g,o.preventDefault(),p.setPointerCapture(o.pointerId)},onPointerMove:o=>{const p=x.current;if(p===void 0)return;const m=h.current;if(!m)return;const g=m.getBoundingClientRect(),S=o.clientX-p-g.left;o.preventDefault(),n==null||n(S)},onPointerUp:i,onPointerCancel:i,onKeyDown:o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowLeft":o.preventDefault(),l==null||l(-1);break;case"ArrowRight":o.preventDefault(),l==null||l(1);break}},ref:o=>{var m;if(h.current=o,(m=d.current)==null||m.call(d),d.current=void 0,!o)return;const p=g=>{g.preventDefault()};o.addEventListener("touchstart",p),d.current=()=>{o.removeEventListener("touchstart",p)}}}),[l,n,i])}}const O=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function F({tree:s}){const[n,r]=t.useState(),[l,h]=t.useState([]),d=t.useCallback(i=>{h(u=>u.includes(i)?u.filter(o=>o!==i):[...u,i])},[]),x=t.useMemo(()=>({selected:n,setSelected:r,hidden:l,toggleHidden:d}),[l,n,d]);return s==="empty"?e.jsxs(ot,{children:[e.jsx(L,{children:"No layers"}),e.jsx(H,{children:"Create a layer"})]}):e.jsx(O.Provider,{value:x,children:e.jsx(je,{className:c.tree,children:e.jsx(xt,{tree:s})})})}const z={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function xt({tree:s}){return s==="complex"?e.jsx(ft,{}):s==="simple"?e.jsx(pt,{}):null}function W({item:s}){var n;return e.jsx(a,{label:s.label,children:(n=s.items)==null?void 0:n.map(r=>e.jsx(W,{item:r},r.label))})}function ht({tree:s,activeFilters:n}){var r;return(r=s.items)==null?void 0:r.map(l=>n.length>0&&(!l.type||!n.includes(l.type))?null:e.jsx(W,{item:l},l.label))}function pt(){const s=t.useContext(B);return e.jsx(ht,{tree:z,activeFilters:s.filters})}function ft(){return e.jsxs(e.Fragment,{children:[e.jsxs(a,{label:"ITC_Master",children:[e.jsx(a,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(a,{label:"002_Substation_A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(a,{label:"007-aa_master.dgn",children:[e.jsx(a,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(a,{label:"A-CLNG-LITE-A"})}),e.jsx(a,{label:"A-CLNG-TILE",children:e.jsxs(a,{label:"A-DOOR-2D-PLAN",children:[e.jsx(a,{label:"P00003 [2-KA62]",children:e.jsx(a,{label:"Cell [2-KA63]",children:e.jsxs(a,{label:"Cell [2-KA64]",children:[e.jsx(a,{label:"Complex Chain [2-KA6A]"}),e.jsx(a,{label:"Complex Chain [2-KA6B]"}),e.jsx(a,{label:"Complex Chain [2-KA6C]"}),e.jsx(a,{label:"Complex Chain [2-KA6D]"}),e.jsx(a,{label:"Complex Chain [2-KA6E]"}),e.jsx(a,{label:"Complex Chain [2-KA6F]"}),e.jsx(a,{label:"Complex Chain [2-KA6G]"}),e.jsx(a,{label:"Complex Chain [2-KA6H]"}),e.jsx(a,{label:"Complex Chain [2-KA61]"}),e.jsx(a,{label:"Complex Chain [2-KA65]"}),e.jsx(a,{label:"Complex Chain [2-KA66]"}),e.jsx(a,{label:"Complex Chain [2-KA67]"}),e.jsx(a,{label:"Complex Chain [2-KA68]"}),e.jsx(a,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(a,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA98-A]"})}),e.jsx(a,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(a,{label:"ITC_Main"})]})}const X=t.createContext({selected:!1,hidden:!1});function a(s){const n=t.useContext(O),r=t.useContext(X),l=t.useId(),[h,d]=t.useState(s.defaultCollapsed===void 0?!0:!s.defaultCollapsed),x=t.Children.count(s.children)>0,i=t.useMemo(()=>r.hidden?!0:n.hidden.includes(l),[l,n.hidden,r.hidden]),u=r.selected||l===n.selected,o=t.useCallback(p=>{n.setSelected(p?l:void 0)},[l,n]);return e.jsx(X.Provider,{value:t.useMemo(()=>({selected:u,hidden:i}),[i,u]),children:e.jsx(Ce,{expanded:x?h:void 0,onExpandedChange:d,selected:u,onSelectedChange:o,icon:e.jsx(I,{href:M,style:{display:"inline"}}),label:s.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(y,{className:c.action,icon:_e,label:"Lock",variant:"ghost","aria-hidden":i}),r.hidden?e.jsx("span",{className:c.actionIcon,children:e.jsx(I,{href:Se})}):e.jsx(y,{className:c.action,icon:i?ve:Ae,label:i?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(l)}}),e.jsx(mt,{hidden:i})]}),children:h?s.children:void 0})})}function mt({hidden:s}){return e.jsxs(le,{children:[e.jsx(ae,{className:c.action,"aria-hidden":s,render:e.jsx(y,{icon:Pe,label:"More",variant:"ghost"})}),e.jsxs(ie,{style:{minInlineSize:164},children:[e.jsx(C,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(C,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(C,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(C,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(C,{shortcuts:"]",children:"Bring to front"}),e.jsx(C,{shortcuts:"[",children:"Send to back"}),e.jsx(C,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(C,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(C,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(C,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(C,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(C,{shortcuts:"I",children:"Isolate object"})]})]})}function bt(){const{selectedId:s}=t.useContext(V),{filters:n,filtered:r}=t.useContext(B),[l,h]=t.useState(!1),d=t.useRef(null),x=t.useMemo(()=>{if(s!=="simple"||n.length===0)return;const o=z.items.filter(m=>m.type?n.includes(m.type):!1);function p(m){return m.reduce((g,S)=>{const v=S.items?p(S.items):0;return g+1+v},0)}return p(o)},[n,s]),i=t.useRef(null),u=l?e.jsxs(e.Fragment,{children:[e.jsx(jt,{filters:s==="simple"?z.filters:[]}),e.jsx(y,{className:c.shiftIconRight,icon:Ie,label:"Close",variant:"ghost",onClick:()=>{var o;w.flushSync(()=>h(!1)),(o=i.current)==null||o.focus()}})]}):e.jsx(y,{className:c.shiftIconRight,icon:K,label:"Search",variant:"ghost",onClick:()=>{var o;w.flushSync(()=>h(!0)),(o=d.current)==null||o.focus()}});return e.jsxs("div",{className:c.subheader,children:[e.jsx(T,{"aria-live":r?"polite":"off","aria-atomic":!0,children:x===void 0?"Showing all tree items":`Showing ${x} tree items`}),l?void 0:e.jsxs(he,{className:c.tabList,tone:"accent",ref:i,children:[e.jsx(E,{id:"simple",children:"Simple"}),e.jsx(E,{id:"complex",children:"Complex"})]}),l?e.jsxs(fe,{className:c.searchInput,children:[e.jsx(me,{href:K}),e.jsx(be,{placeholder:"Search",ref:d})]}):null,e.jsx("div",{className:c.subheaderActions,children:u})]})}function jt({filters:s}){const n=t.useContext(B);return e.jsxs(Te,{placement:"top-start",children:[e.jsx(oe,{render:e.jsx(y,{icon:ye,label:"Filter",variant:"ghost",disabled:s.length===0,isActive:n.filters.length>0})}),e.jsxs(Ne,{className:c.popover,portal:!0,children:[e.jsxs("div",{className:c.filterHeader,children:[e.jsx(L,{variant:"body-sm",className:c.filter,children:"Filter"}),n.filters.length>0&&e.jsx(H,{variant:"ghost",onClick:()=>{n.clearFilters()},children:"Reset"})]}),e.jsx("div",{className:c.filters,children:s.map(r=>{const l=n.filters.includes(r);return e.jsxs(ce,{children:[e.jsx(re,{onChange:()=>{n.toggleFilter(r)},checked:l}),e.jsxs(de,{className:c.filterLabel,children:[e.jsx(I,{href:M}),r]})]},r)})})]})]})}function Ct(s){const[n,r]=t.useState(!1),[l,h]=t.useState([]),d=t.useCallback(i=>{h(u=>u.includes(i)?u.filter(o=>o!==i):[...u,i]),r(!0)},[]),x=t.useCallback(()=>{h([]),r(!0)},[]);return e.jsx(B.Provider,{value:t.useMemo(()=>({filters:l,filtered:n,toggleFilter:d,clearFilters:x}),[l,n,d,x]),children:s.children})}function gt(s){const[n,r]=t.useState(void 0);return e.jsx(V.Provider,{value:t.useMemo(()=>({selectedId:n??""}),[n]),children:e.jsx(pe,{setSelectedId:r,selectedId:n,children:s.children})})}const B=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}}),V=t.createContext({selectedId:""});export{sn as default,nn as meta};
