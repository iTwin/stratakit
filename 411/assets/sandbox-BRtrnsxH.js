import{w as ie}from"./LMDWO4NN-C51_mRdy.js";import{t as le,a as n,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as O}from"./index-Dr3kRIaJ.js";import{B as oe}from"./Button-BDThzTLR.js";import{D as U,a as Z,b as J,c as I,d as ce}from"./DropdownMenu-C9n7pRXo.js";import{I as R}from"./Icon-DHyQLpiG.js";import{I as N}from"./IconButton-BYdnlU1F.js";import{S as de,H as ue}from"./Select-Dq8nQn7C.js";import{T as G,a as fe,b as H,c as pe}from"./Tabs-lsZ7ZotU.js";import{T as K}from"./Text-CeOMu6x9.js";import{T as me,a as he,b as xe}from"./TextBox-Bp_puRpt.js";import{V as B}from"./VisuallyHidden-CldqyofG.js";import{T as be,a as Ce,b as D,c as X,d as L}from"./Tree-CZN1dC8P.js";import{p as P}from"./placeholder-CN79J7rt.js";import{p as je,l as ge,h as Se,m as _e,s as W,d as Ie,f as Ae}from"./visibility-hide-BbroGeXp.js";import{s as ve}from"./visibility-show-B6yHmr23.js";import"./index-jyeBNHV5.js";import"./X5NMLKT6-CF4rYh6u.js";import"./KUU7WJ55-D3HZtQ3a.js";import"./LVA2YJMS-BfjlbvRt.js";import"./~utils-Cznddkjz.js";import"./XL7CSKGW-DyJHwI7D.js";import"./Kbd-Bfau54n-.js";import"./~hooks-jA6mLbHf.js";import"./YV4JVR4I-BIG7SmE9.js";import"./P2CTZE2T-B-sWCdSQ.js";import"./RZ4GPYOB-Bz8g_oo0.js";import"./BYC7LY2E-BxKc6YiQ.js";import"./VGCJ63VH-rGTei5h5.js";import"./XX67R432-Bv9x3_cY.js";import"./MTZPJQMC-BU0naf6q.js";import"./ITI7HKP4-JdhCx63u.js";import"./C3IKGW5T-DEtV1wWG.js";import"./VEVQD5MH-BTci7YJt.js";import"./P4IRICAX-CacsgStX.js";import"./ASMQKSDT-D3gVBJb5.js";import"./BOLVLGVE-C-Pift6v.js";import"./Tooltip-CoaxzYfH.js";import"./tooltip-anchor-oD8_qmTK.js";import"./Field-CMPyXgSP.js";import"./ListItem-C1Ywf02b.js";import"./~utils-KZaJJO_T.js";import"./~hooks-oFT9fZS9.js";const ye="_appLayout_cf09u_5",Pe="_header_cf09u_22",Me="_platformBar_cf09u_32",Re="_logo_cf09u_38",Te="_tools_cf09u_48",Ne="_leftPanel_cf09u_58",Be="_panelHeader_cf09u_70",ze="_panelTitleWrapper_cf09u_78",ke="_panelCaption_cf09u_82",Ee="_shiftIconRight_cf09u_86",we="_subheader_cf09u_90",Le="_subheaderTitle_cf09u_101",De="_searchInput_cf09u_106",Ke="_subheaderActions_cf09u_110",Fe="_tabList_cf09u_114",Oe="_emptyState_cf09u_119",Ge="_canvasWrapper_cf09u_128",He="_canvas_cf09u_128",Xe="_splitter_cf09u_165",We="_tabPanel_cf09u_211",Ve="_tree_cf09u_219",$e="_action_cf09u_223",Ue="_actionIcon_cf09u_229",Ze="_slider_cf09u_240",h={appLayout:ye,header:Pe,platformBar:Me,logo:Re,tools:Te,leftPanel:Ne,panelHeader:Be,panelTitleWrapper:ze,panelCaption:ke,shiftIconRight:Ee,subheader:we,subheaderTitle:Le,searchInput:De,subheaderActions:Ke,tabList:Fe,emptyState:Oe,canvasWrapper:Ge,canvas:He,splitter:Xe,tabPanel:We,tree:Ve,action:$e,actionIcon:Ue,slider:Ze},q="Kiwi sandbox",Yt=()=>[{title:q}],en=ie(function(){const[r,s]=le(),o=r.get("tree")==="empty"?"epoch-2":"epoch-1",b=n.useCallback(c=>{s(p=>(c==="epoch-2"?p.set("tree","empty"):p.delete("tree"),p))},[s]),u=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),d=n.useId();return e.jsxs(Je,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:h.panelHeader,children:[e.jsxs("div",{children:[e.jsx(B,{render:c=>e.jsx("label",{...c,htmlFor:d}),children:"Choose Model"}),e.jsx(de,{className:h.panelTitleWrapper,children:e.jsx(ue,{id:d,variant:"ghost",defaultValue:o,onChange:c=>b(c.target.value),children:Object.entries(u).map(([c,p])=>e.jsx("option",{value:c,children:p},c))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(B,{render:c=>e.jsx("h2",{...c}),children:u[o]}),e.jsx("p",{className:h.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:h.actions,children:e.jsx(N,{className:h.shiftIconRight,icon:je,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(ct,{children:e.jsxs(ot,{children:[e.jsx(it,{}),e.jsx(G,{tabId:"simple",className:h.tabPanel,focusable:!1,children:o==="epoch-2"?e.jsx(V,{}):e.jsx($,{tree:"simple"})}),e.jsx(G,{tabId:"complex",className:h.tabPanel,focusable:!1,children:o==="epoch-2"?e.jsx(V,{}):e.jsx($,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:h.header,children:[e.jsx("div",{className:h.logo,children:e.jsx(R,{href:P,size:"large"})}),e.jsx(K,{render:c=>e.jsx("h1",{...c}),variant:"body-md",children:q})]}),e.jsx("div",{className:h.platformBar,children:e.jsxs("div",{className:h.tools,children:[e.jsx(R,{href:P,size:"large"}),e.jsx(R,{href:P,size:"large"}),e.jsx(R,{href:P,size:"large"})]})}),e.jsx("div",{className:h.canvasWrapper,children:e.jsx("div",{className:h.canvas})})]})});function Je(a){const{sliderProps:r,panelProps:s,panelMinSize:o,panelMaxSize:b,resizing:u}=Ye({minSize:{px:256,pct:20},maxSize:{pct:30}}),d=n.useId();return e.jsxs("div",{className:h.appLayout,style:{"--_panel-min-size":o,"--_panel-max-size":b},children:[e.jsx("div",{...s,className:h.leftPanel,style:{position:"relative",...s.style},children:a.panelContent}),e.jsxs("div",{className:h.splitter,"data-resizing":u?"true":void 0,children:[e.jsx(B,{render:c=>e.jsx("label",{...c,htmlFor:d,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:d,type:"range",className:h.slider,...r})]}),a.children]})}function V(){return e.jsxs("div",{className:h.emptyState,children:[e.jsx(K,{variant:"body-sm",children:"No layers"}),e.jsx(oe,{children:"Create a layer"})]})}function qe(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{variant:"body-sm",children:"No results found"})})}function Qe(a,r,s){return Math.min(Math.max(a,r),s)}function Ye(a){const{minSize:r,maxSize:s,onCollapse:o}=a,b=n.useId(),u=n.useRef(null),[d,c]=n.useState(void 0),[p,i]=n.useState(void 0),[f,x]=n.useState(void 0),[m,g]=n.useState(!1),[A,y]=n.useState(void 0),l=n.useMemo(()=>{if(r&&p)return Math.min(r.px,r.pct/100*p)},[r,p]),S=n.useMemo(()=>{if(l&&s&&p)return Math.max(l,s.pct/100*p)},[s,p,l]),_=n.useMemo(()=>{if(f==="smallest")return l??0;if(f==="largest")return S??0;if(d&&l&&S)return Qe(d,l,S)},[d,l,S,f]);n.useEffect(()=>{const C=u.current;if(!C)return;const j=C.parentElement;if(!j)return;const v=new ResizeObserver(()=>{const E=j.getBoundingClientRect(),w=C.getBoundingClientRect();i(E.width),c(w.width)});return v.observe(j),v.observe(C),()=>{v.disconnect()}},[]);const T=n.useCallback(C=>{const j=u.current;if(!j)return;const v=j.getBoundingClientRect();y(v.width+C),x(void 0),g(!0)},[]),k=n.useCallback(C=>{const j=u.current;if(!j)return;const v=j.parentElement;if(!v)return;const E=v.getBoundingClientRect(),w=C*(E.width*.005),ae=j.getBoundingClientRect();y(ae.width+w),x(void 0)},[]),ee=n.useCallback(()=>{u.current&&(y(void 0),g(!1))},[]),{moveableProps:M}=et({onMove:T,onMoveEnd:ee,onKeyMove:k}),te=n.useMemo(()=>({...M,onKeyDown:C=>{var j;if((j=M.onKeyDown)==null||j.call(M,C),!C.defaultPrevented)switch(C.key){case"Enter":C.preventDefault(),o==null||o();break;case"Home":C.preventDefault(),x("smallest");break;case"End":C.preventDefault(),x("largest");break}},onChange:C=>{if(m)return;const j=Number(C.target.value);y(j)},value:_===void 0?0:Math.floor(_),min:l===void 0?void 0:Math.floor(l),max:S===void 0?void 0:Math.floor(S)}),[M,_,l,S,o,m]),ne=n.useMemo(()=>({style:{WebkitUserSelect:A===void 0?void 0:"none"},id:b,ref:u}),[b,A]),se=l===void 0?void 0:`${Math.floor(l)}px`,re=n.useMemo(()=>{if(A!==void 0&&s!==void 0&&f===void 0)return`min(${Math.floor(A)}px, ${s.pct}%)`;if(_!==void 0)return`${Math.floor(_)}px`},[s,A,_,f]);return{sliderProps:te,panelProps:ne,panelMinSize:se,panelMaxSize:re,resizing:m}}function et(a){const{onMove:r,onMoveEnd:s,onKeyMove:o}=a,b=n.useRef(null),u=n.useRef(void 0),d=n.useRef(void 0),c=n.useCallback(()=>{d.current!==void 0&&(d.current=void 0,s==null||s())},[s]);return{moveableProps:n.useMemo(()=>({onPointerDown:i=>{if(i.button!==0||i.ctrlKey)return;const f=b.current;if(!f)return;const x=f.getBoundingClientRect(),m=i.clientX-x.left;d.current=m,i.preventDefault(),f.setPointerCapture(i.pointerId)},onPointerMove:i=>{const f=d.current;if(f===void 0)return;const x=b.current;if(!x)return;const m=x.getBoundingClientRect(),g=i.clientX-f-m.left;i.preventDefault(),r==null||r(g)},onPointerUp:c,onPointerCancel:c,onKeyDown:i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowLeft":i.preventDefault(),o==null||o(-1);break;case"ArrowRight":i.preventDefault(),o==null||o(1);break}},ref:i=>{var x;if(b.current=i,(x=u.current)==null||x.call(u),u.current=void 0,!i)return;const f=m=>{m.preventDefault()};i.addEventListener("touchstart",f),u.current=()=>{i.removeEventListener("touchstart",f)}}}),[o,r,c])}}const t=(()=>{let a=0;return r=>({id:`${a++}`,label:`Tree Item ${a}`,items:[],expanded:!0,...r})})(),Q={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},tt={filters:[],items:[t({label:"ITC_Master",items:[t({label:"002_Substation",expanded:!1,items:[t({label:"002_Substation_A"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-COLS",description:"Columns",expanded:!1,items:[t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-JOIS-ENVL",description:"Bar Joist: Envelopes"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-SLAB-CONC",description:"Slabs: Concrete"}),t({label:"003-BENSTR-ZO-LG2-M3-S-00001 - S-BEAM-PURL",expanded:!1,error:"simple",description:"Columns: concrete"}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,error:"complex",items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A"})]}),t({label:"007-aa_master.dgn",items:[t({label:"A-CLNG-LITE",expanded:!1,items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",items:[t({label:"A-DOOR-2D-PLAN",items:[t({label:"P00003 [2-KA62]",items:[t({label:"Cell [2-KA63]",items:[t({label:"Cell [2-KA64]",items:[t({label:"Complex Chain [2-KA6A]"}),t({label:"Complex Chain [2-KA6B]"}),t({label:"Complex Chain [2-KA6C]"}),t({label:"Complex Chain [2-KA6D]"}),t({label:"Complex Chain [2-KA6E]"}),t({label:"Complex Chain [2-KA6F]"}),t({label:"Complex Chain [2-KA6G]"}),t({label:"Complex Chain [2-KA6H]"}),t({label:"Complex Chain [2-KA61]"}),t({label:"Complex Chain [2-KA65]"}),t({label:"Complex Chain [2-KA66]"}),t({label:"Complex Chain [2-KA67]"}),t({label:"Complex Chain [2-KA68]"}),t({label:"Complex Chain [2-KA69]"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA86]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA98]",expanded:!1,items:[t({label:"P00003 [2-KA98-A]"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,items:[t({label:"P00003 [2-KAAA-A]"})]})]})]})]})]})]};function nt({items:a,filters:r,search:s}){const o=n.useMemo(()=>r.length===0?a:a.reduce((d,c)=>(!c.type||!r.includes(c.type)||d.push(c),d),[]),[a,r]),b=n.useMemo(()=>{function d(c){return c.reduce((p,i)=>{const f=d(i.items??[]);return(i.label.toLowerCase().includes(s.toLowerCase())||f.length>0)&&p.push({...i,items:f}),p},[])}return s===""?o:d(o)},[o,s]),u=n.useMemo(()=>{if(r.length===0&&s==="")return;function d(c){return c.reduce((p,i)=>{const f=i.items?d(i.items):0;return p+1+f},0)}return d(b)},[b,r,s]);return{filteredTree:b,itemCount:u}}function st(a,r,s){return n.useMemo(()=>{function o(b,u,d,c,p){const i=[];let f=1;for(const x of b){const m=x.id===r||c,g=s.includes(x.id)||p;i.push({...x,level:d,parentItem:u,selected:m,hidden:g,parentHidden:p,position:f++,size:b.length}),x.expanded&&i.push(...o(x.items,x,d+1,m,g))}return i}return o(a,void 0,1,!1,!1)},[a,r,s])}function Y(a,r){for(const s of a){if(s.id===r)return s;const o=Y(s.items,r);if(o)return o}}function $({tree:a}){const{selectedId:r}=n.useContext(F),{filters:s,search:o,setItemCount:b}=n.useContext(z),[u,d]=n.useState(),[c,p]=n.useState([]),i=n.useCallback(l=>{p(S=>S.includes(l)?S.filter(_=>_!==l):[...S,l])},[]),[f,x]=n.useState(()=>a==="complex"?tt.items:Q.items),{filteredTree:m,itemCount:g}=nt({items:f,filters:s,search:o}),A=st(m,u,c);n.useEffect(()=>{a===r&&b(g)},[a,r,b,g]);const y=n.useDeferredValue(A);return y.length===0?e.jsx(qe,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(be,{className:h.tree,children:y.map(l=>e.jsx(Ce,{label:l.label,description:l.description,"aria-level":l.level,"aria-posinset":l.position,"aria-setsize":l.size,selected:l.selected,onSelectedChange:()=>{if(u===l.id){d(void 0);return}d(l.id)},expanded:l.items.length===0&&!l.error?void 0:l.expanded,onExpandedChange:S=>{x(_=>{const T=Y(_,l.id);if(!T)return _;const k=[..._];return T.expanded=S,k})},icon:e.jsx(R,{href:P,style:{display:"inline"}}),actions:[e.jsx(D,{className:h.action,icon:ge,label:"Lock","aria-hidden":l.hidden},"lock"),e.jsx(D,{className:h.action,icon:l.hidden?Se:ve,label:l.hidden?"Show":"Hide",visible:l.hidden?!0:void 0,onClick:()=>{i(l.id)}},"visibility"),e.jsx(at,{hidden:l.hidden},"more")],error:l.error&&l.expanded?e.jsx(rt,{error:l.error}):void 0},l.id))})})}function rt({error:a}){if(a==="simple")return e.jsx(X,{label:"Failed to create hierarchy",icon:P,actions:[e.jsx(L,{children:"Retry"},"retry")]});if(a==="complex")return e.jsx(X,{label:"The hierarchy exceeds 1000 items. Provide additional filtering or increase the limit.",icon:P,actions:[e.jsx(L,{children:"Add filter"},"add"),e.jsx(L,{children:"Increase limit"},"increase")]})}function at({hidden:a}){return e.jsxs(U,{children:[e.jsx(Z,{className:h.action,"aria-hidden":a,render:e.jsx(D,{icon:_e,label:"More"})}),e.jsxs(J,{style:{minInlineSize:164},children:[e.jsx(I,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(I,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(I,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(I,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(I,{shortcuts:"]",children:"Bring to front"}),e.jsx(I,{shortcuts:"[",children:"Send to back"}),e.jsx(I,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(I,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(I,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(I,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(I,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(I,{shortcuts:"I",children:"Isolate object"})]})]})}function it(){const{selectedId:a}=n.useContext(F),{itemCount:r,filtered:s,clearFilters:o,search:b,setSearch:u}=n.useContext(z),[d,c]=n.useState(!1),p=n.useRef(null),i=n.useRef(null),f=d?e.jsxs(e.Fragment,{children:[e.jsx(lt,{filters:a==="simple"?Q.filters:[]}),e.jsx(N,{className:h.shiftIconRight,icon:Ie,label:"Close",variant:"ghost",onClick:()=>{var m;u(""),o(),O.flushSync(()=>c(!1)),(m=i.current)==null||m.focus()}})]}):e.jsx(N,{className:h.shiftIconRight,icon:W,label:"Search",variant:"ghost",onClick:()=>{var m;O.flushSync(()=>c(!0)),(m=p.current)==null||m.focus()}}),x=n.useMemo(()=>{if(s)return r===void 0?"Showing all tree items":`Showing ${r} tree items`},[s,r]);return e.jsxs("div",{className:h.subheader,children:[e.jsx(B,{"aria-live":"polite","aria-atomic":!0,children:x}),d?void 0:e.jsxs(fe,{className:h.tabList,tone:"accent",ref:i,children:[e.jsx(H,{id:"simple",children:"Simple"}),e.jsx(H,{id:"complex",children:"Complex"})]}),d?e.jsxs(me,{className:h.searchInput,children:[e.jsx(he,{href:W}),e.jsx(xe,{placeholder:"Search",ref:p,onChange:m=>{u(m.target.value)},value:b})]}):null,e.jsx("div",{className:h.subheaderActions,children:f})]})}function lt({filters:a}){const r=n.useContext(z);return e.jsxs(U,{children:[e.jsx(Z,{render:e.jsx(N,{icon:Ae,label:"Filter",variant:"ghost",disabled:a.length===0,isActive:r.filters.length>0})}),e.jsx(J,{children:a.map(s=>{const o=r.filters.includes(s);return e.jsx(ce,{name:s,checked:o,onChange:()=>{r.toggleFilter(s)},children:s},s)})})]})}function ot(a){const[r,s]=n.useState(!1),[o,b]=n.useState([]),[u,d]=n.useState(""),[c,p]=n.useState(void 0),i=n.useCallback(m=>{b(g=>g.includes(m)?g.filter(A=>A!==m):[...g,m]),s(!0)},[]),f=n.useCallback(()=>{b([]),s(!0)},[]),x=n.useCallback(m=>{d(m),s(!0)},[]);return e.jsx(z.Provider,{value:n.useMemo(()=>({filters:o,filtered:r,toggleFilter:i,clearFilters:f,search:u,setSearch:x,itemCount:c,setItemCount:p}),[o,r,i,f,u,x,c]),children:a.children})}function ct(a){const[r,s]=n.useState(void 0);return e.jsx(F.Provider,{value:n.useMemo(()=>({selectedId:r??""}),[r]),children:e.jsx(pe,{setSelectedId:s,selectedId:r,children:a.children})})}const z=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),F=n.createContext({selectedId:""});export{en as default,Yt as meta};
