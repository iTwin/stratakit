import{w as te}from"./~utils-BuKH_XhK.js";import{n as e,a as t,t as ne}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as B}from"./index-Dr3kRIaJ.js";import{B as X}from"./Button-GPjBmsog.js";import{C as se}from"./Checkbox-3L_hKWRf.js";import{D as re,a as le,b as ae,c as g,P as ie}from"./DropdownMenu-CZTKCBPl.js";import{I as k}from"./Icon-C4TuYIIj.js";import{I as w}from"./IconButton-eHs8s6It.js";import{F as oe,L as ce}from"./Label-BYWRrVWG.js";import{T as D,a as de,b as L,c as ue}from"./Tabs-MasuIejo.js";import{T}from"./Text-BIOJgVYR.js";import{T as he,a as fe,b as pe}from"./TextBox-B0cuxJYh.js";import{V as me}from"./VisuallyHidden-mupLk8qe.js";import{T as xe,a as be}from"./Tree-BQ3O-1Ij.js";import{p as A}from"./placeholder-B0Trjylx.js";import{p as je,l as Ce,d as ge,h as _e,m as Se,s as K,a as ve,f as Pe}from"./state-inherited-dot-Bf76G3Ac.js";import{s as ke}from"./visibility-show-CDU1Cv5M.js";import{P as we}from"./MTZPJQMC-DT28YYE-.js";import{u as ze,P as Ae}from"./BYC7LY2E-DKo1zaZ7.js";import"./index-jyeBNHV5.js";import"./KUU7WJ55-CvL3dvMd.js";import"./LVA2YJMS-BcAd7OG7.js";import"./ASMQKSDT-B4DAV8zs.js";import"./YV4JVR4I-xwnP9gdF.js";import"./XL7CSKGW-Cbj4nsUL.js";import"./Kbd-w5YbJL_k.js";import"./P2CTZE2T-DBUuQwha.js";import"./VEVQD5MH-soVqWsxl.js";import"./ITI7HKP4-CcxlWYYM.js";import"./VGCJ63VH-BrqDw1CG.js";import"./P4IRICAX-b2s1pdgp.js";import"./Tooltip-CHa6GVOF.js";import"./~hooks-CeXQBooN.js";import"./ListItem-DeA1AzYL.js";function Ie(s={}){const n=ze(s);return e.jsx(we,{value:n,children:s.children})}const Me="_appLayout_khzwh_5",ye="_header_khzwh_22",Re="_platformBar_khzwh_32",Ne="_logo_khzwh_38",Te="_tools_khzwh_48",Be="_leftPanel_khzwh_58",De="_panelHeader_khzwh_70",Le="_panelTitle_khzwh_78",Ke="_panelCaption_khzwh_84",Ee="_shiftIconRight_khzwh_88",Fe="_subheader_khzwh_92",Xe="_subheaderTitle_khzwh_103",Ge="_searchInput_khzwh_108",He="_subheaderActions_khzwh_112",Oe="_tabList_khzwh_116",Ve="_emptyState_khzwh_121",$e="_canvasWrapper_khzwh_130",We="_canvas_khzwh_130",Ue="_splitter_khzwh_167",qe="_tabPanel_khzwh_209",Je="_tree_khzwh_215",Qe="_action_khzwh_219",Ye="_actionIcon_khzwh_227",Ze="_slider_khzwh_238",et="_popover_khzwh_247",tt="_filter_khzwh_253",nt="_filterHeader_khzwh_257",st="_filters_khzwh_264",rt="_filterLabel_khzwh_270",o={appLayout:Me,header:ye,platformBar:Re,logo:Ne,tools:Te,leftPanel:Be,panelHeader:De,panelTitle:Le,panelCaption:Ke,shiftIconRight:Ee,subheader:Fe,subheaderTitle:Xe,searchInput:Ge,subheaderActions:He,tabList:Oe,emptyState:Ve,canvasWrapper:$e,canvas:We,splitter:Ue,tabPanel:qe,tree:Je,action:Qe,actionIcon:Ye,slider:Ze,popover:et,filter:tt,filterHeader:nt,filters:st,filterLabel:rt},G="Kiwi sandbox",Zt=()=>[{title:G}],en=te(function(){return e.jsxs(lt,{panelContent:e.jsx(jt,{children:e.jsxs(bt,{children:[e.jsxs("div",{className:o.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(w,{className:o.shiftIconRight,icon:je,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(mt,{}),e.jsx(D,{tabId:"simple",className:o.tabPanel,focusable:!1,children:e.jsx(E,{tree:"simple"})}),e.jsx(D,{tabId:"complex",className:o.tabPanel,focusable:!1,children:e.jsx(E,{tree:"complex"})})]})}),children:[e.jsxs("header",{className:o.header,children:[e.jsx("div",{className:o.logo,children:e.jsx(k,{href:A,size:"large"})}),e.jsx(T,{render:n=>e.jsx("h1",{...n}),variant:"body-md",children:G})]}),e.jsx("div",{className:o.platformBar,children:e.jsxs("div",{className:o.tools,children:[e.jsx(k,{href:A,size:"large"}),e.jsx(k,{href:A,size:"large"}),e.jsx(k,{href:A,size:"large"})]})}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})});function lt(s){const{sliderProps:n,panelProps:r,panelMinSize:l,panelMaxSize:p,resizing:u}=ot({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":p},children:[e.jsx("div",{...r,className:o.leftPanel,style:{position:"relative",...r.style},children:s.panelContent}),e.jsx("div",{className:o.splitter,"data-resizing":u?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...n})}),s.children]})}function at({children:s}){return e.jsx("div",{className:o.emptyState,children:s})}function it(s,n,r){return Math.min(Math.max(s,n),r)}function ot(s){const{minSize:n,maxSize:r,onCollapse:l}=s,p=t.useId(),u=t.useRef(null),[m,c]=t.useState(void 0),[h,i]=t.useState(void 0),[d,f]=t.useState(void 0),[j,_]=t.useState(!1),[v,y]=t.useState(void 0),C=t.useMemo(()=>{if(n&&h)return Math.min(n.px,n.pct/100*h)},[n,h]),P=t.useMemo(()=>{if(C&&r&&h)return Math.max(C,r.pct/100*h)},[r,h,C]),z=t.useMemo(()=>{if(d==="smallest")return C??0;if(d==="largest")return P??0;if(m&&C&&P)return it(m,C,P)},[m,C,P,d]);t.useEffect(()=>{const x=u.current;if(!x)return;const b=x.parentElement;if(!b)return;const S=new ResizeObserver(()=>{const R=b.getBoundingClientRect(),N=x.getBoundingClientRect();i(R.width),c(N.width)});return S.observe(b),S.observe(x),()=>{S.disconnect()}},[]);const W=t.useCallback(x=>{const b=u.current;if(!b)return;const S=b.getBoundingClientRect();y(S.width+x),f(void 0),_(!0)},[]),U=t.useCallback(x=>{const b=u.current;if(!b)return;const S=b.parentElement;if(!S)return;const R=S.getBoundingClientRect(),N=x*(R.width*.005),ee=b.getBoundingClientRect();y(ee.width+N),f(void 0)},[]),q=t.useCallback(()=>{u.current&&(y(void 0),_(!1))},[]),{moveableProps:I}=ct({onMove:W,onMoveEnd:q,onKeyMove:U}),J=t.useMemo(()=>({...I,onKeyDown:x=>{var b;if((b=I.onKeyDown)==null||b.call(I,x),!x.defaultPrevented)switch(x.key){case"Enter":x.preventDefault(),l==null||l();break;case"Home":x.preventDefault(),f("smallest");break;case"End":x.preventDefault(),f("largest");break}},onChange:x=>{if(j)return;const b=Number(x.target.value);y(b)},value:z===void 0?0:Math.floor(z),min:C===void 0?void 0:Math.floor(C),max:P===void 0?void 0:Math.floor(P)}),[I,z,C,P,l,j]),Q=t.useMemo(()=>({style:{WebkitUserSelect:v===void 0?void 0:"none"},id:p,ref:u}),[p,v]),Y=C===void 0?void 0:`${Math.floor(C)}px`,Z=t.useMemo(()=>{if(v!==void 0&&r!==void 0&&d===void 0)return`min(${Math.floor(v)}px, ${r.pct}%)`;if(z!==void 0)return`${Math.floor(z)}px`},[r,v,z,d]);return{sliderProps:J,panelProps:Q,panelMinSize:Y,panelMaxSize:Z,resizing:j}}function ct(s){const{onMove:n,onMoveEnd:r,onKeyMove:l}=s,p=t.useRef(null),u=t.useRef(void 0),m=t.useRef(void 0),c=t.useCallback(()=>{m.current!==void 0&&(m.current=void 0,r==null||r())},[r]);return{moveableProps:t.useMemo(()=>({onPointerDown:i=>{if(i.button!==0||i.ctrlKey)return;const d=p.current;if(!d)return;const f=d.getBoundingClientRect(),j=i.clientX-f.left;m.current=j,i.preventDefault(),d.setPointerCapture(i.pointerId)},onPointerMove:i=>{const d=m.current;if(d===void 0)return;const f=p.current;if(!f)return;const j=f.getBoundingClientRect(),_=i.clientX-d-j.left;i.preventDefault(),n==null||n(_)},onPointerUp:c,onPointerCancel:c,onKeyDown:i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowLeft":i.preventDefault(),l==null||l(-1);break;case"ArrowRight":i.preventDefault(),l==null||l(1);break}},ref:i=>{var f;if(p.current=i,(f=u.current)==null||f.call(u),u.current=void 0,!i)return;const d=j=>{j.preventDefault()};i.addEventListener("touchstart",d),u.current=()=>{i.removeEventListener("touchstart",d)}}}),[l,n,c])}}const H=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function E({tree:s}){const[n]=ne(),r=n.get("tree"),[l,p]=t.useState(),[u,m]=t.useState([]),c=t.useCallback(h=>{m(i=>i.includes(h)?i.filter(d=>d!==h):[...i,h])},[]);return r==="empty"?e.jsxs(at,{children:[e.jsx(T,{children:"No layers"}),e.jsx(X,{children:"Create a layer"})]}):e.jsx(H.Provider,{value:t.useMemo(()=>({selected:l,setSelected:p,hidden:u,toggleHidden:c}),[u,l,c]),children:e.jsx(xe,{className:o.tree,children:s==="complex"?e.jsx(ht,{}):e.jsx(ft,{})})})}const O={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function V({item:s}){var n;return e.jsx(a,{label:s.label,children:(n=s.items)==null?void 0:n.map(r=>e.jsx(V,{item:r},r.label))})}function dt({tree:s,filters:n,search:r}){const l=t.useMemo(()=>(s==null?void 0:s.items)??[],[s]),p=t.useMemo(()=>n.length===0?l:l.reduce((c,h)=>(!h.type||!n.includes(h.type)||c.push(h),c),[]),[l,n]),u=t.useMemo(()=>{function c(h){return h.reduce((i,d)=>{const f=c(d.items??[]);return(d.label.toLowerCase().includes(r.toLowerCase())||f.length>0)&&i.push({...d,items:f}),i},[])}return r===""?p:c(p)},[p,r]),m=t.useMemo(()=>{if(!s||n.length===0&&r==="")return;function c(h){return h.reduce((i,d)=>{const f=d.items?c(d.items):0;return i+1+f},0)}return c(u)},[u,s,n,r]);return{filteredTree:u,itemCount:m}}function ut({tree:s}){return s.map(n=>e.jsx(V,{item:n},n.label))}function ht(){return e.jsxs(e.Fragment,{children:[e.jsxs(a,{label:"ITC_Master",children:[e.jsx(a,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(a,{label:"002_Substation_A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(a,{label:"007-aa_master.dgn",children:[e.jsx(a,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(a,{label:"A-CLNG-LITE-A"})}),e.jsx(a,{label:"A-CLNG-TILE",children:e.jsxs(a,{label:"A-DOOR-2D-PLAN",children:[e.jsx(a,{label:"P00003 [2-KA62]",children:e.jsx(a,{label:"Cell [2-KA63]",children:e.jsxs(a,{label:"Cell [2-KA64]",children:[e.jsx(a,{label:"Complex Chain [2-KA6A]"}),e.jsx(a,{label:"Complex Chain [2-KA6B]"}),e.jsx(a,{label:"Complex Chain [2-KA6C]"}),e.jsx(a,{label:"Complex Chain [2-KA6D]"}),e.jsx(a,{label:"Complex Chain [2-KA6E]"}),e.jsx(a,{label:"Complex Chain [2-KA6F]"}),e.jsx(a,{label:"Complex Chain [2-KA6G]"}),e.jsx(a,{label:"Complex Chain [2-KA6H]"}),e.jsx(a,{label:"Complex Chain [2-KA61]"}),e.jsx(a,{label:"Complex Chain [2-KA65]"}),e.jsx(a,{label:"Complex Chain [2-KA66]"}),e.jsx(a,{label:"Complex Chain [2-KA67]"}),e.jsx(a,{label:"Complex Chain [2-KA68]"}),e.jsx(a,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(a,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA98-A]"})}),e.jsx(a,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(a,{label:"ITC_Main"})]})}function ft(){const{tree:s}=t.useContext(M);return e.jsx(ut,{tree:s})}const F=t.createContext({selected:!1,hidden:!1});function a(s){const n=t.useContext(H),r=t.useContext(F),l=t.useId(),[p,u]=t.useState(s.defaultCollapsed===void 0?!0:!s.defaultCollapsed),m=t.Children.count(s.children)>0,c=t.useMemo(()=>r.hidden?!0:n.hidden.includes(l),[l,n.hidden,r.hidden]),h=r.selected||l===n.selected,i=t.useCallback(d=>{n.setSelected(d?l:void 0)},[l,n]);return e.jsx(F.Provider,{value:t.useMemo(()=>({selected:h,hidden:c}),[c,h]),children:e.jsx(be,{expanded:m?p:void 0,onExpandedChange:u,selected:h,onSelectedChange:i,icon:e.jsx(k,{href:A,style:{display:"inline"}}),label:s.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(w,{className:o.action,icon:Ce,label:"Lock",variant:"ghost","aria-hidden":c}),r.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(k,{href:ge})}):e.jsx(w,{className:o.action,icon:c?_e:ke,label:c?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(l)}}),e.jsx(pt,{hidden:c})]}),children:p?s.children:void 0})})}function pt({hidden:s}){return e.jsxs(re,{children:[e.jsx(le,{className:o.action,"aria-hidden":s,render:e.jsx(w,{icon:Se,label:"More",variant:"ghost"})}),e.jsxs(ae,{style:{minInlineSize:164},children:[e.jsx(g,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(g,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(g,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(g,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(g,{shortcuts:"]",children:"Bring to front"}),e.jsx(g,{shortcuts:"[",children:"Send to back"}),e.jsx(g,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(g,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(g,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(g,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(g,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(g,{shortcuts:"I",children:"Isolate object"})]})]})}function mt(){const{selectedId:s}=t.useContext($),{itemCount:n,clearFilters:r}=t.useContext(M),{filtered:l,search:p,setSearch:u}=t.useContext(M),[m,c]=t.useState(!1),h=t.useRef(null),i=t.useRef(null),d=m?e.jsxs(e.Fragment,{children:[e.jsx(xt,{filters:s==="simple"?O.filters:[]}),e.jsx(w,{className:o.shiftIconRight,icon:ve,label:"Close",variant:"ghost",onClick:()=>{var f;u(""),r(),B.flushSync(()=>c(!1)),(f=i.current)==null||f.focus()}})]}):e.jsx(w,{className:o.shiftIconRight,icon:K,label:"Search",variant:"ghost",onClick:()=>{var f;B.flushSync(()=>c(!0)),(f=h.current)==null||f.focus()},disabled:s!=="simple"});return e.jsxs("div",{className:o.subheader,children:[e.jsx(me,{"aria-live":l?"polite":"off","aria-atomic":!0,children:n===void 0?"Showing all tree items":`Showing ${n} tree items`}),m?void 0:e.jsxs(de,{className:o.tabList,tone:"accent",ref:i,children:[e.jsx(L,{id:"simple",children:"Simple"}),e.jsx(L,{id:"complex",children:"Complex"})]}),m?e.jsxs(he,{className:o.searchInput,children:[e.jsx(fe,{href:K}),e.jsx(pe,{placeholder:"Search",ref:h,onChange:f=>{u(f.target.value)},value:p})]}):null,e.jsx("div",{className:o.subheaderActions,children:d})]})}function xt({filters:s}){const n=t.useContext(M);return e.jsxs(Ie,{placement:"top-start",children:[e.jsx(ie,{render:e.jsx(w,{icon:Pe,label:"Filter",variant:"ghost",isActive:n.filters.length>0})}),e.jsxs(Ae,{className:o.popover,portal:!0,children:[e.jsxs("div",{className:o.filterHeader,children:[e.jsx(T,{variant:"body-sm",className:o.filter,children:"Filter"}),n.filters.length>0&&e.jsx(X,{variant:"ghost",onClick:()=>{n.clearFilters()},children:"Reset"})]}),e.jsx("div",{className:o.filters,children:s.map(r=>{const l=n.filters.includes(r);return e.jsxs(oe,{children:[e.jsx(se,{onChange:()=>{n.toggleFilter(r)},checked:l}),e.jsxs(ce,{className:o.filterLabel,children:[e.jsx(k,{href:A}),r]})]},r)})})]})]})}function bt(s){const[n,r]=t.useState(!1),[l,p]=t.useState([]),[u,m]=t.useState(""),c=t.useCallback(j=>{p(_=>_.includes(j)?_.filter(v=>v!==j):[..._,j]),r(!0)},[]),h=t.useCallback(()=>{p([]),r(!0)},[]),{filteredTree:i,itemCount:d}=dt({tree:O,filters:l,search:u}),f=t.useDeferredValue(i);return e.jsx(t.Suspense,{fallback:"Loading...",children:e.jsx(M.Provider,{value:t.useMemo(()=>({filters:l,filtered:n,toggleFilter:c,clearFilters:h,search:u,setSearch:m,itemCount:d,tree:f}),[l,n,c,h,u,d,f]),children:s.children})})}function jt(s){const[n,r]=t.useState("simple");return e.jsx($.Provider,{value:t.useMemo(()=>({selectedId:n,setSelectedId:l=>{l!=="simple"&&l!=="complex"||r(l)}}),[n]),children:e.jsx(ue,{setSelectedId:l=>{l!=="simple"&&l!=="complex"||r(l)},selectedId:n,children:s.children})})}const M=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},tree:[],itemCount:void 0}),$=t.createContext({selectedId:"simple",setSelectedId:()=>{}});export{en as default,Zt as meta};
