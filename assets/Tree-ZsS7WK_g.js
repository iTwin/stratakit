import{p as t,b as c}from"./index-DDCMeoDP.js";import{b4 as H,ab as z,af as W,ag as k,ah as $,an as q,Y as J,E as N,F as A,G as K,J as _,ar as U,K as I,Z as Y,l as b,d as h,b5 as p,b6 as Z,o as C,I as Q,a9 as L,b as X,S as ee,b7 as oe,O as te,b8 as re}from"./~utils-77i_5g9A.js";import{C as se,a as ne,u as ae,b as ie}from"./P2CTZE2T-L4uTqoBB.js";import{c as le,a as ce,b as ue,e as de,C as me}from"./ITI7HKP4-BMDQbRRX.js";import{L as fe,e as S,f as F,d as ve,D as xe,a as pe,b as be}from"./DropdownMenu-CtdXA2S5.js";function he(e={}){const r=H(e);return t.jsx(z,{value:r,children:e.children})}function Ce(e={}){var r;const o=(r=e.store)==null?void 0:r.getState();return le(W($({},e),{orientation:k(e.orientation,o==null?void 0:o.orientation,"horizontal"),focusLoop:k(e.focusLoop,o==null?void 0:o.focusLoop,!0)}))}function je(e,r,o){return ce(e,r,o)}function we(e={}){const[r,o]=q(Ce,e);return je(r,o,e)}var y=J([ne],[se]),De=y.useContext,Pe=y.useProviderContext,Ie=y.ScopedContextProvider,ye="div",Te=A(function(r){var o=r,{store:n,orientation:s,virtualFocus:m,focusLoop:i,rtl:f}=o,l=_(o,["store","orientation","virtualFocus","focusLoop","rtl"]);const j=Pe();n=n||j;const u=we({store:n,orientation:s,virtualFocus:m,focusLoop:i,rtl:f}),x=u.useState(d=>d.orientation==="both"?void 0:d.orientation);return l=U(l,d=>t.jsx(Ie,{value:u,children:d}),[u]),l=I({role:"toolbar","aria-orientation":x},l),l=ue(I({store:u},l)),l}),ge=N(function(r){const o=Te(r);return K(ye,o)}),ke="button",Se=A(function(r){var o=r,{store:n}=o,s=_(o,["store"]);const m=De();return n=n||m,s=ae(I({store:n},s)),s}),Fe=Y(N(function(r){const o=Se(r);return K(ke,o)}));const T=c.createContext(void 0),Ve=b((e,r)=>{const{"aria-level":o,selected:n,expanded:s,icon:m,unstable_decorations:i,label:f,description:l,actions:j,error:u,onSelectedChange:x,onExpandedChange:d,onClick:R,onKeyDown:E,...O}=e,B=a=>{n!==void 0&&(a.stopPropagation(),x==null||x(!n))},V=a=>{a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||s!==void 0&&(a.key==="ArrowRight"||a.key==="ArrowLeft")&&(a.preventDefault(),d==null||d(a.key==="ArrowRight"))},g=c.useId(),w=c.useId(),D=c.useId(),P=typeof u=="string"?u:void 0,v=u?t.jsx(ee,{}):m,G=c.useMemo(()=>{const a=[];return l&&a.push(w),(i||v)&&a.push(D),P&&a.push(P),a.length>0?a.join(" "):void 0},[i,v,D,l,w,P]);return t.jsx(T.Provider,{value:c.useMemo(()=>({level:o,expanded:s,selected:n,error:u}),[o,s,n,u]),children:t.jsx(ie,{render:t.jsx(C,{...O}),onClick:p(R,B),onKeyDown:p(E,V),role:"treeitem","aria-expanded":s,"aria-selected":n,"aria-labelledby":g,"aria-describedby":G,"aria-level":o,className:h("-tree-item",e.className),ref:r,children:t.jsxs(fe,{"data-kiwi-expanded":s,"data-kiwi-selected":n,"data-kiwi-error":u?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":o},role:void 0,children:[t.jsxs(S,{children:[t.jsx(Z,{align:l?"block":void 0,children:t.jsx(Le,{onClick:()=>{s!==void 0&&(d==null||d(!s))}})}),v||i?t.jsx(C,{className:"-tree-item-decoration",id:D,render:c.isValidElement(v)?v:typeof v=="string"?t.jsx(Q,{href:v}):void 0,children:v?null:i}):null]}),t.jsx(F,{id:g,className:"-tree-item-content",children:f}),l?t.jsx(F,{id:w,className:"-tree-item-description",children:l}):void 0,t.jsx(S,{render:t.jsx(Ne,{children:j})})]})})})}),Ne=b((e,r)=>{const{children:o,...n}=e,s=c.Children.toArray(o).filter(Boolean),{error:m}=L(T),i=m?2:3;return t.jsxs(ge,{...n,onClick:p(e.onClick,f=>f.stopPropagation()),onKeyDown:p(e.onKeyDown,f=>f.stopPropagation()),className:h("-tree-item-actions-container",e.className),focusLoop:!1,ref:r,children:[s.slice(0,i-1),s.length===i?s[i-1]:null,s.length>i?t.jsx(Ke,{children:s.slice(i-1)}):null]})}),Ae=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],M=c.createContext(!1);function Ke({children:e}){const[r,o]=c.useState(!1),n=c.useRef(!1);return t.jsx(he,{placement:"right-start",children:t.jsxs(xe,{open:r,setOpen:c.useCallback(s=>{s&&!n.current?o(!0):o(!1)},[]),children:[t.jsx(pe,{onKeyDown:s=>{Ae.includes(s.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:t.jsx(_e,{label:"More",icon:t.jsx(re,{})})}),t.jsx(M.Provider,{value:!0,children:t.jsx(be,{children:e})})]})})}const _e=b((e,r)=>{const{error:o}=L(T),{visible:n=o?!0:void 0,label:s,icon:m,dot:i,...f}=e;return c.useContext(M)?t.jsx(ve,{...f,label:s,icon:m,unstable_dot:i,ref:r}):t.jsx(Fe,{render:t.jsx(X,{label:s,icon:m,inert:n===!1?!0:void 0,...f,dot:i,variant:"ghost",className:h("-tree-item-action",e.className),"data-kiwi-visible":n,ref:r})})}),Le=b((e,r)=>t.jsx(C.span,{"aria-hidden":"true",...e,onClick:p(e.onClick,o=>o.stopPropagation()),className:h("-button","-icon-button","-ghost-aligner","-tree-item-expander",e.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":oe(),ref:r,children:t.jsx(te,{})})),Ge=b((e,r)=>{const o=de({orientation:"vertical"});return t.jsx(C.div,{role:"tree",...e,render:t.jsx(me,{store:o}),className:h("-tree",e.className),ref:r,children:e.children})});export{Ge as T,Ve as a,_e as b};
