import{l as f,r as T}from"./chunk-7R3XDUXW-DxTo8O6G.js";import{c as W}from"./index-6yh6O1FZ.js";import{s as k}from"./~utils-YFcEjjdk.js";import{c as q,u as G,H as J,a as K,b as L,d as Q,e as U}from"./BYC7LY2E-BkUN-JnQ.js";import{c as F,u as X,b as j,a as w,d as R}from"./YV4JVR4I-IQnN8q1u.js";import{x as V,y as O,z as x,v as Y,c as I,_ as N,i as B,t as Z,b,a as M,D as H,k as ee,f as $,d as D,M as te,j as E}from"./LMDWO4NN-DZi_YyQu.js";function re(t={}){var n;const r=(n=t.store)==null?void 0:n.getState(),e=q(V(x({},t),{placement:O(t.placement,r==null?void 0:r.placement,"top"),hideTimeout:O(t.hideTimeout,r==null?void 0:r.hideTimeout,0)})),p=V(x({},e.getState()),{type:O(t.type,r==null?void 0:r.type,"description"),skipTimeout:O(t.skipTimeout,r==null?void 0:r.skipTimeout,300)}),s=F(p,e,t.store);return x(x({},e),s)}function oe(t,n,r){return j(t,r,"type"),j(t,r,"skipTimeout"),G(t,n,r)}function z(t={}){const[n,r]=X(re,t);return oe(n,r,t)}var _=Y([K],[J]),C=_.useProviderContext,ne=_.ContextProvider,se=_.ScopedContextProvider,ae="div",ie=I(function(n){var r=n,{store:e,portal:p=!0,gutter:s=8,preserveTabOrder:v=!1,hideOnHoverOutside:d=!0,hideOnInteractOutside:S=!0}=r,i=N(r,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const h=C();e=e||h,B(e,!1),i=Z(i,a=>f.jsx(se,{value:e,children:a}),[e]);const P=e.useState(a=>a.type==="description"?"tooltip":"none");return i=b({role:P},i),i=L(M(b({},i),{store:e,portal:p,gutter:s,preserveTabOrder:v,hideOnHoverOutside(a){if(H(d,a))return!1;const c=e==null?void 0:e.getState().anchorElement;return c?!("focusVisible"in c.dataset):!0},hideOnInteractOutside:a=>{if(H(S,a))return!1;const c=e==null?void 0:e.getState().anchorElement;return c?!ee(c,a.target):!0}})),i}),ue=Q($(function(n){const r=ie(n);return D(ae,r)}),C);function le(t={}){const n=z(t);return f.jsx(ne,{value:n,children:t.children})}var ce="div",m=F({activeStore:null});function A(t){return()=>{const{activeStore:n}=m.getState();n===t&&m.setState("activeStore",null)}}var de=I(function(n){var r=n,{store:e,showOnHover:p=!0}=r,s=N(r,["store","showOnHover"]);const v=C();e=e||v,B(e,!1);const d=T.useRef(!1);T.useEffect(()=>w(e,["mounted"],o=>{o.mounted||(d.current=!1)}),[e]),T.useEffect(()=>{if(e)return te(A(e),w(e,["mounted","skipTimeout"],o=>{if(!e)return;if(o.mounted){const{activeStore:y}=m.getState();return y!==e&&(y==null||y.hide()),m.setState("activeStore",e)}const l=setTimeout(A(e),o.skipTimeout);return()=>clearTimeout(l)}))},[e]);const S=s.onMouseEnter,i=E(o=>{S==null||S(o),d.current=!0}),h=s.onFocusVisible,P=E(o=>{h==null||h(o),!o.defaultPrevented&&(e==null||e.setAnchorElement(o.currentTarget),e==null||e.show())}),a=s.onBlur,c=E(o=>{if(a==null||a(o),o.defaultPrevented)return;const{activeStore:l}=m.getState();d.current=!1,l===e&&m.setState("activeStore",null)}),u=e.useState("type"),g=e.useState(o=>{var l;return(l=o.contentElement)==null?void 0:l.id});return s=M(b({"aria-labelledby":u==="label"?g:void 0},s),{onMouseEnter:i,onFocusVisible:P,onBlur:c}),s=U(b({store:e,showOnHover(o){if(!d.current||H(p,o))return!1;const{activeStore:l}=m.getState();return l?(e==null||e.show(),!1):!0}},s)),s}),pe=$(function(n){const r=de(n);return D(ce,r)});const ve=T.forwardRef((t,n)=>{const{content:r,children:e,className:p,type:s="description",id:v=T.useId(),defaultOpen:d,open:S,setOpen:i,unmountOnHide:h=s==="none",...P}=t,a=z(),c=R(a,o=>o.open),u=R(a,o=>o.popoverElement);T.useEffect(function(){var l;u!=null&&u.isConnected&&((l=u==null?void 0:u.togglePopover)==null||l.call(u,c))},[c,u]);const g=s==="description"?{"aria-describedby":v}:s==="label"?{"aria-labelledby":v}:{};return f.jsx(f.Fragment,{children:f.jsxs(le,{store:a,defaultOpen:d,open:S,setOpen:i,children:[f.jsx(pe,{render:e,...g}),f.jsx(ue,{...P,unmountOnHide:h,className:W("ü•ù-tooltip",p),ref:n,id:v,style:{zIndex:k?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!k,children:r})]})})});ve.displayName="Tooltip";export{ve as T};
