import{x as R,f as F,a as J,z as K,o as Q,ag as S,s as X,j as I,b as Y,r as Z,d as _,U as ee,a3 as x,a7 as te}from"./ExamplePreview.CuSEY-gu.js";import{r as m}from"./index.DIfZGIpv.js";import{u as M,m as ne,o as ae,c as oe,s as y,f as j,g as ie,a as se,d as P}from"./Q5W46E73.DVg8IU54.js";var p=R(),O=p.useProviderContext,re=p.ContextProvider,ue=p.ScopedContextProvider,f=R([re],[ue]),ye=f.useContext,Pe=f.useScopedContext,pe=f.useProviderContext,he=f.ContextProvider,le=f.ScopedContextProvider,be=m.createContext(void 0),je=m.createContext(void 0),ce="div";function A(n,e){const t=setTimeout(e,n);return()=>clearTimeout(t)}function de(n){let e=requestAnimationFrame(()=>{e=requestAnimationFrame(n)});return()=>cancelAnimationFrame(e)}function T(...n){return n.join(", ").split(", ").reduce((e,t)=>{const i=t.endsWith("ms")?1:1e3,s=Number.parseFloat(t||"0s")*i;return s>e?s:e},0)}function me(n,e,t){return!t&&e!==!1&&(!n||!!e)}var fe=J(function({store:e,alwaysVisible:t,...i}){const s=O();e=e||s,K(e,!1);const u=m.useRef(null),a=Q(i.id),[o,h]=m.useState(null),l=e.useState("open"),D=e.useState("mounted"),c=e.useState("animated"),d=e.useState("contentElement"),C=M(e.disclosure,"contentElement");S(()=>{u.current&&e?.setContentElement(u.current)},[e]),S(()=>{let r;return e?.setState("animated",v=>(r=v,!0)),()=>{r!==void 0&&e?.setState("animated",r)}},[e]),S(()=>{if(c){if(!d?.isConnected){h(null);return}return de(()=>{h(l?"enter":D?"leave":null)})}},[c,d,l,D]),S(()=>{if(!e||!c||!o||!d)return;const r=()=>e?.setState("animating",!1),v=()=>ee.flushSync(r);if(o==="leave"&&l||o==="enter"&&!l)return;if(typeof c=="number")return A(c,v);const{transitionDuration:U,animationDuration:k,transitionDelay:q,animationDelay:w}=getComputedStyle(d),{transitionDuration:N="0",animationDuration:V="0",transitionDelay:W="0",animationDelay:z="0"}=C?getComputedStyle(C):{},L=T(q,w,W,z),$=T(U,k,N,V),b=L+$;if(!b){o==="enter"&&e.setState("animated",!1),r();return}const B=1e3/60,G=Math.max(b-B,0);return A(G,v)},[e,c,d,C,l,o]),i=X(i,r=>I.jsx(le,{value:e,children:r}),[e]);const g=me(D,i.hidden,t),E=i.style,H=m.useMemo(()=>g?{...E,display:"none"}:E,[g,E]);return i={id:a,"data-open":l||void 0,"data-enter":o==="enter"||void 0,"data-leave":o==="leave"||void 0,hidden:g,...i,ref:Y(a?e.setContentElement:null,u,i.ref),style:H},Z(i)}),ve=F(function(e){const t=fe(e);return _(ce,t)}),Ae=F(function({unmountOnHide:e,...t}){const i=O(),s=t.store||i;return M(s,a=>!e||a?.mounted)===!1?null:I.jsx(ve,{...t})});function Se(n={}){const e=ne(n.store,ae(n.disclosure,["contentElement","disclosureElement"])),t=e?.getState(),i=x(n.open,t?.open,n.defaultOpen,!1),s=x(n.animated,t?.animated,!1),u={open:i,animated:s,animating:!!s&&i,mounted:i,contentElement:x(t?.contentElement,null),disclosureElement:x(t?.disclosureElement,null)},a=oe(u,e);return y(a,()=>j(a,["animated","animating"],o=>{o.animated||a.setState("animating",!1)})),y(a,()=>ie(a,["open"],()=>{a.getState().animated&&a.setState("animating",!0)})),y(a,()=>j(a,["open","animating"],o=>{a.setState("mounted",o.open||o.animating)})),{...a,disclosure:n.disclosure,setOpen:o=>a.setState("open",o),show:()=>a.setState("open",!0),hide:()=>a.setState("open",!1),toggle:()=>a.setState("open",o=>!o),stopAnimation:()=>a.setState("animating",!1),setContentElement:o=>a.setState("contentElement",o),setDisclosureElement:o=>a.setState("disclosureElement",o)}}function xe(n,e,t){return te(e,[t.store,t.disclosure]),P(n,t,"open","setOpen"),P(n,t,"mounted","setMounted"),P(n,t,"animated"),Object.assign(n,{disclosure:t.disclosure})}function Te(n={}){const[e,t]=se(Se,n);return xe(e,t,n)}export{le as D,he as a,pe as b,Te as c,re as d,Ae as e,Pe as f,be as g,ye as h,fe as i,Se as j,xe as k,me as l,je as m,O as u};
