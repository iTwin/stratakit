import{a as f,p}from"./chunk-JZWAC4HX-ROAaBwzV.js";import{A as K,y as Y,z as Q,I as ke,L,O as Le,P,Q as q,S as G,T as me,U as I,W as A,G as Oe,X as ut,F as it,Y as Be,Z as ct,_ as at,$ as ue,R as je,a0 as ft,B as lt,a1 as qe,a2 as dt,a3 as ie,a4 as gt,a5 as vt}from"./~utils-Bgzl5YLW.js";import{g as ce,a as He,r as mt,d as ht,F as Et,i as bt,b as pt,c as xt,e as U,u as yt,f as Pt}from"./U6HHPQDW-DHT_Hcr6.js";import{a as de}from"./index-VRfNF7fP.js";import{u as V,s as St,a as Dt}from"./Q5W46E73-BR5nxZ18.js";import{c as wt,d as We,e as Ft,f as At,g as he,i as Ct,h as Rt,a as Tt,j as Lt}from"./WLZ6H5FH-DemDu-2R.js";var Me=f.createContext(null),jt="span",Ye=K(function(t){return t={...t,style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px",...t.style}},t}),yn=Y(function(t){const n=Ye(t);return Q(jt,n)}),Ht="span",Mt=K(function(t){return t={"data-focus-trap":"",tabIndex:0,"aria-hidden":!0,...t,style:{position:"fixed",top:0,left:0,...t.style}},t=Ye(t),t}),re=Y(function(t){const n=Mt(t);return Q(Ht,n)}),Nt="div";function Vt(e){return P(e).body}function It(e,t){return t?typeof t=="function"?t(e):t:P(e).createElement("div")}function $t(e="id"){return`${e?`${e}-`:""}${Math.random().toString(36).slice(2,8)}`}function N(e){queueMicrotask(()=>{e?.focus()})}var Xe=K(function({preserveTabOrder:t,preserveTabOrderAnchor:n,portalElement:r,portalRef:u,portal:s=!0,...o}){const a=f.useRef(null),d=ke(a,o.ref),b=f.useContext(Me),[l,C]=f.useState(null),[x,M]=f.useState(null),$=f.useRef(null),j=f.useRef(null),O=f.useRef(null),H=f.useRef(null);return L(()=>{const c=a.current;if(!c||!s){C(null);return}const m=It(c,r);if(!m){C(null);return}const E=m.isConnected;if(E||(b||Vt(c)).appendChild(m),m.id||(m.id=c.id?`portal/${c.id}`:$t()),C(m),Le(u,m),!E)return()=>{m.remove(),Le(u,null)}},[s,r,b,u]),L(()=>{if(!s||!t||!n)return;const m=P(n).createElement("span");return m.style.position="fixed",n.insertAdjacentElement("afterend",m),M(m),()=>{m.remove(),M(null)}},[s,t,n]),f.useEffect(()=>{if(!l||!t)return;let c=0;const m=E=>{if(!G(E))return;const g=E.type==="focusin";if(cancelAnimationFrame(c),g)return mt(l);c=requestAnimationFrame(()=>{ht(l,!0)})};return l.addEventListener("focusin",m,!0),l.addEventListener("focusout",m,!0),()=>{cancelAnimationFrame(c),l.removeEventListener("focusin",m,!0),l.removeEventListener("focusout",m,!0)}},[l,t]),o=q(o,c=>{if(c=p.jsx(Me.Provider,{value:l||b,children:c}),!s)return c;if(!l)return p.jsx("span",{ref:d,id:o.id,style:{position:"fixed"},hidden:!0});c=p.jsxs(p.Fragment,{children:[t&&l&&p.jsx(re,{ref:j,"data-focus-trap":o.id,className:"__focus-trap-inner-before",onFocus:E=>{G(E,l)?N(ce()):N($.current)}}),c,t&&l&&p.jsx(re,{ref:O,"data-focus-trap":o.id,className:"__focus-trap-inner-after",onFocus:E=>{G(E,l)?N(He()):N(H.current)}})]}),l&&(c=de.createPortal(c,l));let m=p.jsxs(p.Fragment,{children:[t&&l&&p.jsx(re,{ref:$,"data-focus-trap":o.id,className:"__focus-trap-outer-before",onFocus:E=>{!(E.relatedTarget===H.current)&&G(E,l)?N(j.current):N(He())}}),t&&p.jsx("span",{"aria-owns":l?.id,style:{position:"fixed"}}),t&&l&&p.jsx(re,{ref:H,"data-focus-trap":o.id,className:"__focus-trap-outer-after",onFocus:E=>{if(G(E,l))N(O.current);else{const g=ce();if(g===j.current){requestAnimationFrame(()=>{var B;return(B=ce())==null?void 0:B.focus()});return}N(g)}}})]});return x&&t&&(m=de.createPortal(m,x)),p.jsxs(p.Fragment,{children:[m,c]})},[l,b,s,o.id,t,x]),o={...o,ref:d},o}),Pn=Y(function(t){const n=Xe(t);return Q(Nt,n)}),Ne=f.createContext(0);function _t({level:e,children:t}){const n=f.useContext(Ne),r=Math.max(Math.min(e||n+1,6),1);return p.jsx(Ne.Provider,{value:r,children:t})}var kt="div",ze=K(function({autoFocusOnShow:t=!0,...n}){return n=q(n,r=>p.jsx(Et.Provider,{value:t,children:r}),[t]),n});Y(function(t){const n=ze(t);return Q(kt,n)});function Ot(e,t){const r=P(e).createElement("button");return r.type="button",r.tabIndex=-1,r.textContent="Dismiss popup",Object.assign(r.style,{border:"0px",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}),r.addEventListener("click",t),e.prepend(r),()=>{r.removeEventListener("click",t),r.remove()}}function Bt(e){const t=f.useRef(null);return f.useEffect(()=>{if(!e){t.current=null;return}return me("mousedown",r=>{t.current=r.target},!0)},[e]),t}var ae=new WeakMap;function Z(e,t,n){ae.has(e)||ae.set(e,new Map);const r=ae.get(e),u=r.get(t);if(!u)return r.set(t,n()),()=>{var a;(a=r.get(t))==null||a(),r.delete(t)};const s=n(),o=()=>{s(),u(),r.delete(t)};return r.set(t,o),()=>{r.get(t)===o&&(s(),r.set(t,u))}}function Ee(e,t,n){return Z(e,t,()=>{const u=e.getAttribute(t);return e.setAttribute(t,n),()=>{u==null?e.removeAttribute(t):e.setAttribute(t,u)}})}function k(e,t,n){return Z(e,t,()=>{const u=t in e,s=e[t];return e[t]=n,()=>{u?e[t]=s:delete e[t]}})}function ge(e,t){return e?Z(e,"style",()=>{const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}):()=>{}}function qt(e,t,n){return e?Z(e,t,()=>{const u=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{u?e.style.setProperty(t,u):e.style.removeProperty(t)}}):()=>{}}var Wt=["SCRIPT","STYLE"];function ve(e){return`__ariakit-dialog-snapshot-${e}`}function Yt(e,t){const n=P(t),r=ve(e);if(!n.body[r])return!0;do{if(t===n.body)return!1;if(t[r])return!0;if(!t.parentElement)return!1;t=t.parentElement}while(!0)}function Xt(e,t,n){return Wt.includes(t.tagName)||!Yt(e,t)?!1:!n.some(r=>r&&A(t,r))}function be(e,t,n,r){for(let u of t){if(!u?.isConnected)continue;const s=t.some(d=>!d||d===u?!1:d.contains(u)),o=P(u),a=u;for(;u.parentElement&&u!==o.body;){if(r?.(u.parentElement,a),!s)for(const d of u.parentElement.children)Xt(e,d,t)&&n(d,a);u=u.parentElement}}}function zt(e,t){const{body:n}=P(t[0]),r=[];return be(e,t,s=>{r.push(k(s,ve(e),!0))}),I(k(n,ve(e),!0),()=>{for(const s of r)s()})}function Ge(e,...t){if(!e)return!1;const n=e.getAttribute("data-backdrop");return n==null?!1:n===""||n==="true"||!t.length?!0:t.some(r=>n===r)}function W(e="",t=!1){return`__ariakit-dialog-${t?"ancestor":"outside"}${e?`-${e}`:""}`}function Gt(e,t=""){return I(k(e,W(),!0),k(e,W(t),!0))}function Ue(e,t=""){return I(k(e,W("",!0),!0),k(e,W(t,!0),!0))}function pe(e,t){const n=W(t,!0);if(e[n])return!0;const r=W(t);do{if(e[r])return!0;if(!e.parentElement)return!1;e=e.parentElement}while(!0)}function Ve(e,t){const n=[],r=t.map(s=>s?.id);return be(e,t,s=>{Ge(s,...r)||n.unshift(Gt(s,e))},(s,o)=>{o.hasAttribute("data-dialog")&&o.id!==e||n.unshift(Ue(s,e))}),()=>{for(const s of n)s()}}function Ut(e){return e.tagName==="HTML"?!0:A(P(e).body,e)}function Kt(e,t){if(!e)return!1;if(A(e,t))return!0;const n=t.getAttribute("aria-activedescendant");if(n){const r=P(e).getElementById(n);if(r)return A(e,r)}return!1}function Qt(e,t){if(!("clientY"in e))return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function fe({store:e,type:t,listener:n,capture:r,domReady:u}){const s=Oe(n),o=V(e,"open"),a=f.useRef(!1);L(()=>{if(!o||!u)return;const{contentElement:d}=e.getState();if(!d)return;const b=()=>{a.current=!0};return d.addEventListener("focusin",b,!0),()=>d.removeEventListener("focusin",b,!0)},[e,o,u]),f.useEffect(()=>o?me(t,b=>{const{contentElement:l,disclosureElement:C}=e.getState(),x=b.target;!l||!x||!Ut(x)||A(l,x)||Kt(C,x)||x.hasAttribute("data-focus-trap")||Qt(b,l)||a.current&&!pe(x,l.id)||bt(x)||s(b)},r):void 0,[o,r])}function le(e,t){return typeof e=="function"?e(t):!!e}function Zt(e,t,n){const r=V(e,"open"),u=Bt(r),s={store:e,domReady:n,capture:!0};fe({...s,type:"click",listener:o=>{const{contentElement:a}=e.getState(),d=u.current;d&&ut(d)&&pe(d,a?.id)&&le(t,o)&&e.hide()}}),fe({...s,type:"focusin",listener:o=>{const{contentElement:a}=e.getState();a&&o.target!==P(a)&&le(t,o)&&e.hide()}}),fe({...s,type:"contextmenu",listener:o=>{le(t,o)&&e.hide()}})}var Ie=f.createContext({});function Jt(e){const t=f.useContext(Ie),[n,r]=f.useState([]),u=f.useCallback(a=>{var d;return r(b=>[...b,a]),I((d=t.add)==null?void 0:d.call(t,a),()=>{r(b=>b.filter(l=>l!==a))})},[t]);L(()=>St(e,["open","contentElement"],a=>{var d;if(a.open&&a.contentElement)return(d=t.add)==null?void 0:d.call(t,e)}),[e,t]);const s=f.useMemo(()=>({store:e,add:u}),[e,u]);return{wrapElement:f.useCallback(a=>p.jsx(Ie.Provider,{value:s,children:a}),[s]),nestedDialogs:n}}function en({attribute:e,contentId:t,contentElement:n,enabled:r}){const[u,s]=it(),o=f.useCallback(()=>{if(!r||!n)return!1;const{body:a}=P(n),d=a.getAttribute(e);return!d||d===t},[u,r,n,e,t]);return f.useEffect(()=>{if(!r||!t||!n)return;const{body:a}=P(n);if(o())return a.setAttribute(e,t),()=>a.removeAttribute(e);const d=new MutationObserver(()=>de.flushSync(s));return d.observe(a,{attributeFilter:[e]}),()=>d.disconnect()},[u,r,t,n,o,e]),o}function tn(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function nn(e,t,n){const r=en({attribute:"data-dialog-prevent-body-scroll",contentElement:e,contentId:t,enabled:n});f.useEffect(()=>{if(!r()||!e)return;const u=P(e),s=Be(e),{documentElement:o,body:a}=u,d=o.style.getPropertyValue("--scrollbar-width"),b=d?Number.parseInt(d,10):s.innerWidth-o.clientWidth,l=()=>qt(o,"--scrollbar-width",`${b}px`),C=tn(o),x=()=>ge(a,{overflow:"hidden",[C]:`${b}px`}),M=()=>{var j,O;const{scrollX:H,scrollY:c,visualViewport:m}=s,E=(j=m?.offsetLeft)!=null?j:0,g=(O=m?.offsetTop)!=null?O:0,B=ge(a,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(g))}px`,left:`${-(H-Math.floor(E))}px`,right:"0",[C]:`${b}px`});return()=>{B(),s.scrollTo({left:H,top:c,behavior:"instant"})}},$=ct()&&!at();return I(l(),$?M():x())},[r,e])}function rn(e,...t){if(!e)return!1;const n=e.getAttribute("data-focus-trap");return n==null?!1:t.length?n===""?!1:t.some(r=>n===r):!0}function Ke(){return"inert"in HTMLElement.prototype}function sn(e){return Ee(e,"aria-hidden","true")}function Qe(e,t){if(!("style"in e))return ue;if(Ke())return k(e,"inert",!0);const r=pt(e,!0).map(u=>{if(t?.some(o=>o&&A(o,u)))return ue;const s=Z(u,"focus",()=>(u.focus=ue,()=>{delete u.focus}));return I(Ee(u,"tabindex","-1"),s)});return I(...r,sn(e),ge(e,{pointerEvents:"none",userSelect:"none",cursor:"default"}))}function on(e,t){const n=[],r=t.map(s=>s?.id);return be(e,t,s=>{Ge(s,...r)||rn(s,...r)||n.unshift(Qe(s,t))},s=>{s.hasAttribute("role")&&(t.some(o=>o&&A(o,s))||n.unshift(Ee(s,"role","none")))}),()=>{for(const s of n)s()}}function un({store:e,backdrop:t,alwaysVisible:n,hidden:r}){const u=f.useRef(null),s=wt({disclosure:e}),o=V(e,"contentElement");f.useEffect(()=>{const b=u.current,l=o;b&&l&&(b.style.zIndex=getComputedStyle(l).zIndex)},[o]),L(()=>{const b=o?.id;if(!b)return;const l=u.current;if(l)return Ue(l,b)},[o]);const a=We({ref:u,store:s,role:"presentation","data-backdrop":o?.id||"",alwaysVisible:n,hidden:r??void 0,style:{position:"fixed",top:0,right:0,bottom:0,left:0}});if(!t)return null;if(f.isValidElement(t))return p.jsx(je,{...a,render:t});const d=typeof t!="boolean"?t:"div";return p.jsx(je,{...a,render:p.jsx(d,{})})}function cn(e={}){return Ft(e)}function an(e,t,n){return At(e,t,n)}function fn(e={}){const[t,n]=Dt(cn,e);return an(t,n,e)}var ln="div",$e=vt();function dn(e){const t=qe();return!t||e&&A(e,t)?!1:!!U(t)}function _e(e,t=!1){if(!e)return null;const n="current"in e?e.current:e;return n?t?U(n)?n:null:n:null}var gn=K(function({store:t,open:n,onClose:r,focusable:u=!0,modal:s=!0,portal:o=!!s,backdrop:a=!!s,hideOnEscape:d=!0,hideOnInteractOutside:b=!0,getPersistentElements:l,preventBodyScroll:C=!!s,autoFocusOnShow:x=!0,autoFocusOnHide:M=!0,initialFocus:$,finalFocus:j,unmountOnHide:O,unstable_treeSnapshotKey:H,...c}){const m=he(),E=f.useRef(null),g=fn({store:t||m,open:n,setOpen(i){if(i)return;const h=E.current;if(!h)return;const y=new Event("close",{bubbles:!1,cancelable:!0});r&&h.addEventListener("close",r,{once:!0}),h.dispatchEvent(y),y.defaultPrevented&&g.setOpen(!0)}}),{portalRef:B,domReady:S}=ft(o,c.portalRef),Ze=c.preserveTabOrder,se=V(g,i=>Ze&&!s&&i.mounted),R=lt(c.id),w=V(g,"open"),F=V(g,"mounted"),_=V(g,"contentElement"),Je=Ct(F,c.hidden,c.alwaysVisible);nn(_,R,C&&!Je),Zt(g,b,S);const{wrapElement:xe,nestedDialogs:ye}=Jt(g);c=q(c,xe,[xe]),L(()=>{if(!w)return;const i=E.current,h=qe(i,!0);h&&h.tagName!=="BODY"&&(i&&A(i,h)||g.setDisclosureElement(h))},[g,w]),$e&&f.useEffect(()=>{if(!F)return;const{disclosureElement:i}=g.getState();if(!i||!dt(i))return;const h=()=>{let y=!1;const v=()=>{y=!0},D={capture:!0,once:!0};i.addEventListener("focusin",v,D),gt(i,"mouseup",()=>{i.removeEventListener("focusin",v,!0),!y&&Pt(i)})};return i.addEventListener("mousedown",h),()=>{i.removeEventListener("mousedown",h)}},[g,F]),f.useEffect(()=>{if(!F||!S)return;const i=E.current;if(!i)return;const h=Be(i),y=h.visualViewport||h,v=()=>{var D,T;const z=(T=(D=h.visualViewport)==null?void 0:D.height)!=null?T:h.innerHeight;i.style.setProperty("--dialog-viewport-height",`${z}px`)};return v(),y.addEventListener("resize",v),()=>{y.removeEventListener("resize",v)}},[F,S]),f.useEffect(()=>{if(!s||!F||!S)return;const i=E.current;if(!(!i||i.querySelector("[data-dialog-dismiss]")))return Ot(i,g.hide)},[g,s,F,S]),L(()=>{if(!Ke()||w||!F||!S)return;const i=E.current;if(i)return Qe(i)},[w,F,S]);const J=w&&S;L(()=>{if(!R||!J)return;const i=E.current;return zt(R,[i])},[R,J,H]);const Pe=Oe(l);L(()=>{if(!R||!J)return;const{disclosureElement:i}=g.getState(),h=E.current,y=Pe()||[],v=[h,...y,...ye.map(D=>D.getState().contentElement)];return s?I(Ve(R,v),on(R,v)):Ve(R,[i,...v])},[R,g,J,Pe,ye,s,H]);const Se=!!x,De=ie(x),[et,tt]=f.useState(!1);f.useEffect(()=>{if(!w||!Se||!S||!_?.isConnected)return;const i=_e($,!0)||_.querySelector("[data-autofocus=true],[autofocus]")||xt(_,!0,o&&se)||_,h=U(i);De(h?i:null)&&(tt(!0),queueMicrotask(()=>{i.focus(),$e&&h&&i.scrollIntoView({block:"nearest",inline:"nearest"})}))},[w,Se,S,_,$,o,se,De]);const ee=!!M,we=ie(M),[te,Fe]=f.useState(!1);f.useEffect(()=>{if(w)return Fe(!0),()=>Fe(!1)},[w]);const X=f.useCallback((i,h=!0)=>{const{disclosureElement:y}=g.getState();if(dn(i))return;let v=_e(j)||y;if(v?.id){const T=P(v),z=`[aria-activedescendant="${v.id}"]`,ne=T.querySelector(z);ne&&(v=ne)}if(v&&!U(v)){const T=v.closest("[data-dialog]");if(T?.id){const z=P(T),ne=`[aria-controls~="${T.id}"]`,Te=z.querySelector(ne);Te&&(v=Te)}}const D=v&&U(v);if(!D&&h){requestAnimationFrame(()=>X(i,!1));return}we(D?v:null)&&D&&v?.focus({preventScroll:!0})},[g,j,we]),oe=f.useRef(!1);L(()=>{if(w||!te||!ee)return;const i=E.current;oe.current=!0,X(i)},[w,te,S,ee,X]),f.useEffect(()=>{if(!te||!ee)return;const i=E.current;return()=>{if(oe.current){oe.current=!1;return}X(i)}},[te,ee,X]);const Ae=ie(d);f.useEffect(()=>!S||!F?void 0:me("keydown",h=>{if(h.key!=="Escape"||h.defaultPrevented)return;const y=E.current;if(!y||pe(y))return;const v=h.target;if(!v)return;const{disclosureElement:D}=g.getState();(v.tagName==="BODY"||A(y,v)||!D||A(D,v))&&Ae(h)&&g.hide()},!0),[g,S,F,Ae]),c=q(c,i=>p.jsx(_t,{level:s?1:void 0,children:i}),[s]);const Ce=c.hidden,Re=c.alwaysVisible;c=q(c,i=>a?p.jsxs(p.Fragment,{children:[p.jsx(un,{store:g,backdrop:a,hidden:Ce,alwaysVisible:Re}),i]}):i,[g,a,Ce,Re]);const[nt,rt]=f.useState(),[st,ot]=f.useState();return c=q(c,i=>p.jsx(Rt,{value:g,children:p.jsx(Tt.Provider,{value:rt,children:p.jsx(Lt.Provider,{value:ot,children:i})})}),[g]),c={id:R,"data-dialog":"",role:"dialog",tabIndex:u?-1:void 0,"aria-labelledby":nt,"aria-describedby":st,...c,ref:ke(E,c.ref)},c=ze({...c,autoFocusOnShow:et}),c=We({store:g,...c}),c=yt({...c,focusable:u}),c=Xe({portal:o,...c,portalRef:B,preserveTabOrder:se}),c});function vn(e,t=he){return Y(function(r){const u=t(),s=r.store||u;return V(s,a=>!r.unmountOnHide||a?.mounted||!!r.open)?p.jsx(e,{...r}):null})}var Sn=vn(Y(function(t){const n=gn(t);return Q(ln,n)}),he);export{Sn as D,Ne as H,Me as P,yn as V,Pn as a,gn as b,vn as c,cn as d,an as e,fn as u};
