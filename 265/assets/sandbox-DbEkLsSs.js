import{w as ae}from"./~utils-c1sb-itL.js";import{t as ie,a as t,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as z}from"./index-Dr3kRIaJ.js";import{B as oe}from"./Button-BzkgLK5W.js";import{D as X,a as G,b as O,c as g,d as ce}from"./DropdownMenu-DAx5Yusb.js";import{I as A}from"./Icon-DIv-lnpo.js";import{I as P}from"./IconButton-QW70C_Vj.js";import{S as de,H as ue}from"./Select-J8AbyuQh.js";import{T as w,a as pe,b as E,c as he}from"./Tabs-B__lkroO.js";import{T as H}from"./Text-PZ3OIcxk.js";import{T as fe,a as me,b as xe}from"./TextBox-Ek8-Brnc.js";import{V as N}from"./VisuallyHidden-CD7hmrhM.js";import{T as W,a as je}from"./Tree-CE-Ejxja.js";import{p as R}from"./placeholder-B0Trjylx.js";import{p as be,l as Ce,d as ge,h as Se,m as ke,s as K,a as _e,f as ve}from"./state-inherited-dot-Bf76G3Ac.js";import{s as Pe}from"./visibility-show-CDU1Cv5M.js";import"./index-jyeBNHV5.js";import"./KUU7WJ55-CKUtQJlz.js";import"./LVA2YJMS-TgXrMinU.js";import"./XL7CSKGW-CagW3_U_.js";import"./Kbd-DgjfOkAJ.js";import"./P2CTZE2T-4fKeMvch.js";import"./BYC7LY2E-aAFRn7dW.js";import"./VGCJ63VH-DY27gHII.js";import"./MTZPJQMC-BJzcLjZf.js";import"./VEVQD5MH-Ciqu3842.js";import"./ITI7HKP4-BwMDVXZA.js";import"./P4IRICAX-ChzmpBPM.js";import"./ASMQKSDT-Dn4maEMc.js";import"./Tooltip-CRQJrisl.js";import"./Field-Bl6F_MZ3.js";import"./~hooks-Wdjhtx2E.js";import"./ListItem-DjOyGU8K.js";const Ie="_appLayout_fkpkj_5",Me="_header_fkpkj_22",Ae="_platformBar_fkpkj_32",ye="_logo_fkpkj_38",Re="_tools_fkpkj_48",Ne="_leftPanel_fkpkj_58",Te="_panelHeader_fkpkj_70",Be="_panelTitleWrapper_fkpkj_78",De="_panelCaption_fkpkj_82",ze="_shiftIconRight_fkpkj_86",we="_subheader_fkpkj_90",Ee="_subheaderTitle_fkpkj_101",Ke="_searchInput_fkpkj_106",Le="_subheaderActions_fkpkj_110",Fe="_tabList_fkpkj_114",Xe="_emptyState_fkpkj_119",Ge="_canvasWrapper_fkpkj_128",Oe="_canvas_fkpkj_128",He="_splitter_fkpkj_165",We="_tabPanel_fkpkj_211",Ve="_tree_fkpkj_217",$e="_action_fkpkj_221",Ue="_actionIcon_fkpkj_227",qe="_slider_fkpkj_238",p={appLayout:Ie,header:Me,platformBar:Ae,logo:ye,tools:Re,leftPanel:Ne,panelHeader:Te,panelTitleWrapper:Be,panelCaption:De,shiftIconRight:ze,subheader:we,subheaderTitle:Ee,searchInput:Ke,subheaderActions:Le,tabList:Fe,emptyState:Xe,canvasWrapper:Ge,canvas:Oe,splitter:He,tabPanel:We,tree:Ve,action:$e,actionIcon:Ue,slider:qe},V="Kiwi sandbox",Xt=()=>[{title:V}],Gt=ae(function(){const[n,s]=ie(),i=n.get("tree")==="empty"?"epoch-2":"epoch-1",f=t.useCallback(r=>{s(o=>(r==="epoch-2"?o.set("tree","empty"):o.delete("tree"),o))},[s]),d=t.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),h=t.useId();return e.jsxs(Je,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p.panelHeader,children:[e.jsxs("div",{children:[e.jsx(N,{render:r=>e.jsx("label",{...r,htmlFor:h}),children:"Choose Model"}),e.jsx(de,{className:p.panelTitleWrapper,children:e.jsx(ue,{id:h,variant:"ghost",defaultValue:i,onChange:r=>f(r.target.value),children:Object.entries(d).map(([r,o])=>e.jsx("option",{value:r,children:o},r))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(N,{render:r=>e.jsx("h2",{...r}),children:d[i]}),e.jsx("p",{className:p.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:p.actions,children:e.jsx(P,{className:p.shiftIconRight,icon:be,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(at,{children:e.jsxs(it,{children:[e.jsx(rt,{}),e.jsx(w,{tabId:"simple",className:p.tabPanel,focusable:!1,children:e.jsx(L,{tree:i==="epoch-2"?"empty":"simple"})}),e.jsx(w,{tabId:"complex",className:p.tabPanel,focusable:!1,children:e.jsx(L,{tree:i==="epoch-2"?"empty":"complex"})})]})})]}),children:[e.jsxs("header",{className:p.header,children:[e.jsx("div",{className:p.logo,children:e.jsx(A,{href:R,size:"large"})}),e.jsx(H,{render:r=>e.jsx("h1",{...r}),variant:"body-md",children:V})]}),e.jsx("div",{className:p.platformBar,children:e.jsxs("div",{className:p.tools,children:[e.jsx(A,{href:R,size:"large"}),e.jsx(A,{href:R,size:"large"}),e.jsx(A,{href:R,size:"large"})]})}),e.jsx("div",{className:p.canvasWrapper,children:e.jsx("div",{className:p.canvas})})]})});function Je(l){const{sliderProps:n,panelProps:s,panelMinSize:i,panelMaxSize:f,resizing:d}=Ye({minSize:{px:256,pct:20},maxSize:{pct:30}}),h=t.useId();return e.jsxs("div",{className:p.appLayout,style:{"--_panel-min-size":i,"--_panel-max-size":f},children:[e.jsx("div",{...s,className:p.leftPanel,style:{position:"relative",...s.style},children:l.panelContent}),e.jsxs("div",{className:p.splitter,"data-resizing":d?"true":void 0,children:[e.jsx(N,{render:r=>e.jsx("label",{...r,htmlFor:h,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:h,type:"range",className:p.slider,...n})]}),l.children]})}function $(){return e.jsxs("div",{className:p.emptyState,children:[e.jsx(H,{children:"No layers"}),e.jsx(oe,{children:"Create a layer"})]})}function Qe(l,n,s){return Math.min(Math.max(l,n),s)}function Ye(l){const{minSize:n,maxSize:s,onCollapse:i}=l,f=t.useId(),d=t.useRef(null),[h,r]=t.useState(void 0),[o,c]=t.useState(void 0),[u,m]=t.useState(void 0),[x,S]=t.useState(!1),[k,I]=t.useState(void 0),C=t.useMemo(()=>{if(n&&o)return Math.min(n.px,n.pct/100*o)},[n,o]),v=t.useMemo(()=>{if(C&&s&&o)return Math.max(C,s.pct/100*o)},[s,o,C]),M=t.useMemo(()=>{if(u==="smallest")return C??0;if(u==="largest")return v??0;if(h&&C&&v)return Qe(h,C,v)},[h,C,v,u]);t.useEffect(()=>{const j=d.current;if(!j)return;const b=j.parentElement;if(!b)return;const _=new ResizeObserver(()=>{const B=b.getBoundingClientRect(),D=j.getBoundingClientRect();c(B.width),r(D.width)});return _.observe(b),_.observe(j),()=>{_.disconnect()}},[]);const Y=t.useCallback(j=>{const b=d.current;if(!b)return;const _=b.getBoundingClientRect();I(_.width+j),m(void 0),S(!0)},[]),Z=t.useCallback(j=>{const b=d.current;if(!b)return;const _=b.parentElement;if(!_)return;const B=_.getBoundingClientRect(),D=j*(B.width*.005),le=b.getBoundingClientRect();I(le.width+D),m(void 0)},[]),ee=t.useCallback(()=>{d.current&&(I(void 0),S(!1))},[]),{moveableProps:y}=Ze({onMove:Y,onMoveEnd:ee,onKeyMove:Z}),te=t.useMemo(()=>({...y,onKeyDown:j=>{var b;if((b=y.onKeyDown)==null||b.call(y,j),!j.defaultPrevented)switch(j.key){case"Enter":j.preventDefault(),i==null||i();break;case"Home":j.preventDefault(),m("smallest");break;case"End":j.preventDefault(),m("largest");break}},onChange:j=>{if(x)return;const b=Number(j.target.value);I(b)},value:M===void 0?0:Math.floor(M),min:C===void 0?void 0:Math.floor(C),max:v===void 0?void 0:Math.floor(v)}),[y,M,C,v,i,x]),ne=t.useMemo(()=>({style:{WebkitUserSelect:k===void 0?void 0:"none"},id:f,ref:d}),[f,k]),se=C===void 0?void 0:`${Math.floor(C)}px`,re=t.useMemo(()=>{if(k!==void 0&&s!==void 0&&u===void 0)return`min(${Math.floor(k)}px, ${s.pct}%)`;if(M!==void 0)return`${Math.floor(M)}px`},[s,k,M,u]);return{sliderProps:te,panelProps:ne,panelMinSize:se,panelMaxSize:re,resizing:x}}function Ze(l){const{onMove:n,onMoveEnd:s,onKeyMove:i}=l,f=t.useRef(null),d=t.useRef(void 0),h=t.useRef(void 0),r=t.useCallback(()=>{h.current!==void 0&&(h.current=void 0,s==null||s())},[s]);return{moveableProps:t.useMemo(()=>({onPointerDown:c=>{if(c.button!==0||c.ctrlKey)return;const u=f.current;if(!u)return;const m=u.getBoundingClientRect(),x=c.clientX-m.left;h.current=x,c.preventDefault(),u.setPointerCapture(c.pointerId)},onPointerMove:c=>{const u=h.current;if(u===void 0)return;const m=f.current;if(!m)return;const x=m.getBoundingClientRect(),S=c.clientX-u-x.left;c.preventDefault(),n==null||n(S)},onPointerUp:r,onPointerCancel:r,onKeyDown:c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowLeft":c.preventDefault(),i==null||i(-1);break;case"ArrowRight":c.preventDefault(),i==null||i(1);break}},ref:c=>{var m;if(f.current=c,(m=d.current)==null||m.call(d),d.current=void 0,!c)return;const u=x=>{x.preventDefault()};c.addEventListener("touchstart",u),d.current=()=>{c.removeEventListener("touchstart",u)}}}),[i,n,r])}}const U=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function L({tree:l}){const[n,s]=t.useState(),[i,f]=t.useState([]),d=t.useCallback(r=>{f(o=>o.includes(r)?o.filter(c=>c!==r):[...o,r])},[]),h=t.useMemo(()=>({selected:n,setSelected:s,hidden:i,toggleHidden:d}),[i,n,d]);return l==="empty"?e.jsx($,{}):e.jsx(U.Provider,{value:h,children:l==="simple"?e.jsx(tt,{}):l==="complex"?e.jsx(nt,{}):void 0})}const q={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function et({tree:l,filters:n,search:s}){const i=t.useMemo(()=>(l==null?void 0:l.items)??[],[l]),f=t.useMemo(()=>n.length===0?i:i.reduce((r,o)=>(!o.type||!n.includes(o.type)||r.push(o),r),[]),[i,n]),d=t.useMemo(()=>{function r(o){return o.reduce((c,u)=>{const m=r(u.items??[]);return(u.label.toLowerCase().includes(s.toLowerCase())||m.length>0)&&c.push({...u,items:m}),c},[])}return s===""?f:r(f)},[f,s]),h=t.useMemo(()=>{if(!l||n.length===0&&s==="")return;function r(o){return o.reduce((c,u)=>{const m=u.items?r(u.items):0;return c+1+m},0)}return r(d)},[d,l,n,s]);return{filteredTree:d,itemCount:h}}function J({item:l}){var n;return e.jsx(a,{label:l.label,children:(n=l.items)==null?void 0:n.map(s=>e.jsx(J,{item:s},s.label))})}function tt(){const{tree:l}=t.useContext(T);return l.length===0?e.jsx($,{}):e.jsx(W,{children:l.map(n=>e.jsx(J,{item:n},n.label))})}function nt(){return e.jsxs(W,{className:p.tree,children:[e.jsxs(a,{label:"ITC_Master",children:[e.jsx(a,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(a,{label:"002_Substation_A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(a,{label:"007-aa_master.dgn",children:[e.jsx(a,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(a,{label:"A-CLNG-LITE-A"})}),e.jsx(a,{label:"A-CLNG-TILE",children:e.jsxs(a,{label:"A-DOOR-2D-PLAN",children:[e.jsx(a,{label:"P00003 [2-KA62]",children:e.jsx(a,{label:"Cell [2-KA63]",children:e.jsxs(a,{label:"Cell [2-KA64]",children:[e.jsx(a,{label:"Complex Chain [2-KA6A]"}),e.jsx(a,{label:"Complex Chain [2-KA6B]"}),e.jsx(a,{label:"Complex Chain [2-KA6C]"}),e.jsx(a,{label:"Complex Chain [2-KA6D]"}),e.jsx(a,{label:"Complex Chain [2-KA6E]"}),e.jsx(a,{label:"Complex Chain [2-KA6F]"}),e.jsx(a,{label:"Complex Chain [2-KA6G]"}),e.jsx(a,{label:"Complex Chain [2-KA6H]"}),e.jsx(a,{label:"Complex Chain [2-KA61]"}),e.jsx(a,{label:"Complex Chain [2-KA65]"}),e.jsx(a,{label:"Complex Chain [2-KA66]"}),e.jsx(a,{label:"Complex Chain [2-KA67]"}),e.jsx(a,{label:"Complex Chain [2-KA68]"}),e.jsx(a,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(a,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA98-A]"})}),e.jsx(a,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(a,{label:"ITC_Main"})]})}const F=t.createContext({selected:!1,hidden:!1});function a(l){const n=t.useContext(U),s=t.useContext(F),i=t.useId(),[f,d]=t.useState(l.defaultCollapsed===void 0?!0:!l.defaultCollapsed),h=t.Children.count(l.children)>0,r=t.useMemo(()=>s.hidden?!0:n.hidden.includes(i),[i,n.hidden,s.hidden]),o=s.selected||i===n.selected,c=t.useCallback(u=>{n.setSelected(u?i:void 0)},[i,n]);return e.jsx(F.Provider,{value:t.useMemo(()=>({selected:o,hidden:r}),[r,o]),children:e.jsx(je,{expanded:h?f:void 0,onExpandedChange:d,selected:o,onSelectedChange:c,icon:e.jsx(A,{href:R,style:{display:"inline"}}),label:l.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(P,{className:p.action,icon:Ce,label:"Lock",variant:"ghost","aria-hidden":r}),s.hidden?e.jsx("span",{className:p.actionIcon,children:e.jsx(A,{href:ge})}):e.jsx(P,{className:p.action,icon:r?Se:Pe,label:r?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(i)}}),e.jsx(st,{hidden:r})]}),children:f?l.children:void 0})})}function st({hidden:l}){return e.jsxs(X,{children:[e.jsx(G,{className:p.action,"aria-hidden":l,render:e.jsx(P,{icon:ke,label:"More",variant:"ghost"})}),e.jsxs(O,{style:{minInlineSize:164},children:[e.jsx(g,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(g,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(g,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(g,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(g,{shortcuts:"]",children:"Bring to front"}),e.jsx(g,{shortcuts:"[",children:"Send to back"}),e.jsx(g,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(g,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(g,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(g,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(g,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(g,{shortcuts:"I",children:"Isolate object"})]})]})}function rt(){const{selectedId:l}=t.useContext(Q),{itemCount:n,filtered:s,clearFilters:i,search:f,setSearch:d}=t.useContext(T),[h,r]=t.useState(!1),o=t.useRef(null),c=t.useRef(null),u=h?e.jsxs(e.Fragment,{children:[e.jsx(lt,{filters:l==="simple"?q.filters:[]}),e.jsx(P,{className:p.shiftIconRight,icon:_e,label:"Close",variant:"ghost",onClick:()=>{var x;d(""),i(),z.flushSync(()=>r(!1)),(x=c.current)==null||x.focus()}})]}):e.jsx(P,{className:p.shiftIconRight,icon:K,label:"Search",variant:"ghost",onClick:()=>{var x;z.flushSync(()=>r(!0)),(x=o.current)==null||x.focus()},disabled:l!=="simple"}),m=t.useMemo(()=>{if(s)return n===void 0?"Showing all tree items":`Showing ${n} tree items`},[s,n]);return e.jsxs("div",{className:p.subheader,children:[e.jsx(N,{"aria-live":"polite","aria-atomic":!0,children:m}),h?void 0:e.jsxs(pe,{className:p.tabList,tone:"accent",ref:c,children:[e.jsx(E,{id:"simple",children:"Simple"}),e.jsx(E,{id:"complex",children:"Complex"})]}),h?e.jsxs(fe,{className:p.searchInput,children:[e.jsx(me,{href:K}),e.jsx(xe,{placeholder:"Search",ref:o,onChange:x=>{d(x.target.value)},value:f})]}):null,e.jsx("div",{className:p.subheaderActions,children:u})]})}function lt({filters:l}){const n=t.useContext(T);return e.jsxs(X,{children:[e.jsx(G,{render:e.jsx(P,{icon:ve,label:"Filter",variant:"ghost",disabled:l.length===0,isActive:n.filters.length>0})}),e.jsx(O,{children:l.map(s=>{const i=n.filters.includes(s);return e.jsx(ce,{name:s,checked:i,onChange:()=>{n.toggleFilter(s)},children:s},s)})})]})}function at(l){const[n,s]=t.useState(!1),[i,f]=t.useState([]),[d,h]=t.useState(""),r=t.useCallback(S=>{f(k=>k.includes(S)?k.filter(I=>I!==S):[...k,S]),s(!0)},[]),o=t.useCallback(()=>{f([]),s(!0)},[]),{filteredTree:c,itemCount:u}=et({tree:q,filters:i,search:d}),m=t.useDeferredValue(c),x=t.useCallback(S=>{h(S),s(!0)},[]);return e.jsx(t.Suspense,{fallback:"Loading...",children:e.jsx(T.Provider,{value:t.useMemo(()=>({filters:i,filtered:n,toggleFilter:r,clearFilters:o,search:d,setSearch:x,itemCount:u,tree:m}),[i,n,r,o,d,u,m,x]),children:l.children})})}function it(l){const[n,s]=t.useState(void 0);return e.jsx(Q.Provider,{value:t.useMemo(()=>({selectedId:n??""}),[n]),children:e.jsx(he,{setSelectedId:s,selectedId:n,children:l.children})})}const T=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},tree:[],itemCount:void 0}),Q=t.createContext({selectedId:""});export{Gt as default,Xt as meta};
