import{r as d}from"./index.DIfZGIpv.js";import{I as x,J as U,K as rt,L as nt,f as ut,e as st,M as L,p as ot,k as F,N as it,o as at,v as g,q as B,O as ft,n as ct,l as lt,B as dt,m as bt,P as vt}from"./ExamplePreview.B9IBCABZ.js";var m="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], summary, iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function yt(t){return Number.parseInt(t.getAttribute("tabindex")||"0",10)<0}function E(t){return!(!t.matches(m)||!rt(t)||t.closest("[inert]"))}function p(t){if(!E(t)||yt(t))return!1;if(!("form"in t)||!t.form||t.checked||t.type!=="radio")return!0;const e=t.form.elements.namedItem(t.name);if(!e||!("length"in e))return!0;const r=x(t);return!r||r===t||!("form"in r)||r.form!==t.form||r.name!==t.name}function h(t,e){const r=Array.from(t.querySelectorAll(m));e&&r.unshift(t);const u=r.filter(E);return u.forEach((o,s)=>{var f;if(!U(o))return;const a=(f=o.contentDocument)==null?void 0:f.body;a&&u.splice(s,1,...h(a))}),u}function I(t,e,r){const u=Array.from(t.querySelectorAll(m)),o=u.filter(p);return e&&p(t)&&o.unshift(t),o.forEach((s,f)=>{var a;if(!U(s))return;const l=(a=s.contentDocument)==null?void 0:a.body;if(!l)return;const b=I(l,!1,r);o.splice(f,1,...b)}),!o.length&&r?u:o}function Lt(t,e,r){const[u]=I(t,e,r);return u||null}function Ft(t,e,r,u){const o=x(t),s=h(t,e),f=s.indexOf(o),a=s.slice(f+1);return a.find(p)||(r?s.find(p):null)||(u?a[0]:null)||null}function Bt(t,e){return Ft(document.body,!1,t,e)}function Et(t,e,r,u){const o=x(t),s=h(t,e).reverse(),f=s.indexOf(o);return s.slice(f+1).find(p)||null||null||null}function Ot(t,e){return Et(document.body,!1)}function pt(t){for(;t&&!E(t);)t=t.closest(m);return t||null}function O(t){const e=x(t);if(!e)return!1;if(e===t)return!0;const r=e.getAttribute("aria-activedescendant");return r?r===t.id:!1}function xt(t){const e=x(t);if(!e)return!1;if(nt(t,e))return!0;const r=e.getAttribute("aria-activedescendant");return!r||!("id"in t)?!1:r===t.id?!0:!!t.querySelector(`#${CSS.escape(r)}`)}function mt(t){!xt(t)&&E(t)&&t.focus()}function At(t){var e;const r=(e=t.getAttribute("tabindex"))!=null?e:"";t.setAttribute("data-tabindex",r),t.setAttribute("tabindex","-1")}function qt(t,e){const r=I(t,e);for(const u of r)At(u)}function Nt(t){const e=t.querySelectorAll("[data-tabindex]"),r=u=>{const o=u.getAttribute("data-tabindex");u.removeAttribute("data-tabindex"),o?u.setAttribute("tabindex",o):u.removeAttribute("tabindex")};t.hasAttribute("data-tabindex")&&r(t);for(const u of e)r(u)}function Rt(t,e){"scrollIntoView"in t?(t.focus({preventScroll:!0}),t.scrollIntoView({block:"nearest",inline:"nearest",...e})):t.focus()}var gt=d.createContext(!0),Tt="div",q=vt(),ht=["text","search","url","tel","email","password","number","date","month","week","time","datetime","datetime-local"],_=Symbol("safariFocusAncestor");function Gt(t){return t?!!t[_]:!1}function N(t,e){t&&(t[_]=e)}function It(t){const{tagName:e,readOnly:r,type:u}=t;return e==="TEXTAREA"&&!r||e==="SELECT"&&!r?!0:e==="INPUT"&&!r?ht.includes(u):!!(t.isContentEditable||t.getAttribute("role")==="combobox"&&t.dataset.name)}function wt(t){return"labels"in t?t.labels:null}function R(t){return t.tagName.toLowerCase()==="input"&&t.type?t.type==="radio"||t.type==="checkbox":!1}function Ct(t){return t?t==="button"||t==="summary"||t==="input"||t==="select"||t==="textarea"||t==="a":!0}function Dt(t){return t?t==="button"||t==="input"||t==="select"||t==="textarea":!0}function Pt(t,e,r,u,o){return t?e?r&&!u?-1:void 0:r?o:o||0:o}function T(t,e){return F(r=>{t?.(r),!r.defaultPrevented&&e&&(r.stopPropagation(),r.preventDefault())})}var G=!1,w=!0;function kt(t){const e=t.target;e&&"hasAttribute"in e&&(e.hasAttribute("data-focus-visible")||(w=!1))}function St(t){t.metaKey||t.ctrlKey||t.altKey||(w=!0)}var Kt=st(function({focusable:e=!0,accessibleWhenDisabled:r,autoFocus:u,onFocusVisible:o,...s}){const f=d.useRef(null);d.useEffect(()=>{e&&(G||(L("mousedown",kt,!0),L("keydown",St,!0),G=!0))},[e]),q&&d.useEffect(()=>{if(!e)return;const n=f.current;if(!n||!R(n))return;const i=wt(n);if(!i)return;const c=()=>queueMicrotask(()=>n.focus());for(const y of i)y.addEventListener("mouseup",c);return()=>{for(const y of i)y.removeEventListener("mouseup",c)}},[e]);const a=e&&ot(s),l=!!a&&!r,[b,v]=d.useState(!1);d.useEffect(()=>{e&&l&&b&&v(!1)},[e,l,b]),d.useEffect(()=>{if(!e||!b)return;const n=f.current;if(!n||typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(()=>{E(n)||v(!1)});return i.observe(n),()=>i.disconnect()},[e,b]);const j=T(s.onKeyPressCapture,a),H=T(s.onMouseDownCapture,a),J=T(s.onClickCapture,a),C=s.onMouseDown,W=F(n=>{if(C?.(n),n.defaultPrevented||!e)return;const i=n.currentTarget;if(!q||it(n)||!at(i)&&!R(i))return;let c=!1;const y=()=>{c=!0},et={capture:!0,once:!0};i.addEventListener("focusin",y,et);const V=pt(i.parentElement);N(V,!0),g(i,"mouseup",()=>{i.removeEventListener("focusin",y,!0),N(V,!1),!c&&mt(i)})}),D=(n,i)=>{if(i&&(n.currentTarget=i),!e)return;const c=n.currentTarget;c&&O(c)&&(o?.(n),!n.defaultPrevented&&(c.dataset.focusVisible="true",v(!0)))},P=s.onKeyDownCapture,X=F(n=>{if(P?.(n),n.defaultPrevented||!e||b||n.metaKey||n.altKey||n.ctrlKey||!B(n))return;const i=n.currentTarget;g(i,"focusout",()=>D(n,i))}),k=s.onFocusCapture,$=F(n=>{if(k?.(n),n.defaultPrevented||!e)return;if(!B(n)){v(!1);return}const i=n.currentTarget,c=()=>D(n,i);w||It(n.target)?g(n.target,"focusout",c):v(!1)}),S=s.onBlur,z=F(n=>{S?.(n),e&&ft(n)&&(n.currentTarget.removeAttribute("data-focus-visible"),v(!1))}),Q=d.useContext(gt),Y=F(n=>{e&&u&&n&&Q&&queueMicrotask(()=>{O(n)||E(n)&&n.focus()})}),K=ct(f),Z=e&&Ct(K),M=e&&Dt(K),A=s.style,tt=d.useMemo(()=>l?{pointerEvents:"none",...A}:A,[l,A]);return s={"data-focus-visible":e&&b||void 0,"data-autofocus":u||void 0,"aria-disabled":a||void 0,...s,ref:lt(f,Y,s.ref),style:tt,tabIndex:Pt(e,l,Z,M,s.tabIndex),disabled:M&&l?!0:void 0,contentEditable:a?void 0:s.contentEditable,onKeyPressCapture:j,onClickCapture:J,onMouseDownCapture:H,onMouseDown:W,onKeyDownCapture:X,onFocusCapture:$,onBlur:z},dt(s)}),Ut=ut(function(e){const r=Kt(e);return bt(Tt,r)});export{Ut as F,xt as a,Bt as b,Ot as c,qt as d,gt as e,Rt as f,I as g,O as h,Gt as i,Lt as j,E as k,mt as l,Nt as r,Kt as u};
