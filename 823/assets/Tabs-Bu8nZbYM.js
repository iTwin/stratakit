import{a as h,o as T}from"./chunk-QMGIS6GS-BaJhsRKI.js";import{m as ce,o as J,n as le,p as k,q as R,A as ie,t as Z,v as Q,l as $,f as V,c as A,R as de,I as ue}from"./sun-D8Utyjmt.js";import{r as me,p as be,j as fe,s as ve,v as Ie,w as pe}from"./~utils-CSYMW5I_.js";import{a as ee,b as te,C as U,u as xe}from"./6VRAQV3D-DxKeqvoG.js";import{I as oe,H as Se,F as O,E as M,d as N,J as X,_ as S,b,G as Y,a1 as Ce,f as B,c as K,a as q,j as z,P as G,Q as se,p as Pe,q as H,m as ne,u as he}from"./LMDWO4NN-CcJUQKmw.js";import{c as Te,a as ge,b as Ee}from"./5JTVDSTH-cziQXEW-.js";import{u as _e}from"./S43UC3DV-C1CBEIsz.js";import{c as Re,b as je}from"./RZ4GPYOB-BIDEWyXu.js";var ye=oe([be,te],[me,ee]),De=ye.useContext;h.createContext(!1);h.createContext(null);function Le(t={}){var s=t,{composite:o,combobox:e}=s,n=Se(s,["composite","combobox"]);const a=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],p=ce(n.store,J(o,a),J(e,a)),i=p?.getState(),f=Te(O(N({},n),{store:p,includesBaseElement:M(n.includesBaseElement,i?.includesBaseElement,!1),orientation:M(n.orientation,i?.orientation,"horizontal"),focusLoop:M(n.focusLoop,i?.focusLoop,!0)})),r=Re(),y=O(N({},f.getState()),{selectedId:M(n.selectedId,i?.selectedId,n.defaultSelectedId),selectOnMove:M(n.selectOnMove,i?.selectOnMove,!0)}),c=le(y,f,p);k(c,()=>R(c,["moves"],()=>{const{activeId:d,selectOnMove:m}=c.getState();if(!m||!d)return;const v=f.item(d);v&&(v.dimmed||v.disabled||c.setState("selectedId",v.id))}));let C=!0;k(c,()=>ie(c,["selectedId"],(d,m)=>{if(!C){C=!0;return}o&&d.selectedId===m.selectedId||c.setState("activeId",d.selectedId)})),k(c,()=>R(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:m,renderedItems:v}=c.getState(),I=f.item(m);if(I&&!I.disabled&&!I.dimmed)c.setState("selectedId",I.id);else{const E=v.find(P=>!P.disabled&&!P.dimmed);c.setState("selectedId",E?.id)}})),k(c,()=>R(c,["renderedItems"],d=>{const m=d.renderedItems;if(m.length)return R(r,["renderedItems"],v=>{const I=v.renderedItems;I.some(P=>!P.tabId)&&I.forEach((P,D)=>{if(P.tabId)return;const w=m[D];w&&r.renderItem(O(N({},P),{tabId:w.id}))})})}));let x=null;return k(c,()=>{const d=()=>{x=c.getState().selectedId},m=()=>{C=!1,c.setState("selectedId",x)};if(o&&"setSelectElement"in o)return X(R(o,["value"],d),R(o,["mounted"],m));if(e)return X(R(e,["selectedValue"],d),R(e,["mounted"],m))}),O(N(N({},f),c),{panels:r,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),f.move(d)}})}function we(t,s,o){Y(s,[o.composite,o.combobox]),t=ge(t,s,o),Q(t,o,"selectedId","setSelectedId"),Q(t,o,"selectOnMove");const[e,n]=Z(()=>t.panels,{});return Y(n,[t,n]),Object.assign(h.useMemo(()=>S(b({},t),{panels:e}),[t,e]),{composite:o.composite,combobox:o.combobox})}function Fe(t={}){const s=_e(),o=De()||s;t=S(b({},t),{composite:t.composite!==void 0?t.composite:o,combobox:t.combobox!==void 0?t.combobox:s});const[e,n]=Z(Le,t);return we(e,n,t)}var W=oe([te],[ee]),ke=W.useScopedContext,re=W.useProviderContext,Me=W.ContextProvider,ae=W.ScopedContextProvider,Ne="button",Oe=K(function(s){var o=s,{store:e,getItem:n}=o,a=z(o,["store","getItem"]),p;const i=ke();e=e||i,G(e,!1);const f=se(),r=a.id||f,y=Pe(a),c=h.useCallback(u=>{const j=S(b({},u),{dimmed:y});return n?n(j):j},[y,n]),C=a.onClick,x=H(u=>{C?.(u),!u.defaultPrevented&&e?.setSelectedId(r)}),d=e.panels.useState(u=>{var j;return(j=u.items.find(l=>l.tabId===r))==null?void 0:j.id}),m=f?a.shouldRegisterItem:!1,v=e.useState(u=>!!r&&u.activeId===r),I=e.useState(u=>!!r&&u.selectedId===r),E=e.useState(u=>!!e.item(u.activeId)),P=v||I&&!E,D=I||((p=a.accessibleWhenDisabled)!=null?p:!0);if($(e.combobox||e.composite,"virtualFocus")&&(a=S(b({},a),{tabIndex:-1})),a=S(b({id:r,role:"tab","aria-selected":I,"aria-controls":d||void 0},a),{onClick:x}),e.composite){const u={id:r,accessibleWhenDisabled:D,store:e.composite,shouldRegisterItem:P&&m,rowId:a.rowId,render:a.render};a=S(b({},a),{render:T.jsx(U,S(b({},u),{render:e.combobox&&e.composite!==e.combobox?T.jsx(U,S(b({},u),{store:e.combobox})):u.render}))})}return a=xe(S(b({store:e},a),{accessibleWhenDisabled:D,getItem:c,shouldRegisterItem:m})),a}),$e=Ce(B(function(s){const o=Oe(s);return q(Ne,o)}));function Ve(t={}){const s=Fe(t);return T.jsx(Me,{value:s,children:t.children})}var Ae="div",We=K(function(s){var o=s,{store:e}=o,n=z(o,["store"]);const a=re();e=e||a,G(e,!1);const p=e.useState(i=>i.orientation==="both"?void 0:i.orientation);return n=ne(n,i=>T.jsx(ae,{value:e,children:i}),[e]),e.composite&&(n=b({focusable:!1},n)),n=b({role:"tablist","aria-orientation":p},n),n=Ee(b({store:e},n)),n}),He=B(function(s){const o=We(s);return q(Ae,o)}),Be="div",Ke=K(function(s){var o=s,{store:e,unmountOnHide:n,tabId:a,getItem:p,scrollRestoration:i,scrollElement:f}=o,r=z(o,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const y=re();e=e||y,G(e,!1);const c=h.useRef(null),C=se(r.id),x=$(e.panels,()=>{var l;return a||((l=e?.panels.item(C))==null?void 0:l.tabId)}),d=$(e,l=>!!x&&l.selectedId===x),m=fe({open:d}),v=$(m,"mounted"),I=h.useRef(new Map),E=H(()=>{const l=c.current;return l?f?typeof f=="function"?f(l):"current"in f?f.current:f:l:null});h.useEffect(()=>{var l,_;if(!i||!v)return;const g=E();if(!g)return;if(i==="reset"){g.scroll(0,0);return}if(!x)return;const L=I.current.get(x);g.scroll((l=L?.x)!=null?l:0,(_=L?.y)!=null?_:0);const F=()=>{I.current.set(x,{x:g.scrollLeft,y:g.scrollTop})};return g.addEventListener("scroll",F),()=>{g.removeEventListener("scroll",F)}},[i,v,x,E,e]);const[P,D]=h.useState(!1);h.useEffect(()=>{const l=c.current;if(!l)return;const _=ve(l);D(!!_.length)},[]);const w=h.useCallback(l=>{const _=S(b({},l),{id:C||l.id,tabId:a});return p?p(_):_},[C,a,p]),u=r.onKeyDown,j=H(l=>{if(u?.(l),l.defaultPrevented||!e?.composite)return;const g={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!g)return;const{selectedId:L}=e.getState(),F=g({activeId:L});F&&(l.preventDefault(),e.move(F))});return r=ne(r,l=>T.jsx(ae,{value:e,children:l}),[e]),r=S(b({id:C,role:"tabpanel","aria-labelledby":x||void 0},r),{children:n&&!v?null:r.children,ref:he(c,r.ref),onKeyDown:j}),r=Ie(b({focusable:!e.composite&&!P},r)),r=pe(b({store:m},r)),r=je(S(b({store:e.panels},r),{getItem:w})),r}),qe=B(function(s){const o=Ke(s);return q(Be,o)});function et(t){const{defaultSelectedId:s,selectedId:o,setSelectedId:e,selectOnMove:n,children:a}=t;return T.jsx(Ve,{defaultSelectedId:s,selectedId:o,setSelectedId:e,selectOnMove:n,children:a})}const tt=V((t,s)=>{const{tone:o="neutral",...e}=t;return T.jsx(He,{...e,"data-kiwi-tone":o,className:A("-tab-list",t.className),ref:s})}),ot=V((t,s)=>T.jsx($e,{accessibleWhenDisabled:!0,...t,className:A("-tab",t.className),ref:s})),st=V((t,s)=>T.jsx(qe,{...t,className:A("-tab-panel",t.className),ref:s})),nt=V((t,s)=>{const{children:o,...e}=t;return T.jsx(de.span,{...e,className:A("-tab-icon",t.className),ref:s,children:h.isValidElement(o)?T.jsx(ue,{render:o}):null})});export{et as T,ot as a,st as b,tt as c,nt as d};
