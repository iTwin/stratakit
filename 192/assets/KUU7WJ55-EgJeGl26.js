import{u as x}from"./LVA2YJMS-CJu9Hm7S.js";import{b as A,_ as m,a0 as d,I as B,M as F,l as _,t as O,q as Y,ag as j,ab as H,ah as v,g as L,u as V,d as M,f as z,e as G}from"./index-BKiZWcHg.js";import{r as n}from"./chunk-D52XG6IA-CwR_5lM7.js";var J="button";function T(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=A(function(t){var o=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=o,r=m(o,["clickOnEnter","clickOnSpace"]);const f=n.useRef(null),[C,D]=n.useState(!1);n.useEffect(()=>{f.current&&D(d(f.current))},[]);const[R,y]=n.useState(!1),l=n.useRef(!1),E=B(r),[g,K]=F(r,Q,!0),b=r.onKeyDown,w=_(e=>{b==null||b(e);const s=e.currentTarget;if(e.defaultPrevented||g||E||!O(e)||Y(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",i=c&&e.key===" ",p=e.key==="Enter"&&!k,I=e.key===" "&&!c;if(p||I){e.preventDefault();return}if(u||i){const S=T(e);if(u){if(!S){e.preventDefault();const h=e,q=m(h,["view"]),N=()=>v(s,q);j()?H(s,"keyup",N):queueMicrotask(N)}}else i&&(l.current=!0,S||(e.preventDefault(),y(!0)))}}),P=r.onKeyUp,U=_(e=>{if(P==null||P(e),e.defaultPrevented||g||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!T(e))){e.preventDefault(),y(!1);const u=e.currentTarget,i=e,p=m(i,["view"]);queueMicrotask(()=>v(u,p))}});return r=L(M(M({"data-active":R||void 0,type:C?"button":void 0},K),r),{ref:V(f,r.ref),onKeyDown:w,onKeyUp:U}),r=x(r),r});z(function(t){const o=W(t);return G(J,o)});export{W as u};
