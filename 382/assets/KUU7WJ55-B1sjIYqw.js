import{m as A,_ as m,ao as d,S as F,a5 as O,D as _,I as h,H as q,aB as H,aC as Y,aD as C,z as j,M as z,o as M,ae as L,l as V,n as G}from"./~utils-uJvYrrjF.js";import{b as o}from"./index-DDCMeoDP.js";var J="button";function T(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=A(function(t){var i=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=i,r=m(i,["clickOnEnter","clickOnSpace"]);const f=o.useRef(null),[w,R]=o.useState(!1);o.useEffect(()=>{f.current&&R(d(f.current))},[]);const[K,y]=o.useState(!1),l=o.useRef(!1),E=F(r),[S,U]=O(r,Q,!0),P=r.onKeyDown,B=_(e=>{P==null||P(e);const s=e.currentTarget;if(e.defaultPrevented||S||E||!h(e)||q(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",n=c&&e.key===" ",g=e.key==="Enter"&&!k,p=e.key===" "&&!c;if(g||p){e.preventDefault();return}if(u||n){const v=T(e);if(u){if(!v){e.preventDefault();const D=e,{view:X}=D,x=m(D,["view"]),N=()=>C(s,x);H()?Y(s,"keyup",N):queueMicrotask(N)}}else n&&(l.current=!0,v||(e.preventDefault(),y(!0)))}}),b=r.onKeyUp,I=_(e=>{if(b==null||b(e),e.defaultPrevented||S||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!T(e))){e.preventDefault(),y(!1);const u=e.currentTarget,n=e,{view:g}=n,p=m(n,["view"]);queueMicrotask(()=>C(u,p))}});return r=j(M(M({"data-active":K||void 0,type:w?"button":void 0},U),r),{ref:z(f,r.ref),onKeyDown:B,onKeyUp:I}),r=L(r),r});V(function(t){const i=W(t);return G(J,i)});export{W as u};
