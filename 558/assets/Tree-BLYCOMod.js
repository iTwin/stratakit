import{p as e,b as l}from"./index-DDCMeoDP.js";import{b as B}from"./P2CTZE2T-Oraoa5U-.js";import{b7 as O,ac as S,l as j,d as v,b4 as h,b8 as E,o as y,I as G,aa as P,b as H,S as _,O as q,b9 as z,Q,ba as U}from"./~utils-BhmzMCo7.js";import{a as V,T as W}from"./BOLVLGVE-BLCfko3R.js";import{L as J,e as C,f as g,d as X,D as Y,a as Z,b as $}from"./DropdownMenu-B9uXYHam.js";import{b as ee,C as te}from"./ITI7HKP4-zA5WkCs6.js";function re(t={}){const i=O(t);return e.jsx(S,{value:i,children:t.children})}const I=l.createContext(void 0),xe=j((t,i)=>{const{"aria-level":s,selected:n,expanded:r,icon:u,unstable_decorations:a,label:c,description:x,actions:N,error:m,onSelectedChange:p,onExpandedChange:f,onClick:K,onKeyDown:T,...F}=t,M=o=>{n!==void 0&&(o.stopPropagation(),p==null||p(!n))},R=o=>{o.altKey||o.ctrlKey||o.metaKey||o.shiftKey||r!==void 0&&(o.key==="ArrowRight"||o.key==="ArrowLeft")&&(o.preventDefault(),f==null||f(o.key==="ArrowRight"))},k=l.useId(),w=l.useId(),b=l.useId(),D=typeof m=="string"?m:void 0,d=m?e.jsx(_,{}):u,L=l.useMemo(()=>{const o=[];return x&&o.push(w),(a||d)&&o.push(b),D&&o.push(D),o.length>0?o.join(" "):void 0},[a,d,b,x,w,D]);return e.jsx(I.Provider,{value:l.useMemo(()=>({level:s,expanded:r,selected:n,error:m}),[s,r,n,m]),children:e.jsx(B,{render:e.jsx(y,{...F}),onClick:h(K,M),onKeyDown:h(T,R),role:"treeitem","aria-expanded":r,"aria-selected":n,"aria-labelledby":k,"aria-describedby":L,"aria-level":s,className:v("-tree-item",t.className),ref:i,children:e.jsxs(J,{"data-kiwi-expanded":r,"data-kiwi-selected":n,"data-kiwi-error":m?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":s},role:void 0,children:[e.jsxs(C,{children:[e.jsx(E,{align:x?"block":void 0,children:e.jsx(ae,{onClick:()=>{r!==void 0&&(f==null||f(!r))}})}),d||a?e.jsx(y,{className:"-tree-item-decoration",id:b,render:l.isValidElement(d)?d:typeof d=="string"?e.jsx(G,{href:d}):void 0,children:d?null:a}):null]}),e.jsx(g,{id:k,className:"-tree-item-content",children:c}),x?e.jsx(g,{id:w,className:"-tree-item-description",children:x}):void 0,e.jsx(C,{render:e.jsx(oe,{children:N})})]})})})}),oe=j((t,i)=>{const{children:s,...n}=t,r=l.Children.toArray(s).filter(Boolean),{error:u}=P(I),a=u?2:3;return e.jsxs(W,{...n,onClick:h(t.onClick,c=>c.stopPropagation()),onKeyDown:h(t.onKeyDown,c=>c.stopPropagation()),className:v("-tree-item-actions-container",t.className),focusLoop:!1,ref:i,children:[r.slice(0,a-1),r.length===a?r[a-1]:null,r.length>a?e.jsx(ne,{children:r.slice(a-1)}):null]})}),se=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],A=l.createContext(!1);function ne({children:t}){const[i,s]=l.useState(!1),n=l.useRef(!1);return e.jsx(re,{placement:"right-start",children:e.jsxs(Y,{open:i,setOpen:l.useCallback(r=>{r&&!n.current?s(!0):s(!1)},[]),children:[e.jsx(Z,{onKeyDown:r=>{se.includes(r.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:e.jsx(ie,{label:"More",icon:e.jsx(U,{})})}),e.jsx(A.Provider,{value:!0,children:e.jsx($,{children:t})})]})})}const ie=j((t,i)=>{const{error:s}=P(I),{visible:n=s?!0:void 0,label:r,icon:u,dot:a,...c}=t;return l.useContext(A)?e.jsx(X,{...c,label:r,icon:u,unstable_dot:a,ref:i}):e.jsx(V,{render:e.jsx(H,{label:r,icon:u,inert:n===!1?!0:void 0,...c,dot:a,variant:"ghost",className:v("-tree-item-action",t.className),"data-kiwi-visible":n,ref:i})})}),ae=j((t,i)=>e.jsx(q,{"aria-hidden":"true",...t,onClick:h(t.onClick,s=>s.stopPropagation()),className:v("-ghost-aligner","-tree-item-expander",t.className),variant:"ghost","data-kiwi-ghost-align":z(),ref:i,children:e.jsx(Q,{})})),he=j((t,i)=>{const s=ee({orientation:"vertical"});return e.jsx(y.div,{role:"tree",...t,render:e.jsx(te,{store:s}),className:v("-tree",t.className),ref:i,children:t.children})});export{he as T,xe as a,ie as b};
