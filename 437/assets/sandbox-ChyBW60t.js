import{w as re}from"./LMDWO4NN-B4nGdrVW.js";import{t as se,a as n,n as e}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{a as F}from"./index-ChOFKjs3.js";import{B as le}from"./Button-DYQuCyp4.js";import{D as V,a as $,b as U,c as _,d as ae}from"./DropdownMenu-CazLKeyc.js";import{I as M}from"./Icon-jxEBUDqi.js";import{I as T}from"./IconButton-CmSl3IFw.js";import{S as ie,H as ce}from"./Select-B_aR5oWm.js";import{T as O,a as de,b as ue,c as G}from"./Tabs-CpjChfU-.js";import{T as D}from"./Text-H31yAToC.js";import{T as pe,a as me,b as he}from"./TextBox-CDdSyAy1.js";import{V as N}from"./VisuallyHidden-58zOs0MC.js";import{T as fe,a as be,b as E}from"./Tree-DWyH3AlQ.js";import{p as R}from"./placeholder-BRQ1b2QT.js";import{p as xe,s as H,l as ve,h as Ce,d as ge,m as je,f as Se}from"./visibility-hide-CAQek-Bc.js";import{s as _e}from"./visibility-show-ohkl5fdj.js";import"./index-D8t6DtFD.js";import"./X5NMLKT6-0i-9lnJj.js";import"./KUU7WJ55-DVItAj-H.js";import"./LVA2YJMS-Tms0fA8-.js";import"./~utils-CDNTHryc.js";import"./XL7CSKGW-VRHdm9RR.js";import"./Kbd-BIaoVH0N.js";import"./~hooks-Cmnc4hzK.js";import"./YV4JVR4I-_qJ7xRSW.js";import"./P2CTZE2T-De4A71L_.js";import"./RZ4GPYOB-DKE3AABr.js";import"./BYC7LY2E-CWtJGSN3.js";import"./VGCJ63VH-BjWQ6_Pt.js";import"./XX67R432-D0T8Ja6l.js";import"./AOQQTIBO-B4HjLz2q.js";import"./MTZPJQMC-CbCSI5km.js";import"./ITI7HKP4-COQ6ldUq.js";import"./C3IKGW5T-fYOVmh-_.js";import"./VEVQD5MH-BGLRE-Dw.js";import"./P4IRICAX-XS3oTpaW.js";import"./ASMQKSDT-3F27oc67.js";import"./BOLVLGVE-BVCqAf8l.js";import"./Tooltip-09vpXJRU.js";import"./tooltip-anchor-BGDIOyOk.js";import"./Field-DCzkZI90.js";import"./~utils.ListItem-59O1u7KR.js";import"./~utils-DwzaeBQS.js";import"./~hooks-Cctm3vPi.js";const Ie="_appLayout_1i9n6_5",ye="_header_1i9n6_22",Ae="_platformBar_1i9n6_32",Pe="_logo_1i9n6_38",Me="_tools_1i9n6_48",Re="_leftPanel_1i9n6_58",Ne="_panelHeader_1i9n6_70",we="_panelTitleWrapper_1i9n6_78",Te="_panelCaption_1i9n6_82",Be="_shiftIconRight_1i9n6_86",ze="_subheader_1i9n6_90",ke="_searchInput_1i9n6_106",Le="_subheaderActions_1i9n6_110",Ee="_tabList_1i9n6_114",De="_emptyState_1i9n6_119",Ke="_canvasWrapper_1i9n6_128",Fe="_canvas_1i9n6_128",Oe="_splitter_1i9n6_165",Ge="_tabPanel_1i9n6_211",He="_tree_1i9n6_219",Xe="_action_1i9n6_223",We="_slider_1i9n6_240",Ve="_colorSwatch_1i9n6_249",p={appLayout:Ie,header:ye,platformBar:Ae,logo:Pe,tools:Me,leftPanel:Re,panelHeader:Ne,panelTitleWrapper:we,panelCaption:Te,shiftIconRight:Be,subheader:ze,searchInput:ke,subheaderActions:Le,tabList:Ee,emptyState:De,canvasWrapper:Ke,canvas:Fe,splitter:Oe,tabPanel:Ge,tree:He,action:Xe,slider:We,colorSwatch:Ve},Z="Kiwi sandbox",qt=()=>[{title:Z}],Qt=re(function(){const[o,r]=se(),s=o.get("tree")==="empty"?"epoch-2":"epoch-1",m=n.useCallback(i=>{r(f=>(i==="epoch-2"?f.set("tree","empty"):f.delete("tree"),f))},[r]),h=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),d=n.useId();return e.jsxs($e,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p.panelHeader,children:[e.jsxs("div",{children:[e.jsx(N,{render:i=>e.jsx("label",{...i,htmlFor:d}),children:"Choose Model"}),e.jsx(ie,{className:p.panelTitleWrapper,children:e.jsx(ce,{id:d,variant:"ghost",defaultValue:s,onChange:i=>m(i.target.value),children:Object.entries(h).map(([i,f])=>e.jsx("option",{value:i,children:f},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(N,{render:i=>e.jsx("h2",{...i}),children:h[s]}),e.jsx("p",{className:p.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{className:p.actions,children:e.jsx(T,{className:p.shiftIconRight,icon:xe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(st,{children:e.jsxs(rt,{children:[e.jsx(nt,{}),e.jsx(O,{tabId:"simple",className:p.tabPanel,focusable:!1,children:s==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"simple"})}),e.jsx(O,{tabId:"complex",className:p.tabPanel,focusable:!1,children:s==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:p.header,children:[e.jsx("div",{className:p.logo,children:e.jsx(M,{href:R,size:"large"})}),e.jsx(D,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:Z})]}),e.jsx("div",{className:p.platformBar,children:e.jsxs("div",{className:p.tools,children:[e.jsx(M,{href:R,size:"large"}),e.jsx(M,{href:R,size:"large"}),e.jsx(M,{href:R,size:"large"})]})}),e.jsx("div",{className:p.canvasWrapper,children:e.jsx("div",{className:p.canvas})})]})});function $e(l){const{sliderProps:o,panelProps:r,panelMinSize:s,panelMaxSize:m,resizing:h}=Je({minSize:{px:256,pct:20},maxSize:{pct:30}}),d=n.useId();return e.jsxs("div",{className:p.appLayout,style:{"--_panel-min-size":s,"--_panel-max-size":m},children:[e.jsx("div",{...r,className:p.leftPanel,style:{position:"relative",...r.style},children:l.panelContent}),e.jsxs("div",{className:p.splitter,"data-resizing":h?"true":void 0,children:[e.jsx(N,{render:i=>e.jsx("label",{...i,htmlFor:d,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:d,type:"range",className:p.slider,...o})]}),l.children]})}function X(){return e.jsxs("div",{className:p.emptyState,children:[e.jsx(D,{variant:"body-sm",children:"No layers"}),e.jsx(le,{children:"Create a layer"})]})}function Ue(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(D,{variant:"body-sm",children:"No results found"})})}function Ze(l,o,r){return Math.min(Math.max(l,o),r)}function Je(l){const{minSize:o,maxSize:r,onCollapse:s}=l??{},m=n.useId(),h=n.useRef(null),[d,i]=n.useState(void 0),[f,a]=n.useState(void 0),[u,b]=n.useState(void 0),[x,v]=n.useState(!1),[I,A]=n.useState(void 0),c=n.useMemo(()=>{if(o&&f)return Math.min(o.px,o.pct/100*f)},[o,f]),j=n.useMemo(()=>{if(c&&r&&f)return Math.max(c,r.pct/100*f)},[r,f,c]),S=n.useMemo(()=>{if(u==="smallest")return c??0;if(u==="largest")return j??0;if(d&&c&&j)return Ze(d,c,j)},[d,c,j,u]);n.useEffect(()=>{const C=h.current;if(!C)return;const g=C.parentElement;if(!g)return;const y=new ResizeObserver(()=>{const k=g.getBoundingClientRect(),L=C.getBoundingClientRect();a(k.width),i(L.width)});return y.observe(g),y.observe(C),()=>{y.disconnect()}},[]);const w=n.useCallback(C=>{const g=h.current;if(!g)return;const y=g.getBoundingClientRect();A(y.width+C),b(void 0),v(!0)},[]),z=n.useCallback(C=>{const g=h.current;if(!g)return;const y=g.parentElement;if(!y)return;const k=y.getBoundingClientRect(),L=C*(k.width*.005),oe=g.getBoundingClientRect();A(oe.width+L),b(void 0)},[]),Q=n.useCallback(()=>{h.current&&(A(void 0),v(!1))},[]),{moveableProps:P}=qe({onMove:w,onMoveEnd:Q,onKeyMove:z}),Y=n.useMemo(()=>({...P,onKeyDown:C=>{var g;if((g=P.onKeyDown)==null||g.call(P,C),!C.defaultPrevented)switch(C.key){case"Enter":C.preventDefault(),s==null||s();break;case"Home":C.preventDefault(),b("smallest");break;case"End":C.preventDefault(),b("largest");break}},onChange:C=>{if(x)return;const g=Number(C.target.value);A(g)},value:S===void 0?0:Math.floor(S),min:c===void 0?void 0:Math.floor(c),max:j===void 0?void 0:Math.floor(j)}),[P,S,c,j,s,x]),ee=n.useMemo(()=>({style:{WebkitUserSelect:I===void 0?void 0:"none"},id:m,ref:h}),[m,I]),te=c===void 0?void 0:`${Math.floor(c)}px`,ne=n.useMemo(()=>{if(I!==void 0&&r!==void 0&&u===void 0)return`min(${Math.floor(I)}px, ${r.pct}%)`;if(S!==void 0)return`${Math.floor(S)}px`},[r,I,S,u]);return{sliderProps:Y,panelProps:ee,panelMinSize:te,panelMaxSize:ne,resizing:x}}function qe(l){const{onMove:o,onMoveEnd:r,onKeyMove:s}=l??{},m=n.useRef(null),h=n.useRef(void 0),d=n.useRef(void 0),i=n.useCallback(()=>{d.current!==void 0&&(d.current=void 0,r==null||r())},[r]);return{moveableProps:n.useMemo(()=>({onPointerDown:a=>{if(a.button!==0||a.ctrlKey)return;const u=m.current;if(!u)return;const b=u.getBoundingClientRect(),x=a.clientX-b.left;d.current=x,a.preventDefault(),u.setPointerCapture(a.pointerId)},onPointerMove:a=>{const u=d.current;if(u===void 0)return;const b=m.current;if(!b)return;const x=b.getBoundingClientRect(),v=a.clientX-u-x.left;a.preventDefault(),o==null||o(v)},onPointerUp:i,onPointerCancel:i,onKeyDown:a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowLeft":a.preventDefault(),s==null||s(-1);break;case"ArrowRight":a.preventDefault(),s==null||s(1);break}},ref:a=>{var b;if(m.current=a,(b=h.current)==null||b.call(h),h.current=void 0,!a)return;const u=x=>{x.preventDefault()};a.addEventListener("touchstart",u),h.current=()=>{a.removeEventListener("touchstart",u)}}}),[s,o,i])}}const t=(()=>{let l=0;return o=>({id:`${l++}`,label:`Tree Item ${l}`,items:[],expanded:!0,...o})})(),J={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},Qe={items:[t({label:"ITC_Master",color:"purple",items:[t({label:"002_Substation",expanded:!1,color:"red",items:[t({label:"002_Substation_A"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-COLS",description:"Columns",expanded:!1,color:"yellow",items:[t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-JOIS-ENVL",description:"Bar Joist: Envelopes",color:"teal"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-SLAB-CONC",description:"Slabs: Concrete",color:"green"}),t({label:"003-BENSTR-ZO-LG2-M3-S-00001 - S-BEAM-PURL",description:"Columns: concrete",color:"yellow"}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,color:"yellow",items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A",color:"red"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",color:"yellow",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A",color:"blue"})]}),t({label:"007-aa_master.dgn",color:"green",items:[t({label:"A-CLNG-LITE",expanded:!1,color:"blue",items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",color:"gray",items:[t({label:"A-DOOR-2D-PLAN",color:"green",items:[t({label:"P00003 [2-KA62]",color:"yellow",items:[t({label:"Cell [2-KA63]",color:"teal",items:[t({label:"Cell [2-KA64]",color:"red",items:[t({label:"Complex Chain [2-KA6A]",color:"purple"}),t({label:"Complex Chain [2-KA6B]",color:"purple"}),t({label:"Complex Chain [2-KA6C]",color:"purple"}),t({label:"Complex Chain [2-KA6D]",color:"purple"}),t({label:"Complex Chain [2-KA6E]",color:"purple"}),t({label:"Complex Chain [2-KA6F]",color:"purple"}),t({label:"Complex Chain [2-KA6G]",color:"purple"}),t({label:"Complex Chain [2-KA6H]",color:"purple"}),t({label:"Complex Chain [2-KA61]",color:"purple"}),t({label:"Complex Chain [2-KA65]",color:"purple"}),t({label:"Complex Chain [2-KA66]",color:"purple"}),t({label:"Complex Chain [2-KA67]",color:"purple"}),t({label:"Complex Chain [2-KA68]",color:"purple"}),t({label:"Complex Chain [2-KA69]",color:"purple"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,color:"yellow",items:[t({label:"P00003 [2-KA74-A]",color:"green"})]}),t({label:"P00003 [2-KA86]",expanded:!1,color:"teal",items:[t({label:"P00003 [2-KA74-A]",color:"blue"})]}),t({label:"P00003 [2-KA98]",expanded:!1,color:"red",items:[t({label:"P00003 [2-KA98-A]",color:"purple"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,color:"teal",items:[t({label:"P00003 [2-KAAA-A]",color:"gray"})]})]})]})]})]})]};function Ye({items:l,filters:o,search:r}){const s=n.useMemo(()=>o.length===0?l:l.reduce((d,i)=>(!i.type||!o.includes(i.type)||d.push(i),d),[]),[l,o]),m=n.useMemo(()=>{function d(i){return i.reduce((f,a)=>{const u=d(a.items??[]);return(a.label.toLowerCase().includes(r.toLowerCase())||u.length>0)&&f.push({...a,items:u}),f},[])}return r===""?s:d(s)},[s,r]),h=n.useMemo(()=>{if(o.length===0&&r==="")return;function d(i){return i.reduce((f,a)=>{const u=a.items?d(a.items):0;return f+1+u},0)}return d(m)},[m,o,r]);return{filteredTree:m,itemCount:h}}function et(l,o,r){return n.useMemo(()=>{function s(m,h,d,i,f){const a=[];let u=1;for(const b of m){const x=b.id===o||i,v=r.includes(b.id)||f;a.push({...b,level:d,parentItem:h,selected:x,hidden:v,parentHidden:f,position:u++,size:m.length}),b.expanded&&a.push(...s(b.items,b,d+1,x,v))}return a}return s(l,void 0,1,!1,!1)},[l,o,r])}function q(l,o){for(const r of l){if(r.id===o)return r;const s=q(r.items,o);if(s)return s}}function W({tree:l}){const{selectedId:o}=n.useContext(K),{filters:r,search:s,setItemCount:m}=n.useContext(B),[h,d]=n.useState(),[i,f]=n.useState([]),a=n.useCallback(c=>{f(j=>j.includes(c)?j.filter(S=>S!==c):[...j,c])},[]),[u,b]=n.useState(()=>l==="complex"?Qe.items:J.items),{filteredTree:x,itemCount:v}=Ye({items:u,filters:r,search:s}),I=et(x,h,i);n.useEffect(()=>{l===o&&m(v)},[l,o,m,v]);const A=n.useDeferredValue(I);return A.length===0?e.jsx(Ue,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(fe,{className:p.tree,children:A.map(c=>e.jsx(be,{label:c.label,description:c.description,"aria-level":c.level,"aria-posinset":c.position,"aria-setsize":c.size,selected:c.selected,onSelectedChange:()=>{if(h===c.id){d(void 0);return}d(c.id)},expanded:c.items.length===0?void 0:c.expanded,onExpandedChange:j=>{b(S=>{const w=q(S,c.id);if(!w)return S;const z=[...S];return w.expanded=j,z})},unstable_decorations:e.jsxs(e.Fragment,{children:[c.color?e.jsx(lt,{color:c.color,alt:c.color}):null,e.jsx(M,{href:R})]}),actions:[e.jsx(E,{className:p.action,icon:ve,label:"Lock","aria-hidden":c.hidden},"lock"),e.jsx(E,{className:p.action,icon:c.hidden?Ce:_e,label:c.hidden?"Show":"Hide",visible:c.hidden?!0:void 0,onClick:()=>{a(c.id)}},"visibility"),e.jsx(tt,{hidden:c.hidden},"more")]},c.id))})})}function tt({hidden:l}){return e.jsxs(V,{children:[e.jsx($,{className:p.action,"aria-hidden":l,render:e.jsx(E,{icon:je,label:"More"})}),e.jsxs(U,{style:{minInlineSize:164},children:[e.jsx(_,{label:"Copy",shortcuts:"Command+C"}),e.jsx(_,{label:"Paste",shortcuts:"Command+P"}),e.jsx(_,{label:"Copy/Paste as",shortcuts:"Command+V"}),e.jsx(_,{label:"Move to",shortcuts:"Command+M"}),e.jsx(_,{label:"Bring to front",shortcuts:"]"}),e.jsx(_,{label:"Send to back",shortcuts:"["}),e.jsx(_,{label:"Group selection",shortcuts:"Command+G"}),e.jsx(_,{label:"Ungroup",shortcuts:"Command+U"}),e.jsx(_,{label:"Rename",shortcuts:"Command+R"}),e.jsx(_,{label:"Show/hide",shortcuts:"Shift+Command+V"}),e.jsx(_,{label:"Lock/unlock",shortcuts:"Shift+Command+L"}),e.jsx(_,{label:"Isolate object",shortcuts:"I"})]})]})}function nt(){const{selectedId:l}=n.useContext(K),{itemCount:o,filtered:r,clearFilters:s,search:m,setSearch:h}=n.useContext(B),[d,i]=n.useState(!1),f=n.useRef(null),a=n.useRef(null),u=r||!!m,b=d?e.jsxs(e.Fragment,{children:[e.jsx(ot,{filters:l==="simple"?J.filters:[]}),e.jsx(T,{className:p.shiftIconRight,icon:ge,label:"Close",variant:"ghost",onClick:()=>{var v;F.flushSync(()=>i(!1)),(v=a.current)==null||v.focus()}})]}):e.jsx(T,{className:p.shiftIconRight,icon:H,label:"Search",dot:u?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var v;F.flushSync(()=>i(!0)),(v=f.current)==null||v.focus()}}),x=n.useMemo(()=>{if(r)return o===void 0?"Showing all tree items":`Showing ${o} tree items`},[r,o]);return e.jsxs("div",{className:p.subheader,children:[e.jsx(N,{"aria-live":"polite","aria-atomic":!0,children:x}),d?void 0:e.jsxs(ue,{className:p.tabList,tone:"accent",ref:a,children:[e.jsx(G,{id:"simple",children:"Simple"}),e.jsx(G,{id:"complex",children:"Complex"})]}),d?e.jsxs(pe,{className:p.searchInput,children:[e.jsx(me,{href:H}),e.jsx(he,{placeholder:"Search",ref:f,onChange:v=>{h(v.target.value)},value:m})]}):null,e.jsx("div",{className:p.subheaderActions,children:b})]})}function ot({filters:l}){const o=n.useContext(B),r=o.filters.length>0;return e.jsxs(V,{children:[e.jsx($,{render:e.jsx(T,{icon:Se,label:"Filter",dot:r?"Some filters applied":void 0,variant:"ghost",disabled:l.length===0})}),e.jsx(U,{children:l.map(s=>{const m=o.filters.includes(s);return e.jsx(ae,{name:s,label:s,checked:m,onChange:()=>{o.toggleFilter(s)}},s)})})]})}function rt(l){const[o,r]=n.useState(!1),[s,m]=n.useState([]),[h,d]=n.useState(""),[i,f]=n.useState(void 0),a=n.useCallback(x=>{const v=s.includes(x)?s.filter(I=>I!==x):[...s,x];m(v),r(v.length>0)},[s]),u=n.useCallback(()=>{m([]),r(!1)},[]),b=n.useCallback(x=>{d(x),r(!!x)},[]);return e.jsx(B.Provider,{value:n.useMemo(()=>({filters:s,filtered:o,toggleFilter:a,clearFilters:u,search:h,setSearch:b,itemCount:i,setItemCount:f}),[s,o,a,u,h,b,i]),children:l.children})}function st(l){const[o,r]=n.useState(void 0);return e.jsx(K.Provider,{value:n.useMemo(()=>({selectedId:o??""}),[o]),children:e.jsx(de,{setSelectedId:r,selectedId:o,children:l.children})})}const B=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),K=n.createContext({selectedId:""});function lt(l){return e.jsx("div",{className:p.colorSwatch,style:{"--_color":`var(--_color--${l.color})`},children:l.alt?e.jsx(N,{children:l.alt}):null})}export{Qt as default,qt as meta};
