import{a as T,p as g}from"./chunk-EF7DTUVF-kG7VDEF3.js";import{f as A,c as H}from"./sun-0o2gVJpo.js";import{s as ce,q as le,v as ie,w as Q,x as de,y as k,z as R,E as ue,H as Z,J as U,n as $,i as me,K as be,L as fe,M as ve}from"./~utils-DpeZGaFq.js";import{a as ee,b as te,C as X,u as Ie}from"./6VRAQV3D-DJiC-ErO.js";import{S as oe,R as pe,L as N,P as O,d as F,I as G,_ as S,b,Q as Y,a1 as xe,f as K,c as B,a as q,j as z,E as J,X as se,p as Se,q as W,m as ne,u as Ce}from"./LMDWO4NN-L4HmYCAu.js";import{c as Pe,a as he,b as Te}from"./5JTVDSTH-BMzj-G-N.js";import{u as ge}from"./S43UC3DV-Hr6xIjjP.js";import{c as Ee}from"./VDHZ5F7K-DZGZ4wr8.js";import{u as _e}from"./RZ4GPYOB-D2MNvzci.js";var Re=oe([le,te],[ce,ee]),ye=Re.useContext;T.createContext(!1);T.createContext(null);function Le(t={}){var n=t,{composite:o,combobox:e}=n,s=pe(n,["composite","combobox"]);const a=["items","renderedItems","moves","orientation","virtualFocus","includesBaseElement","baseElement","focusLoop","focusShift","focusWrap"],p=ie(s.store,Q(o,a),Q(e,a)),i=p?.getState(),f=Pe(N(F({},s),{store:p,includesBaseElement:O(s.includesBaseElement,i?.includesBaseElement,!1),orientation:O(s.orientation,i?.orientation,"horizontal"),focusLoop:O(s.focusLoop,i?.focusLoop,!0)})),r=Ee(),L=N(F({},f.getState()),{selectedId:O(s.selectedId,i?.selectedId,s.defaultSelectedId),selectOnMove:O(s.selectOnMove,i?.selectOnMove,!0)}),c=de(L,f,p);k(c,()=>R(c,["moves"],()=>{const{activeId:d,selectOnMove:m}=c.getState();if(!m||!d)return;const v=f.item(d);v&&(v.dimmed||v.disabled||c.setState("selectedId",v.id))}));let C=!0;k(c,()=>ue(c,["selectedId"],(d,m)=>{if(!C){C=!0;return}o&&d.selectedId===m.selectedId||c.setState("activeId",d.selectedId)})),k(c,()=>R(c,["selectedId","renderedItems"],d=>{if(d.selectedId!==void 0)return;const{activeId:m,renderedItems:v}=c.getState(),I=f.item(m);if(I&&!I.disabled&&!I.dimmed)c.setState("selectedId",I.id);else{const E=v.find(P=>!P.disabled&&!P.dimmed);c.setState("selectedId",E?.id)}})),k(c,()=>R(c,["renderedItems"],d=>{const m=d.renderedItems;if(m.length)return R(r,["renderedItems"],v=>{const I=v.renderedItems;I.some(P=>!P.tabId)&&I.forEach((P,j)=>{if(P.tabId)return;const D=m[j];D&&r.renderItem(N(F({},P),{tabId:D.id}))})})}));let x=null;return k(c,()=>{const d=()=>{x=c.getState().selectedId},m=()=>{C=!1,c.setState("selectedId",x)};if(o&&"setSelectElement"in o)return G(R(o,["value"],d),R(o,["mounted"],m));if(e)return G(R(e,["selectedValue"],d),R(e,["mounted"],m))}),N(F(F({},f),c),{panels:r,setSelectedId:d=>c.setState("selectedId",d),select:d=>{c.setState("selectedId",d),f.move(d)}})}function je(t,n,o){Y(n,[o.composite,o.combobox]),t=he(t,n,o),U(t,o,"selectedId","setSelectedId"),U(t,o,"selectOnMove");const[e,s]=Z(()=>t.panels,{});return Y(s,[t,s]),Object.assign(T.useMemo(()=>S(b({},t),{panels:e}),[t,e]),{composite:o.composite,combobox:o.combobox})}function we(t={}){const n=ge(),o=ye()||n;t=S(b({},t),{composite:t.composite!==void 0?t.composite:o,combobox:t.combobox!==void 0?t.combobox:n});const[e,s]=Z(Le,t);return je(e,s,t)}var V=oe([te],[ee]),De=V.useScopedContext,re=V.useProviderContext,Me=V.ContextProvider,ae=V.ScopedContextProvider,ke="button",Oe=B(function(n){var o=n,{store:e,getItem:s}=o,a=z(o,["store","getItem"]),p;const i=De();e=e||i,J(e,!1);const f=se(),r=a.id||f,L=Se(a),c=T.useCallback(u=>{const y=S(b({},u),{dimmed:L});return s?s(y):y},[L,s]),C=a.onClick,x=W(u=>{C?.(u),!u.defaultPrevented&&e?.setSelectedId(r)}),d=e.panels.useState(u=>{var y;return(y=u.items.find(l=>l.tabId===r))==null?void 0:y.id}),m=f?a.shouldRegisterItem:!1,v=e.useState(u=>!!r&&u.activeId===r),I=e.useState(u=>!!r&&u.selectedId===r),E=e.useState(u=>!!e.item(u.activeId)),P=v||I&&!E,j=I||((p=a.accessibleWhenDisabled)!=null?p:!0);if($(e.combobox||e.composite,"virtualFocus")&&(a=S(b({},a),{tabIndex:-1})),a=S(b({id:r,role:"tab","aria-selected":I,"aria-controls":d||void 0},a),{onClick:x}),e.composite){const u={id:r,accessibleWhenDisabled:j,store:e.composite,shouldRegisterItem:P&&m,rowId:a.rowId,render:a.render};a=S(b({},a),{render:g.jsx(X,S(b({},u),{render:e.combobox&&e.composite!==e.combobox?g.jsx(X,S(b({},u),{store:e.combobox})):u.render}))})}return a=Ie(S(b({store:e},a),{accessibleWhenDisabled:j,getItem:c,shouldRegisterItem:m})),a}),Fe=xe(K(function(n){const o=Oe(n);return q(ke,o)}));function Ne(t={}){const n=we(t);return g.jsx(Me,{value:n,children:t.children})}var $e="div",Ve=B(function(n){var o=n,{store:e}=o,s=z(o,["store"]);const a=re();e=e||a,J(e,!1);const p=e.useState(i=>i.orientation==="both"?void 0:i.orientation);return s=ne(s,i=>g.jsx(ae,{value:e,children:i}),[e]),e.composite&&(s=b({focusable:!1},s)),s=b({role:"tablist","aria-orientation":p},s),s=Te(b({store:e},s)),s}),We=K(function(n){const o=Ve(n);return q($e,o)}),Ae="div",He=B(function(n){var o=n,{store:e,unmountOnHide:s,tabId:a,getItem:p,scrollRestoration:i,scrollElement:f}=o,r=z(o,["store","unmountOnHide","tabId","getItem","scrollRestoration","scrollElement"]);const L=re();e=e||L,J(e,!1);const c=T.useRef(null),C=se(r.id),x=$(e.panels,()=>{var l;return a||((l=e?.panels.item(C))==null?void 0:l.tabId)}),d=$(e,l=>!!x&&l.selectedId===x),m=me({open:d}),v=$(m,"mounted"),I=T.useRef(new Map),E=W(()=>{const l=c.current;return l?f?typeof f=="function"?f(l):"current"in f?f.current:f:l:null});T.useEffect(()=>{var l,_;if(!i||!v)return;const h=E();if(!h)return;if(i==="reset"){h.scroll(0,0);return}if(!x)return;const w=I.current.get(x);h.scroll((l=w?.x)!=null?l:0,(_=w?.y)!=null?_:0);const M=()=>{I.current.set(x,{x:h.scrollLeft,y:h.scrollTop})};return h.addEventListener("scroll",M),()=>{h.removeEventListener("scroll",M)}},[i,v,x,E,e]);const[P,j]=T.useState(!1);T.useEffect(()=>{const l=c.current;if(!l)return;const _=be(l);j(!!_.length)},[]);const D=T.useCallback(l=>{const _=S(b({},l),{id:C||l.id,tabId:a});return p?p(_):_},[C,a,p]),u=r.onKeyDown,y=W(l=>{if(u?.(l),l.defaultPrevented||!e?.composite)return;const h={ArrowLeft:e.previous,ArrowRight:e.next,Home:e.first,End:e.last}[l.key];if(!h)return;const{selectedId:w}=e.getState(),M=h({activeId:w});M&&(l.preventDefault(),e.move(M))});return r=ne(r,l=>g.jsx(ae,{value:e,children:l}),[e]),r=S(b({id:C,role:"tabpanel","aria-labelledby":x||void 0},r),{children:s&&!v?null:r.children,ref:Ce(c,r.ref),onKeyDown:y}),r=fe(b({focusable:!e.composite&&!P},r)),r=ve(b({store:m},r)),r=_e(S(b({store:e.panels},r),{getItem:D})),r}),Ke=K(function(n){const o=He(n);return q(Ae,o)});function Ze(t){const{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:a}=t;return g.jsx(Ne,{defaultSelectedId:n,selectedId:o,setSelectedId:e,selectOnMove:s,children:a})}const et=A((t,n)=>{const{tone:o="neutral",...e}=t;return g.jsx(We,{...e,"data-kiwi-tone":o,className:H("ğŸ¥-tab-list",t.className),ref:n})}),tt=A((t,n)=>g.jsx(Fe,{accessibleWhenDisabled:!0,...t,className:H("ğŸ¥-tab",t.className),ref:n})),ot=A((t,n)=>g.jsx(Ke,{...t,className:H("ğŸ¥-tab-panel",t.className),ref:n}));export{Ze as T,tt as a,ot as b,et as c};
