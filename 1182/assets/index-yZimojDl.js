import{w as B,a as T,p as t}from"./chunk-EPOLDU6W-CvAF3MIU.js";import{I as E,c as P}from"./sun-Bj4Pm4LY.js";import{b as _,T as C,a as A,p as R}from"./immer-ARuIT3eS.js";import{d as F}from"./~utils-DJOmsD-p.js";import{u as N,r as M}from"./refresh-Cu0-_gk-.js";import{p as z}from"./placeholder-BFElh9ik.js";import{s as U}from"./visibility-show-B-H41XqF.js";import"./WZWDIE3S-CJWPPWm7.js";import"./Z2O3VLAQ-D14RzBYJ.js";import"./GVAFFF2B-CBcyxHAJ.js";import"./HSU7H6PW-C67wihFW.js";import"./CVCFNOHX-DM7EPzq6.js";import"./~utils.icons-BDkMhGdM.js";import"./~utils.icons-CtkTpYIF.js";import"./DropdownMenu-CMsqjfNg.js";import"./RFRKSHIZ-LGUtGeTw.js";import"./APVORPDK-8gjgyozr.js";import"./NDVACHQI-DR9_XcYt.js";import"./I7KWAPMF-bV-jNmim.js";import"./Kbd-BBhD4Wno.js";import"./~utils.icons-CgLwg_rL.js";import"./~utils.useInit-B0jgbUSi.js";import"./index-po9__lAu.js";const xe={title:"Tree"},he=B(F(function({overflow:e=!1,selected:l=!1,description:n,error:a,items:p,visible:r}){const[s,m]=T.useTransition(),h=e?" with a super long label that is overflown":"",u=r?!!r:void 0,x=n?"Additional description":void 0,[I,w]=T.useState(!!a),v=p?Number(p):0,[j,b]=T.useState(()=>[{label:`Item 1${h}`,selected:!!l,expanded:!0,children:[{label:"Item 1.1",selected:!!l},{label:"Item 1.2",selected:!!l},{label:`Item 1.3${h}`,selected:!!l}]},{label:"Item 2",selected:!1,expanded:!0,children:[{label:`Item 2.1${h}`,selected:!1}]},{label:"Item 3",selected:!1},...Array.from({length:v}).map((o,i)=>({label:`Item ${i+4}`,selected:!1}))]),$=T.useMemo(()=>j.flatMap((o,i,c)=>{const g={...o,level:1,index:i,setSize:c.length,childIndex:void 0};if(!o.expanded)return g;const k=o.children?o.children.map((S,f,D)=>({...S,level:2,index:i,childIndex:f,setSize:D.length,expanded:void 0})):[];return[g,...k]}),[j]),y=T.useCallback(()=>{w(!1)},[]);return t.jsx(_,{style:{maxInlineSize:e?300:void 0},children:$.map(o=>{const{index:i,childIndex:c}=o,g=I&&i===0&&c===void 0,k=i===0&&c===void 0||c===0;return t.jsx(C,{"aria-level":o.level,"aria-posinset":c!==void 0?c+1:i+1,"aria-setsize":o.setSize,label:o.label,description:k?x:void 0,expanded:o.expanded,selected:o.selected,error:g,onSelectedChange:()=>{b(R(S=>{const f=c===void 0?S[i]:S[i].children?.[c];f&&(f.selected=!f.selected)}))},onExpandedChange:()=>{m(()=>{b(R(S=>{const f=S[i];f.expanded!==void 0&&(f.expanded=!f.expanded)}))})},icon:c===void 0?t.jsx(E,{href:z,alt:"decoration"}):void 0,unstable_decorations:c===0?t.jsxs(t.Fragment,{children:[t.jsx(E,{href:z}),t.jsx(E,{href:z})]}):t.jsx(E,{href:z}),inlineActions:g?[t.jsx(A,{icon:M,label:"Retry",onClick:y},"retry")]:[t.jsx(A,{icon:N,label:"Unlock",visible:u},"unlock"),t.jsx(A,{icon:U,label:"Show",visible:u},"show")],actions:g?[t.jsx(A,{icon:N,label:"Unlock"},"unlock"),t.jsx(A,{icon:U,label:"Show"},"show")]:void 0},o.label)})})},{actions:G,_expansion:J}));function q(d){const e=P.c(5);let l,n;if(e[0]!==d?({hidden:l,...n}=d,e[0]=d,e[1]=l,e[2]=n):(l=e[1],n=e[2]),l)return null;let a;return e[3]!==n?(a=t.jsx(A,{icon:z,...n}),e[3]=n,e[4]=a):a=e[4],a}function G(d){const e=P.c(15),{inline:l,menu:n,dot:a,error:p,hiddenIds:r}=d,s=l?Number(l):2,m=n?Number(n):3,h=p?!!p:void 0;let u;if(e[0]!==a||e[1]!==r||e[2]!==s||e[3]!==m){const $=r?r.split(";").map(H):[];u=Array.from({length:s+m},(y,o)=>{const i=o+1;return t.jsx(q,{label:`Action ${i}`,dot:a?"Something's going on":void 0,hidden:$.includes(i)},i)}),e[0]=a,e[1]=r,e[2]=s,e[3]=m,e[4]=u}else u=e[4];const x=u;let I;e[5]!==x||e[6]!==s?(I=x.slice(0,s),e[5]=x,e[6]=s,e[7]=I):I=e[7];const w=I;let v;e[8]!==x||e[9]!==s?(v=x.slice(s),e[8]=x,e[9]=s,e[10]=v):v=e[10];const j=v;let b;return e[11]!==j||e[12]!==h||e[13]!==w?(b=t.jsx(_,{children:t.jsx(C,{label:"Item 1","aria-level":1,"aria-posinset":1,"aria-setsize":1,inlineActions:w,actions:j,error:h})}),e[11]=j,e[12]=h,e[13]=w,e[14]=b):b=e[14],b}function H(d){return Number(d)}function J(d){const e=P.c(8),{selectable:l}=d,[n,a]=T.useState(!1),p=l?!1:void 0;let r;e[0]!==n||e[1]!==p?(r=t.jsx(C,{label:"Parent Item","aria-level":1,"aria-posinset":1,"aria-setsize":1,expanded:n,onExpandedChange:a,selected:p}),e[0]=n,e[1]=p,e[2]=r):r=e[2];let s;e[3]!==n?(s=n&&t.jsxs(t.Fragment,{children:[t.jsx(C,{label:"Child Item 1","aria-level":2,"aria-posinset":1,"aria-setsize":2}),t.jsx(C,{label:"Child Item 2","aria-level":2,"aria-posinset":2,"aria-setsize":2})]}),e[3]=n,e[4]=s):s=e[4];let m;return e[5]!==r||e[6]!==s?(m=t.jsxs(_,{children:[r,s]}),e[5]=r,e[6]=s,e[7]=m):m=e[7],m}export{he as default,xe as handle};
