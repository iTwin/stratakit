import{u as F}from"./LVA2YJMS-Cf5VT9Hv.js";import{c as I,_ as p,a4 as d,J as O,Q as h,m as _,A as q,z as Y,ak as j,af as z,al as v,g as H,u as J,b as T,d as L,e as Q}from"./~utils-DQTNdQ0K.js";import{a as n}from"./chunk-K6AXKMTT-BHCV6zel.js";var V="button";function C(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var G=Symbol("command"),W=I(function(t){var o=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=o,r=p(o,["clickOnEnter","clickOnSpace"]);const f=n.useRef(null),[D,M]=n.useState(!1);n.useEffect(()=>{f.current&&M(d(f.current))},[]);const[R,y]=n.useState(!1),l=n.useRef(!1),E=O(r),[g,K]=h(r,G,!0),P=r.onKeyDown,w=_(e=>{P==null||P(e);const s=e.currentTarget;if(e.defaultPrevented||g||E||!q(e)||Y(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",i=c&&e.key===" ",m=e.key==="Enter"&&!k,A=e.key===" "&&!c;if(m||A){e.preventDefault();return}if(u||i){const b=C(e);if(u){if(!b){e.preventDefault();const x=e,B=p(x,["view"]),N=()=>v(s,B);j()?z(s,"keyup",N):queueMicrotask(N)}}else i&&(l.current=!0,b||(e.preventDefault(),y(!0)))}}),S=r.onKeyUp,U=_(e=>{if(S==null||S(e),e.defaultPrevented||g||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!C(e))){e.preventDefault(),y(!1);const u=e.currentTarget,i=e,m=p(i,["view"]);queueMicrotask(()=>v(u,m))}});return r=H(T(T({"data-active":R||void 0,type:D?"button":void 0},K),r),{ref:J(f,r.ref),onKeyDown:w,onKeyUp:U}),r=F(r),r});L(function(t){const o=W(t);return Q(V,o)});export{W as u};
