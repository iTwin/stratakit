import{aa as tt,ai as et,aj as nt,ak as rt,U as G,al as I,am as st,$ as ut,L as z,an as ot,G as at,ao as ct}from"./~utils-CKswT0zA.js";import{r as it,C as ft,a as j}from"./chunk-JZWAC4HX-ROAaBwzV.js";function w(t,n){const e=t.__unstableInternals;return tt(e,"Invalid store"),e[n]}function D(t,...n){let e=t,f=e,r=Symbol(),o=ut;const c=new Set,i=new Set,S=new Set,v=new Set,p=new Set,u=new WeakMap,l=new WeakMap,m=s=>(S.add(s),()=>S.delete(s)),R=()=>{const s=c.size,a=Symbol();c.add(a);const g=()=>{c.delete(a),!c.size&&o()};if(s)return g;const E=rt(e).map(h=>G(...n.map(x=>{var d;const _=(d=x?.getState)==null?void 0:d.call(x);if(_&&I(_,h))return H(x,[h],q=>{M(h,q[h],!0)})}))),y=[];for(const h of S)y.push(h());const O=n.map(K);return o=G(...E,...y,...O),g},b=(s,a,g=v)=>(g.add(a),l.set(a,s),()=>{var E;(E=u.get(a))==null||E(),u.delete(a),l.delete(a),g.delete(a)}),C=(s,a)=>b(s,a),Q=(s,a)=>(u.set(a,a(e,e)),b(s,a)),T=(s,a)=>(u.set(a,a(e,f)),b(s,a,p)),X=s=>D(nt(e,s),L),Y=s=>D(et(e,s),L),Z=()=>e,M=(s,a,g=!1)=>{var E;if(!I(e,s))return;const y=st(a,e[s]);if(y===e[s])return;if(!g)for(const d of n)(E=d?.setState)==null||E.call(d,s,y);const O=e;e={...e,[s]:y};const h=Symbol();r=h,i.add(s);const x=(d,_,q)=>{var P;const $=l.get(d),k=B=>q?q.has(B):B===s;(!$||$.some(k))&&((P=u.get(d))==null||P(),u.set(d,d(e,_)))};for(const d of v)x(d,O);queueMicrotask(()=>{if(r!==h)return;const d=e;for(const _ of p)x(_,f,i);f=d,i.clear()})},L={getState:Z,setState:M,__unstableInternals:{setup:m,init:R,subscribe:C,sync:Q,batch:T,pick:X,omit:Y}};return L}function gt(t,...n){if(t)return w(t,"setup")(...n)}function K(t,...n){if(t)return w(t,"init")(...n)}function A(t,...n){if(t)return w(t,"subscribe")(...n)}function H(t,...n){if(t)return w(t,"sync")(...n)}function lt(t,...n){if(t)return w(t,"batch")(...n)}function Et(t,...n){if(t)return w(t,"omit")(...n)}function xt(t,...n){if(t)return w(t,"pick")(...n)}function wt(...t){var n;const e={};for(const r of t){const o=(n=r?.getState)==null?void 0:n.call(r);o&&Object.assign(e,o)}const f=D(e,...t);return Object.assign({},...t,f)}function yt(t,n){}var U={exports:{}},V={};var W;function St(){if(W)return V;W=1;var t=it();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var e=typeof Object.is=="function"?Object.is:n,f=t.useState,r=t.useEffect,o=t.useLayoutEffect,c=t.useDebugValue;function i(u,l){var m=l(),R=f({inst:{value:m,getSnapshot:l}}),b=R[0].inst,C=R[1];return o(function(){b.value=m,b.getSnapshot=l,S(b)&&C({inst:b})},[u,m,l]),r(function(){return S(b)&&C({inst:b}),u(function(){S(b)&&C({inst:b})})},[u]),c(m),m}function S(u){var l=u.getSnapshot;u=u.value;try{var m=l();return!e(u,m)}catch{return!0}}function v(u,l){return l()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v:i;return V.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,V}var F;function dt(){return F||(F=1,U.exports=St()),U.exports}var pt=dt();const vt=ft(pt);var{useSyncExternalStore:J}=vt,N=()=>()=>{};function bt(t,n=ot){const e=j.useCallback(r=>t?A(t,null,r):N(),[t]),f=()=>{const r=typeof n=="string"?n:null,o=typeof n=="function"?n:null,c=t?.getState();if(o)return o(c);if(c&&r&&I(c,r))return c[r]};return J(e,f,f)}function _t(t,n){const e=j.useRef({}),f=j.useCallback(o=>t?A(t,null,o):N(),[t]),r=()=>{const o=t?.getState();let c=!1;const i=e.current;for(const S in n){const v=n[S];if(typeof v=="function"){const p=v(o);p!==i[S]&&(i[S]=p,c=!0)}if(typeof v=="string"){if(!o||!I(o,v))continue;const p=o[v];p!==i[S]&&(i[S]=p,c=!0)}}return c&&(e.current={...i}),e.current};return J(f,r,r)}function jt(t,n,e,f){const r=I(n,e)?n[e]:void 0,o=f?n[f]:void 0,c=ct({value:r,setValue:o});z(()=>H(t,[e],(i,S)=>{const{value:v,setValue:p}=c.current;p&&i[e]!==S[e]&&i[e]!==v&&p(i[e])}),[t,e]),z(()=>{if(r!==void 0)return t.setState(e,r),lt(t,[e],()=>{r!==void 0&&t.setState(e,r)})})}function Rt(t,n){const[e,f]=j.useState(()=>t(n));z(()=>K(e),[e]);const r=j.useCallback(i=>bt(e,i),[e]),o=j.useMemo(()=>({...e,useState:r}),[e,r]),c=at(()=>{f(i=>t({...n,...i.getState()}))});return[o,c]}export{Rt as a,jt as b,D as c,gt as d,A as e,lt as f,_t as g,K as i,wt as m,Et as o,xt as p,H as s,yt as t,bt as u};
