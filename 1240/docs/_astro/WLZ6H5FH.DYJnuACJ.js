import{w as R,f as F,a as J,y as K,n as Q,af as S,p as X,b as Y,r as Z,d as _,S as ee,a2 as D,a6 as te}from"./ExamplePreview.yXN-AmSz.js";import{r as m}from"./index.DIfZGIpv.js";import{u as I,m as ne,o as ae,c as oe,s as y,f as j,g as ie,a as se,d as P}from"./Q5W46E73.Bz1yUq_e.js";import{j as M}from"./jsx-runtime.D_zvdyIk.js";var p=R(),O=p.useProviderContext,re=p.ContextProvider,ue=p.ScopedContextProvider,f=R([re],[ue]),Pe=f.useContext,pe=f.useScopedContext,he=f.useProviderContext,be=f.ContextProvider,le=f.ScopedContextProvider,je=m.createContext(void 0),Ae=m.createContext(void 0),ce="div";function A(n,e){const t=setTimeout(e,n);return()=>clearTimeout(t)}function de(n){let e=requestAnimationFrame(()=>{e=requestAnimationFrame(n)});return()=>cancelAnimationFrame(e)}function T(...n){return n.join(", ").split(", ").reduce((e,t)=>{const i=t.endsWith("ms")?1:1e3,s=Number.parseFloat(t||"0s")*i;return s>e?s:e},0)}function me(n,e,t){return!t&&e!==!1&&(!n||!!e)}var fe=J(function({store:e,alwaysVisible:t,...i}){const s=O();e=e||s,K(e,!1);const u=m.useRef(null),a=Q(i.id),[o,h]=m.useState(null),l=e.useState("open"),x=e.useState("mounted"),c=e.useState("animated"),d=e.useState("contentElement"),C=I(e.disclosure,"contentElement");S(()=>{u.current&&e?.setContentElement(u.current)},[e]),S(()=>{let r;return e?.setState("animated",v=>(r=v,!0)),()=>{r!==void 0&&e?.setState("animated",r)}},[e]),S(()=>{if(c){if(!d?.isConnected){h(null);return}return de(()=>{h(l?"enter":x?"leave":null)})}},[c,d,l,x]),S(()=>{if(!e||!c||!o||!d)return;const r=()=>e?.setState("animating",!1),v=()=>ee.flushSync(r);if(o==="leave"&&l||o==="enter"&&!l)return;if(typeof c=="number")return A(c,v);const{transitionDuration:H,animationDuration:k,transitionDelay:q,animationDelay:N}=getComputedStyle(d),{transitionDuration:U="0",animationDuration:V="0",transitionDelay:W="0",animationDelay:L="0"}=C?getComputedStyle(C):{},$=T(q,N,W,L),z=T(H,k,U,V),b=$+z;if(!b){o==="enter"&&e.setState("animated",!1),r();return}const B=1e3/60,G=Math.max(b-B,0);return A(G,v)},[e,c,d,C,l,o]),i=X(i,r=>M.jsx(le,{value:e,children:r}),[e]);const g=me(x,i.hidden,t),E=i.style,w=m.useMemo(()=>g?{...E,display:"none"}:E,[g,E]);return i={id:a,"data-open":l||void 0,"data-enter":o==="enter"||void 0,"data-leave":o==="leave"||void 0,hidden:g,...i,ref:Y(a?e.setContentElement:null,u,i.ref),style:w},Z(i)}),ve=F(function(e){const t=fe(e);return _(ce,t)}),Te=F(function({unmountOnHide:e,...t}){const i=O(),s=t.store||i;return I(s,a=>!e||a?.mounted)===!1?null:M.jsx(ve,{...t})});function Se(n={}){const e=ne(n.store,ae(n.disclosure,["contentElement","disclosureElement"])),t=e?.getState(),i=D(n.open,t?.open,n.defaultOpen,!1),s=D(n.animated,t?.animated,!1),u={open:i,animated:s,animating:!!s&&i,mounted:i,contentElement:D(t?.contentElement,null),disclosureElement:D(t?.disclosureElement,null)},a=oe(u,e);return y(a,()=>j(a,["animated","animating"],o=>{o.animated||a.setState("animating",!1)})),y(a,()=>ie(a,["open"],()=>{a.getState().animated&&a.setState("animating",!0)})),y(a,()=>j(a,["open","animating"],o=>{a.setState("mounted",o.open||o.animating)})),{...a,disclosure:n.disclosure,setOpen:o=>a.setState("open",o),show:()=>a.setState("open",!0),hide:()=>a.setState("open",!1),toggle:()=>a.setState("open",o=>!o),stopAnimation:()=>a.setState("animating",!1),setContentElement:o=>a.setState("contentElement",o),setDisclosureElement:o=>a.setState("disclosureElement",o)}}function De(n,e,t){return te(e,[t.store,t.disclosure]),P(n,t,"open","setOpen"),P(n,t,"mounted","setMounted"),P(n,t,"animated"),Object.assign(n,{disclosure:t.disclosure})}function Re(n={}){const[e,t]=se(Se,n);return De(e,t,n)}export{le as D,be as a,he as b,Re as c,re as d,Te as e,pe as f,je as g,Pe as h,fe as i,Se as j,De as k,me as l,Ae as m,O as u};
