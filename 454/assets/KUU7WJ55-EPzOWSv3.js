import{u as A}from"./LVA2YJMS-WngChXeY.js";import{i as B,j as m,a5 as d,C as F,N as I,l as T,o as O,n as j,ad as Y,a3 as H,ae as _,g as L,y as V,h as w,q as z,t as G}from"./LMDWO4NN-DUubhdkr.js";import{a as o}from"./chunk-K6CSEXPM-Djlbx4X2.js";var J="button";function D(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=B(function(t){var i=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=i,r=m(i,["clickOnEnter","clickOnSpace"]);const f=o.useRef(null),[M,R]=o.useState(!1);o.useEffect(()=>{f.current&&R(d(f.current))},[]);const[K,y]=o.useState(!1),l=o.useRef(!1),E=F(r),[g,U]=I(r,Q,!0),P=r.onKeyDown,h=T(e=>{P==null||P(e);const s=e.currentTarget;if(e.defaultPrevented||g||E||!O(e)||j(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",n=c&&e.key===" ",v=e.key==="Enter"&&!k,p=e.key===" "&&!c;if(v||p){e.preventDefault();return}if(u||n){const N=D(e);if(u){if(!N){e.preventDefault();const b=e,{view:X}=b,x=m(b,["view"]),C=()=>_(s,x);Y()?H(s,"keyup",C):queueMicrotask(C)}}else n&&(l.current=!0,N||(e.preventDefault(),y(!0)))}}),S=r.onKeyUp,q=T(e=>{if(S==null||S(e),e.defaultPrevented||g||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!D(e))){e.preventDefault(),y(!1);const u=e.currentTarget,n=e,{view:v}=n,p=m(n,["view"]);queueMicrotask(()=>_(u,p))}});return r=L(w(w({"data-active":K||void 0,type:M?"button":void 0},U),r),{ref:V(f,r.ref),onKeyDown:h,onKeyUp:q}),r=A(r),r});z(function(t){const i=W(t);return G(J,i)});export{W as u};
