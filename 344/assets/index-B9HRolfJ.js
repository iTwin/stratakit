import{w as O}from"./collection-JezXOkgr.js";import{a as l,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{d as W}from"./~utils-SuWoen7v.js";import{c as j}from"./index-jyeBNHV5.js";import{f as m,F as $,a as z}from"./~utils-gi11tQPH.js";import{R as b}from"./XL7CSKGW-DQcObpvQ.js";import{C as E}from"./ASMQKSDT-CRi099g7.js";import{V as B,u as G}from"./~hooks-Dket-DI7.js";import"./KUU7WJ55-E_SwHLD9.js";import"./LVA2YJMS-BhSxftNL.js";import"./XX67R432-C-LektBF.js";const L=m((s,i)=>{const r=l.useId(),{layout:t,...x}=s;return e.jsx(P.Provider,{value:r,children:e.jsx(M,{children:e.jsx($,{render:e.jsx(b.div,{...x,className:j("-field",s.className),"data-kiwi-layout":t,ref:i})})})})});L.displayName="Field";const D=l.createContext(void 0);function M(s){const[i,r]=l.useState(new Set),t=l.useCallback(o=>{r(c=>{const d=new Set(c);return d.add(o),d})},[]),x=l.useCallback(o=>{r(c=>{const d=new Set(c);return d.delete(o),d})},[]);return e.jsx(D.Provider,{value:l.useMemo(()=>({describedBy:i,register:t,unregister:x}),[i,t,x]),children:s.children})}function V(s){var r;const i=(r=l.useContext(D))==null?void 0:r.describedBy;return l.useMemo(()=>!i||i.size===0?s:[...i,s].filter(Boolean).join(" "),[i,s])}const P=l.createContext(void 0);function K(){return l.useContext(P)}const v=m((s,i)=>{const r=K(),t=V(s["aria-describedby"]);return e.jsx(z,{type:"checkable",render:e.jsx(E,{accessibleWhenDisabled:!0,id:r,...s,className:j("-checkbox",s.className),"aria-describedby":t,ref:i})})});v.displayName="Checkbox";const w=l.createContext({setLabelledBy:()=>{}}),p=m((s,i)=>{const[r,t]=l.useState(new Set),[x,o]=l.useState(),[c,d]=l.useState();return e.jsx(w.Provider,{value:{selectedRows:r,setSelectedRows:t,totalRows:x,setTotalRows:o,setLabelledBy:d},children:e.jsx(b,{...s,className:j("-table",s.className),ref:i,role:"table","aria-labelledby":c,children:s.children})})});p.displayName="Table.Root";const F=l.createContext(!1),T=m((s,i)=>e.jsx(F.Provider,{value:!0,children:e.jsx(b.div,{...s,className:j("-table-header",s.className),ref:i,role:"rowgroup",children:s.children})}));T.displayName="Table.Header";const S=m((s,i)=>{const{totalRows:r,setTotalRows:t,selectedRows:x,setSelectedRows:o}=l.useContext(w)||{};return l.useEffect(()=>{t==null||t(l.Children.count(s.children))},[t,s.children]),e.jsx(w.Provider,{value:{selectedRows:x,setSelectedRows:o,totalRows:r},children:e.jsx(b.div,{...s,className:j("-table-body",s.className),ref:i,role:"rowgroup",children:l.Children.map(s.children,(c,d)=>e.jsx(R.Provider,{value:{rowIndex:d},children:c}))})})});S.displayName="Table.Body";const R=l.createContext(void 0),a=m((s,i)=>{const{children:r,selected:t,...x}=s,o=l.useContext(F),{selectedRows:c,setSelectedRows:d,totalRows:C}=l.useContext(w)||{},{rowIndex:h}=l.useContext(R)||{};l.useEffect(()=>{h!==void 0&&t&&(d==null||d(u=>u.has(h)?u:new Set(u).add(h)))},[h,t,d]);const y=h!==void 0&&(c==null?void 0:c.has(h)),f=C!==void 0&&C===(c==null?void 0:c.size),I=!f&&c!==void 0&&c.size>0,g=()=>{h!==void 0&&(d==null||d(u=>{const N=new Set(u);return N.has(h)?N.delete(h):N.add(h),N}))},A=()=>{d==null||d(u=>f?new Set:C!==void 0?new Set(Array.from({length:C},(N,H)=>H)):u)};return e.jsxs(b.div,{...x,className:j("-table-row",s.className),ref:i,role:"row","aria-selected":y?"true":void 0,"data-kiwi-variant":o?"header":void 0,onClick:g,children:[e.jsx(n,{"data-kiwi-slot":!0,children:o?e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:u=>{u.stopPropagation(),A()},checked:I?"mixed":f}),e.jsx(B,{children:f?"Deselect all":"Select all"})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{onClick:u=>{u.stopPropagation(),g()},checked:y}),e.jsx(B,{children:y?`Deselect row ${h}`:`Select row ${h}`})]})}),r]})});a.displayName="Table.Row";const k=m((s,i)=>{const{id:r,children:t,...x}=s,o=l.useContext(w),c=l.useId(),d=r||c,C=l.useCallback(y=>{var f;(f=o==null?void 0:o.setLabelledBy)==null||f.call(o,y?d:void 0)},[d,o]),h=G(i,C);return e.jsx(b,{...x,id:d,className:j("-table-caption",s.className),ref:h,children:t})});k.displayName="Table.Caption";const n=m((s,i)=>{const r=l.useContext(F);return e.jsx(b.span,{...s,className:j("-table-cell",s.className),ref:i,role:r?"columnheader":"cell",children:s.children})});n.displayName="Table.Cell";const te={title:"Table"},de=O(W(function(){return e.jsxs(p,{children:[e.jsx(k,{children:"Fruits and their colors"}),e.jsx(T,{children:e.jsxs(a,{children:[e.jsx(n,{children:"Fruit"}),e.jsx(n,{children:"Color"})]})}),e.jsxs(S,{children:[e.jsxs(a,{children:[e.jsx(n,{children:"Apple"}),e.jsx(n,{children:"Red"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Orange"}),e.jsx(n,{children:"Orange"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Kiwi"}),e.jsx(n,{children:"Golden brown"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Watermelon"}),e.jsx(n,{children:"Green"})]})]})]})},{visual:_,scroll:U,select:q}));function _(){return e.jsxs(p,{children:[e.jsx(k,{children:"Fruits and their colors"}),e.jsx(T,{children:e.jsxs(a,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Description"})]})}),e.jsxs(S,{children:[e.jsxs(a,{children:[e.jsx(n,{children:"Apple"}),e.jsx(n,{children:"Red"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Orange"}),e.jsx(n,{children:"Orange"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Kiwi"}),e.jsx(n,{children:"Golden brown"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Watermelon"}),e.jsx(n,{children:"Green"})]})]})]})}function U(){const s=r=>r.charAt(0).toUpperCase()+r.slice(1),i=l.useMemo(()=>Array(100).fill(null).map((r,t)=>({id:t,name:`Name ${t}`,description:`Description ${t}`})),[]);return e.jsxs(p,{children:[e.jsx(k,{children:"Table caption"}),e.jsx(T,{children:e.jsx(a,{children:Object.keys(i[0]).map(r=>e.jsx(n,{children:s(r)},r))})}),e.jsx(S,{children:i.map(r=>e.jsx(a,{children:Object.values(r).map(t=>e.jsx(n,{children:t},r.id))},r.id))})]})}function q(){return e.jsxs(p,{children:[e.jsx(T,{children:e.jsxs(a,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Description"})]})}),e.jsxs(S,{children:[e.jsxs(a,{selected:!0,children:[e.jsx(n,{children:"Name 1"}),e.jsx(n,{children:"Description 1"})]}),e.jsxs(a,{selected:!0,children:[e.jsx(n,{children:"Name 2"}),e.jsx(n,{children:"Description 2"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Name 3"}),e.jsx(n,{children:"Description 3"})]}),e.jsxs(a,{children:[e.jsx(n,{children:"Name 4"}),e.jsx(n,{children:"Description 4"})]})]})]})}export{de as default,te as handle};
