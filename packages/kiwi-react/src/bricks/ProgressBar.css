/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/

.-progress-bar {
	@layer base {
		block-size: var(--progress-bar-size);
		inline-size: 100%;
		border-radius: 9999px;
		overflow: hidden;
		/* outline: 1px solid red; */

		/* position: relative;

		&::after {
			content: "";
			height: inherit;
			width: 25%;
			background-color: red;
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		} */
	}

	@layer modifiers {
		&:where([data-kiwi-tone="neutral"]) {
			--progress-bar-color: var(--ids-color-icon-neutral-base);
			--progress-bar-track-color: var(--ids-color-border-page-base);
		}

		&:where([data-kiwi-tone="accent"]) {
			--progress-bar-color: var(--ids-color-icon-accent-strong);
			--progress-bar-track-color: var(--ids-color-bg-accent-muted);
		}

		&:where([data-kiwi-size="small"]) {
			--progress-bar-size: 0.063rem;
		}

		&:where([data-kiwi-size="medium"]) {
			--progress-bar-size: 0.125rem;
		}

		&:where([data-kiwi-size="large"]) {
			--progress-bar-size: 0.25rem;
		}

		@media (forced-colors: active) {
			--progress-bar-color: CanvasText;
			--progress-bar-track-color: CanvasText;
		}
	}
}

.-progress-bar-svg {
	@layer base {
		block-size: inherit;
		inline-size: inherit;
	}
}

.-progress-bar-svg-track,
.-progress-bar-svg-fill {
	@layer base {
		stroke-width: var(--progress-bar-size);
		stroke-linecap: round;
		animation-duration: 1.5s;
		animation-iteration-count: infinite;
		animation-timing-function: linear;
		animation-fill-mode: both;

		@media (prefers-reduced-motion) {
			animation-timing-function: steps(4, end);
			animation-duration: 4s;
		}
	}
}

.-progress-bar-svg-track {
	@layer base {
		stroke: var(--progress-bar-track-color);
		stroke-dashoffset: 36;
		stroke-dasharray: 72, 28;
		/* animation-name: --progress-bar-track-slide; */
	}
}

.-progress-bar-svg-fill {
	@layer base {
		stroke: var(--progress-bar-color);
		stroke-dashoffset: 62.5;
		stroke-dasharray: 25, 75;
		/* animation-name: --progress-bar-fill-slide; */
	}
}

@keyframes --progress-bar-track-slide {
	0% {
		stroke-dashoffset: 31%;
	}

	100% {
		stroke-dashoffset: 8%;
	}
}

@keyframes --progress-bar-fill-slide {
	0% {
		stroke-dashoffset: 38%;
	}

	100% {
		stroke-dashoffset: 15%;
	}
}
