import{h as A,_ as m,ak as d,N as B,a1 as F,x as w,E as O,D as q,aw as j,ax as Y,ay as D,s as H,I as L,k as T,aa as V,g as z,j as G}from"./~utils-DVmECBXz.js";import{b as o}from"./index-DDCMeoDP.js";var J="button";function C(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?d(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?d(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var Q=Symbol("command"),W=A(function(t){var i=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=i,r=m(i,["clickOnEnter","clickOnSpace"]);const f=o.useRef(null),[M,R]=o.useState(!1);o.useEffect(()=>{f.current&&R(d(f.current))},[]);const[K,y]=o.useState(!1),l=o.useRef(!1),E=B(r),[g,x]=F(r,Q,!0),P=r.onKeyDown,U=w(e=>{P==null||P(e);const s=e.currentTarget;if(e.defaultPrevented||g||E||!O(e)||q(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",n=c&&e.key===" ",b=e.key==="Enter"&&!k,p=e.key===" "&&!c;if(b||p){e.preventDefault();return}if(u||n){const v=C(e);if(u){if(!v){e.preventDefault();const N=e,{view:X}=N,h=m(N,["view"]),_=()=>D(s,h);j()?Y(s,"keyup",_):queueMicrotask(_)}}else n&&(l.current=!0,v||(e.preventDefault(),y(!0)))}}),S=r.onKeyUp,I=w(e=>{if(S==null||S(e),e.defaultPrevented||g||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!C(e))){e.preventDefault(),y(!1);const u=e.currentTarget,n=e,{view:b}=n,p=m(n,["view"]);queueMicrotask(()=>D(u,p))}});return r=H(T(T({"data-active":K||void 0,type:M?"button":void 0},x),r),{ref:L(f,r.ref),onKeyDown:U,onKeyUp:I}),r=V(r),r});z(function(t){const i=W(t);return G(J,i)});export{W as u};
