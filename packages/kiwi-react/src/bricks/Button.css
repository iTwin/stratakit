/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/
.ğŸ¥-button {
	--âœ¨color: var(--kiwi-color-text-neutral-primary);
	--âœ¨gap: 4px;
	--âœ¨height: 1.5rem;
	--âœ¨padding-inline: 12px;

	--âœ¨glow--hover: var(--kiwi-color-glow-hue) var(--kiwi-color-bg-glow-base-hover-\%);
	--âœ¨glow--press: var(--kiwi-color-glow-hue) var(--kiwi-color-bg-glow-base-press-\%);

	--âœ¨bg--solid-default: var(--kiwi-color-bg-neutral-base);
	--âœ¨bg--solid-hover: color-mix(in oklch, var(--âœ¨bg--solid-default) 100%, var(--âœ¨glow--hover));
	--âœ¨bg--solid-pressed: color-mix(in oklch, var(--âœ¨bg--solid-default) 100%, var(--âœ¨glow--press));
	--âœ¨shadow--solid:
		0px 3px 3px -1.5px #00000029, 0px 1px 1px -0.5px #00000029, 0px 0px 0px 1px #ffffff14 inset, 0px -1px 0px 0px #00000014 inset;

	--âœ¨shadow--outline: 0px 0px 0px 1px var(--kiwi-color-border-neutral-base) inset;

	--âœ¨bg--ghost-default: transparent;
	--âœ¨bg--ghost-hover: color-mix(in oklch, var(--âœ¨bg--ghost-default) 100%, var(--âœ¨glow--hover));
	--âœ¨bg--ghost-pressed: color-mix(in oklch, var(--âœ¨bg--ghost-default) 100%, var(--âœ¨glow--press));
	--âœ¨bg--ghost-active: var(--kiwi-color-bg-glow-on-surface-accent-press);

	@layer base {
		text-decoration: none;
		line-height: 1;
		white-space: nowrap;
		user-select: none;
		cursor: pointer;
		font-size: 0.75rem;
		font-weight: 500;
		border: none;

		display: inline-flex;
		align-items: center;
		justify-content: center;
		flex-shrink: 0;
		gap: var(--âœ¨gap);

		block-size: var(--âœ¨height);
		border-radius: 4px;
		padding-inline: var(--ğŸ¥button-padding-inline, var(--âœ¨padding-inline));

		background-color: var(--ğŸ¥button-background-color);
		color: var(--âœ¨color);
		transition: background-color 150ms ease-out;
		-webkit-tap-highlight-color: var(--âœ¨bg--solid-pressed);
		--ğŸ¥icon-color: var(--ğŸŒ€button-state--default, var(--kiwi-color-icon-neutral-base))
			var(--ğŸŒ€button-state--hover, var(--kiwi-color-icon-neutral-hover))
			var(--ğŸŒ€button-state--pressed, var(--kiwi-color-icon-neutral-hover))
			var(--ğŸŒ€button-state--active, var(--kiwi-color-icon-accent-strong))
			var(--ğŸŒ€button-state--disabled, var(--kiwi-color-icon-neutral-disabled));

		@media (forced-colors: active) {
			border: 1px solid;
		}
	}

	@layer modifiers {
		&[data-kiwi-variant="solid"] {
			--ğŸ¥button-background-color: var(--ğŸŒ€button-state--default, var(--âœ¨bg--solid-default))
				var(--ğŸŒ€button-state--hover, var(--âœ¨bg--solid-hover))
				var(--ğŸŒ€button-state--pressed, var(--âœ¨bg--solid-pressed))
				var(--ğŸŒ€button-state--disabled, var(--âœ¨bg--solid-default));
			box-shadow: var(--âœ¨shadow--solid);
		}

		&[data-kiwi-variant="outline"] {
			--ğŸ¥button-background-color: var(--ğŸŒ€button-state--default, var(--âœ¨bg--ghost-default))
				var(--ğŸŒ€button-state--hover, var(--âœ¨bg--ghost-hover))
				var(--ğŸŒ€button-state--pressed, var(--âœ¨bg--ghost-pressed))
				var(--ğŸŒ€button-state--active, var(--âœ¨bg--ghost-active))
				var(--ğŸŒ€button-state--disabled, var(--âœ¨bg--ghost-default));
			box-shadow: var(--âœ¨shadow--outline);
		}

		&[data-kiwi-variant="ghost"] {
			--ğŸ¥button-background-color: var(--ğŸŒ€button-state--default, var(--âœ¨bg--ghost-default))
				var(--ğŸŒ€button-state--hover, var(--âœ¨bg--ghost-hover))
				var(--ğŸŒ€button-state--pressed, var(--âœ¨bg--ghost-pressed))
				var(--ğŸŒ€button-state--active, var(--âœ¨bg--ghost-active))
				var(--ğŸŒ€button-state--disabled, var(--âœ¨bg--ghost-default));
		}
	}

	@layer states {
		@media (any-hover: hover) {
			&:where(:hover) {
				--ğŸŒ€button-state: var(--ğŸŒ€button-state--hover);
			}
		}

		&:where(:active) {
			--ğŸŒ€button-state: var(--ğŸŒ€button-state--pressed);
		}

		&:where([data-kiwi-variant="ghost"][aria-pressed="true"]) {
			--ğŸŒ€button-state: var(--ğŸŒ€button-state--active);
		}

		&:where([disabled], :disabled, [aria-disabled="true"]) {
			--ğŸŒ€button-state: var(--ğŸŒ€button-state--disabled);
			color: var(--kiwi-color-text-neutral-disabled);
			cursor: not-allowed;
		}
	}

	@layer base.ğŸŒ€ {
		/* Cyclic toggles for default/hover/pressed/active/disabled states. See https://kizu.dev/cyclic-toggles/ */
		--ğŸŒ€button-state: var(--ğŸŒ€button-state--default);
		--ğŸŒ€button-state--default: var(--ğŸŒ€button-state,);
		--ğŸŒ€button-state--hover: var(--ğŸŒ€button-state,);
		--ğŸŒ€button-state--pressed: var(--ğŸŒ€button-state,);
		--ğŸŒ€button-state--active: var(--ğŸŒ€button-state,); /* "active" state is only supported in ghost variant */
		--ğŸŒ€button-state--disabled: var(--ğŸŒ€button-state,);
	}
}
