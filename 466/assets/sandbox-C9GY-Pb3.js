var Me=t=>{throw TypeError(t)};var xe=(t,e,s)=>e.has(t)||Me("Cannot "+s);var i=(t,e,s)=>(xe(t,e,"read from private field"),s?s.call(t):e.get(t)),T=(t,e,s)=>e.has(t)?Me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),I=(t,e,s,r)=>(xe(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),w=(t,e,s)=>(xe(t,e,"access private method"),s);import{w as tt}from"./LMDWO4NN-Dg-CmVu9.js";import{a as o,n,t as st}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{a as Te}from"./index-ChOFKjs3.js";import{G as nt,u as rt,B as it}from"./Button-RoIC19EJ.js";import{L as at,a as ke,b as Pe,D as Ke,c as Ve,d as We,e as z,f as ot}from"./DropdownMenu-D1ueYXF4.js";import{I as V,S as lt}from"./Icon-BsKu_MQo.js";import{I as ne}from"./IconButton-CDiwEQhY.js";import{F as ct,L as ut}from"./Label-Cl9vcQRT.js";import{S as dt,H as ht}from"./Select-DLPEMtpn.js";import{S as ft}from"./Spinner-g2Y7lx-9.js";import{T as mt,a as pt,b as xt,c as vt}from"./Tabs-BiuZlmRV.js";import{T as re}from"./Text-GgMtxYew.js";import{T as bt,a as gt,b as jt}from"./TextBox-BfrxsdG3.js";import{c as Y,a as Ct}from"./~utils-CpS5vUTu.js";import{R as ie}from"./XL7CSKGW-UlgSkSI6.js";import{u as yt,C as St}from"./ITI7HKP4-DbxAdGsH.js";import{f as ee}from"./~utils-26sRqX9k.js";import{V as ae}from"./VisuallyHidden-CckPABms.js";import{S as It,l as De,q as O,t as ve,r as de,b as Rt,u as be,v as Ne,w as _t,g as wt,x as Ft,y as ze,n as Ge,z as Mt}from"./QueryClientProvider-CsjJmbma.js";import{p as te}from"./placeholder-B8G6gt3k.js";import{p as Tt,l as kt,h as Pt,s as Ee,m as Dt,d as Nt,f as zt}from"./visibility-hide-Tb6qwhLY.js";import{s as Et}from"./visibility-show-6jjW8wQ3.js";import{C as Lt}from"./P2CTZE2T-CsknsjqQ.js";import{T as Ot}from"./toolbar-BCmn58t3.js";import{u as oe}from"./~hooks-Dvcn2d_3.js";import"./X5NMLKT6-tbHUaCWI.js";import"./KUU7WJ55-DGpHxwfQ.js";import"./LVA2YJMS-Poy2N9Zq.js";import"./Kbd-BMkLCyf_.js";import"./BYC7LY2E-DEfXd4q1.js";import"./YV4JVR4I-DPjYyIBF.js";import"./VGCJ63VH-B_HxEu7q.js";import"./XX67R432-tiBLlwDL.js";import"./AOQQTIBO-B4HjLz2q.js";import"./MTZPJQMC-DyHagAf_.js";import"./VEVQD5MH-5tJIUYnQ.js";import"./P4IRICAX-BkrqoX0A.js";import"./ASMQKSDT-Bn53RVEK.js";import"./BOLVLGVE-BFPJ-NKS.js";import"./Tooltip-DIpfkgG8.js";import"./tooltip-anchor-DqtdyEiF.js";import"./C3IKGW5T-C3PuGI4F.js";import"./RZ4GPYOB-Do0ZeBdx.js";const Bt=o.createContext(void 0),Ut=ee((t,e)=>{const{"aria-level":s,selected:r,expanded:u,icon:l,unstable_decorations:a,label:c,description:f,actions:h,error:m,onSelectedChange:d,onExpandedChange:p,onClick:g,onKeyDown:F,...x}=t,b=C=>{r!==void 0&&(C.stopPropagation(),d==null||d(!r))},R=C=>{C.altKey||C.ctrlKey||C.metaKey||C.shiftKey||u!==void 0&&(C.key==="ArrowRight"||C.key==="ArrowLeft")&&(C.preventDefault(),p==null||p(C.key==="ArrowRight"))},k=o.useId(),E=o.useId(),B=o.useId(),N=m?n.jsx(lt,{}):l,U=o.useMemo(()=>{const C=[];return f&&C.push(E),(a||N)&&C.push(B),C.length>0?C.join(" "):void 0},[a,N,B,f,E]);return n.jsx(Bt.Provider,{value:o.useMemo(()=>({level:s,expanded:u,selected:r}),[s,u,r]),children:n.jsx(Lt,{render:n.jsx(ie,{...x}),onClick:oe(g,b),onKeyDown:oe(F,R),role:"treeitem","aria-expanded":u,"aria-selected":r,"aria-labelledby":k,"aria-describedby":U,"aria-level":s,className:Y("ðŸ¥-tree-item",t.className),ref:e,children:n.jsxs(at,{"data-kiwi-expanded":u,"data-kiwi-selected":r,"data-kiwi-error":m?!0:void 0,className:"ðŸ¥-tree-item-node",style:{"--ðŸ¥tree-item-level":s},role:void 0,children:[n.jsxs(ke,{children:[n.jsx(nt,{align:f?"block":void 0,children:n.jsx(At,{onClick:()=>{u!==void 0&&(p==null||p(!u))}})}),N||a?n.jsx(ie,{className:"ðŸ¥-tree-item-decoration",id:B,render:o.isValidElement(N)?N:typeof N=="string"?n.jsx(V,{href:N}):void 0,children:N?null:a}):null]}),n.jsx(Pe,{id:k,className:"ðŸ¥-tree-item-content",children:c}),f?n.jsx(Pe,{id:E,className:"ðŸ¥-tree-item-description",children:f}):void 0,n.jsx(ke,{render:n.jsx(Qt,{children:h})})]})})})}),Qt=ee((t,e)=>n.jsx(Ot,{...t,onClick:oe(t.onClick,s=>s.stopPropagation()),onKeyDown:oe(t.onKeyDown,s=>s.stopPropagation()),className:Y("ðŸ¥-tree-item-actions",t.className),ref:e,children:t.children})),ge=ee((t,e)=>{const{visible:s,...r}=t;return n.jsx(ne,{inert:s===!1?!0:void 0,...r,variant:"ghost",className:Y("ðŸ¥-tree-item-action",t.className),"data-kiwi-visible":s,ref:e})}),At=ee((t,e)=>n.jsx(ie.span,{"aria-hidden":"true",...t,onClick:oe(t.onClick,s=>s.stopPropagation()),className:Y("ðŸ¥-button","ðŸ¥-icon-button","ðŸ¥-ghost-aligner","ðŸ¥-tree-item-expander",t.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":rt(),ref:e,children:n.jsx(Ht,{})})),Ht=ee((t,e)=>n.jsx(V,{...t,render:n.jsx(ie.svg,{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",render:t.render,children:n.jsx("path",{d:"M4.146 6.146a.5.5 0 0 1 .708 0L8 9.293l3.146-3.147a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708Z"})}),className:Y("ðŸ¥-tree-chevron",t.className),ref:e})),Kt=ee((t,e)=>{const s=yt({orientation:"vertical"});return n.jsx(ie.div,{role:"tree",...t,render:n.jsx(St,{store:s}),className:Y("ðŸ¥-tree",t.className),ref:e,children:t.children})});var D,v,le,P,W,X,H,L,ce,q,Z,G,$,K,J,j,se,je,Ce,ye,Se,Ie,Re,_e,$e,He,Vt=(He=class extends It{constructor(e,s){super();T(this,j);T(this,D);T(this,v);T(this,le);T(this,P);T(this,W);T(this,X);T(this,H);T(this,L);T(this,ce);T(this,q);T(this,Z);T(this,G);T(this,$);T(this,K);T(this,J,new Set);this.options=s,I(this,D,e),I(this,L,null),I(this,H,De()),this.options.experimental_prefetchInRender||i(this,H).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,v).addObserver(this),Le(i(this,v),this.options)?w(this,j,se).call(this):this.updateResult(),w(this,j,Se).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return we(i(this,v),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return we(i(this,v),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,w(this,j,Ie).call(this),w(this,j,Re).call(this),i(this,v).removeObserver(this)}setOptions(e,s){const r=this.options,u=i(this,v);if(this.options=i(this,D).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof O(this.options.enabled,i(this,v))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");w(this,j,_e).call(this),i(this,v).setOptions(this.options),r._defaulted&&!ve(this.options,r)&&i(this,D).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,v),observer:this});const l=this.hasListeners();l&&Oe(i(this,v),u,this.options,r)&&w(this,j,se).call(this),this.updateResult(s),l&&(i(this,v)!==u||O(this.options.enabled,i(this,v))!==O(r.enabled,i(this,v))||de(this.options.staleTime,i(this,v))!==de(r.staleTime,i(this,v)))&&w(this,j,je).call(this);const a=w(this,j,Ce).call(this);l&&(i(this,v)!==u||O(this.options.enabled,i(this,v))!==O(r.enabled,i(this,v))||a!==i(this,K))&&w(this,j,ye).call(this,a)}getOptimisticResult(e){const s=i(this,D).getQueryCache().build(i(this,D),e),r=this.createResult(s,e);return Gt(this,r)&&(I(this,P,r),I(this,X,this.options),I(this,W,i(this,v).state)),r}getCurrentResult(){return i(this,P)}trackResult(e,s){const r={};return Object.keys(e).forEach(u=>{Object.defineProperty(r,u,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(u),s==null||s(u),e[u])})}),r}trackProp(e){i(this,J).add(e)}getCurrentQuery(){return i(this,v)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,D).defaultQueryOptions(e),r=i(this,D).getQueryCache().build(i(this,D),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(e){return w(this,j,se).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,P)))}createResult(e,s){var ue;const r=i(this,v),u=this.options,l=i(this,P),a=i(this,W),c=i(this,X),h=e!==r?e.state:i(this,le),{state:m}=e;let d={...m},p=!1,g;if(s._optimisticResults){const M=this.hasListeners(),Q=!M&&Le(e,s),S=M&&Oe(e,r,s,u);(Q||S)&&(d={...d,...Ft(m.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:F,errorUpdatedAt:x,status:b}=d;if(s.select&&d.data!==void 0)if(l&&d.data===(a==null?void 0:a.data)&&s.select===i(this,ce))g=i(this,q);else try{I(this,ce,s.select),g=s.select(d.data),g=ze(l==null?void 0:l.data,g,s),I(this,q,g),I(this,L,null)}catch(M){I(this,L,M)}else g=d.data;if(s.placeholderData!==void 0&&g===void 0&&b==="pending"){let M;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(c==null?void 0:c.placeholderData))M=l.data;else if(M=typeof s.placeholderData=="function"?s.placeholderData((ue=i(this,Z))==null?void 0:ue.state.data,i(this,Z)):s.placeholderData,s.select&&M!==void 0)try{M=s.select(M),I(this,L,null)}catch(Q){I(this,L,Q)}M!==void 0&&(b="success",g=ze(l==null?void 0:l.data,M,s),p=!0)}i(this,L)&&(F=i(this,L),g=i(this,q),x=Date.now(),b="error");const R=d.fetchStatus==="fetching",k=b==="pending",E=b==="error",B=k&&R,N=g!==void 0,C={status:b,fetchStatus:d.fetchStatus,isPending:k,isSuccess:b==="success",isError:E,isInitialLoading:B,isLoading:B,data:g,dataUpdatedAt:d.dataUpdatedAt,error:F,errorUpdatedAt:x,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>h.dataUpdateCount||d.errorUpdateCount>h.errorUpdateCount,isFetching:R,isRefetching:R&&!k,isLoadingError:E&&!N,isPaused:d.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:E&&N,isStale:Fe(e,s),refetch:this.refetch,promise:i(this,H)};if(this.options.experimental_prefetchInRender){const M=_=>{C.status==="error"?_.reject(C.error):C.data!==void 0&&_.resolve(C.data)},Q=()=>{const _=I(this,H,C.promise=De());M(_)},S=i(this,H);switch(S.status){case"pending":e.queryHash===r.queryHash&&M(S);break;case"fulfilled":(C.status==="error"||C.data!==S.value)&&Q();break;case"rejected":(C.status!=="error"||C.error!==S.reason)&&Q();break}}return C}updateResult(e){const s=i(this,P),r=this.createResult(i(this,v),this.options);if(I(this,W,i(this,v).state),I(this,X,this.options),i(this,W).data!==void 0&&I(this,Z,i(this,v)),ve(r,s))return;I(this,P,r);const u={},l=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,c=typeof a=="function"?a():a;if(c==="all"||!c&&!i(this,J).size)return!0;const f=new Set(c??i(this,J));return this.options.throwOnError&&f.add("error"),Object.keys(i(this,P)).some(h=>{const m=h;return i(this,P)[m]!==s[m]&&f.has(m)})};(e==null?void 0:e.listeners)!==!1&&l()&&(u.listeners=!0),w(this,j,$e).call(this,{...u,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&w(this,j,Se).call(this)}},D=new WeakMap,v=new WeakMap,le=new WeakMap,P=new WeakMap,W=new WeakMap,X=new WeakMap,H=new WeakMap,L=new WeakMap,ce=new WeakMap,q=new WeakMap,Z=new WeakMap,G=new WeakMap,$=new WeakMap,K=new WeakMap,J=new WeakMap,j=new WeakSet,se=function(e){w(this,j,_e).call(this);let s=i(this,v).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Rt)),s},je=function(){w(this,j,Ie).call(this);const e=de(this.options.staleTime,i(this,v));if(be||i(this,P).isStale||!Ne(e))return;const r=_t(i(this,P).dataUpdatedAt,e)+1;I(this,G,setTimeout(()=>{i(this,P).isStale||this.updateResult()},r))},Ce=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,v)):this.options.refetchInterval)??!1},ye=function(e){w(this,j,Re).call(this),I(this,K,e),!(be||O(this.options.enabled,i(this,v))===!1||!Ne(i(this,K))||i(this,K)===0)&&I(this,$,setInterval(()=>{(this.options.refetchIntervalInBackground||wt.isFocused())&&w(this,j,se).call(this)},i(this,K)))},Se=function(){w(this,j,je).call(this),w(this,j,ye).call(this,w(this,j,Ce).call(this))},Ie=function(){i(this,G)&&(clearTimeout(i(this,G)),I(this,G,void 0))},Re=function(){i(this,$)&&(clearInterval(i(this,$)),I(this,$,void 0))},_e=function(){const e=i(this,D).getQueryCache().build(i(this,D),this.options);if(e===i(this,v))return;const s=i(this,v);I(this,v,e),I(this,le,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},$e=function(e){Ge.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,P))}),i(this,D).getQueryCache().notify({query:i(this,v),type:"observerResultsUpdated"})})},He);function Wt(t,e){return O(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Le(t,e){return Wt(t,e)||t.state.data!==void 0&&we(t,e,e.refetchOnMount)}function we(t,e,s){if(O(e.enabled,t)!==!1){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&Fe(t,e)}return!1}function Oe(t,e,s,r){return(t!==e||O(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Fe(t,s)}function Fe(t,e){return O(e.enabled,t)!==!1&&t.isStaleByTime(de(e.staleTime,t))}function Gt(t,e){return!ve(t.getCurrentResult(),e)}var Xe=o.createContext(!1),$t=()=>o.useContext(Xe);Xe.Provider;function Xt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var qt=o.createContext(Xt()),Zt=()=>o.useContext(qt);function Jt(t,e){return typeof t=="function"?t(...e):!!t}function Be(){}var Yt=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},es=t=>{o.useEffect(()=>{t.clearReset()},[t])},ts=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:u})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(u&&t.data===void 0||Jt(s,[t.error,r])),ss=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},ns=(t,e)=>t.isLoading&&t.isFetching&&!e,rs=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Ue=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function is(t,e,s){var d,p,g,F,x;const r=Mt(),u=$t(),l=Zt(),a=r.defaultQueryOptions(t);(p=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||p.call(d,a),a._optimisticResults=u?"isRestoring":"optimistic",ss(a),Yt(a,l),es(l);const c=!r.getQueryCache().get(a.queryHash),[f]=o.useState(()=>new e(r,a)),h=f.getOptimisticResult(a),m=!u&&t.subscribed!==!1;if(o.useSyncExternalStore(o.useCallback(b=>{const R=m?f.subscribe(Ge.batchCalls(b)):Be;return f.updateResult(),R},[f,m]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),o.useEffect(()=>{f.setOptions(a,{listeners:!1})},[a,f]),rs(a,h))throw Ue(a,f,l);if(ts({result:h,errorResetBoundary:l,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((F=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||F.call(g,a,h),a.experimental_prefetchInRender&&!be&&ns(h,u)){const b=c?Ue(a,f,l):(x=r.getQueryCache().get(a.queryHash))==null?void 0:x.promise;b==null||b.catch(Be).finally(()=>{f.updateResult()})}return a.notifyOnChangeProps?h:f.trackResult(h)}function as(t,e){return is(t,Vt)}const os="_appLayout_1i9n6_5",ls="_header_1i9n6_22",cs="_platformBar_1i9n6_32",us="_logo_1i9n6_38",ds="_tools_1i9n6_48",hs="_leftPanel_1i9n6_58",fs="_panelHeader_1i9n6_70",ms="_panelTitleWrapper_1i9n6_78",ps="_panelCaption_1i9n6_82",xs="_shiftIconRight_1i9n6_86",vs="_subheader_1i9n6_90",bs="_searchInput_1i9n6_106",gs="_subheaderActions_1i9n6_110",js="_tabList_1i9n6_114",Cs="_emptyState_1i9n6_119",ys="_canvasWrapper_1i9n6_128",Ss="_canvas_1i9n6_128",Is="_splitter_1i9n6_165",Rs="_tabPanel_1i9n6_211",_s="_tree_1i9n6_219",ws="_action_1i9n6_223",Fs="_slider_1i9n6_240",Ms="_colorSwatch_1i9n6_249",y={appLayout:os,header:ls,platformBar:cs,logo:us,tools:ds,leftPanel:hs,panelHeader:fs,panelTitleWrapper:ms,panelCaption:ps,shiftIconRight:xs,subheader:vs,searchInput:bs,subheaderActions:gs,tabList:js,emptyState:Cs,canvasWrapper:ys,canvas:Ss,splitter:Is,tabPanel:Rs,tree:_s,action:ws,slider:Fs,colorSwatch:Ms},Ts="/466/assets/sandbox.model1-CoozF5xy.json",ks="/466/assets/sandbox.model2-Bi69Ub92.json",Ps="data:application/json;base64,ewoJIm5hbWUiOiAiRXBvY2ggU3lzdGVtIGlNb2RlbCAzIiwKCSJ2ZXJzaW9uIjogIjIwMjQgUmVmcmVzaCIsCgkiZGF0YSI6IHsKCQkiZGVmYXVsdCI6IFtdCgl9Cn0K",he={model1:{name:"Epoch System iModel 1",url:Ts},model2:{name:"Epoch System iModel 2",url:ks},model3:{name:"Epoch System iModel 3",url:Ps}};async function Ds(t){if(t in he){const e=await fetch(he[t].url).then(s=>s.json());return e.slow&&await new Promise(s=>setTimeout(s,Math.random()*2e3)),e}return{name:"Unknown",version:"Unknown",data:{default:[]}}}const qe="Kiwi sandbox",On=()=>[{title:qe}],Bn=tt(function(){var l,a;const[e,s]=st(),r=e.get("model")||"model1",u=as({queryKey:["sandbox-data",r],queryFn:()=>Ds(r)});return n.jsxs(Ns,{panelContent:n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:y.panelHeader,children:[n.jsxs("div",{children:[n.jsxs(ct,{children:[n.jsx(ae,{render:n.jsx(ut,{}),children:"Choose Model"}),n.jsx(dt,{className:y.panelTitleWrapper,children:n.jsx(ht,{variant:"ghost",defaultValue:r,onChange:c=>s({model:c.currentTarget.value}),children:Object.entries(he).map(([c,{name:f}])=>n.jsx("option",{value:c,children:f},c))})})]}),n.jsxs("hgroup",{role:"group",children:[n.jsx(ae,{render:n.jsx("h2",{}),children:(l=he[r])==null?void 0:l.name}),n.jsx(re,{className:y.panelCaption,variant:"body-sm",render:n.jsx("p",{}),children:((a=u.data)==null?void 0:a.version)||""})]})]}),n.jsx("div",{className:y.actions,children:n.jsx(ne,{className:y.shiftIconRight,icon:Tt,label:"Dock panel",variant:"ghost",disabled:!0})})]}),n.jsx(o.Suspense,{fallback:n.jsx(zs,{}),children:n.jsx(Es,{query:u})},r)]}),children:[n.jsxs("header",{className:y.header,children:[n.jsx("div",{className:y.logo,children:n.jsx(V,{href:te,size:"large"})}),n.jsx(re,{render:c=>n.jsx("h1",{...c}),variant:"body-md",children:qe})]}),n.jsx("div",{className:y.platformBar,children:n.jsxs("div",{className:y.tools,children:[n.jsx(V,{href:te,size:"large"}),n.jsx(V,{href:te,size:"large"}),n.jsx(V,{href:te,size:"large"})]})}),n.jsx("div",{className:y.canvasWrapper,children:n.jsx("div",{className:y.canvas})})]})});function Ns(t){const{sliderProps:e,panelProps:s,panelMinSize:r,panelMaxSize:u,resizing:l}=Bs({minSize:{px:256,pct:20},maxSize:{pct:30}}),a=o.useId();return n.jsxs("div",{className:y.appLayout,style:{"--_panel-min-size":r,"--_panel-max-size":u},children:[n.jsx("div",{...s,className:y.leftPanel,style:{position:"relative",...s.style},children:t.panelContent}),n.jsxs("div",{className:y.splitter,"data-resizing":l?"true":void 0,children:[n.jsx(ae,{render:c=>n.jsx("label",{...c,htmlFor:a,children:"Resize layers panel"}),children:"Resize layers panel"}),n.jsx("input",{id:a,type:"range",className:y.slider,...e})]}),t.children]})}function zs(){return n.jsxs(Ze,{children:[n.jsx(ft,{"aria-hidden":"true"}),n.jsx(re,{variant:"body-sm",children:"Loadingâ€¦"})]})}function Es(t){var a;const{data:e}=o.use(t.query.promise),s=o.useMemo(()=>Object.entries(e).map(([c,f])=>{const h=f.length<=1?[]:f.map(({label:m})=>m);return{name:c,filters:h,content:f.length>0?n.jsx(Hs,{data:f}):n.jsxs(Ze,{children:[n.jsx(re,{variant:"body-sm",children:"No layers"}),n.jsx(it,{children:"Create a layer"})]})}}),[e]),[r,u]=o.useState((a=s[0])==null?void 0:a.name),l=o.useMemo(()=>{var c;return r?((c=s.find(f=>f.name===r))==null?void 0:c.filters)||[]:s[0].filters},[s,r]);return s.length===1?n.jsxs(Ae,{allFilters:l,children:[n.jsx(Qe,{}),s[0].content]}):n.jsx(Ae,{allFilters:l,children:n.jsxs(mt,{selectOnMove:!1,setSelectedId:u,children:[n.jsx(Qe,{tabs:s.map(c=>n.jsx(pt,{id:c.name,children:Ct(c.name)},c.name))}),s.map(c=>n.jsx(xt,{tabId:c.name,className:y.tabPanel,focusable:!1,unmountOnHide:!0,children:c.content},c.name))]})})}function Ze({children:t}){return n.jsx("div",{className:y.emptyState,children:t})}function Ls(){return n.jsx("div",{style:{textAlign:"center"},children:n.jsx(re,{variant:"body-sm",children:"No results found"})})}function Os(t,e,s){return Math.min(Math.max(t,e),s)}function Bs(t){const{minSize:e,maxSize:s,onCollapse:r}=t??{},u=o.useId(),l=o.useRef(null),[a,c]=o.useState(void 0),[f,h]=o.useState(void 0),[m,d]=o.useState(void 0),[p,g]=o.useState(!1),[F,x]=o.useState(void 0),b=o.useMemo(()=>{if(e&&f)return Math.min(e.px,e.pct/100*f)},[e,f]),R=o.useMemo(()=>{if(b&&s&&f)return Math.max(b,s.pct/100*f)},[s,f,b]),k=o.useMemo(()=>{if(m==="smallest")return b??0;if(m==="largest")return R??0;if(a&&b&&R)return Os(a,b,R)},[a,b,R,m]);o.useEffect(()=>{const S=l.current;if(!S)return;const _=S.parentElement;if(!_)return;const A=new ResizeObserver(()=>{const me=_.getBoundingClientRect(),pe=S.getBoundingClientRect();h(me.width),c(pe.width)});return A.observe(_),A.observe(S),()=>{A.disconnect()}},[]);const E=o.useCallback(S=>{const _=l.current;if(!_)return;const A=_.getBoundingClientRect();x(A.width+S),d(void 0),g(!0)},[]),B=o.useCallback(S=>{const _=l.current;if(!_)return;const A=_.parentElement;if(!A)return;const me=A.getBoundingClientRect(),pe=S*(me.width*.005),et=_.getBoundingClientRect();x(et.width+pe),d(void 0)},[]),N=o.useCallback(()=>{l.current&&(x(void 0),g(!1))},[]),{moveableProps:U}=Us({onMove:E,onMoveEnd:N,onKeyMove:B}),C=o.useMemo(()=>({...U,onKeyDown:S=>{var _;if((_=U.onKeyDown)==null||_.call(U,S),!S.defaultPrevented)switch(S.key){case"Enter":S.preventDefault(),r==null||r();break;case"Home":S.preventDefault(),d("smallest");break;case"End":S.preventDefault(),d("largest");break}},onChange:S=>{if(p)return;const _=Number(S.target.value);x(_)},value:k===void 0?0:Math.floor(k),min:b===void 0?void 0:Math.floor(b),max:R===void 0?void 0:Math.floor(R)}),[U,k,b,R,r,p]),ue=o.useMemo(()=>({style:{WebkitUserSelect:F===void 0?void 0:"none"},id:u,ref:l}),[u,F]),M=b===void 0?void 0:`${Math.floor(b)}px`,Q=o.useMemo(()=>{if(F!==void 0&&s!==void 0&&m===void 0)return`min(${Math.floor(F)}px, ${s.pct}%)`;if(k!==void 0)return`${Math.floor(k)}px`},[s,F,k,m]);return{sliderProps:C,panelProps:ue,panelMinSize:M,panelMaxSize:Q,resizing:p}}function Us(t){const{onMove:e,onMoveEnd:s,onKeyMove:r}=t??{},u=o.useRef(null),l=o.useRef(void 0),a=o.useRef(void 0),c=o.useCallback(()=>{a.current!==void 0&&(a.current=void 0,s==null||s())},[s]);return{moveableProps:o.useMemo(()=>({onPointerDown:h=>{if(h.button!==0||h.ctrlKey)return;const m=u.current;if(!m)return;const d=m.getBoundingClientRect(),p=h.clientX-d.left;a.current=p,h.preventDefault(),m.setPointerCapture(h.pointerId)},onPointerMove:h=>{const m=a.current;if(m===void 0)return;const d=u.current;if(!d)return;const p=d.getBoundingClientRect(),g=h.clientX-m-p.left;h.preventDefault(),e==null||e(g)},onPointerUp:c,onPointerCancel:c,onKeyDown:h=>{if(!h.defaultPrevented)switch(h.key){case"ArrowLeft":h.preventDefault(),r==null||r(-1);break;case"ArrowRight":h.preventDefault(),r==null||r(1);break}},ref:h=>{var d;if(u.current=h,(d=l.current)==null||d.call(l),l.current=void 0,!h)return;const m=p=>{p.preventDefault()};h.addEventListener("touchstart",m),l.current=()=>{h.removeEventListener("touchstart",m)}}}),[r,e,c])}}const Je=(()=>{let t=0;return e=>({id:`${t++}`,label:`Tree Item ${t}`,expanded:!0,...e,items:((e==null?void 0:e.items)??[]).map(Je)})})();function Qs({items:t,filters:e,search:s}){const r=o.useMemo(()=>e.length===0?t:t.reduce((a,c)=>(e.includes(c.label)&&a.push(c),a),[]),[t,e]),u=o.useMemo(()=>{function a(c){return c.reduce((f,h)=>{const m=a(h.items??[]);return(h.label.toLowerCase().includes(s.toLowerCase())||m.length>0)&&f.push({...h,items:m}),f},[])}return s===""?r:a(r)},[r,s]),l=o.useMemo(()=>{if(e.length===0&&s==="")return;function a(c){return c.reduce((f,h)=>{const m=h.items?a(h.items):0;return f+1+m},0)}return a(u)},[u,e,s]);return{filteredTree:u,itemCount:l}}function As(t,e,s){return o.useMemo(()=>{function r(u,l,a,c,f){const h=[];let m=1;for(const d of u){const p=d.id===e||c,g=s.includes(d.id)||f;h.push({...d,level:a,parentItem:l,selected:p,hidden:g,parentHidden:f,position:m++,size:u.length}),d.expanded&&h.push(...r(d.items,d,a+1,p,g))}return h}return r(t,void 0,1,!1,!1)},[t,e,s])}function Ye(t,e){for(const s of t){if(s.id===e)return s;const r=Ye(s.items,e);if(r)return r}}function Hs({data:t}){const{appliedFilters:e,search:s,setItemCount:r}=o.useContext(fe),[u,l]=o.useState(),[a,c]=o.useState([]),f=o.useCallback(x=>{c(b=>b.includes(x)?b.filter(R=>R!==x):[...b,x])},[]),[h,m]=o.useState(()=>t.map(x=>Je(x))),{filteredTree:d,itemCount:p}=Qs({items:h,filters:e,search:s}),g=As(d,u,a);o.useEffect(()=>{r(p)},[r,p]);const F=o.useDeferredValue(g);return F.length===0?n.jsx(Ls,{}):n.jsx(o.Suspense,{fallback:"Loading...",children:n.jsx(Kt,{className:y.tree,children:F.map(x=>n.jsx(Ut,{label:x.label,description:x.description,"aria-level":x.level,"aria-posinset":x.position,"aria-setsize":x.size,selected:x.selected,onSelectedChange:()=>{if(u===x.id){l(void 0);return}l(x.id)},expanded:x.items.length===0?void 0:x.expanded,onExpandedChange:b=>{m(R=>{const k=Ye(R,x.id);if(!k)return R;const E=[...R];return k.expanded=b,E})},unstable_decorations:n.jsxs(n.Fragment,{children:[x.color?n.jsx(Ws,{color:x.color,alt:x.color}):null,n.jsx(V,{href:te})]}),actions:[n.jsx(ge,{className:y.action,icon:kt,label:"Lock","aria-hidden":x.hidden},"lock"),n.jsx(ge,{className:y.action,icon:x.hidden?Pt:Et,label:x.hidden?"Show":"Hide",visible:x.hidden?!0:void 0,onClick:()=>{f(x.id)}},"visibility"),n.jsx(Ks,{hidden:x.hidden},"more")]},x.id))})})}function Ks({hidden:t}){return n.jsxs(Ke,{children:[n.jsx(Ve,{className:y.action,"aria-hidden":t,render:n.jsx(ge,{icon:Dt,label:"More"})}),n.jsxs(We,{style:{minInlineSize:164},children:[n.jsx(z,{label:"Copy",shortcuts:"Command+C"}),n.jsx(z,{label:"Paste",shortcuts:"Command+P"}),n.jsx(z,{label:"Copy/Paste as",shortcuts:"Command+V"}),n.jsx(z,{label:"Move to",shortcuts:"Command+M"}),n.jsx(z,{label:"Bring to front",shortcuts:"]"}),n.jsx(z,{label:"Send to back",shortcuts:"["}),n.jsx(z,{label:"Group selection",shortcuts:"Command+G"}),n.jsx(z,{label:"Ungroup",shortcuts:"Command+U"}),n.jsx(z,{label:"Rename",shortcuts:"Command+R"}),n.jsx(z,{label:"Show/hide",shortcuts:"Shift+Command+V"}),n.jsx(z,{label:"Lock/unlock",shortcuts:"Shift+Command+L"}),n.jsx(z,{label:"Isolate object",shortcuts:"I"})]})]})}function Qe({tabs:t}){const{itemCount:e,isFiltered:s,search:r,setSearch:u}=o.useContext(fe),l=o.useRef(null),a=o.useRef(null),[c,f]=o.useState(!t),h=s||!!r,m=c?n.jsxs(n.Fragment,{children:[n.jsx(Vs,{}),t?n.jsx(ne,{className:y.shiftIconRight,icon:Nt,label:"Close",variant:"ghost",onClick:()=>{var p;Te.flushSync(()=>f(!1)),(p=a.current)==null||p.focus()}}):null]}):n.jsx(ne,{className:y.shiftIconRight,icon:Ee,label:"Search",dot:h?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var p;Te.flushSync(()=>f(!0)),(p=l.current)==null||p.focus()}}),d=o.useMemo(()=>{if(s)return e===void 0?"Showing all tree items":`Showing ${e} tree items`},[s,e]);return n.jsxs("div",{className:y.subheader,children:[n.jsx(ae,{"aria-live":"polite","aria-atomic":!0,children:d}),t&&!c?n.jsx(vt,{className:y.tabList,tone:"accent",ref:a,children:t}):null,c?n.jsxs(bt,{className:y.searchInput,children:[n.jsx(gt,{href:Ee}),n.jsx(jt,{placeholder:"Search",ref:l,onChange:p=>u(p.currentTarget.value)})]}):null,n.jsx("div",{className:y.subheaderActions,children:m})]})}function Vs(){const t=o.useContext(fe),e=t.appliedFilters.length>0;return n.jsxs(Ke,{children:[n.jsx(Ve,{render:n.jsx(ne,{icon:zt,label:"Filter",dot:e?"Some filters applied":void 0,variant:"ghost",disabled:t.allFilters.length===0})}),n.jsx(We,{children:t.allFilters.map(s=>{const r=t.appliedFilters.includes(s);return n.jsx(ot,{name:s,label:s,checked:r,onChange:()=>{t.toggleFilter(s)}},s)})})]})}function Ae(t){const[e,s]=o.useState(!1),[r,u]=o.useState([]),[l,a]=o.useState(""),[c,f]=o.useState(void 0),h=o.useCallback(p=>{const g=r.includes(p)?r.filter(F=>F!==p):[...r,p];u(g),s(g.length>0)},[r]),m=o.useCallback(()=>{u([]),s(!1)},[]),d=o.useCallback(p=>{a(p),s(!!p)},[]);return n.jsx(fe.Provider,{value:o.useMemo(()=>({allFilters:t.allFilters,appliedFilters:r,isFiltered:e,toggleFilter:h,clearFilters:m,search:l,setSearch:d,itemCount:c,setItemCount:f}),[t.allFilters,r,e,h,m,l,d,c]),children:t.children})}const fe=o.createContext({allFilters:[],appliedFilters:[],isFiltered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}});function Ws(t){return n.jsx("div",{className:y.colorSwatch,style:{"--_color":`var(--_color--${t.color})`},children:t.alt?n.jsx(ae,{children:t.alt}):null})}export{Bn as default,On as meta};
