import{A as oe,aJ as _,aF as ae,aK as ue,f as se,e as le,a as fe,b as ce,au as de,aL as me,w as p,aM as ve,aN as R,aO as F,aP as ge,t as H,aQ as Ie,aR as be,g as Ce,j as xe,d as Se,aw as we,r as Ee,aS as he,aT as Pe}from"./ExamplePreview._fRr7SXG.js";import{u as Te}from"./Z2O3VLAQ.C_fZltVQ.js";import{C as ye,c as pe}from"./GVAFFF2B.CMj_TqBB.js";import{r as v}from"./index.DIfZGIpv.js";var h=oe([pe],[ye]),Re=h.useContext,Ye=h.useProviderContext,Ge=h.ContextProvider,Je=h.ScopedContextProvider,Fe=v.createContext(void 0),Ae=v.createContext(void 0),De={id:null};function Qe(n,e,r=!1){const u=n.findIndex(f=>f.id===e);return[...n.slice(u+1),...r?[De]:[],...n.slice(0,u)]}function qe(n,e){return n.find(r=>!r.disabled)}function ke(n,e){return e&&n.item(e)||null}function Xe(n){const e=[];for(const r of n){const u=e.find(f=>{var d;return((d=f[0])==null?void 0:d.rowId)===r.rowId});u?u.push(r):e.push([r])}return e}function Le(n,e=!1){if(_(n))n.setSelectionRange(e?n.value.length:0,n.value.length);else if(n.isContentEditable){const r=ae(n).getSelection();r?.selectAllChildren(n),e&&r?.collapseToEnd()}}var A=Symbol("FOCUS_SILENTLY");function Oe(n){n[A]=!0,n.focus({preventScroll:!0})}function Ze(n){const e=n[A];return delete n[A],e}function V(n,e,r){return!(!e||e===r||!n.item(e.id))}var Ne="button";function Me(n){return R(n)?!0:n.tagName==="INPUT"&&!he(n)}function ze(n,e=!1){const r=n.clientHeight,{top:u}=n.getBoundingClientRect(),f=Math.max(r*.875,r-40)*1.5,d=e?r-f+u:f+u;return n.tagName==="HTML"?d+n.scrollTop:d}function Be(n,e=!1){const{top:r}=n.getBoundingClientRect();return e?r+n.clientHeight:r}function U(n,e,r,u=!1){var f;if(!e||!r)return;const{renderedItems:d}=e.getState(),g=Pe(n);if(!g)return;const x=ze(g,u);let c,i;for(let I=0;I<d.length;I+=1){const s=c;if(c=r(I),!c)break;if(c===s)continue;const S=(f=ke(e,c))==null?void 0:f.element;if(!S)continue;const w=Be(S,u)-x,b=Math.abs(w);if(u&&w<=0||!u&&w>=0){i!==void 0&&i<b&&(c=s);break}i=b}return c}function Ke(n,e){return F(n)?!1:V(e,n.target)}var He=fe(function({store:e,rowId:r,preventScrollOnKeyDown:u=!1,moveOnKeyPress:f=!0,tabbable:d=!1,getItem:g,"aria-setsize":x,"aria-posinset":c,...i}){const I=Re();e=e||I;const s=ce(i.id),S=v.useRef(null),l=v.useContext(Ae),b=de(i)&&!i.accessibleWhenDisabled,{rowId:P,baseElement:D,isActiveItem:j,ariaSetSize:W,ariaPosInSet:Y,isTabbable:G}=me(e,{rowId(t){if(r)return r;if(t&&l?.baseElement&&l.baseElement===t.baseElement)return l.id},baseElement(t){return t?.baseElement||void 0},isActiveItem(t){return!!t&&t.activeId===s},ariaSetSize(t){if(x!=null)return x;if(t&&l?.ariaSetSize&&l.baseElement===t.baseElement)return l.ariaSetSize},ariaPosInSet(t){if(c!=null)return c;if(!t||!l?.ariaPosInSet||l.baseElement!==t.baseElement)return;const o=t.renderedItems.filter(a=>a.rowId===P);return l.ariaPosInSet+o.findIndex(a=>a.id===s)},isTabbable(t){if(!t?.renderedItems.length)return!0;if(t.virtualFocus)return!1;if(d)return!0;if(t.activeId===null)return!1;const o=e?.item(t.activeId);return o?.disabled||!o?.element?!0:t.activeId===s}}),J=v.useCallback(t=>{var o;const a={...t,id:s||t.id,rowId:P,disabled:!!b,children:(o=t.element)==null?void 0:o.textContent};return g?g(a):a},[s,P,b,g]),k=i.onFocus,T=v.useRef(!1),Q=p(t=>{if(k?.(t),t.defaultPrevented||ve(t)||!s||!e||Ke(t,e))return;const{virtualFocus:o,baseElement:a}=e.getState();if(e.setActiveId(s),R(t.currentTarget)&&Le(t.currentTarget),!o||!F(t)||Me(t.currentTarget)||!a?.isConnected)return;ge()&&t.currentTarget.hasAttribute("data-autofocus")&&t.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),T.current=!0,t.relatedTarget===a||V(e,t.relatedTarget)?Oe(a):a.focus()}),L=i.onBlurCapture,q=p(t=>{if(L?.(t),t.defaultPrevented)return;const o=e?.getState();o?.virtualFocus&&T.current&&(T.current=!1,t.preventDefault(),t.stopPropagation())}),O=i.onKeyDown,X=H(u),Z=H(f),$=p(t=>{if(O?.(t),t.defaultPrevented||!F(t)||!e)return;const{currentTarget:o}=t,a=e.getState(),y=e.item(s),m=!!y?.rowId,E=a.orientation!=="horizontal",C=a.orientation!=="vertical",M=()=>!!(m||C||!a.baseElement||!_(a.baseElement)),z={ArrowUp:(m||E)&&e.up,ArrowRight:(m||C)&&e.next,ArrowDown:(m||E)&&e.down,ArrowLeft:(m||C)&&e.previous,Home:()=>{if(M())return!m||t.ctrlKey?e?.first():e?.previous(-1)},End:()=>{if(M())return!m||t.ctrlKey?e?.last():e?.next(-1)},PageUp:()=>U(o,e,e?.up,!0),PageDown:()=>U(o,e,e?.down)}[t.key];if(z){if(R(o)){const K=Ie(o),ee=C&&t.key==="ArrowLeft",te=C&&t.key==="ArrowRight",ne=E&&t.key==="ArrowUp",re=E&&t.key==="ArrowDown";if(te||re){const{length:ie}=be(o);if(K.end!==ie)return}else if((ee||ne)&&K.start!==0)return}const B=z();if(X(t)||B!==void 0){if(!Z(t))return;t.preventDefault(),e.move(B)}}}),N=v.useMemo(()=>({id:s,baseElement:D}),[s,D]);return i=Ce(i,t=>xe.jsx(Fe.Provider,{value:N,children:t}),[N]),i={id:s,"data-active-item":j||void 0,...i,ref:Se(S,i.ref),tabIndex:G?i.tabIndex:-1,onFocus:Q,onBlurCapture:q,onKeyDown:$},i=we(i),i=Te({store:e,...i,getItem:J,shouldRegisterItem:s?i.shouldRegisterItem:!1}),Ee({...i,"aria-setsize":W,"aria-posinset":Y})}),$e=ue(se(function(e){const r=He(e);return le(Ne,r)}));export{Je as C,Ge as a,$e as b,Xe as c,He as d,Re as e,qe as f,ke as g,Qe as h,V as i,Ze as s,Ye as u};
