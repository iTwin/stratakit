/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/

:is(.MuiCheckbox-root, .MuiRadio-root) {
	--_checkbox-size: 1rem;

	padding: 0;
	position: relative;

	&:where(.MuiCheckbox-sizeSmall, .MuiRadio-sizeSmall) {
		--_checkbox-size: 0.75rem;
	}

	&:where(.MuiCheckbox-sizeLarge) {
		--_checkbox-size: 1.5rem;
	}

	/* This pseudo-element increases tap target size to 24x24 */
	&::before {
		content: "";
		position: absolute;
		inset: calc(((24px - var(--_checkbox-size)) / 2) * -1); /* Makes touch target area 24px */
		border-radius: 50%;
		background-color: var(--_hover-background-color);
	}

	@media (any-hover: hover) {
		&:where(:not(.Mui-disabled)):hover,
		:where(.MuiFormControlLabel-root:where(:not(.Mui-disabled))):hover & {
			--_hover-background-color: var(--stratakit-color-bg-glow-on-surface-neutral-hover);

			&:where(.Mui-checked, .MuiCheckbox-indeterminate) {
				--_hover-background-color: var(--stratakit-color-bg-glow-on-surface-accent-hover);
			}

			:where(.Mui-error) & {
				--_hover-background-color: var(--stratakit-color-bg-glow-on-surface-critical-hover);
			}
		}
	}

	> input {
		--✨unchecked-svg: url('data:image/svg+xml;utf8,<svg viewBox="0 0 16 16"></svg>');

		appearance: none;
		opacity: 1;
		aspect-ratio: 1;
		inline-size: var(--_checkbox-size);
		block-size: var(--_checkbox-size);
		background-color: var(--stratakit-color-bg-neutral-base);
		border: 1px solid var(--stratakit-color-border-shadow-base);
		color: var(--stratakit-color-icon-neutral-emphasis);
		position: relative;
		--_check-symbol-mask-image: var(--✨unchecked-svg);

		&::after {
			content: "";
			position: absolute;
			inset: 0px;
			background-color: currentColor;
			mask-repeat: no-repeat;
			mask-position: center;
			mask-image: var(--_check-symbol-mask-image);
		}

		:where(.Mui-checked, .MuiCheckbox-indeterminate) & {
			background-color: var(--stratakit-color-bg-accent-base);
			border-color: var(--stratakit-color-border-shadow-strong);
			color: var(--stratakit-color-icon-neutral-emphasis);
		}

		:where(.Mui-error) & {
			background-color: var(--stratakit-color-bg-neutral-base);
			border-color: var(--stratakit-color-border-critical-base);
			color: var(--stratakit-color-icon-neutral-primary);
		}

		:where(.Mui-disabled) & {
			background-color: var(--stratakit-color-bg-glow-on-surface-disabled);
			border-color: var(--stratakit-color-border-glow-on-surface-disabled);
			color: var(--stratakit-color-icon-neutral-disabled);
		}
	}

	&:where(.MuiCheckbox-root) > input {
		--✨checked-svg: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M11.73 5.47a.75.75 0 0 1 0 1.06l-4.4 4.4a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06L6.8 9.34l3.87-3.87a.75.75 0 0 1 1.06 0Z"/></svg>');
		--✨indeterminate-svg: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M4.25 8A.75.75 0 0 1 5 7.25h6.5a.75.75 0 0 1 0 1.5H5A.75.75 0 0 1 4.25 8Z"/></svg>');

		border-radius: var(--stratakit-mui-shape-borderRadius);

		:where(.Mui-checked) & {
			--_check-symbol-mask-image: var(--✨checked-svg);
		}

		:where(.MuiCheckbox-indeterminate) & {
			--_check-symbol-mask-image: var(--✨indeterminate-svg);
		}
	}

	&:where(.MuiRadio-root) > input {
		--✨checked-svg: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" ><circle cx="8" cy="8" r="4" /></svg>');

		border-radius: 50%;

		:where(.Mui-checked) & {
			--_check-symbol-mask-image: var(--✨checked-svg);
		}
	}
}
