import{p as v,b as O}from"./index-DDCMeoDP.js";import{_ as w,l as P,m as b,o as D,I,v as R,J as V,x as F,y as B,L as z,s as x,r as N,P as H,Z as J,ab as L,z as E,f as W,c as Z}from"./~utils-BFcooMC1.js";import{c as $,u as q,a as k,b as j,d as G}from"./YV4JVR4I-DB2LP8YT.js";import{b as K}from"./~hooks-D6zECIHT.js";import{c as Q,u as U,H as X,a as Y,b as ee,d as te,e as re}from"./BYC7LY2E-D0Jx6cGv.js";function oe(t={}){var o;const r=(o=t.store)==null?void 0:o.getState(),e=Q(w(b({},t),{placement:P(t.placement,r==null?void 0:r.placement,"top"),hideTimeout:P(t.hideTimeout,r==null?void 0:r.hideTimeout,0)})),d=w(b({},e.getState()),{type:P(t.type,r==null?void 0:r.type,"description"),skipTimeout:P(t.skipTimeout,r==null?void 0:r.skipTimeout,300)}),a=$(d,e,t.store);return b(b({},e),a)}function ne(t,o,r){return k(t,r,"type"),k(t,r,"skipTimeout"),U(t,o,r)}function M(t={}){const[o,r]=q(oe,t);return ne(o,r,t)}var _=D([Y],[X]),C=_.useProviderContext,ae=_.ContextProvider,se=_.ScopedContextProvider,ie="div",ue=R(function(o){var r=o,{store:e,portal:d=!0,gutter:a=8,preserveTabOrder:p=!1,hideOnHoverOutside:l=!0,hideOnInteractOutside:m=!0}=r,i=F(r,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const S=C();e=e||S,B(e,!1),i=z(i,s=>v.jsx(se,{value:e,children:s}),[e]);const h=e.useState(s=>s.type==="description"?"tooltip":"none");return i=x({role:h},i),i=te(N(x({},i),{store:e,portal:d,gutter:a,preserveTabOrder:p,hideOnHoverOutside(s){if(H(l,s))return!1;const u=e==null?void 0:e.getState().anchorElement;return u?!("focusVisible"in u.dataset):!0},hideOnInteractOutside:s=>{if(H(m,s))return!1;const u=e==null?void 0:e.getState().anchorElement;return u?!J(u,s.target):!0}})),i}),le=ee(I(function(o){const r=ue(o);return V(ie,r)}),C);function ce(t={}){const o=M(t);return v.jsx(ae,{value:o,children:t.children})}var de="div",f=$({activeStore:null});function A(t){return()=>{const{activeStore:o}=f.getState();o===t&&f.setState("activeStore",null)}}var pe=R(function(o){var r=o,{store:e,showOnHover:d=!0}=r,a=F(r,["store","showOnHover"]);const p=C();e=e||p,B(e,!1);const l=O.useRef(!1);O.useEffect(()=>j(e,["mounted"],n=>{n.mounted||(l.current=!1)}),[e]),O.useEffect(()=>{if(e)return L(A(e),j(e,["mounted","skipTimeout"],n=>{if(!e)return;if(n.mounted){const{activeStore:y}=f.getState();return y!==e&&(y==null||y.hide()),f.setState("activeStore",e)}const c=setTimeout(A(e),n.skipTimeout);return()=>clearTimeout(c)}))},[e]);const m=a.onMouseEnter,i=E(n=>{m==null||m(n),l.current=!0}),S=a.onFocusVisible,h=E(n=>{S==null||S(n),!n.defaultPrevented&&(e==null||e.setAnchorElement(n.currentTarget),e==null||e.show())}),s=a.onBlur,u=E(n=>{if(s==null||s(n),n.defaultPrevented)return;const{activeStore:c}=f.getState();l.current=!1,c===e&&f.setState("activeStore",null)}),T=e.useState("type"),g=e.useState(n=>{var c;return(c=n.contentElement)==null?void 0:c.id});return a=N(x({"aria-labelledby":T==="label"?g:void 0},a),{onMouseEnter:i,onFocusVisible:h,onBlur:u}),a=re(x({store:e,showOnHover(n){if(!l.current||H(d,n))return!1;const{activeStore:c}=f.getState();return c?(e==null||e.show(),!1):!0}},a)),a}),ve=I(function(o){const r=pe(o);return V(de,r)});const Pe=W((t,o)=>{const r=O.useId(),{content:e,children:d,type:a="description",id:p=r,defaultOpen:l,open:m,setOpen:i,unmountOnHide:S=a==="none",...h}=t,s=M(),u=G(s,g=>g.open),T=K(s);return v.jsx(v.Fragment,{children:v.jsxs(ce,{store:s,defaultOpen:l,open:m,setOpen:i,children:[v.jsx(ve,{render:d,"data-has-popover-open":u||void 0,...a==="description"&&{"aria-describedby":p},...a==="label"&&{"aria-labelledby":p}}),v.jsx(le,{"aria-hidden":"true",portal:!0,...h,unmountOnHide:S,className:Z("ü•ù-tooltip",t.className),ref:o,id:p,style:{...T.style,...t.style},wrapperProps:T.wrapperProps,children:e})]})})});export{Pe as T};
