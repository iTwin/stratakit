import{n as f,a as O}from"./chunk-K6AXKMTT-BHCV6zel.js";import{c as W}from"./index-DeGJKKUv.js";import{B as k,C as b,D as x,z as q,c as A,_ as F,h as B,y as G,b as g,g as N,H,o as J,d as $,e as D,R as K,m as E,f as L,N as w}from"./~utils-ChHMGsjo.js";import{c as Q,u as U,H as X,a as Y,b as Z,d as ee,e as te}from"./BYC7LY2E-BEbGoPfM.js";import{c as M,u as re,b as j,a as R,d as I}from"./YV4JVR4I-I4X5ERHE.js";function oe(t={}){var o;const r=(o=t.store)==null?void 0:o.getState(),e=Q(k(x({},t),{placement:b(t.placement,r==null?void 0:r.placement,"top"),hideTimeout:b(t.hideTimeout,r==null?void 0:r.hideTimeout,0)})),p=k(x({},e.getState()),{type:b(t.type,r==null?void 0:r.type,"description"),skipTimeout:b(t.skipTimeout,r==null?void 0:r.skipTimeout,300)}),a=M(p,e,t.store);return x(x({},e),a)}function ne(t,o,r){return j(t,r,"type"),j(t,r,"skipTimeout"),U(t,o,r)}function z(t={}){const[o,r]=re(oe,t);return ne(o,r,t)}var _=q([Y],[X]),C=_.useProviderContext,ae=_.ContextProvider,se=_.ScopedContextProvider,ie="div",ue=A(function(o){var r=o,{store:e,portal:p=!0,gutter:a=8,preserveTabOrder:v=!1,hideOnHoverOutside:c=!0,hideOnInteractOutside:S=!0}=r,i=F(r,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const h=C();e=e||h,B(e,!1),i=G(i,s=>f.jsx(se,{value:e,children:s}),[e]);const P=e.useState(s=>s.type==="description"?"tooltip":"none");return i=g({role:P},i),i=Z(N(g({},i),{store:e,portal:p,gutter:a,preserveTabOrder:v,hideOnHoverOutside(s){if(H(c,s))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!("focusVisible"in l.dataset):!0},hideOnInteractOutside:s=>{if(H(S,s))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!J(l,s.target):!0}})),i}),le=ee($(function(o){const r=ue(o);return D(ie,r)}),C);function ce(t={}){const o=z(t);return f.jsx(ae,{value:o,children:t.children})}var de="div",m=M({activeStore:null});function V(t){return()=>{const{activeStore:o}=m.getState();o===t&&m.setState("activeStore",null)}}var pe=A(function(o){var r=o,{store:e,showOnHover:p=!0}=r,a=F(r,["store","showOnHover"]);const v=C();e=e||v,B(e,!1);const c=O.useRef(!1);O.useEffect(()=>R(e,["mounted"],n=>{n.mounted||(c.current=!1)}),[e]),O.useEffect(()=>{if(e)return K(V(e),R(e,["mounted","skipTimeout"],n=>{if(!e)return;if(n.mounted){const{activeStore:y}=m.getState();return y!==e&&(y==null||y.hide()),m.setState("activeStore",e)}const d=setTimeout(V(e),n.skipTimeout);return()=>clearTimeout(d)}))},[e]);const S=a.onMouseEnter,i=E(n=>{S==null||S(n),c.current=!0}),h=a.onFocusVisible,P=E(n=>{h==null||h(n),!n.defaultPrevented&&(e==null||e.setAnchorElement(n.currentTarget),e==null||e.show())}),s=a.onBlur,l=E(n=>{if(s==null||s(n),n.defaultPrevented)return;const{activeStore:d}=m.getState();c.current=!1,d===e&&m.setState("activeStore",null)}),u=e.useState("type"),T=e.useState(n=>{var d;return(d=n.contentElement)==null?void 0:d.id});return a=N(g({"aria-labelledby":u==="label"?T:void 0},a),{onMouseEnter:i,onFocusVisible:P,onBlur:l}),a=te(g({store:e,showOnHover(n){if(!c.current||H(p,n))return!1;const{activeStore:d}=m.getState();return d?(e==null||e.show(),!1):!0}},a)),a}),ve=$(function(o){const r=pe(o);return D(de,r)});const Pe=L((t,o)=>{const r=O.useId(),{content:e,children:p,type:a="description",id:v=r,defaultOpen:c,open:S,setOpen:i,unmountOnHide:h=a==="none",...P}=t,s=z(),l=I(s,T=>T.open),u=I(s,T=>T.popoverElement);return O.useEffect(function(){var n;u!=null&&u.isConnected&&((n=u==null?void 0:u.togglePopover)==null||n.call(u,l))},[l,u]),f.jsx(f.Fragment,{children:f.jsxs(ce,{store:s,defaultOpen:c,open:S,setOpen:i,children:[f.jsx(ve,{render:p,...a==="description"&&{"aria-describedby":v},...a==="label"&&{"aria-labelledby":v}}),f.jsx(le,{"aria-hidden":"true",...P,unmountOnHide:h,className:W("ü•ù-tooltip",t.className),ref:o,id:v,style:{zIndex:w?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!w,children:e})]})})});export{ce as T,ve as a,le as b,Pe as c,z as u};
