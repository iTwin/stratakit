import{D as j,p as ae,a as ue,_ as le,i as fe,v as ce,d as P,e as E,u as D,A as de,ac as R,y as A,x as me,Z as U,ad as pe,ae as Ie,q as be,h as ge,w as ve,B as Se,af as we,a2 as xe,f as Pe,b as Ee}from"./VOQWLFSQ-C-BaLyus.js";import{u as he}from"./Y62RTBST-BBNDZE77.js";import{u as Ce,b as ye,c as Te}from"./APTFW6PT-DZj9qhsT.js";import{a8 as De,a9 as Re}from"./~utils-D5wDKwx3.js";import{a as v,p as Ae}from"./chunk-UIGDSWPH-C0dFpbf8.js";var Fe={id:null};function Ge(r,n,o=!1){const t=r.findIndex(f=>f.id===n);return[...r.slice(t+1),...o?[Fe]:[],...r.slice(0,t)]}function Ze(r,n){return r.find(o=>!o.disabled)}function Oe(r,n){return n&&r.item(n)||null}function Je(r){const n=[];for(const o of r){const t=n.find(f=>{var d;return((d=f[0])==null?void 0:d.rowId)===o.rowId});t?t.push(o):n.push([o])}return n}function _e(r,n=!1){if(j(r))r.setSelectionRange(n?r.value.length:0,r.value.length);else if(r.isContentEditable){const o=ae(r).getSelection();o?.selectAllChildren(r),n&&o?.collapseToEnd()}}var F=Symbol("FOCUS_SILENTLY");function ke(r){r[F]=!0,r.focus({preventScroll:!0})}function Qe(r){const n=r[F];return delete r[F],n}function W(r,n,o){return!(!n||n===o||!r.item(n.id))}var ze="button";function Ke(r){return R(r)?!0:r.tagName==="INPUT"&&!Se(r)}function Le(r,n=!1){const o=r.clientHeight,{top:t}=r.getBoundingClientRect(),f=Math.max(o*.875,o-40)*1.5,d=n?o-f+t:f+t;return r.tagName==="HTML"?d+r.scrollTop:d}function Be(r,n=!1){const{top:o}=r.getBoundingClientRect();return n?o+r.clientHeight:o}function V(r,n,o,t=!1){var f;if(!n||!o)return;const{renderedItems:d}=n.getState(),S=we(r);if(!S)return;const h=Le(S,t);let c,p;for(let I=0;I<d.length;I+=1){const i=c;if(c=o(I),!c)break;if(c===i)continue;const w=(f=Oe(n,c))==null?void 0:f.element;if(!w)continue;const b=Be(w,t)-h,u=Math.abs(b);if(t&&b<=0||!t&&b>=0){p!==void 0&&p<u&&(c=i);break}p=u}return c}function Ne(r,n){return A(r)?!1:W(n,r.target)}var Me=ue(function(n){var o=n,{store:t,rowId:f,preventScrollOnKeyDown:d=!1,moveOnKeyPress:S=!0,tabbable:h=!1,getItem:c,"aria-setsize":p,"aria-posinset":I}=o,i=le(o,["store","rowId","preventScrollOnKeyDown","moveOnKeyPress","tabbable","getItem","aria-setsize","aria-posinset"]);const w=Ce();t=t||w;const l=fe(i.id),b=v.useRef(null),u=v.useContext(ye),O=ce(i)&&!i.accessibleWhenDisabled,{rowId:C,baseElement:_,isActiveItem:Y,ariaSetSize:q,ariaPosInSet:G,isTabbable:Z}=De(t,{rowId(e){if(f)return f;if(e&&u?.baseElement&&u.baseElement===e.baseElement)return u.id},baseElement(e){return e?.baseElement||void 0},isActiveItem(e){return!!e&&e.activeId===l},ariaSetSize(e){if(p!=null)return p;if(e&&u?.ariaSetSize&&u.baseElement===e.baseElement)return u.ariaSetSize},ariaPosInSet(e){if(I!=null)return I;if(!e||!u?.ariaPosInSet||u.baseElement!==e.baseElement)return;const s=e.renderedItems.filter(a=>a.rowId===C);return u.ariaPosInSet+s.findIndex(a=>a.id===l)},isTabbable(e){if(!e?.renderedItems.length)return!0;if(e.virtualFocus)return!1;if(h)return!0;if(e.activeId===null)return!1;const s=t?.item(e.activeId);return s?.disabled||!s?.element?!0:e.activeId===l}}),J=v.useCallback(e=>{var s;const a=P(E({},e),{id:l||e.id,rowId:C,disabled:!!O,children:(s=e.element)==null?void 0:s.textContent});return c?c(a):a},[l,C,O,c]),k=i.onFocus,y=v.useRef(!1),Q=D(e=>{if(k?.(e),e.defaultPrevented||de(e)||!l||!t||Ne(e,t))return;const{virtualFocus:s,baseElement:a}=t.getState();if(t.setActiveId(l),R(e.currentTarget)&&_e(e.currentTarget),!s||!A(e)||Ke(e.currentTarget)||!a?.isConnected)return;me()&&e.currentTarget.hasAttribute("data-autofocus")&&e.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),y.current=!0,e.relatedTarget===a||W(t,e.relatedTarget)?ke(a):a.focus()}),z=i.onBlurCapture,X=D(e=>{if(z?.(e),e.defaultPrevented)return;const s=t?.getState();s?.virtualFocus&&y.current&&(y.current=!1,e.preventDefault(),e.stopPropagation())}),K=i.onKeyDown,$=U(d),ee=U(S),te=D(e=>{if(K?.(e),e.defaultPrevented||!A(e)||!t)return;const{currentTarget:s}=e,a=t.getState(),T=t.item(l),m=!!T?.rowId,x=a.orientation!=="horizontal",g=a.orientation!=="vertical",B=()=>!!(m||g||!a.baseElement||!j(a.baseElement)),N={ArrowUp:(m||x)&&t.up,ArrowRight:(m||g)&&t.next,ArrowDown:(m||x)&&t.down,ArrowLeft:(m||g)&&t.previous,Home:()=>{if(B())return!m||e.ctrlKey?t?.first():t?.previous(-1)},End:()=>{if(B())return!m||e.ctrlKey?t?.last():t?.next(-1)},PageUp:()=>V(s,t,t?.up,!0),PageDown:()=>V(s,t,t?.down)}[e.key];if(N){if(R(s)){const H=pe(s),re=g&&e.key==="ArrowLeft",ne=g&&e.key==="ArrowRight",oe=x&&e.key==="ArrowUp",ie=x&&e.key==="ArrowDown";if(ne||ie){const{length:se}=Ie(s);if(H.end!==se)return}else if((re||oe)&&H.start!==0)return}const M=N();if($(e)||M!==void 0){if(!ee(e))return;e.preventDefault(),t.move(M)}}}),L=v.useMemo(()=>({id:l,baseElement:_}),[l,_]);return i=be(i,e=>Ae.jsx(Te.Provider,{value:L,children:e}),[L]),i=P(E({id:l,"data-active-item":Y||void 0},i),{ref:ge(b,i.ref),tabIndex:Z?i.tabIndex:-1,onFocus:Q,onBlurCapture:X,onKeyDown:te}),i=Re(i),i=he(P(E({store:t},i),{getItem:J,shouldRegisterItem:l?i.shouldRegisterItem:!1})),ve(P(E({},i),{"aria-setsize":q,"aria-posinset":G}))}),Xe=xe(Pe(function(n){const o=Me(n);return Ee(ze,o)}));export{Xe as C,Ze as a,Je as b,Ge as f,Oe as g,W as i,Qe as s,Me as u};
