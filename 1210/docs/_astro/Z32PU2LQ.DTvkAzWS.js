import{a as G,f as Y,d as J,b as _e,aU as je,aK as j,bt as Le,ax as P,s as q,j as x,ar as K,ac as de,ap as he,av as I,ao as A,h as Oe,an as ut,at as it,bu as Be,bv as ct,bw as at,bi as ue,R as Me,br as ft,o as lt,al as qe,i as dt,A as ie,q as gt,as as vt}from"./ExamplePreview.C7oHIBbQ.js";import{b as ce,c as He,r as ht,d as mt,e as bt,i as Et,g as xt,j as pt,k as U,u as yt,l as Pt}from"./U6HHPQDW.CvcllXpw.js";import{r as f}from"./index.DIfZGIpv.js";import{u as V,f as St,a as Dt}from"./Q5W46E73.CbsEr5GX.js";import{c as wt,i as We,j as Ft,k as At,b as me,l as Ct,D as Rt,g as Tt,m as jt}from"./WLZ6H5FH.CI7xo0pX.js";var Lt="span",Ye=G(function(t){return t={...t,style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px",...t.style}},t});Y(function(t){const n=Ye(t);return J(Lt,n)});var Mt="span",Ht=G(function(t){return t={"data-focus-trap":"",tabIndex:0,"aria-hidden":!0,...t,style:{position:"fixed",top:0,left:0,...t.style}},t=Ye(t),t}),re=Y(function(t){const n=Ht(t);return J(Mt,n)}),Nt="div";function Vt(e){return P(e).body}function It(e,t){return t?typeof t=="function"?t(e):t:P(e).createElement("div")}function $t(e="id"){return`${e?`${e}-`:""}${Math.random().toString(36).slice(2,8)}`}function N(e){queueMicrotask(()=>{e?.focus()})}var Xe=G(function({preserveTabOrder:t,preserveTabOrderAnchor:n,portalElement:r,portalRef:u,portal:s=!0,...o}){const a=f.useRef(null),d=_e(a,o.ref),E=f.useContext(je),[l,C]=f.useState(null),[p,H]=f.useState(null),$=f.useRef(null),L=f.useRef(null),O=f.useRef(null),M=f.useRef(null);return j(()=>{const c=a.current;if(!c||!s){C(null);return}const h=It(c,r);if(!h){C(null);return}const b=h.isConnected;if(b||(E||Vt(c)).appendChild(h),h.id||(h.id=c.id?`portal/${c.id}`:$t()),C(h),Le(u,h),!b)return()=>{h.remove(),Le(u,null)}},[s,r,E,u]),j(()=>{if(!s||!t||!n)return;const h=P(n).createElement("span");return h.style.position="fixed",n.insertAdjacentElement("afterend",h),H(h),()=>{h.remove(),H(null)}},[s,t,n]),f.useEffect(()=>{if(!l||!t)return;let c=0;const h=b=>{if(!K(b))return;const g=b.type==="focusin";if(cancelAnimationFrame(c),g)return ht(l);c=requestAnimationFrame(()=>{mt(l,!0)})};return l.addEventListener("focusin",h,!0),l.addEventListener("focusout",h,!0),()=>{cancelAnimationFrame(c),l.removeEventListener("focusin",h,!0),l.removeEventListener("focusout",h,!0)}},[l,t]),o=q(o,c=>{if(c=x.jsx(je.Provider,{value:l||E,children:c}),!s)return c;if(!l)return x.jsx("span",{ref:d,id:o.id,style:{position:"fixed"},hidden:!0});c=x.jsxs(x.Fragment,{children:[t&&l&&x.jsx(re,{ref:L,"data-focus-trap":o.id,className:"__focus-trap-inner-before",onFocus:b=>{K(b,l)?N(ce()):N($.current)}}),c,t&&l&&x.jsx(re,{ref:O,"data-focus-trap":o.id,className:"__focus-trap-inner-after",onFocus:b=>{K(b,l)?N(He()):N(M.current)}})]}),l&&(c=de.createPortal(c,l));let h=x.jsxs(x.Fragment,{children:[t&&l&&x.jsx(re,{ref:$,"data-focus-trap":o.id,className:"__focus-trap-outer-before",onFocus:b=>{!(b.relatedTarget===M.current)&&K(b,l)?N(L.current):N(He())}}),t&&x.jsx("span",{"aria-owns":l?.id,style:{position:"fixed"}}),t&&l&&x.jsx(re,{ref:M,"data-focus-trap":o.id,className:"__focus-trap-outer-after",onFocus:b=>{if(K(b,l))N(O.current);else{const g=ce();if(g===L.current){requestAnimationFrame(()=>{var B;return(B=ce())==null?void 0:B.focus()});return}N(g)}}})]});return p&&t&&(h=de.createPortal(h,p)),x.jsxs(x.Fragment,{children:[h,c]})},[l,E,s,o.id,t,p]),o={...o,ref:d},o}),pn=Y(function(t){const n=Xe(t);return J(Nt,n)}),Ne=f.createContext(0);function kt({level:e,children:t}){const n=f.useContext(Ne),r=Math.max(Math.min(e||n+1,6),1);return x.jsx(Ne.Provider,{value:r,children:t})}var _t="div",ze=G(function({autoFocusOnShow:t=!0,...n}){return n=q(n,r=>x.jsx(bt.Provider,{value:t,children:r}),[t]),n});Y(function(t){const n=ze(t);return J(_t,n)});function Ot(e,t){const r=P(e).createElement("button");return r.type="button",r.tabIndex=-1,r.textContent="Dismiss popup",Object.assign(r.style,{border:"0px",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}),r.addEventListener("click",t),e.prepend(r),()=>{r.removeEventListener("click",t),r.remove()}}function Bt(e){const t=f.useRef(null);return f.useEffect(()=>{if(!e){t.current=null;return}return he("mousedown",r=>{t.current=r.target},!0)},[e]),t}var ae=new WeakMap;function Q(e,t,n){ae.has(e)||ae.set(e,new Map);const r=ae.get(e),u=r.get(t);if(!u)return r.set(t,n()),()=>{var a;(a=r.get(t))==null||a(),r.delete(t)};const s=n(),o=()=>{s(),u(),r.delete(t)};return r.set(t,o),()=>{r.get(t)===o&&(s(),r.set(t,u))}}function be(e,t,n){return Q(e,t,()=>{const u=e.getAttribute(t);return e.setAttribute(t,n),()=>{u==null?e.removeAttribute(t):e.setAttribute(t,u)}})}function _(e,t,n){return Q(e,t,()=>{const u=t in e,s=e[t];return e[t]=n,()=>{u?e[t]=s:delete e[t]}})}function ge(e,t){return e?Q(e,"style",()=>{const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}):()=>{}}function qt(e,t,n){return e?Q(e,t,()=>{const u=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{u?e.style.setProperty(t,u):e.style.removeProperty(t)}}):()=>{}}var Wt=["SCRIPT","STYLE"];function ve(e){return`__ariakit-dialog-snapshot-${e}`}function Yt(e,t){const n=P(t),r=ve(e);if(!n.body[r])return!0;do{if(t===n.body)return!1;if(t[r])return!0;if(!t.parentElement)return!1;t=t.parentElement}while(!0)}function Xt(e,t,n){return Wt.includes(t.tagName)||!Yt(e,t)?!1:!n.some(r=>r&&A(t,r))}function Ee(e,t,n,r){for(let u of t){if(!u?.isConnected)continue;const s=t.some(d=>!d||d===u?!1:d.contains(u)),o=P(u),a=u;for(;u.parentElement&&u!==o.body;){if(r?.(u.parentElement,a),!s)for(const d of u.parentElement.children)Xt(e,d,t)&&n(d,a);u=u.parentElement}}}function zt(e,t){const{body:n}=P(t[0]),r=[];return Ee(e,t,s=>{r.push(_(s,ve(e),!0))}),I(_(n,ve(e),!0),()=>{for(const s of r)s()})}function Ke(e,...t){if(!e)return!1;const n=e.getAttribute("data-backdrop");return n==null?!1:n===""||n==="true"||!t.length?!0:t.some(r=>n===r)}function W(e="",t=!1){return`__ariakit-dialog-${t?"ancestor":"outside"}${e?`-${e}`:""}`}function Kt(e,t=""){return I(_(e,W(),!0),_(e,W(t),!0))}function Ue(e,t=""){return I(_(e,W("",!0),!0),_(e,W(t,!0),!0))}function xe(e,t){const n=W(t,!0);if(e[n])return!0;const r=W(t);do{if(e[r])return!0;if(!e.parentElement)return!1;e=e.parentElement}while(!0)}function Ve(e,t){const n=[],r=t.map(s=>s?.id);return Ee(e,t,s=>{Ke(s,...r)||n.unshift(Kt(s,e))},(s,o)=>{o.hasAttribute("data-dialog")&&o.id!==e||n.unshift(Ue(s,e))}),()=>{for(const s of n)s()}}function Ut(e){return e.tagName==="HTML"?!0:A(P(e).body,e)}function Gt(e,t){if(!e)return!1;if(A(e,t))return!0;const n=t.getAttribute("aria-activedescendant");if(n){const r=P(e).getElementById(n);if(r)return A(e,r)}return!1}function Jt(e,t){if(!("clientY"in e))return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function fe({store:e,type:t,listener:n,capture:r,domReady:u}){const s=Oe(n),o=V(e,"open"),a=f.useRef(!1);j(()=>{if(!o||!u)return;const{contentElement:d}=e.getState();if(!d)return;const E=()=>{a.current=!0};return d.addEventListener("focusin",E,!0),()=>d.removeEventListener("focusin",E,!0)},[e,o,u]),f.useEffect(()=>o?he(t,E=>{const{contentElement:l,disclosureElement:C}=e.getState(),p=E.target;!l||!p||!Ut(p)||A(l,p)||Gt(C,p)||p.hasAttribute("data-focus-trap")||Jt(E,l)||a.current&&!xe(p,l.id)||Et(p)||s(E)},r):void 0,[o,r])}function le(e,t){return typeof e=="function"?e(t):!!e}function Qt(e,t,n){const r=V(e,"open"),u=Bt(r),s={store:e,domReady:n,capture:!0};fe({...s,type:"click",listener:o=>{const{contentElement:a}=e.getState(),d=u.current;d&&ut(d)&&xe(d,a?.id)&&le(t,o)&&e.hide()}}),fe({...s,type:"focusin",listener:o=>{const{contentElement:a}=e.getState();a&&o.target!==P(a)&&le(t,o)&&e.hide()}}),fe({...s,type:"contextmenu",listener:o=>{le(t,o)&&e.hide()}})}var Ie=f.createContext({});function Zt(e){const t=f.useContext(Ie),[n,r]=f.useState([]),u=f.useCallback(a=>{var d;return r(E=>[...E,a]),I((d=t.add)==null?void 0:d.call(t,a),()=>{r(E=>E.filter(l=>l!==a))})},[t]);j(()=>St(e,["open","contentElement"],a=>{var d;if(a.open&&a.contentElement)return(d=t.add)==null?void 0:d.call(t,e)}),[e,t]);const s=f.useMemo(()=>({store:e,add:u}),[e,u]);return{wrapElement:f.useCallback(a=>x.jsx(Ie.Provider,{value:s,children:a}),[s]),nestedDialogs:n}}function en({attribute:e,contentId:t,contentElement:n,enabled:r}){const[u,s]=it(),o=f.useCallback(()=>{if(!r||!n)return!1;const{body:a}=P(n),d=a.getAttribute(e);return!d||d===t},[u,r,n,e,t]);return f.useEffect(()=>{if(!r||!t||!n)return;const{body:a}=P(n);if(o())return a.setAttribute(e,t),()=>a.removeAttribute(e);const d=new MutationObserver(()=>de.flushSync(s));return d.observe(a,{attributeFilter:[e]}),()=>d.disconnect()},[u,r,t,n,o,e]),o}function tn(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function nn(e,t,n){const r=en({attribute:"data-dialog-prevent-body-scroll",contentElement:e,contentId:t,enabled:n});f.useEffect(()=>{if(!r()||!e)return;const u=P(e),s=Be(e),{documentElement:o,body:a}=u,d=o.style.getPropertyValue("--scrollbar-width"),E=d?Number.parseInt(d,10):s.innerWidth-o.clientWidth,l=()=>qt(o,"--scrollbar-width",`${E}px`),C=tn(o),p=()=>ge(a,{overflow:"hidden",[C]:`${E}px`}),H=()=>{var L,O;const{scrollX:M,scrollY:c,visualViewport:h}=s,b=(L=h?.offsetLeft)!=null?L:0,g=(O=h?.offsetTop)!=null?O:0,B=ge(a,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(g))}px`,left:`${-(M-Math.floor(b))}px`,right:"0",[C]:`${E}px`});return()=>{B(),s.scrollTo({left:M,top:c,behavior:"instant"})}},$=ct()&&!at();return I(l(),$?H():p())},[r,e])}function rn(e,...t){if(!e)return!1;const n=e.getAttribute("data-focus-trap");return n==null?!1:t.length?n===""?!1:t.some(r=>n===r):!0}function Ge(){return"inert"in HTMLElement.prototype}function sn(e){return be(e,"aria-hidden","true")}function Je(e,t){if(!("style"in e))return ue;if(Ge())return _(e,"inert",!0);const r=xt(e,!0).map(u=>{if(t?.some(o=>o&&A(o,u)))return ue;const s=Q(u,"focus",()=>(u.focus=ue,()=>{delete u.focus}));return I(be(u,"tabindex","-1"),s)});return I(...r,sn(e),ge(e,{pointerEvents:"none",userSelect:"none",cursor:"default"}))}function on(e,t){const n=[],r=t.map(s=>s?.id);return Ee(e,t,s=>{Ke(s,...r)||rn(s,...r)||n.unshift(Je(s,t))},s=>{s.hasAttribute("role")&&(t.some(o=>o&&A(o,s))||n.unshift(be(s,"role","none")))}),()=>{for(const s of n)s()}}function un({store:e,backdrop:t,alwaysVisible:n,hidden:r}){const u=f.useRef(null),s=wt({disclosure:e}),o=V(e,"contentElement");f.useEffect(()=>{const E=u.current,l=o;E&&l&&(E.style.zIndex=getComputedStyle(l).zIndex)},[o]),j(()=>{const E=o?.id;if(!E)return;const l=u.current;if(l)return Ue(l,E)},[o]);const a=We({ref:u,store:s,role:"presentation","data-backdrop":o?.id||"",alwaysVisible:n,hidden:r??void 0,style:{position:"fixed",top:0,right:0,bottom:0,left:0}});if(!t)return null;if(f.isValidElement(t))return x.jsx(Me,{...a,render:t});const d=typeof t!="boolean"?t:"div";return x.jsx(Me,{...a,render:x.jsx(d,{})})}function cn(e={}){return Ft(e)}function an(e,t,n){return At(e,t,n)}function fn(e={}){const[t,n]=Dt(cn,e);return an(t,n,e)}var ln="div",$e=vt();function dn(e){const t=qe();return!t||e&&A(e,t)?!1:!!U(t)}function ke(e,t=!1){if(!e)return null;const n="current"in e?e.current:e;return n?t?U(n)?n:null:n:null}var gn=G(function({store:t,open:n,onClose:r,focusable:u=!0,modal:s=!0,portal:o=!!s,backdrop:a=!!s,hideOnEscape:d=!0,hideOnInteractOutside:E=!0,getPersistentElements:l,preventBodyScroll:C=!!s,autoFocusOnShow:p=!0,autoFocusOnHide:H=!0,initialFocus:$,finalFocus:L,unmountOnHide:O,unstable_treeSnapshotKey:M,...c}){const h=me(),b=f.useRef(null),g=fn({store:t||h,open:n,setOpen(i){if(i)return;const m=b.current;if(!m)return;const y=new Event("close",{bubbles:!1,cancelable:!0});r&&m.addEventListener("close",r,{once:!0}),m.dispatchEvent(y),y.defaultPrevented&&g.setOpen(!0)}}),{portalRef:B,domReady:S}=ft(o,c.portalRef),Qe=c.preserveTabOrder,se=V(g,i=>Qe&&!s&&i.mounted),R=lt(c.id),w=V(g,"open"),F=V(g,"mounted"),k=V(g,"contentElement"),Ze=Ct(F,c.hidden,c.alwaysVisible);nn(k,R,C&&!Ze),Qt(g,E,S);const{wrapElement:pe,nestedDialogs:ye}=Zt(g);c=q(c,pe,[pe]),j(()=>{if(!w)return;const i=b.current,m=qe(i,!0);m&&m.tagName!=="BODY"&&(i&&A(i,m)||g.setDisclosureElement(m))},[g,w]),$e&&f.useEffect(()=>{if(!F)return;const{disclosureElement:i}=g.getState();if(!i||!dt(i))return;const m=()=>{let y=!1;const v=()=>{y=!0},D={capture:!0,once:!0};i.addEventListener("focusin",v,D),gt(i,"mouseup",()=>{i.removeEventListener("focusin",v,!0),!y&&Pt(i)})};return i.addEventListener("mousedown",m),()=>{i.removeEventListener("mousedown",m)}},[g,F]),f.useEffect(()=>{if(!F||!S)return;const i=b.current;if(!i)return;const m=Be(i),y=m.visualViewport||m,v=()=>{var D,T;const z=(T=(D=m.visualViewport)==null?void 0:D.height)!=null?T:m.innerHeight;i.style.setProperty("--dialog-viewport-height",`${z}px`)};return v(),y.addEventListener("resize",v),()=>{y.removeEventListener("resize",v)}},[F,S]),f.useEffect(()=>{if(!s||!F||!S)return;const i=b.current;if(!(!i||i.querySelector("[data-dialog-dismiss]")))return Ot(i,g.hide)},[g,s,F,S]),j(()=>{if(!Ge()||w||!F||!S)return;const i=b.current;if(i)return Je(i)},[w,F,S]);const Z=w&&S;j(()=>{if(!R||!Z)return;const i=b.current;return zt(R,[i])},[R,Z,M]);const Pe=Oe(l);j(()=>{if(!R||!Z)return;const{disclosureElement:i}=g.getState(),m=b.current,y=Pe()||[],v=[m,...y,...ye.map(D=>D.getState().contentElement)];return s?I(Ve(R,v),on(R,v)):Ve(R,[i,...v])},[R,g,Z,Pe,ye,s,M]);const Se=!!p,De=ie(p),[et,tt]=f.useState(!1);f.useEffect(()=>{if(!w||!Se||!S||!k?.isConnected)return;const i=ke($,!0)||k.querySelector("[data-autofocus=true],[autofocus]")||pt(k,!0,o&&se)||k,m=U(i);De(m?i:null)&&(tt(!0),queueMicrotask(()=>{i.focus(),$e&&m&&i.scrollIntoView({block:"nearest",inline:"nearest"})}))},[w,Se,S,k,$,o,se,De]);const ee=!!H,we=ie(H),[te,Fe]=f.useState(!1);f.useEffect(()=>{if(w)return Fe(!0),()=>Fe(!1)},[w]);const X=f.useCallback((i,m=!0)=>{const{disclosureElement:y}=g.getState();if(dn(i))return;let v=ke(L)||y;if(v?.id){const T=P(v),z=`[aria-activedescendant="${v.id}"]`,ne=T.querySelector(z);ne&&(v=ne)}if(v&&!U(v)){const T=v.closest("[data-dialog]");if(T?.id){const z=P(T),ne=`[aria-controls~="${T.id}"]`,Te=z.querySelector(ne);Te&&(v=Te)}}const D=v&&U(v);if(!D&&m){requestAnimationFrame(()=>X(i,!1));return}we(D?v:null)&&D&&v?.focus({preventScroll:!0})},[g,L,we]),oe=f.useRef(!1);j(()=>{if(w||!te||!ee)return;const i=b.current;oe.current=!0,X(i)},[w,te,S,ee,X]),f.useEffect(()=>{if(!te||!ee)return;const i=b.current;return()=>{if(oe.current){oe.current=!1;return}X(i)}},[te,ee,X]);const Ae=ie(d);f.useEffect(()=>!S||!F?void 0:he("keydown",m=>{if(m.key!=="Escape"||m.defaultPrevented)return;const y=b.current;if(!y||xe(y))return;const v=m.target;if(!v)return;const{disclosureElement:D}=g.getState();!!(v.tagName==="BODY"||A(y,v)||!D||A(D,v))&&Ae(m)&&g.hide()},!0),[g,S,F,Ae]),c=q(c,i=>x.jsx(kt,{level:s?1:void 0,children:i}),[s]);const Ce=c.hidden,Re=c.alwaysVisible;c=q(c,i=>a?x.jsxs(x.Fragment,{children:[x.jsx(un,{store:g,backdrop:a,hidden:Ce,alwaysVisible:Re}),i]}):i,[g,a,Ce,Re]);const[nt,rt]=f.useState(),[st,ot]=f.useState();return c=q(c,i=>x.jsx(Rt,{value:g,children:x.jsx(Tt.Provider,{value:rt,children:x.jsx(jt.Provider,{value:ot,children:i})})}),[g]),c={id:R,"data-dialog":"",role:"dialog",tabIndex:u?-1:void 0,"aria-labelledby":nt,"aria-describedby":st,...c,ref:_e(b,c.ref)},c=ze({...c,autoFocusOnShow:et}),c=We({store:g,...c}),c=yt({...c,focusable:u}),c=Xe({portal:o,...c,portalRef:B,preserveTabOrder:se}),c});function vn(e,t=me){return Y(function(r){const u=t(),s=r.store||u;return V(s,a=>!r.unmountOnHide||a?.mounted||!!r.open)?x.jsx(e,{...r}):null})}var yn=vn(Y(function(t){const n=gn(t);return J(ln,n)}),me);export{yn as D,Ne as H,pn as P,gn as a,cn as b,vn as c,an as d,fn as u};
