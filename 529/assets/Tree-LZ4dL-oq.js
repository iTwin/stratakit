import{p as e,b as l}from"./index-DDCMeoDP.js";import{a$ as B,a5 as O,l as x,d as f,b0 as j,b1 as S,o as v,I as g,a3 as N,b as E,b2 as G,b3 as H,b4 as _}from"./~utils-Cs0yLHeC.js";import{b as q}from"./P2CTZE2T-VYqLBo68.js";import{a as z,T as U}from"./BOLVLGVE-BjT8_n-x.js";import{L as V,e as C,f as I,d as W,D as Z,a as $,b as J}from"./DropdownMenu-CgMF-43J.js";import{b as Q,C as X}from"./ITI7HKP4-9rax7gMG.js";function Y(r={}){const o=B(r);return e.jsx(O,{value:o,children:r.children})}const y=l.createContext(void 0),me=x((r,o)=>{const{"aria-level":s,selected:n,expanded:t,icon:u,unstable_decorations:a,label:c,description:h,actions:P,error:w,onSelectedChange:b,onExpandedChange:m,onClick:F,onKeyDown:K,...T}=r,M=i=>{n!==void 0&&(i.stopPropagation(),b==null||b(!n))},R=i=>{i.altKey||i.ctrlKey||i.metaKey||i.shiftKey||t!==void 0&&(i.key==="ArrowRight"||i.key==="ArrowLeft")&&(i.preventDefault(),m==null||m(i.key==="ArrowRight"))},k=l.useId(),D=l.useId(),p=l.useId(),d=w?e.jsx(G,{}):u,L=l.useMemo(()=>{const i=[];return h&&i.push(D),(a||d)&&i.push(p),i.length>0?i.join(" "):void 0},[a,d,p,h,D]);return e.jsx(y.Provider,{value:l.useMemo(()=>({level:s,expanded:t,selected:n,error:w}),[s,t,n,w]),children:e.jsx(q,{render:e.jsx(v,{...T}),onClick:j(F,M),onKeyDown:j(K,R),role:"treeitem","aria-expanded":t,"aria-selected":n,"aria-labelledby":k,"aria-describedby":L,"aria-level":s,className:f("-tree-item",r.className),ref:o,children:e.jsxs(V,{"data-kiwi-expanded":t,"data-kiwi-selected":n,"data-kiwi-error":w?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":s},role:void 0,children:[e.jsxs(C,{children:[e.jsx(S,{align:h?"block":void 0,children:e.jsx(se,{onClick:()=>{t!==void 0&&(m==null||m(!t))}})}),d||a?e.jsx(v,{className:"-tree-item-decoration",id:p,render:l.isValidElement(d)?d:typeof d=="string"?e.jsx(g,{href:d}):void 0,children:d?null:a}):null]}),e.jsx(I,{id:k,className:"-tree-item-content",children:c}),h?e.jsx(I,{id:D,className:"-tree-item-description",children:h}):void 0,e.jsx(C,{render:e.jsx(ee,{children:P})})]})})})}),ee=x((r,o)=>{const{children:s,...n}=r,t=l.Children.toArray(s).filter(Boolean),{error:u}=N(y),a=u?2:3;return e.jsxs(U,{...n,onClick:j(r.onClick,c=>c.stopPropagation()),onKeyDown:j(r.onKeyDown,c=>c.stopPropagation()),className:f("-tree-item-actions-container",r.className),focusLoop:!1,ref:o,children:[t.slice(0,a-1),t.length===a?t[a-1]:null,t.length>a?e.jsx(te,{children:t.slice(a-1)}):null]})}),re=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],A=l.createContext(!1);function te({children:r}){const[o,s]=l.useState(!1),n=l.useRef(!1);return e.jsx(Y,{placement:"right-start",children:e.jsxs(Z,{open:o,setOpen:l.useCallback(t=>{t&&!n.current?s(!0):s(!1)},[]),children:[e.jsx($,{onKeyDown:t=>{re.includes(t.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:e.jsx(oe,{label:"More",icon:e.jsx(_,{})})}),e.jsx(A.Provider,{value:!0,children:e.jsx(J,{children:r})})]})})}const oe=x((r,o)=>{const{error:s}=N(y),{visible:n=s?!0:void 0,label:t,icon:u,dot:a,...c}=r;return l.useContext(A)?e.jsx(W,{...c,label:t,icon:u,unstable_dot:a,ref:o}):e.jsx(z,{render:e.jsx(E,{label:t,icon:u,inert:n===!1?!0:void 0,...c,dot:a,variant:"ghost",className:f("-tree-item-action",r.className),"data-kiwi-visible":n,ref:o})})}),se=x((r,o)=>e.jsx(v.span,{"aria-hidden":"true",...r,onClick:j(r.onClick,s=>s.stopPropagation()),className:f("-button","-icon-button","-ghost-aligner","-tree-item-expander",r.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":H(),ref:o,children:e.jsx(ne,{})})),ne=x((r,o)=>e.jsx(g,{...r,render:e.jsx(v.svg,{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",render:r.render,children:e.jsx("path",{d:"M4.146 6.146a.5.5 0 0 1 .708 0L8 9.293l3.146-3.147a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 0 1 0-.708Z"})}),className:f("-tree-chevron",r.className),ref:o})),xe=x((r,o)=>{const s=Q({orientation:"vertical"});return e.jsx(v.div,{role:"tree",...r,render:e.jsx(X,{store:s}),className:f("-tree",r.className),ref:o,children:r.children})});export{xe as T,me as a,oe as b};
