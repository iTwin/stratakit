import{n as e,a as l}from"./chunk-K6CSEXPM-Djlbx4X2.js";import{f as j,c as v,aL as h,R as y,I as S,K as P,S as B,C as O,aM as E}from"./moon-KOPxKz0F.js";import{Q as G,n as H,S as U,I as _,i as q,U as z}from"./~utils-DTwhvjOq.js";import{b as Q}from"./P2CTZE2T-46-J7vsz.js";import{a as V,T as W}from"./BOLVLGVE-COgVSQ0r.js";import{L as J,e as k,f as g,d as X,D as Y,a as Z,b as $}from"./DropdownMenu-86mM47x1.js";import{b as ee,C as te}from"./ITI7HKP4-BSjYS5jX.js";function re(t={}){const i=G(t);return e.jsx(H,{value:i,children:t.children})}const C=l.createContext(void 0),he=j((t,i)=>{const{"aria-level":s,selected:n,expanded:r,icon:u,unstable_decorations:a,label:c,description:x,actions:K,error:m,onSelectedChange:p,onExpandedChange:f,onClick:N,onKeyDown:M,...T}=t,F=o=>{n!==void 0&&(o.stopPropagation(),p==null||p(!n))},R=o=>{o.altKey||o.ctrlKey||o.metaKey||o.shiftKey||r!==void 0&&(o.key==="ArrowRight"||o.key==="ArrowLeft")&&(o.preventDefault(),f==null||f(o.key==="ArrowRight"))},b=l.useId(),w=l.useId(),D=l.useId(),I=typeof m=="string"?m:void 0,d=m?e.jsx(B,{}):u,L=l.useMemo(()=>{const o=[];return x&&o.push(w),(a||d)&&o.push(D),I&&o.push(I),o.length>0?o.join(" "):void 0},[a,d,D,x,w,I]);return e.jsx(C.Provider,{value:l.useMemo(()=>({level:s,expanded:r,selected:n,error:m}),[s,r,n,m]),children:e.jsx(Q,{render:e.jsx(y,{...T}),onClick:h(N,F),onKeyDown:h(M,R),role:"treeitem","aria-expanded":r,"aria-selected":n,"aria-labelledby":b,"aria-describedby":L,"aria-level":s,className:v("-tree-item",t.className),ref:i,children:e.jsxs(J,{"data-kiwi-expanded":r,"data-kiwi-selected":n,"data-kiwi-error":m?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":s},role:void 0,children:[e.jsxs(k,{children:[e.jsx(U,{align:x?"block":void 0,children:e.jsx(ae,{onClick:()=>{r!==void 0&&(f==null||f(!r))}})}),d||a?e.jsx(y,{className:"-tree-item-decoration",id:D,render:l.isValidElement(d)?d:typeof d=="string"?e.jsx(S,{href:d}):void 0,children:d?null:a}):null]}),e.jsx(g,{id:b,className:"-tree-item-content",children:c}),x?e.jsx(g,{id:w,className:"-tree-item-description",children:x}):void 0,e.jsx(k,{render:e.jsx(oe,{children:K})})]})})})}),oe=j((t,i)=>{const{children:s,...n}=t,r=l.Children.toArray(s).filter(Boolean),{error:u}=P(C),a=u?2:3;return e.jsxs(W,{...n,onClick:h(t.onClick,c=>c.stopPropagation()),onKeyDown:h(t.onKeyDown,c=>c.stopPropagation()),className:v("-tree-item-actions-container",t.className),focusLoop:!1,ref:i,children:[r.slice(0,a-1),r.length===a?r[a-1]:null,r.length>a?e.jsx(ne,{children:r.slice(a-1)}):null]})}),se=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],A=l.createContext(!1);function ne({children:t}){const[i,s]=l.useState(!1),n=l.useRef(!1);return e.jsx(re,{placement:"right-start",children:e.jsxs(Y,{open:i,setOpen:l.useCallback(r=>{r&&!n.current?s(!0):s(!1)},[]),children:[e.jsx(Z,{onKeyDown:r=>{se.includes(r.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:e.jsx(ie,{label:"More",icon:e.jsx(E,{})})}),e.jsx(A.Provider,{value:!0,children:e.jsx($,{children:t})})]})})}const ie=j((t,i)=>{const{error:s}=P(C),{visible:n=s?!0:void 0,label:r,icon:u,dot:a,...c}=t;return l.useContext(A)?e.jsx(X,{...c,label:r,icon:u,unstable_dot:a,ref:i}):e.jsx(V,{render:e.jsx(_,{label:r,icon:u,inert:n===!1?!0:void 0,...c,dot:a,variant:"ghost",className:v("-tree-item-action",t.className),"data-kiwi-visible":n,ref:i})})}),ae=j((t,i)=>e.jsx(q,{"aria-hidden":"true",...t,onClick:h(t.onClick,s=>s.stopPropagation()),className:v("-ghost-aligner","-tree-item-expander",t.className),variant:"ghost","data-kiwi-ghost-align":z(),ref:i,children:e.jsx(O,{})})),je=j((t,i)=>{const s=ee({orientation:"vertical"});return e.jsx(y.div,{role:"tree",...t,render:e.jsx(te,{store:s}),className:v("-tree",t.className),ref:i,children:t.children})});export{je as T,he as a,ie as b};
