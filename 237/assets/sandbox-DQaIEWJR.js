import{w as te}from"./~utils-BuKH_XhK.js";import{n as e,a as t,t as ne}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as z}from"./index-Dr3kRIaJ.js";import{B as G}from"./Button-GPjBmsog.js";import{C as se}from"./Checkbox-3L_hKWRf.js";import{D as re,a as le,b as ae,c as C,P as ie}from"./DropdownMenu-CZTKCBPl.js";import{I as P}from"./Icon-C4TuYIIj.js";import{I as A}from"./IconButton-eHs8s6It.js";import{F as oe,L as ce}from"./Label-BYWRrVWG.js";import{T as L,a as de,b as K,c as ue}from"./Tabs-MasuIejo.js";import{T as k}from"./Text-BIOJgVYR.js";import{T as fe,a as pe,b as he}from"./TextBox-B0cuxJYh.js";import{V as me}from"./VisuallyHidden-mupLk8qe.js";import{T as xe,a as be}from"./Tree-BQ3O-1Ij.js";import{p as y}from"./placeholder-BZbhP9Qz.js";import{p as je,l as Ce,d as ge,h as _e,m as we,a as ve,s as E,f as Se}from"./state-inherited-dot-C3qYly_3.js";import{s as Pe}from"./visibility-show-xDtdrfyN.js";import{P as Ae}from"./MTZPJQMC-DT28YYE-.js";import{u as Ie,P as ye}from"./BYC7LY2E-DKo1zaZ7.js";import"./index-jyeBNHV5.js";import"./KUU7WJ55-CvL3dvMd.js";import"./LVA2YJMS-BcAd7OG7.js";import"./ASMQKSDT-B4DAV8zs.js";import"./YV4JVR4I-xwnP9gdF.js";import"./XL7CSKGW-Cbj4nsUL.js";import"./Kbd-w5YbJL_k.js";import"./P2CTZE2T-DBUuQwha.js";import"./VEVQD5MH-soVqWsxl.js";import"./ITI7HKP4-CcxlWYYM.js";import"./VGCJ63VH-BrqDw1CG.js";import"./P4IRICAX-b2s1pdgp.js";import"./Tooltip-CHa6GVOF.js";import"./~hooks-CeXQBooN.js";import"./ListItem-DeA1AzYL.js";function Re(a={}){const n=Ie(a);return e.jsx(Ae,{value:n,children:a.children})}const Me="_appLayout_wwsi8_5",Ne="_header_wwsi8_22",Te="_platformBar_wwsi8_32",Be="_logo_wwsi8_38",De="_tools_wwsi8_48",ke="_leftPanel_wwsi8_58",ze="_panelHeader_wwsi8_70",Le="_panelTitle_wwsi8_78",Ke="_panelCaption_wwsi8_84",Ee="_shiftIconRight_wwsi8_88",Fe="_subheader_wwsi8_92",Xe="_subheaderTitle_wwsi8_103",Ge="_searchInput_wwsi8_108",He="_subheaderActions_wwsi8_112",Oe="_tabList_wwsi8_116",$e="_emptyState_wwsi8_121",Ve="_canvasWrapper_wwsi8_130",We="_canvas_wwsi8_130",Ue="_splitter_wwsi8_167",qe="_tabPanel_wwsi8_209",Je="_tree_wwsi8_215",Qe="_action_wwsi8_219",Ye="_actionIcon_wwsi8_225",Ze="_slider_wwsi8_236",et="_popover_wwsi8_245",tt="_filter_wwsi8_251",nt="_filterHeader_wwsi8_255",st="_filters_wwsi8_262",rt="_filterLabel_wwsi8_268",o={appLayout:Me,header:Ne,platformBar:Te,logo:Be,tools:De,leftPanel:ke,panelHeader:ze,panelTitle:Le,panelCaption:Ke,shiftIconRight:Ee,subheader:Fe,subheaderTitle:Xe,searchInput:Ge,subheaderActions:He,tabList:Oe,emptyState:$e,canvasWrapper:Ve,canvas:We,splitter:Ue,tabPanel:qe,tree:Je,action:Qe,actionIcon:Ye,slider:Ze,popover:et,filter:tt,filterHeader:nt,filters:st,filterLabel:rt},H="Kiwi sandbox",Qt=()=>[{title:H}],Yt=te(function(){return e.jsxs(lt,{panelContent:e.jsx(mt,{children:e.jsxs(xt,{children:[e.jsxs("div",{className:o.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:o.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:o.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:o.actions,children:e.jsx(A,{className:o.shiftIconRight,icon:je,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(pt,{}),e.jsx(L,{tabId:"simple",className:o.tabPanel,focusable:!1,children:e.jsx(F,{tree:"simple"})}),e.jsx(L,{tabId:"complex",className:o.tabPanel,focusable:!1,children:e.jsx(F,{tree:"complex"})})]})}),children:[e.jsxs("header",{className:o.header,children:[e.jsx("div",{className:o.logo,children:e.jsx(P,{href:y,size:"large"})}),e.jsx(k,{render:n=>e.jsx("h1",{...n}),variant:"body-md",children:H})]}),e.jsx("div",{className:o.platformBar,children:e.jsxs("div",{className:o.tools,children:[e.jsx(P,{href:y,size:"large"}),e.jsx(P,{href:y,size:"large"}),e.jsx(P,{href:y,size:"large"})]})}),e.jsx("div",{className:o.canvasWrapper,children:e.jsx("div",{className:o.canvas})})]})});function lt(a){const{sliderProps:n,panelProps:l,panelMinSize:s,panelMaxSize:f,resizing:d}=ot({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs("div",{className:o.appLayout,style:{"--_panel-min-size":s,"--_panel-max-size":f},children:[e.jsx("div",{...l,className:o.leftPanel,style:{position:"relative",...l.style},children:a.panelContent}),e.jsx("div",{className:o.splitter,"data-resizing":d?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:o.slider,...n})}),a.children]})}function at({children:a}){return e.jsx("div",{className:o.emptyState,children:a})}function it(a,n,l){return Math.min(Math.max(a,n),l)}function ot(a){const{minSize:n,maxSize:l,onCollapse:s}=a,f=t.useId(),d=t.useRef(null),[h,u]=t.useState(void 0),[p,i]=t.useState(void 0),[c,m]=t.useState(void 0),[g,w]=t.useState(!1),[v,M]=t.useState(void 0),j=t.useMemo(()=>{if(n&&p)return Math.min(n.px,n.pct/100*p)},[n,p]),S=t.useMemo(()=>{if(j&&l&&p)return Math.max(j,l.pct/100*p)},[l,p,j]),I=t.useMemo(()=>{if(c==="smallest")return j??0;if(c==="largest")return S??0;if(h&&j&&S)return it(h,j,S)},[h,j,S,c]);t.useEffect(()=>{const x=d.current;if(!x)return;const b=x.parentElement;if(!b)return;const _=new ResizeObserver(()=>{const T=b.getBoundingClientRect(),B=x.getBoundingClientRect();i(T.width),u(B.width)});return _.observe(b),_.observe(x),()=>{_.disconnect()}},[]);const W=t.useCallback(x=>{const b=d.current;if(!b)return;const _=b.getBoundingClientRect();M(_.width+x),m(void 0),w(!0)},[]),U=t.useCallback(x=>{const b=d.current;if(!b)return;const _=b.parentElement;if(!_)return;const T=_.getBoundingClientRect(),B=x*(T.width*.005),ee=b.getBoundingClientRect();M(ee.width+B),m(void 0)},[]),q=t.useCallback(()=>{d.current&&(M(void 0),w(!1))},[]),{moveableProps:R}=ct({onMove:W,onMoveEnd:q,onKeyMove:U}),J=t.useMemo(()=>({...R,onKeyDown:x=>{var b;if((b=R.onKeyDown)==null||b.call(R,x),!x.defaultPrevented)switch(x.key){case"Enter":x.preventDefault(),s==null||s();break;case"Home":x.preventDefault(),m("smallest");break;case"End":x.preventDefault(),m("largest");break}},onChange:x=>{if(g)return;const b=Number(x.target.value);M(b)},value:I===void 0?0:Math.floor(I),min:j===void 0?void 0:Math.floor(j),max:S===void 0?void 0:Math.floor(S)}),[R,I,j,S,s,g]),Q=t.useMemo(()=>({style:{WebkitUserSelect:v===void 0?void 0:"none"},id:f,ref:d}),[f,v]),Y=j===void 0?void 0:`${Math.floor(j)}px`,Z=t.useMemo(()=>{if(v!==void 0&&l!==void 0&&c===void 0)return`min(${Math.floor(v)}px, ${l.pct}%)`;if(I!==void 0)return`${Math.floor(I)}px`},[l,v,I,c]);return{sliderProps:J,panelProps:Q,panelMinSize:Y,panelMaxSize:Z,resizing:g}}function ct(a){const{onMove:n,onMoveEnd:l,onKeyMove:s}=a,f=t.useRef(null),d=t.useRef(void 0),h=t.useRef(void 0),u=t.useCallback(()=>{h.current!==void 0&&(h.current=void 0,l==null||l())},[l]);return{moveableProps:t.useMemo(()=>({onPointerDown:i=>{if(i.button!==0||i.ctrlKey)return;const c=f.current;if(!c)return;const m=c.getBoundingClientRect(),g=i.clientX-m.left;h.current=g,i.preventDefault(),c.setPointerCapture(i.pointerId)},onPointerMove:i=>{const c=h.current;if(c===void 0)return;const m=f.current;if(!m)return;const g=m.getBoundingClientRect(),w=i.clientX-c-g.left;i.preventDefault(),n==null||n(w)},onPointerUp:u,onPointerCancel:u,onKeyDown:i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowLeft":i.preventDefault(),s==null||s(-1);break;case"ArrowRight":i.preventDefault(),s==null||s(1);break}},ref:i=>{var m;if(f.current=i,(m=d.current)==null||m.call(d),d.current=void 0,!i)return;const c=g=>{g.preventDefault()};i.addEventListener("touchstart",c),d.current=()=>{i.removeEventListener("touchstart",c)}}}),[s,n,u])}}const O=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function F({tree:a}){const[n]=ne(),l=n.get("tree"),s=t.useContext(N),[f,d]=t.useState(),[h,u]=t.useState([]),p=t.useCallback(i=>{u(c=>c.includes(i)?c.filter(m=>m!==i):[...c,i])},[]);return l==="empty"?e.jsxs(at,{children:[e.jsx(k,{children:"No layers"}),e.jsx(G,{children:"Create a layer"})]}):e.jsx(O.Provider,{value:t.useMemo(()=>({selected:f,setSelected:d,hidden:h,toggleHidden:p}),[h,f,p]),children:e.jsx(xe,{className:o.tree,children:a==="complex"?e.jsx(ut,{}):e.jsx(dt,{tree:D,activeFilters:s.filters})})})}const D={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function $({item:a}){var n;return e.jsx(r,{label:a.label,children:(n=a.items)==null?void 0:n.map(l=>e.jsx($,{item:l},l.label))})}function dt({tree:a,activeFilters:n}){var l;return(l=a.items)==null?void 0:l.map(s=>n.length>0&&(!s.type||!n.includes(s.type))?null:e.jsx($,{item:s},s.label))}function ut(){return e.jsxs(e.Fragment,{children:[e.jsxs(r,{label:"ITC_Master",children:[e.jsx(r,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(r,{label:"002_Substation_A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(r,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(r,{label:"007-aa_master.dgn",children:[e.jsx(r,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(r,{label:"A-CLNG-LITE-A"})}),e.jsx(r,{label:"A-CLNG-TILE",children:e.jsxs(r,{label:"A-DOOR-2D-PLAN",children:[e.jsx(r,{label:"P00003 [2-KA62]",children:e.jsx(r,{label:"Cell [2-KA63]",children:e.jsxs(r,{label:"Cell [2-KA64]",children:[e.jsx(r,{label:"Complex Chain [2-KA6A]"}),e.jsx(r,{label:"Complex Chain [2-KA6B]"}),e.jsx(r,{label:"Complex Chain [2-KA6C]"}),e.jsx(r,{label:"Complex Chain [2-KA6D]"}),e.jsx(r,{label:"Complex Chain [2-KA6E]"}),e.jsx(r,{label:"Complex Chain [2-KA6F]"}),e.jsx(r,{label:"Complex Chain [2-KA6G]"}),e.jsx(r,{label:"Complex Chain [2-KA6H]"}),e.jsx(r,{label:"Complex Chain [2-KA61]"}),e.jsx(r,{label:"Complex Chain [2-KA65]"}),e.jsx(r,{label:"Complex Chain [2-KA66]"}),e.jsx(r,{label:"Complex Chain [2-KA67]"}),e.jsx(r,{label:"Complex Chain [2-KA68]"}),e.jsx(r,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(r,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KA74-A]"})}),e.jsx(r,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KA74-A]"})}),e.jsx(r,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KA98-A]"})}),e.jsx(r,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(r,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(r,{label:"ITC_Main"})]})}const X=t.createContext({selected:!1,hidden:!1});function r(a){const n=t.useContext(O),l=t.useContext(X),s=t.useId(),[f,d]=t.useState(a.defaultCollapsed===void 0?!0:!a.defaultCollapsed),h=t.Children.count(a.children)>0,u=t.useMemo(()=>l.hidden?!0:n.hidden.includes(s),[s,n.hidden,l.hidden]),p=l.selected||s===n.selected,i=t.useCallback(c=>{n.setSelected(c?s:void 0)},[s,n]);return e.jsx(X.Provider,{value:t.useMemo(()=>({selected:p,hidden:u}),[u,p]),children:e.jsx(be,{expanded:h?f:void 0,onExpandedChange:d,selected:p,onSelectedChange:i,icon:e.jsx(P,{href:y,style:{display:"inline"}}),label:a.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(A,{className:o.action,icon:Ce,label:"Lock",variant:"ghost","aria-hidden":u}),l.hidden?e.jsx("span",{className:o.actionIcon,children:e.jsx(P,{href:ge})}):e.jsx(A,{className:o.action,icon:u?_e:Pe,label:u?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(s)}}),e.jsx(ft,{hidden:u})]}),children:f?a.children:void 0})})}function ft({hidden:a}){return e.jsxs(re,{children:[e.jsx(le,{className:o.action,"aria-hidden":a,render:e.jsx(A,{icon:we,label:"More",variant:"ghost"})}),e.jsxs(ae,{style:{minInlineSize:164},children:[e.jsx(C,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(C,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(C,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(C,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(C,{shortcuts:"]",children:"Bring to front"}),e.jsx(C,{shortcuts:"[",children:"Send to back"}),e.jsx(C,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(C,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(C,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(C,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(C,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(C,{shortcuts:"I",children:"Isolate object"})]})]})}function pt(){const{selectedId:a}=t.useContext(V),{filters:n,filtered:l}=t.useContext(N),[s,f]=t.useState(!1),d=t.useRef(null),h=t.useMemo(()=>{if(a!=="simple"||n.length===0)return;const i=D.items.filter(m=>m.type?n.includes(m.type):!1);function c(m){return m.reduce((g,w)=>{const v=w.items?c(w.items):0;return g+1+v},0)}return c(i)},[n,a]),u=t.useRef(null),p=s?e.jsxs(e.Fragment,{children:[e.jsx(ht,{filters:a==="simple"?D.filters:[]}),e.jsx(A,{className:o.shiftIconRight,icon:ve,label:"Close",variant:"ghost",onClick:()=>{var i;z.flushSync(()=>f(!1)),(i=u.current)==null||i.focus()}})]}):e.jsx(A,{className:o.shiftIconRight,icon:E,label:"Search",variant:"ghost",onClick:()=>{var i;z.flushSync(()=>f(!0)),(i=d.current)==null||i.focus()}});return e.jsxs("div",{className:o.subheader,children:[e.jsx(me,{"aria-live":l?"polite":"off","aria-atomic":!0,children:h===void 0?"Showing all tree items":`Showing ${h} tree items`}),s?void 0:e.jsxs(de,{className:o.tabList,tone:"accent",ref:u,children:[e.jsx(K,{id:"simple",children:"Simple"}),e.jsx(K,{id:"complex",children:"Complex"})]}),s?e.jsxs(fe,{className:o.searchInput,children:[e.jsx(pe,{href:E}),e.jsx(he,{placeholder:"Search",ref:d})]}):null,e.jsx("div",{className:o.subheaderActions,children:p})]})}function ht({filters:a}){const n=t.useContext(N);return e.jsxs(Re,{placement:"top-start",children:[e.jsx(ie,{render:e.jsx(A,{icon:Se,label:"Filter",variant:"ghost",disabled:a.length===0,isActive:n.filters.length>0})}),e.jsxs(ye,{className:o.popover,portal:!0,children:[e.jsxs("div",{className:o.filterHeader,children:[e.jsx(k,{variant:"body-sm",className:o.filter,children:"Filter"}),n.filters.length>0&&e.jsx(G,{variant:"ghost",onClick:()=>{n.clearFilters()},children:"Reset"})]}),e.jsx("div",{className:o.filters,children:a.map(l=>{const s=n.filters.includes(l);return e.jsxs(oe,{children:[e.jsx(se,{onChange:()=>{n.toggleFilter(l)},checked:s}),e.jsxs(ce,{className:o.filterLabel,children:[e.jsx(P,{href:y}),l]})]},l)})})]})]})}function mt(a){const[n,l]=t.useState(!1),[s,f]=t.useState([]),d=t.useCallback(u=>{f(p=>p.includes(u)?p.filter(i=>i!==u):[...p,u]),l(!0)},[]),h=t.useCallback(()=>{f([]),l(!0)},[]);return e.jsx(N.Provider,{value:t.useMemo(()=>({filters:s,filtered:n,toggleFilter:d,clearFilters:h}),[s,n,d,h]),children:a.children})}function xt(a){const[n,l]=t.useState("simple");return e.jsx(V.Provider,{value:t.useMemo(()=>({selectedId:n,setSelectedId:s=>{s!=="simple"&&s!=="complex"||l(s)}}),[n]),children:e.jsx(ue,{setSelectedId:s=>{s!=="simple"&&s!=="complex"||l(s)},selectedId:n,children:a.children})})}const N=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{}}),V=t.createContext({selectedId:"simple",setSelectedId:()=>{}});export{Yt as default,Qt as meta};
