/*---------------------------------------------------------------------------------------------
 * Copyright (c) Bentley Systems, Incorporated. All rights reserved.
 * See LICENSE.md in the project root for license terms and full copyright notice.
 *--------------------------------------------------------------------------------------------*/
.ğŸ¥-error-region {
	--âœ¨padding: var(--stratakit-space-x1);

	@layer base {
		position: relative;
		z-index: 1;
	}

	@layer states {
		&:where([data-kiwi-expanded="true"]) {
			--ğŸ¥chevron-down-rotate: -0.5turn;
			--ğŸ¥error-region-header-border-end-radius: 0;
		}

		&:where([data-kiwi-visible="true"]) {
			padding-inline: var(--âœ¨padding);
			padding-block: var(--âœ¨padding);

			block-size: 2.625rem;
		}

		&:where([data-kiwi-visible="false"]) {
			--ğŸ¥error-region-container-display: none;
		}
	}
}

.ğŸ¥-error-region-container {
	@layer base {
		isolation: isolate;

		position: relative;
		display: var(--ğŸ¥error-region-container-display, flex);
		flex-direction: column;

		border: 1px solid var(--stratakit-color-border-attention-base);
		border-radius: 8px;
		background-color: var(--stratakit-color-bg-elevation-base);
		box-shadow: var(--stratakit-shadow-surface-sm);

		@media (prefers-reduced-motion: no-preference) {
			&::before {
				content: "";
				position: absolute;
				inset: 0;
				border-radius: inherit;
				z-index: -1;
			}
		}
	}
}

.ğŸ¥-error-region-header {
	--âœ¨container-border-radius: 8px;
	--âœ¨container-border-width: 1px;
	--âœ¨border-radius: calc(var(--âœ¨container-border-radius) - var(--âœ¨container-border-width));

	@layer base {
		flex-wrap: wrap;
		min-block-size: 2rem;
		padding-inline-start: var(--stratakit-space-x2);
		padding-inline-end: var(--stratakit-space-x1);
		font-weight: 400;
		border-start-start-radius: var(--âœ¨border-radius);
		border-start-end-radius: var(--âœ¨border-radius);
		border-end-start-radius: var(--ğŸ¥error-region-header-border-end-radius, var(--âœ¨border-radius));
		border-end-end-radius: var(--ğŸ¥error-region-header-border-end-radius, var(--âœ¨border-radius));
		transition: border-radius 0s linear 150ms; /* Delay border-radius to match dialog transition. */
	}
}

.ğŸ¥-error-region-icon {
	@layer base {
		--ğŸ¥icon-color: var(--stratakit-color-icon-attention-base);
	}
}

.ğŸ¥-error-region-label {
	@layer base {
		flex: 1;
		text-align: start;
		max-inline-size: 100%;
		overflow-wrap: break-word;
	}
}

.ğŸ¥-error-region-dialog {
	--âœ¨container-max-size: 350px;
	--âœ¨container-border-size: 2px;
	--âœ¨header-size: 2rem;

	@layer base {
		overflow: hidden;
		transition: all 150ms linear;
		transition-property: max-block-size, opacity;
	}

	@layer states {
		&:where(:not([data-enter])) {
			opacity: 0;

			@media (prefers-reduced-motion: no-preference) {
				max-block-size: 0px;
			}
		}

		&:where([data-enter]) {
			opacity: 1;

			@media (prefers-reduced-motion: no-preference) {
				max-block-size: calc(
					var(--âœ¨container-max-size) -
					var(--âœ¨container-border-size) -
					var(--âœ¨header-size)
				);

				@supports (interpolate-size: allow-keywords) {
					max-block-size: max-content;
				}
			}
		}
	}
}

.ğŸ¥-error-region-items {
	--âœ¨container-max-size: 350px;
	--âœ¨container-border-size: 2px;
	--âœ¨header-size: 2rem;

	@layer base {
		border-block-start: 1px solid var(--stratakit-color-border-page-base);

		overflow: auto;
		max-block-size: calc(
			var(--âœ¨container-max-size) -
			var(--âœ¨container-border-size) -
			var(--âœ¨header-size)
		);
	}
}

.ğŸ¥-error-region-item {
	--âœ¨container-padding: var(--stratakit-space-x2);
	--âœ¨icon-size: 1rem;
	--âœ¨gap: var(--stratakit-space-x1);
	--âœ¨padding-inline-start: calc(var(--âœ¨container-padding) + var(--âœ¨icon-size) + var(--âœ¨gap));
	--âœ¨padding-block: calc(var(--stratakit-space-x1) + var(--stratakit-space-x2)); /* TODO: Why? */

	@layer base {
		display: flex;
		flex-direction: column;

		padding-block: var(--âœ¨padding-block);
		padding-inline-start: var(--âœ¨padding-inline-start);
		padding-inline-end: var(--stratakit-space-x1);

		&:where(:not(:nth-child(1 of &))) {
			border-block-start: 1px solid var(--stratakit-color-border-page-base);
		}
	}
}

.ğŸ¥-error-region-item-actions {
	@layer base {
		margin-block-start: var(--stratakit-space-x2);
	}
}
