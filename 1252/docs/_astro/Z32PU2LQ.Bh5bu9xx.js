import{f as J,d as ne,a as re,bs as ot,b as $e,aT as je,aJ as j,bt as Le,aw as P,s as B,j as x,aq as z,ab as de,ao as me,au as I,an as A,h as Oe,am as ut,as as it,bu as qe,bv as ct,bw as at,bh as ue,R as Me,bq as ft,o as lt,ak as Be,i as dt,A as ie,q as gt,ar as vt}from"./ExamplePreview.DrZKN4HJ.js";import{b as ce,c as Ne,r as mt,d as bt,e as ht,i as Et,g as xt,j as pt,k as G,u as yt,l as Pt}from"./U6HHPQDW.BUw3c3Qr.js";import{r as f}from"./index.DIfZGIpv.js";import{u as k,f as St,a as Dt}from"./Q5W46E73.CnNaoQYg.js";import{c as wt,i as We,j as Ft,k as At,b as be,l as Ct,D as Rt,g as Tt,m as jt}from"./WLZ6H5FH.BpDerHfs.js";var Lt="span",Mt=re(function(t){return t={"data-focus-trap":"",tabIndex:0,"aria-hidden":!0,...t,style:{position:"fixed",top:0,left:0,...t.style}},t=ot(t),t}),te=J(function(t){const n=Mt(t);return ne(Lt,n)}),Nt="div";function Ht(e){return P(e).body}function kt(e,t){return t?typeof t=="function"?t(e):t:P(e).createElement("div")}function It(e="id"){return`${e?`${e}-`:""}${Math.random().toString(36).slice(2,8)}`}function H(e){queueMicrotask(()=>{e?.focus()})}var Ye=re(function({preserveTabOrder:t,preserveTabOrderAnchor:n,portalElement:r,portalRef:u,portal:s=!0,...o}){const a=f.useRef(null),d=$e(a,o.ref),E=f.useContext(je),[l,C]=f.useState(null),[p,N]=f.useState(null),V=f.useRef(null),L=f.useRef(null),O=f.useRef(null),M=f.useRef(null);return j(()=>{const c=a.current;if(!c||!s){C(null);return}const m=kt(c,r);if(!m){C(null);return}const h=m.isConnected;if(h||(E||Ht(c)).appendChild(m),m.id||(m.id=c.id?`portal/${c.id}`:It()),C(m),Le(u,m),!h)return()=>{m.remove(),Le(u,null)}},[s,r,E,u]),j(()=>{if(!s||!t||!n)return;const m=P(n).createElement("span");return m.style.position="fixed",n.insertAdjacentElement("afterend",m),N(m),()=>{m.remove(),N(null)}},[s,t,n]),f.useEffect(()=>{if(!l||!t)return;let c=0;const m=h=>{if(!z(h))return;const g=h.type==="focusin";if(cancelAnimationFrame(c),g)return mt(l);c=requestAnimationFrame(()=>{bt(l,!0)})};return l.addEventListener("focusin",m,!0),l.addEventListener("focusout",m,!0),()=>{cancelAnimationFrame(c),l.removeEventListener("focusin",m,!0),l.removeEventListener("focusout",m,!0)}},[l,t]),o=B(o,c=>{if(c=x.jsx(je.Provider,{value:l||E,children:c}),!s)return c;if(!l)return x.jsx("span",{ref:d,id:o.id,style:{position:"fixed"},hidden:!0});c=x.jsxs(x.Fragment,{children:[t&&l&&x.jsx(te,{ref:L,"data-focus-trap":o.id,className:"__focus-trap-inner-before",onFocus:h=>{z(h,l)?H(ce()):H(V.current)}}),c,t&&l&&x.jsx(te,{ref:O,"data-focus-trap":o.id,className:"__focus-trap-inner-after",onFocus:h=>{z(h,l)?H(Ne()):H(M.current)}})]}),l&&(c=de.createPortal(c,l));let m=x.jsxs(x.Fragment,{children:[t&&l&&x.jsx(te,{ref:V,"data-focus-trap":o.id,className:"__focus-trap-outer-before",onFocus:h=>{!(h.relatedTarget===M.current)&&z(h,l)?H(L.current):H(Ne())}}),t&&x.jsx("span",{"aria-owns":l?.id,style:{position:"fixed"}}),t&&l&&x.jsx(te,{ref:M,"data-focus-trap":o.id,className:"__focus-trap-outer-after",onFocus:h=>{if(z(h,l))H(O.current);else{const g=ce();if(g===L.current){requestAnimationFrame(()=>{var q;return(q=ce())==null?void 0:q.focus()});return}H(g)}}})]});return p&&t&&(m=de.createPortal(m,p)),x.jsxs(x.Fragment,{children:[m,c]})},[l,E,s,o.id,t,p]),o={...o,ref:d},o}),xn=J(function(t){const n=Ye(t);return ne(Nt,n)}),He=f.createContext(0);function Vt({level:e,children:t}){const n=f.useContext(He),r=Math.max(Math.min(e||n+1,6),1);return x.jsx(He.Provider,{value:r,children:t})}var _t="div",Xe=re(function({autoFocusOnShow:t=!0,...n}){return n=B(n,r=>x.jsx(ht.Provider,{value:t,children:r}),[t]),n});J(function(t){const n=Xe(t);return ne(_t,n)});function $t(e,t){const r=P(e).createElement("button");return r.type="button",r.tabIndex=-1,r.textContent="Dismiss popup",Object.assign(r.style,{border:"0px",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"}),r.addEventListener("click",t),e.prepend(r),()=>{r.removeEventListener("click",t),r.remove()}}function Ot(e){const t=f.useRef(null);return f.useEffect(()=>{if(!e){t.current=null;return}return me("mousedown",r=>{t.current=r.target},!0)},[e]),t}var ae=new WeakMap;function K(e,t,n){ae.has(e)||ae.set(e,new Map);const r=ae.get(e),u=r.get(t);if(!u)return r.set(t,n()),()=>{var a;(a=r.get(t))==null||a(),r.delete(t)};const s=n(),o=()=>{s(),u(),r.delete(t)};return r.set(t,o),()=>{r.get(t)===o&&(s(),r.set(t,u))}}function he(e,t,n){return K(e,t,()=>{const u=e.getAttribute(t);return e.setAttribute(t,n),()=>{u==null?e.removeAttribute(t):e.setAttribute(t,u)}})}function $(e,t,n){return K(e,t,()=>{const u=t in e,s=e[t];return e[t]=n,()=>{u?e[t]=s:delete e[t]}})}function ge(e,t){return e?K(e,"style",()=>{const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}}):()=>{}}function qt(e,t,n){return e?K(e,t,()=>{const u=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{u?e.style.setProperty(t,u):e.style.removeProperty(t)}}):()=>{}}var Bt=["SCRIPT","STYLE"];function ve(e){return`__ariakit-dialog-snapshot-${e}`}function Wt(e,t){const n=P(t),r=ve(e);if(!n.body[r])return!0;do{if(t===n.body)return!1;if(t[r])return!0;if(!t.parentElement)return!1;t=t.parentElement}while(!0)}function Yt(e,t,n){return Bt.includes(t.tagName)||!Wt(e,t)?!1:!n.some(r=>r&&A(t,r))}function Ee(e,t,n,r){for(let u of t){if(!u?.isConnected)continue;const s=t.some(d=>!d||d===u?!1:d.contains(u)),o=P(u),a=u;for(;u.parentElement&&u!==o.body;){if(r?.(u.parentElement,a),!s)for(const d of u.parentElement.children)Yt(e,d,t)&&n(d,a);u=u.parentElement}}}function Xt(e,t){const{body:n}=P(t[0]),r=[];return Ee(e,t,s=>{r.push($(s,ve(e),!0))}),I($(n,ve(e),!0),()=>{for(const s of r)s()})}function ze(e,...t){if(!e)return!1;const n=e.getAttribute("data-backdrop");return n==null?!1:n===""||n==="true"||!t.length?!0:t.some(r=>n===r)}function W(e="",t=!1){return`__ariakit-dialog-${t?"ancestor":"outside"}${e?`-${e}`:""}`}function zt(e,t=""){return I($(e,W(),!0),$(e,W(t),!0))}function Ge(e,t=""){return I($(e,W("",!0),!0),$(e,W(t,!0),!0))}function xe(e,t){const n=W(t,!0);if(e[n])return!0;const r=W(t);do{if(e[r])return!0;if(!e.parentElement)return!1;e=e.parentElement}while(!0)}function ke(e,t){const n=[],r=t.map(s=>s?.id);return Ee(e,t,s=>{ze(s,...r)||n.unshift(zt(s,e))},(s,o)=>{o.hasAttribute("data-dialog")&&o.id!==e||n.unshift(Ge(s,e))}),()=>{for(const s of n)s()}}function Gt(e){return e.tagName==="HTML"?!0:A(P(e).body,e)}function Jt(e,t){if(!e)return!1;if(A(e,t))return!0;const n=t.getAttribute("aria-activedescendant");if(n){const r=P(e).getElementById(n);if(r)return A(e,r)}return!1}function Kt(e,t){if(!("clientY"in e))return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function fe({store:e,type:t,listener:n,capture:r,domReady:u}){const s=Oe(n),o=k(e,"open"),a=f.useRef(!1);j(()=>{if(!o||!u)return;const{contentElement:d}=e.getState();if(!d)return;const E=()=>{a.current=!0};return d.addEventListener("focusin",E,!0),()=>d.removeEventListener("focusin",E,!0)},[e,o,u]),f.useEffect(()=>o?me(t,E=>{const{contentElement:l,disclosureElement:C}=e.getState(),p=E.target;!l||!p||!Gt(p)||A(l,p)||Jt(C,p)||p.hasAttribute("data-focus-trap")||Kt(E,l)||a.current&&!xe(p,l.id)||Et(p)||s(E)},r):void 0,[o,r])}function le(e,t){return typeof e=="function"?e(t):!!e}function Ut(e,t,n){const r=k(e,"open"),u=Ot(r),s={store:e,domReady:n,capture:!0};fe({...s,type:"click",listener:o=>{const{contentElement:a}=e.getState(),d=u.current;d&&ut(d)&&xe(d,a?.id)&&le(t,o)&&e.hide()}}),fe({...s,type:"focusin",listener:o=>{const{contentElement:a}=e.getState();a&&o.target!==P(a)&&le(t,o)&&e.hide()}}),fe({...s,type:"contextmenu",listener:o=>{le(t,o)&&e.hide()}})}var Ie=f.createContext({});function Qt(e){const t=f.useContext(Ie),[n,r]=f.useState([]),u=f.useCallback(a=>{var d;return r(E=>[...E,a]),I((d=t.add)==null?void 0:d.call(t,a),()=>{r(E=>E.filter(l=>l!==a))})},[t]);j(()=>St(e,["open","contentElement"],a=>{var d;if(a.open&&a.contentElement)return(d=t.add)==null?void 0:d.call(t,e)}),[e,t]);const s=f.useMemo(()=>({store:e,add:u}),[e,u]);return{wrapElement:f.useCallback(a=>x.jsx(Ie.Provider,{value:s,children:a}),[s]),nestedDialogs:n}}function Zt({attribute:e,contentId:t,contentElement:n,enabled:r}){const[u,s]=it(),o=f.useCallback(()=>{if(!r||!n)return!1;const{body:a}=P(n),d=a.getAttribute(e);return!d||d===t},[u,r,n,e,t]);return f.useEffect(()=>{if(!r||!t||!n)return;const{body:a}=P(n);if(o())return a.setAttribute(e,t),()=>a.removeAttribute(e);const d=new MutationObserver(()=>de.flushSync(s));return d.observe(a,{attributeFilter:[e]}),()=>d.disconnect()},[u,r,t,n,o,e]),o}function en(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function tn(e,t,n){const r=Zt({attribute:"data-dialog-prevent-body-scroll",contentElement:e,contentId:t,enabled:n});f.useEffect(()=>{if(!r()||!e)return;const u=P(e),s=qe(e),{documentElement:o,body:a}=u,d=o.style.getPropertyValue("--scrollbar-width"),E=d?Number.parseInt(d,10):s.innerWidth-o.clientWidth,l=()=>qt(o,"--scrollbar-width",`${E}px`),C=en(o),p=()=>ge(a,{overflow:"hidden",[C]:`${E}px`}),N=()=>{var L,O;const{scrollX:M,scrollY:c,visualViewport:m}=s,h=(L=m?.offsetLeft)!=null?L:0,g=(O=m?.offsetTop)!=null?O:0,q=ge(a,{position:"fixed",overflow:"hidden",top:`${-(c-Math.floor(g))}px`,left:`${-(M-Math.floor(h))}px`,right:"0",[C]:`${E}px`});return()=>{q(),s.scrollTo({left:M,top:c,behavior:"instant"})}},V=ct()&&!at();return I(l(),V?N():p())},[r,e])}function nn(e,...t){if(!e)return!1;const n=e.getAttribute("data-focus-trap");return n==null?!1:t.length?n===""?!1:t.some(r=>n===r):!0}function Je(){return"inert"in HTMLElement.prototype}function rn(e){return he(e,"aria-hidden","true")}function Ke(e,t){if(!("style"in e))return ue;if(Je())return $(e,"inert",!0);const r=xt(e,!0).map(u=>{if(t?.some(o=>o&&A(o,u)))return ue;const s=K(u,"focus",()=>(u.focus=ue,()=>{delete u.focus}));return I(he(u,"tabindex","-1"),s)});return I(...r,rn(e),ge(e,{pointerEvents:"none",userSelect:"none",cursor:"default"}))}function sn(e,t){const n=[],r=t.map(s=>s?.id);return Ee(e,t,s=>{ze(s,...r)||nn(s,...r)||n.unshift(Ke(s,t))},s=>{s.hasAttribute("role")&&(t.some(o=>o&&A(o,s))||n.unshift(he(s,"role","none")))}),()=>{for(const s of n)s()}}function on({store:e,backdrop:t,alwaysVisible:n,hidden:r}){const u=f.useRef(null),s=wt({disclosure:e}),o=k(e,"contentElement");f.useEffect(()=>{const E=u.current,l=o;E&&l&&(E.style.zIndex=getComputedStyle(l).zIndex)},[o]),j(()=>{const E=o?.id;if(!E)return;const l=u.current;if(l)return Ge(l,E)},[o]);const a=We({ref:u,store:s,role:"presentation","data-backdrop":o?.id||"",alwaysVisible:n,hidden:r??void 0,style:{position:"fixed",top:0,right:0,bottom:0,left:0}});if(!t)return null;if(f.isValidElement(t))return x.jsx(Me,{...a,render:t});const d=typeof t!="boolean"?t:"div";return x.jsx(Me,{...a,render:x.jsx(d,{})})}function un(e={}){return Ft(e)}function cn(e,t,n){return At(e,t,n)}function an(e={}){const[t,n]=Dt(un,e);return cn(t,n,e)}var fn="div",Ve=vt();function ln(e){const t=Be();return!t||e&&A(e,t)?!1:!!G(t)}function _e(e,t=!1){if(!e)return null;const n="current"in e?e.current:e;return n?t?G(n)?n:null:n:null}var dn=re(function({store:t,open:n,onClose:r,focusable:u=!0,modal:s=!0,portal:o=!!s,backdrop:a=!!s,hideOnEscape:d=!0,hideOnInteractOutside:E=!0,getPersistentElements:l,preventBodyScroll:C=!!s,autoFocusOnShow:p=!0,autoFocusOnHide:N=!0,initialFocus:V,finalFocus:L,unmountOnHide:O,unstable_treeSnapshotKey:M,...c}){const m=be(),h=f.useRef(null),g=an({store:t||m,open:n,setOpen(i){if(i)return;const b=h.current;if(!b)return;const y=new Event("close",{bubbles:!1,cancelable:!0});r&&b.addEventListener("close",r,{once:!0}),b.dispatchEvent(y),y.defaultPrevented&&g.setOpen(!0)}}),{portalRef:q,domReady:S}=ft(o,c.portalRef),Ue=c.preserveTabOrder,se=k(g,i=>Ue&&!s&&i.mounted),R=lt(c.id),w=k(g,"open"),F=k(g,"mounted"),_=k(g,"contentElement"),Qe=Ct(F,c.hidden,c.alwaysVisible);tn(_,R,C&&!Qe),Ut(g,E,S);const{wrapElement:pe,nestedDialogs:ye}=Qt(g);c=B(c,pe,[pe]),j(()=>{if(!w)return;const i=h.current,b=Be(i,!0);b&&b.tagName!=="BODY"&&(i&&A(i,b)||g.setDisclosureElement(b))},[g,w]),Ve&&f.useEffect(()=>{if(!F)return;const{disclosureElement:i}=g.getState();if(!i||!dt(i))return;const b=()=>{let y=!1;const v=()=>{y=!0},D={capture:!0,once:!0};i.addEventListener("focusin",v,D),gt(i,"mouseup",()=>{i.removeEventListener("focusin",v,!0),!y&&Pt(i)})};return i.addEventListener("mousedown",b),()=>{i.removeEventListener("mousedown",b)}},[g,F]),f.useEffect(()=>{if(!F||!S)return;const i=h.current;if(!i)return;const b=qe(i),y=b.visualViewport||b,v=()=>{var D,T;const X=(T=(D=b.visualViewport)==null?void 0:D.height)!=null?T:b.innerHeight;i.style.setProperty("--dialog-viewport-height",`${X}px`)};return v(),y.addEventListener("resize",v),()=>{y.removeEventListener("resize",v)}},[F,S]),f.useEffect(()=>{if(!s||!F||!S)return;const i=h.current;if(!(!i||i.querySelector("[data-dialog-dismiss]")))return $t(i,g.hide)},[g,s,F,S]),j(()=>{if(!Je()||w||!F||!S)return;const i=h.current;if(i)return Ke(i)},[w,F,S]);const U=w&&S;j(()=>{if(!R||!U)return;const i=h.current;return Xt(R,[i])},[R,U,M]);const Pe=Oe(l);j(()=>{if(!R||!U)return;const{disclosureElement:i}=g.getState(),b=h.current,y=Pe()||[],v=[b,...y,...ye.map(D=>D.getState().contentElement)];return s?I(ke(R,v),sn(R,v)):ke(R,[i,...v])},[R,g,U,Pe,ye,s,M]);const Se=!!p,De=ie(p),[Ze,et]=f.useState(!1);f.useEffect(()=>{if(!w||!Se||!S||!_?.isConnected)return;const i=_e(V,!0)||_.querySelector("[data-autofocus=true],[autofocus]")||pt(_,!0,o&&se)||_,b=G(i);De(b?i:null)&&(et(!0),queueMicrotask(()=>{i.focus(),Ve&&b&&i.scrollIntoView({block:"nearest",inline:"nearest"})}))},[w,Se,S,_,V,o,se,De]);const Q=!!N,we=ie(N),[Z,Fe]=f.useState(!1);f.useEffect(()=>{if(w)return Fe(!0),()=>Fe(!1)},[w]);const Y=f.useCallback((i,b=!0)=>{const{disclosureElement:y}=g.getState();if(ln(i))return;let v=_e(L)||y;if(v?.id){const T=P(v),X=`[aria-activedescendant="${v.id}"]`,ee=T.querySelector(X);ee&&(v=ee)}if(v&&!G(v)){const T=v.closest("[data-dialog]");if(T?.id){const X=P(T),ee=`[aria-controls~="${T.id}"]`,Te=X.querySelector(ee);Te&&(v=Te)}}const D=v&&G(v);if(!D&&b){requestAnimationFrame(()=>Y(i,!1));return}we(D?v:null)&&D&&v?.focus({preventScroll:!0})},[g,L,we]),oe=f.useRef(!1);j(()=>{if(w||!Z||!Q)return;const i=h.current;oe.current=!0,Y(i)},[w,Z,S,Q,Y]),f.useEffect(()=>{if(!Z||!Q)return;const i=h.current;return()=>{if(oe.current){oe.current=!1;return}Y(i)}},[Z,Q,Y]);const Ae=ie(d);f.useEffect(()=>!S||!F?void 0:me("keydown",b=>{if(b.key!=="Escape"||b.defaultPrevented)return;const y=h.current;if(!y||xe(y))return;const v=b.target;if(!v)return;const{disclosureElement:D}=g.getState();!!(v.tagName==="BODY"||A(y,v)||!D||A(D,v))&&Ae(b)&&g.hide()},!0),[g,S,F,Ae]),c=B(c,i=>x.jsx(Vt,{level:s?1:void 0,children:i}),[s]);const Ce=c.hidden,Re=c.alwaysVisible;c=B(c,i=>a?x.jsxs(x.Fragment,{children:[x.jsx(on,{store:g,backdrop:a,hidden:Ce,alwaysVisible:Re}),i]}):i,[g,a,Ce,Re]);const[tt,nt]=f.useState(),[rt,st]=f.useState();return c=B(c,i=>x.jsx(Rt,{value:g,children:x.jsx(Tt.Provider,{value:nt,children:x.jsx(jt.Provider,{value:st,children:i})})}),[g]),c={id:R,"data-dialog":"",role:"dialog",tabIndex:u?-1:void 0,"aria-labelledby":tt,"aria-describedby":rt,...c,ref:$e(h,c.ref)},c=Xe({...c,autoFocusOnShow:Ze}),c=We({store:g,...c}),c=yt({...c,focusable:u}),c=Ye({portal:o,...c,portalRef:q,preserveTabOrder:se}),c});function gn(e,t=be){return J(function(r){const u=t(),s=r.store||u;return k(s,a=>!r.unmountOnHide||a?.mounted||!!r.open)?x.jsx(e,{...r}):null})}var pn=gn(J(function(t){const n=dn(t);return ne(fn,n)}),be);export{pn as D,He as H,xn as P,dn as a,un as b,gn as c,cn as d,an as u};
