import{u as A}from"./U6HHPQDW-CqfSluKS.js";import{D as B,a4 as m,G as h,ad as p,J as D,ae as x,af as F,ag as I,a6 as q,ah as T,K as Y,A as G,B as H}from"./~utils-BlN-5Gd1.js";import{a as u}from"./chunk-JZWAC4HX-ROAaBwzV.js";var J="button";function b(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?m(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?m(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var L=Symbol("command"),j=B(function({clickOnEnter:t=!0,clickOnSpace:n=!0,...r}){const o=u.useRef(null),[v,C]=u.useState(!1);u.useEffect(()=>{o.current&&C(m(o.current))},[]);const[K,d]=u.useState(!1),f=u.useRef(!1),y=h(r),[E,M]=p(r,L,!0),g=r.onKeyDown,S=D(e=>{g?.(e);const s=e.currentTarget;if(e.defaultPrevented||E||y||!x(e)||F(s)||s.isContentEditable)return;const i=t&&e.key==="Enter",c=n&&e.key===" ",l=e.key==="Enter"&&!t,w=e.key===" "&&!n;if(l||w){e.preventDefault();return}if(i||c){const P=b(e);if(i){if(!P){e.preventDefault();const{view:z,...U}=e,N=()=>T(s,U);I()?q(s,"keyup",N):queueMicrotask(N)}}else c&&(f.current=!0,P||(e.preventDefault(),d(!0)))}}),k=r.onKeyUp,R=D(e=>{if(k?.(e),e.defaultPrevented||E||y||e.metaKey)return;const s=n&&e.key===" ";if(f.current&&s&&(f.current=!1,!b(e))){e.preventDefault(),d(!1);const i=e.currentTarget,{view:c,...l}=e;queueMicrotask(()=>T(i,l))}});return r={"data-active":K||void 0,type:v?"button":void 0,...M,...r,ref:Y(o,r.ref),onKeyDown:S,onKeyUp:R},r=A(r),r});G(function(t){const n=j(t);return H(J,n)});export{j as u};
