import{w as te}from"./~utils-DBbKOCKn.js";import{n as e,a as t}from"./chunk-K6AXKMTT-C3GszjG8.js";import{a as k}from"./index-D8AN4PUL.js";import{B as X}from"./Button-BkOSUObU.js";import{C as ne}from"./Checkbox-BKFkOSE3.js";import{D as se,a as re,b as le,c as g,P as ae}from"./DropdownMenu-B_irzdHe.js";import{I as P}from"./Icon-Dxdj4WyP.js";import{I as A}from"./IconButton-1lJZd4Y5.js";import{F as ie,L as oe}from"./Label-BHvD1I2E.js";import{T as L,a as ce,b as z,c as de}from"./Tabs-DhHYtS0g.js";import{T as D}from"./Text-Bz8nJLfn.js";import{T as ue,a as fe,b as he}from"./TextBox-Df805yJe.js";import{V as pe}from"./VisuallyHidden-B8fi6WON.js";import{T as me,a as xe}from"./Tree-CqNQjaUv.js";import{p as R}from"./placeholder-B0Trjylx.js";import{p as be,l as je,d as Ce,h as ge,m as _e,s as K,a as we,f as Se}from"./state-inherited-dot-Bf76G3Ac.js";import{s as ve}from"./visibility-show-CDU1Cv5M.js";import{P as Pe}from"./MTZPJQMC-0Tj66p8g.js";import{u as Ae,P as Ie}from"./BYC7LY2E-DFJQeO9D.js";import"./index-Cxz8UbZX.js";import"./KUU7WJ55-CHK7GZqA.js";import"./LVA2YJMS-DJ1aeddg.js";import"./ASMQKSDT-CYaIuFBc.js";import"./YV4JVR4I-CEsmB541.js";import"./XL7CSKGW-DDBG_Pjh.js";import"./Kbd-BtfBPNwF.js";import"./P2CTZE2T-CDZuWE4O.js";import"./VEVQD5MH-BL2nSc5z.js";import"./ITI7HKP4-CoOHNbve.js";import"./VGCJ63VH-FyhICi5q.js";import"./P4IRICAX-B3iwy-xu.js";import"./Tooltip-1mAL23bw.js";import"./~hooks-Db4avU_f.js";import"./ListItem-ClBVNm7m.js";function Me(s={}){const n=Ae(s);return e.jsx(Pe,{value:n,children:s.children})}const Re="_appLayout_wwsi8_5",ye="_header_wwsi8_22",Ne="_platformBar_wwsi8_32",Te="_logo_wwsi8_38",Be="_tools_wwsi8_48",De="_leftPanel_wwsi8_58",ke="_panelHeader_wwsi8_70",Le="_panelTitle_wwsi8_78",ze="_panelCaption_wwsi8_84",Ke="_shiftIconRight_wwsi8_88",Ee="_subheader_wwsi8_92",Fe="_subheaderTitle_wwsi8_103",Xe="_searchInput_wwsi8_108",Ge="_subheaderActions_wwsi8_112",He="_tabList_wwsi8_116",Oe="_emptyState_wwsi8_121",Ve="_canvasWrapper_wwsi8_130",$e="_canvas_wwsi8_130",We="_splitter_wwsi8_167",Ue="_tabPanel_wwsi8_209",qe="_tree_wwsi8_215",Je="_action_wwsi8_219",Qe="_actionIcon_wwsi8_225",Ye="_slider_wwsi8_236",Ze="_popover_wwsi8_245",et="_filter_wwsi8_251",tt="_filterHeader_wwsi8_255",nt="_filters_wwsi8_262",st="_filterLabel_wwsi8_268",i={appLayout:Re,header:ye,platformBar:Ne,logo:Te,tools:Be,leftPanel:De,panelHeader:ke,panelTitle:Le,panelCaption:ze,shiftIconRight:Ke,subheader:Ee,subheaderTitle:Fe,searchInput:Xe,subheaderActions:Ge,tabList:He,emptyState:Oe,canvasWrapper:Ve,canvas:$e,splitter:We,tabPanel:Ue,tree:qe,action:Je,actionIcon:Qe,slider:Ye,popover:Ze,filter:et,filterHeader:tt,filters:nt,filterLabel:st},G="Kiwi sandbox",Yt=()=>[{title:G}],Zt=te(function(){return e.jsxs(rt,{panelContent:e.jsx(bt,{children:e.jsxs(xt,{children:[e.jsxs("div",{className:i.panelHeader,children:[e.jsxs("hgroup",{role:"group",children:[e.jsx("h2",{className:i.panelTitle,children:"Epoch System iModel"}),e.jsx("p",{className:i.panelCaption,children:"2024 Refresh"})]}),e.jsx("div",{className:i.actions,children:e.jsx(A,{className:i.shiftIconRight,icon:be,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(pt,{}),e.jsx(L,{tabId:"simple",className:i.tabPanel,focusable:!1,children:e.jsx(E,{tree:"simple"})}),e.jsx(L,{tabId:"complex",className:i.tabPanel,focusable:!1,children:e.jsx(E,{tree:"complex"})})]})}),children:[e.jsxs("header",{className:i.header,children:[e.jsx("div",{className:i.logo,children:e.jsx(P,{href:R,size:"large"})}),e.jsx(D,{render:n=>e.jsx("h1",{...n}),variant:"body-md",children:G})]}),e.jsx("div",{className:i.platformBar,children:e.jsxs("div",{className:i.tools,children:[e.jsx(P,{href:R,size:"large"}),e.jsx(P,{href:R,size:"large"}),e.jsx(P,{href:R,size:"large"})]})}),e.jsx("div",{className:i.canvasWrapper,children:e.jsx("div",{className:i.canvas})})]})});function rt(s){const{sliderProps:n,panelProps:r,panelMinSize:l,panelMaxSize:p,resizing:d}=it({minSize:{px:256,pct:20},maxSize:{pct:30}});return e.jsxs("div",{className:i.appLayout,style:{"--_panel-min-size":l,"--_panel-max-size":p},children:[e.jsx("div",{...r,className:i.leftPanel,style:{position:"relative",...r.style},children:s.panelContent}),e.jsx("div",{className:i.splitter,"data-resizing":d?"true":void 0,children:e.jsx("input",{type:"range","aria-label":"Resize layers panel",className:i.slider,...n})}),s.children]})}function lt(){return e.jsxs("div",{className:i.emptyState,children:[e.jsx(D,{children:"No layers"}),e.jsx(X,{children:"Create a layer"})]})}function at(s,n,r){return Math.min(Math.max(s,n),r)}function it(s){const{minSize:n,maxSize:r,onCollapse:l}=s,p=t.useId(),d=t.useRef(null),[m,o]=t.useState(void 0),[h,c]=t.useState(void 0),[u,f]=t.useState(void 0),[j,_]=t.useState(!1),[w,I]=t.useState(void 0),C=t.useMemo(()=>{if(n&&h)return Math.min(n.px,n.pct/100*h)},[n,h]),v=t.useMemo(()=>{if(C&&r&&h)return Math.max(C,r.pct/100*h)},[r,h,C]),M=t.useMemo(()=>{if(u==="smallest")return C??0;if(u==="largest")return v??0;if(m&&C&&v)return at(m,C,v)},[m,C,v,u]);t.useEffect(()=>{const x=d.current;if(!x)return;const b=x.parentElement;if(!b)return;const S=new ResizeObserver(()=>{const T=b.getBoundingClientRect(),B=x.getBoundingClientRect();c(T.width),o(B.width)});return S.observe(b),S.observe(x),()=>{S.disconnect()}},[]);const W=t.useCallback(x=>{const b=d.current;if(!b)return;const S=b.getBoundingClientRect();I(S.width+x),f(void 0),_(!0)},[]),U=t.useCallback(x=>{const b=d.current;if(!b)return;const S=b.parentElement;if(!S)return;const T=S.getBoundingClientRect(),B=x*(T.width*.005),ee=b.getBoundingClientRect();I(ee.width+B),f(void 0)},[]),q=t.useCallback(()=>{d.current&&(I(void 0),_(!1))},[]),{moveableProps:y}=ot({onMove:W,onMoveEnd:q,onKeyMove:U}),J=t.useMemo(()=>({...y,onKeyDown:x=>{var b;if((b=y.onKeyDown)==null||b.call(y,x),!x.defaultPrevented)switch(x.key){case"Enter":x.preventDefault(),l==null||l();break;case"Home":x.preventDefault(),f("smallest");break;case"End":x.preventDefault(),f("largest");break}},onChange:x=>{if(j)return;const b=Number(x.target.value);I(b)},value:M===void 0?0:Math.floor(M),min:C===void 0?void 0:Math.floor(C),max:v===void 0?void 0:Math.floor(v)}),[y,M,C,v,l,j]),Q=t.useMemo(()=>({style:{WebkitUserSelect:w===void 0?void 0:"none"},id:p,ref:d}),[p,w]),Y=C===void 0?void 0:`${Math.floor(C)}px`,Z=t.useMemo(()=>{if(w!==void 0&&r!==void 0&&u===void 0)return`min(${Math.floor(w)}px, ${r.pct}%)`;if(M!==void 0)return`${Math.floor(M)}px`},[r,w,M,u]);return{sliderProps:J,panelProps:Q,panelMinSize:Y,panelMaxSize:Z,resizing:j}}function ot(s){const{onMove:n,onMoveEnd:r,onKeyMove:l}=s,p=t.useRef(null),d=t.useRef(void 0),m=t.useRef(void 0),o=t.useCallback(()=>{m.current!==void 0&&(m.current=void 0,r==null||r())},[r]);return{moveableProps:t.useMemo(()=>({onPointerDown:c=>{if(c.button!==0||c.ctrlKey)return;const u=p.current;if(!u)return;const f=u.getBoundingClientRect(),j=c.clientX-f.left;m.current=j,c.preventDefault(),u.setPointerCapture(c.pointerId)},onPointerMove:c=>{const u=m.current;if(u===void 0)return;const f=p.current;if(!f)return;const j=f.getBoundingClientRect(),_=c.clientX-u-j.left;c.preventDefault(),n==null||n(_)},onPointerUp:o,onPointerCancel:o,onKeyDown:c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowLeft":c.preventDefault(),l==null||l(-1);break;case"ArrowRight":c.preventDefault(),l==null||l(1);break}},ref:c=>{var f;if(p.current=c,(f=d.current)==null||f.call(d),d.current=void 0,!c)return;const u=j=>{j.preventDefault()};c.addEventListener("touchstart",u),d.current=()=>{c.removeEventListener("touchstart",u)}}}),[l,n,o])}}const H=t.createContext({selected:void 0,hidden:[],setSelected:()=>{},toggleHidden:()=>{}});function E({tree:s}){const[n,r]=t.useState(),[l,p]=t.useState([]),d=t.useCallback(m=>{p(o=>o.includes(m)?o.filter(h=>h!==m):[...o,m])},[]);return e.jsx(H.Provider,{value:t.useMemo(()=>({selected:n,setSelected:r,hidden:l,toggleHidden:d}),[l,n,d]),children:s==="complex"?e.jsx(ut,{}):e.jsx(ft,{})})}const O={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[{label:"Guides",type:"Guides",items:[{label:"Tree",items:[{label:"Guide 4"},{label:"Guide 3"},{label:"Guide 2"},{label:"Guide 1"}]}]},{label:"Other",type:"Other",items:[{label:"Object 2",items:[{label:"Path 3"}]},{label:"Object 1"}]},{label:"Road",type:"Road",items:[{label:"Parking lot access"},{label:"Site access"}]},{label:"Parking lot",type:"Parking lot",items:[{label:"Parking area",items:[{label:"Bay point 2"},{label:"Bay point 1"},{label:"Space point 1"},{label:"Path 6"}]}]},{label:"Building",type:"Building",items:[{label:"Building area",items:[{label:"Path 5"}]}]},{label:"Sewer",type:"Sewer",items:[{label:"Run off pipe",items:[{label:"Path 4"}]}]},{label:"Project boundary",type:"Project boundary",items:[{label:"Property area",items:[{label:"Path 1"}]}]},{label:"Map",type:"Map",items:[{label:"Location",items:[{label:"Terrain"}]}]}]};function V({item:s}){var n;return e.jsx(a,{label:s.label,children:(n=s.items)==null?void 0:n.map(r=>e.jsx(V,{item:r},r.label))})}function ct({tree:s,filters:n,search:r}){const l=t.useMemo(()=>(s==null?void 0:s.items)??[],[s]),p=t.useMemo(()=>n.length===0?l:l.reduce((o,h)=>(!h.type||!n.includes(h.type)||o.push(h),o),[]),[l,n]),d=t.useMemo(()=>{function o(h){return h.reduce((c,u)=>{const f=o(u.items??[]);return(u.label.toLowerCase().includes(r.toLowerCase())||f.length>0)&&c.push({...u,items:f}),c},[])}return r===""?p:o(p)},[p,r]),m=t.useMemo(()=>{if(!s||n.length===0&&r==="")return;function o(h){return h.reduce((c,u)=>{const f=u.items?o(u.items):0;return c+1+f},0)}return o(d)},[d,s,n,r]);return{filteredTree:d,itemCount:m}}function dt({tree:s}){return s.map(n=>e.jsx(V,{item:n},n.label))}function ut(){return e.jsxs(me,{className:i.tree,children:[e.jsxs(a,{label:"ITC_Master",children:[e.jsx(a,{label:"002_Substation",defaultCollapsed:!0,children:e.jsx(a,{label:"002_Substation_A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00003-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-D-00005-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00002-A"})}),e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003.dgn",defaultCollapsed:!0,children:e.jsx(a,{label:"005-BENROAD-00-XX-M3-G-00003-A"})}),e.jsxs(a,{label:"007-aa_master.dgn",children:[e.jsx(a,{label:"A-CLNG-LITE",defaultCollapsed:!0,children:e.jsx(a,{label:"A-CLNG-LITE-A"})}),e.jsx(a,{label:"A-CLNG-TILE",children:e.jsxs(a,{label:"A-DOOR-2D-PLAN",children:[e.jsx(a,{label:"P00003 [2-KA62]",children:e.jsx(a,{label:"Cell [2-KA63]",children:e.jsxs(a,{label:"Cell [2-KA64]",children:[e.jsx(a,{label:"Complex Chain [2-KA6A]"}),e.jsx(a,{label:"Complex Chain [2-KA6B]"}),e.jsx(a,{label:"Complex Chain [2-KA6C]"}),e.jsx(a,{label:"Complex Chain [2-KA6D]"}),e.jsx(a,{label:"Complex Chain [2-KA6E]"}),e.jsx(a,{label:"Complex Chain [2-KA6F]"}),e.jsx(a,{label:"Complex Chain [2-KA6G]"}),e.jsx(a,{label:"Complex Chain [2-KA6H]"}),e.jsx(a,{label:"Complex Chain [2-KA61]"}),e.jsx(a,{label:"Complex Chain [2-KA65]"}),e.jsx(a,{label:"Complex Chain [2-KA66]"}),e.jsx(a,{label:"Complex Chain [2-KA67]"}),e.jsx(a,{label:"Complex Chain [2-KA68]"}),e.jsx(a,{label:"Complex Chain [2-KA69]"})]})})}),e.jsx(a,{label:"P00003 [2-KA74]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA86]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA74-A]"})}),e.jsx(a,{label:"P00003 [2-KA98]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KA98-A]"})}),e.jsx(a,{label:"P00003 [2-KAAA]",defaultCollapsed:!0,children:e.jsx(a,{label:"P00003 [2-KAAA-A]"})})]})})]})]}),e.jsx(a,{label:"ITC_Main"})]})}function ft(){const{tree:s}=t.useContext(N);return s.length===0?e.jsx(lt,{}):e.jsx(dt,{tree:s})}const F=t.createContext({selected:!1,hidden:!1});function a(s){const n=t.useContext(H),r=t.useContext(F),l=t.useId(),[p,d]=t.useState(s.defaultCollapsed===void 0?!0:!s.defaultCollapsed),m=t.Children.count(s.children)>0,o=t.useMemo(()=>r.hidden?!0:n.hidden.includes(l),[l,n.hidden,r.hidden]),h=r.selected||l===n.selected,c=t.useCallback(u=>{n.setSelected(u?l:void 0)},[l,n]);return e.jsx(F.Provider,{value:t.useMemo(()=>({selected:h,hidden:o}),[o,h]),children:e.jsx(xe,{expanded:m?p:void 0,onExpandedChange:d,selected:h,onSelectedChange:c,icon:e.jsx(P,{href:R,style:{display:"inline"}}),label:s.label,actions:e.jsxs(e.Fragment,{children:[e.jsx(A,{className:i.action,icon:je,label:"Lock",variant:"ghost","aria-hidden":o}),r.hidden?e.jsx("span",{className:i.actionIcon,children:e.jsx(P,{href:Ce})}):e.jsx(A,{className:i.action,icon:o?ge:ve,label:o?"Show":"Hide",variant:"ghost",onClick:()=>{n.toggleHidden(l)}}),e.jsx(ht,{hidden:o})]}),children:p?s.children:void 0})})}function ht({hidden:s}){return e.jsxs(se,{children:[e.jsx(re,{className:i.action,"aria-hidden":s,render:e.jsx(A,{icon:_e,label:"More",variant:"ghost"})}),e.jsxs(le,{style:{minInlineSize:164},children:[e.jsx(g,{shortcuts:"⌘+C",children:"Copy"}),e.jsx(g,{shortcuts:"⌘+P",children:"Paste"}),e.jsx(g,{shortcuts:"⌘+V",children:"Copy/Paste as"}),e.jsx(g,{shortcuts:"⌘+M",children:"Move to"}),e.jsx(g,{shortcuts:"]",children:"Bring to front"}),e.jsx(g,{shortcuts:"[",children:"Send to back"}),e.jsx(g,{shortcuts:"⌘+G",children:"Group selection"}),e.jsx(g,{shortcuts:"⌘+U",children:"Ungroup"}),e.jsx(g,{shortcuts:"⌘+R",children:"Rename"}),e.jsx(g,{shortcuts:"⇧+⌘+V",children:"Show/hide"}),e.jsx(g,{shortcuts:"⇧+⌘+L",children:"Lock/unlock"}),e.jsx(g,{shortcuts:"I",children:"Isolate object"})]})]})}function pt(){const{selectedId:s}=t.useContext($),{itemCount:n,clearFilters:r}=t.useContext(N),{filtered:l,search:p,setSearch:d}=t.useContext(N),[m,o]=t.useState(!1),h=t.useRef(null),c=t.useRef(null),u=m?e.jsxs(e.Fragment,{children:[e.jsx(mt,{filters:s==="simple"?O.filters:[]}),e.jsx(A,{className:i.shiftIconRight,icon:we,label:"Close",variant:"ghost",onClick:()=>{var f;d(""),r(),k.flushSync(()=>o(!1)),(f=c.current)==null||f.focus()}})]}):e.jsx(A,{className:i.shiftIconRight,icon:K,label:"Search",variant:"ghost",onClick:()=>{var f;k.flushSync(()=>o(!0)),(f=h.current)==null||f.focus()},disabled:s!=="simple"});return e.jsxs("div",{className:i.subheader,children:[e.jsx(pe,{"aria-live":l?"polite":"off","aria-atomic":!0,children:n===void 0?"Showing all tree items":`Showing ${n} tree items`}),m?void 0:e.jsxs(ce,{className:i.tabList,tone:"accent",ref:c,children:[e.jsx(z,{id:"simple",children:"Simple"}),e.jsx(z,{id:"complex",children:"Complex"})]}),m?e.jsxs(ue,{className:i.searchInput,children:[e.jsx(fe,{href:K}),e.jsx(he,{placeholder:"Search",ref:h,onChange:f=>{d(f.target.value)},value:p})]}):null,e.jsx("div",{className:i.subheaderActions,children:u})]})}function mt({filters:s}){const n=t.useContext(N);return e.jsxs(Me,{placement:"top-start",children:[e.jsx(ae,{render:e.jsx(A,{icon:Se,label:"Filter",variant:"ghost",isActive:n.filters.length>0})}),e.jsxs(Ie,{className:i.popover,portal:!0,children:[e.jsxs("div",{className:i.filterHeader,children:[e.jsx(D,{variant:"body-sm",className:i.filter,children:"Filter"}),n.filters.length>0&&e.jsx(X,{variant:"ghost",onClick:()=>{n.clearFilters()},children:"Reset"})]}),e.jsx("div",{className:i.filters,children:s.map(r=>{const l=n.filters.includes(r);return e.jsxs(ie,{children:[e.jsx(ne,{onChange:()=>{n.toggleFilter(r)},checked:l}),e.jsxs(oe,{className:i.filterLabel,children:[e.jsx(P,{href:R}),r]})]},r)})})]})]})}function xt(s){const[n,r]=t.useState(!1),[l,p]=t.useState([]),[d,m]=t.useState(""),o=t.useCallback(_=>{p(w=>w.includes(_)?w.filter(I=>I!==_):[...w,_]),r(!0)},[]),h=t.useCallback(()=>{p([]),r(!0)},[]),{filteredTree:c,itemCount:u}=ct({tree:O,filters:l,search:d}),f=t.useDeferredValue(c),j=t.useCallback(_=>{m(_),r(!0)},[]);return e.jsx(t.Suspense,{fallback:"Loading...",children:e.jsx(N.Provider,{value:t.useMemo(()=>({filters:l,filtered:n,toggleFilter:o,clearFilters:h,search:d,setSearch:j,itemCount:u,tree:f}),[l,n,o,h,d,u,f,j]),children:s.children})})}function bt(s){const[n,r]=t.useState("simple");return e.jsx($.Provider,{value:t.useMemo(()=>({selectedId:n,setSelectedId:l=>{l!=="simple"&&l!=="complex"||r(l)}}),[n]),children:e.jsx(de,{setSelectedId:l=>{l!=="simple"&&l!=="complex"||r(l)},selectedId:n,children:s.children})})}const N=t.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},tree:[],itemCount:void 0}),$=t.createContext({selectedId:"simple",setSelectedId:()=>{}});export{Zt as default,Yt as meta};
