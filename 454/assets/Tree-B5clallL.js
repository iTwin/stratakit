import{p as o,b as c}from"./index-DDCMeoDP.js";import{ai as E,aj as g,ak as O,aq as B,E as V,F as G,G as H,J as q,be as z,av as W,bf as J,K as I,bg as U,ae as $,l as p,au as Q,d as b,bh as h,bi as X,o as j,I as Y,ac as A,b as Z,S as ee,bj as oe,O as te,bk as re}from"./~utils-CWeayUpd.js";import{c as se,a as ne,b as ae,e as ie,C as le}from"./VEVQD5MH-DmtzdXlX.js";import{L as ce,e as T,f as F,d as ue,D as de,a as me,b as fe}from"./DropdownMenu-gPAdBl_F.js";function xe(e={}){var r;const t=(r=e.store)==null?void 0:r.getState();return se(E(O({},e),{orientation:g(e.orientation,t==null?void 0:t.orientation,"horizontal"),focusLoop:g(e.focusLoop,t==null?void 0:t.focusLoop,!0)}))}function ve(e,r,t){return ne(e,r,t)}function he(e={}){const[r,t]=B(xe,e);return ve(r,t,e)}var pe="div",be=G(function(r){var t=r,{store:n,orientation:s,virtualFocus:m,focusLoop:i,rtl:x}=t,l=q(t,["store","orientation","virtualFocus","focusLoop","rtl"]);const w=z();n=n||w;const u=he({store:n,orientation:s,virtualFocus:m,focusLoop:i,rtl:x}),v=u.useState(d=>d.orientation==="both"?void 0:d.orientation);return l=W(l,d=>o.jsx(J,{value:u,children:d}),[u]),l=I({role:"toolbar","aria-orientation":v},l),l=ae(I({store:u},l)),l}),je=V(function(r){const t=be(r);return H(pe,t)});function we(e={}){const r=U(e);return o.jsx($,{value:r,children:e.children})}const y=c.createContext(void 0),Ae=p((e,r)=>{const{"aria-level":t,selected:n,expanded:s,icon:m,unstable_decorations:i,label:x,description:l,actions:w,error:u,onSelectedChange:v,onExpandedChange:d,onClick:S,onKeyDown:K,...L}=e,M=a=>{n!==void 0&&(a.stopPropagation(),v==null||v(!n))},R=a=>{a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||s!==void 0&&(a.key==="ArrowRight"||a.key==="ArrowLeft")&&(a.preventDefault(),d==null||d(a.key==="ArrowRight"))},P=c.useId(),D=c.useId(),C=c.useId(),k=typeof u=="string"?u:void 0,f=u?o.jsx(ee,{}):m,_=c.useMemo(()=>{const a=[];return l&&a.push(D),(i||f)&&a.push(C),k&&a.push(k),a.length>0?a.join(" "):void 0},[i,f,C,l,D,k]);return o.jsx(y.Provider,{value:c.useMemo(()=>({level:t,expanded:s,selected:n,error:u}),[t,s,n,u]),children:o.jsx(Q,{render:o.jsx(j,{...L}),onClick:h(S,M),onKeyDown:h(K,R),role:"treeitem","aria-expanded":s,"aria-selected":n,"aria-labelledby":P,"aria-describedby":_,"aria-level":t,className:b("-tree-item",e.className),ref:r,children:o.jsxs(ce,{"data-kiwi-expanded":s,"data-kiwi-selected":n,"data-kiwi-error":u?!0:void 0,className:"-tree-item-node",style:{"--tree-item-level":t},role:void 0,children:[o.jsxs(T,{children:[o.jsx(X,{align:l?"block":void 0,children:o.jsx(Pe,{onClick:()=>{s!==void 0&&(d==null||d(!s))}})}),f||i?o.jsx(j,{className:"-tree-item-decoration",id:C,render:c.isValidElement(f)?f:typeof f=="string"?o.jsx(Y,{href:f}):void 0,children:f?null:i}):null]}),o.jsx(F,{id:P,className:"-tree-item-content",children:x}),l?o.jsx(F,{id:D,className:"-tree-item-description",children:l}):void 0,o.jsx(T,{render:o.jsx(De,{children:w})})]})})})}),De=p((e,r)=>{const{children:t,...n}=e,s=c.Children.toArray(t).filter(Boolean),{error:m}=A(y),i=m?2:3;return o.jsxs(je,{...n,onClick:h(e.onClick,x=>x.stopPropagation()),onKeyDown:h(e.onKeyDown,x=>x.stopPropagation()),className:b("-tree-item-actions-container",e.className),focusLoop:!1,ref:r,children:[s.slice(0,i-1),s.length===i?s[i-1]:null,s.length>i?o.jsx(ke,{children:s.slice(i-1)}):null]})}),Ce=["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],N=c.createContext(!1);function ke({children:e}){const[r,t]=c.useState(!1),n=c.useRef(!1);return o.jsx(we,{placement:"right-start",children:o.jsxs(de,{open:r,setOpen:c.useCallback(s=>{s&&!n.current?t(!0):t(!1)},[]),children:[o.jsx(me,{onKeyDown:s=>{Ce.includes(s.key)&&(n.current=!0),queueMicrotask(()=>{n.current=!1})},render:o.jsx(ye,{label:"More",icon:o.jsx(re,{})})}),o.jsx(N.Provider,{value:!0,children:o.jsx(fe,{children:e})})]})})}const ye=p((e,r)=>{const{error:t}=A(y),{visible:n=t?!0:void 0,label:s,icon:m,...i}=e;return c.useContext(N)?o.jsx(ue,{...i,label:s,icon:m,ref:r}):o.jsx(Z,{label:s,icon:m,inert:n===!1?!0:void 0,...i,variant:"ghost",className:b("-tree-item-action",e.className),"data-kiwi-visible":n,ref:r})}),Pe=p((e,r)=>o.jsx(j.span,{"aria-hidden":"true",...e,onClick:h(e.onClick,t=>t.stopPropagation()),className:b("-button","-icon-button","-ghost-aligner","-tree-item-expander",e.className),"data-kiwi-variant":"ghost","data-kiwi-ghost-align":oe(),ref:r,children:o.jsx(te,{})})),Ne=p((e,r)=>{const t=ie({orientation:"vertical"});return o.jsx(j.div,{role:"tree",...e,render:o.jsx(le,{store:t}),className:b("-tree",e.className),ref:r,children:e.children})});export{Ne as T,Ae as a,ye as b};
