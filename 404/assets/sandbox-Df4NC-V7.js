import{w as te}from"./LMDWO4NN-CjgXNlKs.js";import{t as ne,a as n,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as F}from"./index-Dr3kRIaJ.js";import{B as se}from"./Button-B9Y9ZC-s.js";import{D as N}from"./DropdownMenu-DpMAdxSz.js";import{I as R}from"./Icon-CX4gdXQq.js";import{I as T}from"./IconButton-BmMZ1ZsY.js";import{S as re,H as ae}from"./Select-BBqm7zKp.js";import{T as O,a as le,b as G,c as ie}from"./Tabs-BFS4ujxm.js";import{T as K}from"./Text-Cx7XtJJm.js";import{T as oe,a as ce,b as de}from"./TextBox-CPMQAzDW.js";import{V as B}from"./VisuallyHidden-BAw8UVDZ.js";import{T as ue,a as pe,b as S}from"./Tree-Cj_iXh2C.js";import{p as w}from"./placeholder-CXRUGZqy.js";import{p as fe,l as me,h as he,s as H,d as be,f as xe}from"./visibility-hide-CnRYYOmE.js";import{s as Ce}from"./visibility-show-BuFNxMaa.js";import"./index-jyeBNHV5.js";import"./X5NMLKT6-CDC6uCly.js";import"./KUU7WJ55-Bv_iLcLW.js";import"./LVA2YJMS-lcYihvP6.js";import"./~utils-Cznddkjz.js";import"./XL7CSKGW-BDKOkq2I.js";import"./Kbd-IGlqBFtx.js";import"./~hooks-DB-rPL5q.js";import"./YV4JVR4I-CifQtgWA.js";import"./menu-item-checkbox-C1-bmorh.js";import"./VEVQD5MH-CXXi69GF.js";import"./C3IKGW5T-CjT0G4z0.js";import"./P2CTZE2T-pqZi26Yr.js";import"./RZ4GPYOB-Dm-kc06G.js";import"./MTZPJQMC-04A3chJ7.js";import"./VGCJ63VH-CqO0K7JM.js";import"./BYC7LY2E-BBeI2Mb2.js";import"./XX67R432-9wQSqITc.js";import"./AOQQTIBO-zCaoVn01.js";import"./P4IRICAX-BLxrYsfX.js";import"./ASMQKSDT-WAg7tTz_.js";import"./BOLVLGVE-Csp7McAR.js";import"./Tooltip-E4JgWVFK.js";import"./tooltip-anchor-DyPMqiDu.js";import"./Field-BEh7dFvd.js";import"./~utils.ListItem-eDYIQ-Su.js";import"./~utils-KZaJJO_T.js";import"./~hooks-CslsToVS.js";const ge="_appLayout_1yfwh_5",je="_header_1yfwh_22",Se="_platformBar_1yfwh_32",ye="_logo_1yfwh_38",_e="_tools_1yfwh_48",ve="_leftPanel_1yfwh_58",Ae="_panelHeader_1yfwh_70",Ie="_panelTitleWrapper_1yfwh_78",Pe="_panelCaption_1yfwh_82",Re="_shiftIconRight_1yfwh_86",we="_subheader_1yfwh_90",Me="_subheaderTitle_1yfwh_101",Ne="_searchInput_1yfwh_106",Te="_subheaderActions_1yfwh_110",Be="_tabList_1yfwh_114",ke="_emptyState_1yfwh_119",ze="_canvasWrapper_1yfwh_128",Le="_canvas_1yfwh_128",Ee="_splitter_1yfwh_165",Ke="_tabPanel_1yfwh_211",De="_tree_1yfwh_219",Fe="_slider_1yfwh_223",b={appLayout:ge,header:je,platformBar:Se,logo:ye,tools:_e,leftPanel:ve,panelHeader:Ae,panelTitleWrapper:Ie,panelCaption:Pe,shiftIconRight:Re,subheader:we,subheaderTitle:Me,searchInput:Ne,subheaderActions:Te,tabList:Be,emptyState:ke,canvasWrapper:ze,canvas:Le,splitter:Ee,tabPanel:Ke,tree:De,slider:Fe},$="Kiwi sandbox",Ht=()=>[{title:$}],Xt=te(function(){const[s,r]=ne(),a=s.get("tree")==="empty"?"epoch-2":"epoch-1",p=n.useCallback(i=>{r(m=>(i==="epoch-2"?m.set("tree","empty"):m.delete("tree"),m))},[r]),f=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),o=n.useId();return e.jsxs(Oe,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:b.panelHeader,children:[e.jsxs("div",{children:[e.jsx(B,{render:i=>e.jsx("label",{...i,htmlFor:o}),children:"Choose Model"}),e.jsx(re,{className:b.panelTitleWrapper,children:e.jsx(ae,{id:o,variant:"ghost",defaultValue:a,onChange:i=>p(i.target.value),children:Object.entries(f).map(([i,m])=>e.jsx("option",{value:i,children:m},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(B,{render:i=>e.jsx("h2",{...i}),children:f[a]}),e.jsx("p",{className:b.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{children:e.jsx(T,{className:b.shiftIconRight,icon:fe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Qe,{children:e.jsxs(qe,{children:[e.jsx(Ze,{}),e.jsx(O,{tabId:"simple",className:b.tabPanel,focusable:!1,children:a==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"simple"})}),e.jsx(O,{tabId:"complex",className:b.tabPanel,focusable:!1,children:a==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:b.header,children:[e.jsx("div",{className:b.logo,children:e.jsx(R,{href:w,size:"large"})}),e.jsx(K,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:$})]}),e.jsx("div",{className:b.platformBar,children:e.jsxs("div",{className:b.tools,children:[e.jsx(R,{href:w,size:"large"}),e.jsx(R,{href:w,size:"large"}),e.jsx(R,{href:w,size:"large"})]})}),e.jsx("div",{className:b.canvasWrapper,children:e.jsx("div",{className:b.canvas})})]})});function Oe(c){const{sliderProps:s,panelProps:r,panelMinSize:a,panelMaxSize:p,resizing:f}=Xe({minSize:{px:256,pct:20},maxSize:{pct:30}}),o=n.useId();return e.jsxs("div",{className:b.appLayout,style:{"--_panel-min-size":a,"--_panel-max-size":p},children:[e.jsx("div",{...r,className:b.leftPanel,style:{position:"relative",...r.style},children:c.panelContent}),e.jsxs("div",{className:b.splitter,"data-resizing":f?"true":void 0,children:[e.jsx(B,{render:i=>e.jsx("label",{...i,htmlFor:o,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:o,type:"range",className:b.slider,...s})]}),c.children]})}function X(){return e.jsxs("div",{className:b.emptyState,children:[e.jsx(K,{variant:"body-sm",children:"No layers"}),e.jsx(se,{children:"Create a layer"})]})}function Ge(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{variant:"body-sm",children:"No results found"})})}function He(c,s,r){return Math.min(Math.max(c,s),r)}function Xe(c){const{minSize:s,maxSize:r,onCollapse:a}=c,p=n.useId(),f=n.useRef(null),[o,i]=n.useState(void 0),[m,l]=n.useState(void 0),[u,h]=n.useState(void 0),[x,C]=n.useState(!1),[v,I]=n.useState(void 0),d=n.useMemo(()=>{if(s&&m)return Math.min(s.px,s.pct/100*m)},[s,m]),y=n.useMemo(()=>{if(d&&r&&m)return Math.max(d,r.pct/100*m)},[r,m,d]),_=n.useMemo(()=>{if(u==="smallest")return d??0;if(u==="largest")return y??0;if(o&&d&&y)return He(o,d,y)},[o,d,y,u]);n.useEffect(()=>{const g=f.current;if(!g)return;const j=g.parentElement;if(!j)return;const A=new ResizeObserver(()=>{const L=j.getBoundingClientRect(),E=g.getBoundingClientRect();l(L.width),i(E.width)});return A.observe(j),A.observe(g),()=>{A.disconnect()}},[]);const M=n.useCallback(g=>{const j=f.current;if(!j)return;const A=j.getBoundingClientRect();I(A.width+g),h(void 0),C(!0)},[]),z=n.useCallback(g=>{const j=f.current;if(!j)return;const A=j.parentElement;if(!A)return;const L=A.getBoundingClientRect(),E=g*(L.width*.005),ee=j.getBoundingClientRect();I(ee.width+E),h(void 0)},[]),Z=n.useCallback(()=>{f.current&&(I(void 0),C(!1))},[]),{moveableProps:P}=We({onMove:M,onMoveEnd:Z,onKeyMove:z}),J=n.useMemo(()=>({...P,onKeyDown:g=>{var j;if((j=P.onKeyDown)==null||j.call(P,g),!g.defaultPrevented)switch(g.key){case"Enter":g.preventDefault(),a==null||a();break;case"Home":g.preventDefault(),h("smallest");break;case"End":g.preventDefault(),h("largest");break}},onChange:g=>{if(x)return;const j=Number(g.target.value);I(j)},value:_===void 0?0:Math.floor(_),min:d===void 0?void 0:Math.floor(d),max:y===void 0?void 0:Math.floor(y)}),[P,_,d,y,a,x]),q=n.useMemo(()=>({style:{WebkitUserSelect:v===void 0?void 0:"none"},id:p,ref:f}),[p,v]),Q=d===void 0?void 0:`${Math.floor(d)}px`,Y=n.useMemo(()=>{if(v!==void 0&&r!==void 0&&u===void 0)return`min(${Math.floor(v)}px, ${r.pct}%)`;if(_!==void 0)return`${Math.floor(_)}px`},[r,v,_,u]);return{sliderProps:J,panelProps:q,panelMinSize:Q,panelMaxSize:Y,resizing:x}}function We(c){const{onMove:s,onMoveEnd:r,onKeyMove:a}=c,p=n.useRef(null),f=n.useRef(void 0),o=n.useRef(void 0),i=n.useCallback(()=>{o.current!==void 0&&(o.current=void 0,r==null||r())},[r]);return{moveableProps:n.useMemo(()=>({onPointerDown:l=>{if(l.button!==0||l.ctrlKey)return;const u=p.current;if(!u)return;const h=u.getBoundingClientRect(),x=l.clientX-h.left;o.current=x,l.preventDefault(),u.setPointerCapture(l.pointerId)},onPointerMove:l=>{const u=o.current;if(u===void 0)return;const h=p.current;if(!h)return;const x=h.getBoundingClientRect(),C=l.clientX-u-x.left;l.preventDefault(),s==null||s(C)},onPointerUp:i,onPointerCancel:i,onKeyDown:l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowLeft":l.preventDefault(),a==null||a(-1);break;case"ArrowRight":l.preventDefault(),a==null||a(1);break}},ref:l=>{var h;if(p.current=l,(h=f.current)==null||h.call(f),f.current=void 0,!l)return;const u=x=>{x.preventDefault()};l.addEventListener("touchstart",u),f.current=()=>{l.removeEventListener("touchstart",u)}}}),[a,s,i])}}const t=(()=>{let c=0;return s=>({id:`${c++}`,label:`Tree Item ${c}`,items:[],expanded:!0,...s})})(),V={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},$e={filters:[],items:[t({label:"ITC_Master",items:[t({label:"002_Substation",expanded:!1,items:[t({label:"002_Substation_A"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-COLS",description:"Columns",expanded:!1,items:[t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-JOIS-ENVL",description:"Bar Joist: Envelopes"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-SLAB-CONC",description:"Slabs: Concrete"}),t({label:"003-BENSTR-ZO-LG2-M3-S-00001 - S-BEAM-PURL",description:"Columns: concrete"}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A"})]}),t({label:"007-aa_master.dgn",items:[t({label:"A-CLNG-LITE",expanded:!1,items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",items:[t({label:"A-DOOR-2D-PLAN",items:[t({label:"P00003 [2-KA62]",items:[t({label:"Cell [2-KA63]",items:[t({label:"Cell [2-KA64]",items:[t({label:"Complex Chain [2-KA6A]"}),t({label:"Complex Chain [2-KA6B]"}),t({label:"Complex Chain [2-KA6C]"}),t({label:"Complex Chain [2-KA6D]"}),t({label:"Complex Chain [2-KA6E]"}),t({label:"Complex Chain [2-KA6F]"}),t({label:"Complex Chain [2-KA6G]"}),t({label:"Complex Chain [2-KA6H]"}),t({label:"Complex Chain [2-KA61]"}),t({label:"Complex Chain [2-KA65]"}),t({label:"Complex Chain [2-KA66]"}),t({label:"Complex Chain [2-KA67]"}),t({label:"Complex Chain [2-KA68]"}),t({label:"Complex Chain [2-KA69]"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA86]",expanded:!1,items:[t({label:"P00003 [2-KA74-A]"})]}),t({label:"P00003 [2-KA98]",expanded:!1,items:[t({label:"P00003 [2-KA98-A]"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,items:[t({label:"P00003 [2-KAAA-A]"})]})]})]})]})]})]};function Ve({items:c,filters:s,search:r}){const a=n.useMemo(()=>s.length===0?c:c.reduce((o,i)=>(!i.type||!s.includes(i.type)||o.push(i),o),[]),[c,s]),p=n.useMemo(()=>{function o(i){return i.reduce((m,l)=>{const u=o(l.items??[]);return(l.label.toLowerCase().includes(r.toLowerCase())||u.length>0)&&m.push({...l,items:u}),m},[])}return r===""?a:o(a)},[a,r]),f=n.useMemo(()=>{if(s.length===0&&r==="")return;function o(i){return i.reduce((m,l)=>{const u=l.items?o(l.items):0;return m+1+u},0)}return o(p)},[p,s,r]);return{filteredTree:p,itemCount:f}}function Ue(c,s,r){return n.useMemo(()=>{function a(p,f,o,i,m){const l=[];let u=1;for(const h of p){const x=h.id===s||i,C=r.includes(h.id)||m;l.push({...h,level:o,parentItem:f,selected:x,hidden:C,parentHidden:m,position:u++,size:p.length}),h.expanded&&l.push(...a(h.items,h,o+1,x,C))}return l}return a(c,void 0,1,!1,!1)},[c,s,r])}function U(c,s){for(const r of c){if(r.id===s)return r;const a=U(r.items,s);if(a)return a}}function W({tree:c}){const{selectedId:s}=n.useContext(D),{filters:r,search:a,setItemCount:p}=n.useContext(k),[f,o]=n.useState(),[i,m]=n.useState([]),l=n.useCallback(d=>{m(y=>y.includes(d)?y.filter(_=>_!==d):[...y,d])},[]),[u,h]=n.useState(()=>c==="complex"?$e.items:V.items),{filteredTree:x,itemCount:C}=Ve({items:u,filters:r,search:a}),v=Ue(x,f,i);n.useEffect(()=>{c===s&&p(C)},[c,s,p,C]);const I=n.useDeferredValue(v);return I.length===0?e.jsx(Ge,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(ue,{className:b.tree,children:I.map(d=>e.jsx(pe,{label:d.label,description:d.description,"aria-level":d.level,"aria-posinset":d.position,"aria-setsize":d.size,selected:d.selected,onSelectedChange:()=>{if(f===d.id){o(void 0);return}o(d.id)},expanded:d.items.length===0?void 0:d.expanded,onExpandedChange:y=>{h(_=>{const M=U(_,d.id);if(!M)return _;const z=[..._];return M.expanded=y,z})},icon:e.jsx(R,{href:w,style:{display:"inline"}}),actions:[e.jsx(S,{icon:me,label:"Lock",visible:d.hidden?!1:void 0},"lock"),e.jsx(S,{icon:d.hidden?he:Ce,label:d.hidden?"Show":"Hide",visible:d.hidden?!0:void 0,onClick:()=>{l(d.id)}},"visibility"),e.jsx(S,{label:"Copy"},"copy"),e.jsx(S,{label:"Paste"},"paste"),e.jsx(S,{label:"Copy/Paste as"},"copy-paste"),e.jsx(S,{label:"Move to"},"move"),e.jsx(S,{label:"Bring to front"},"bring-to-front"),e.jsx(S,{label:"Send to back"},"send-to-back"),e.jsx(S,{label:"Group selection"},"group"),e.jsx(S,{label:"Ungroup"},"ungroup"),e.jsx(S,{label:"Rename"},"rename"),e.jsx(S,{label:"Show/hide"},"show-hide"),e.jsx(S,{label:"Lock/unlock"},"lock-unlock"),e.jsx(S,{label:"Isolate object"},"isolate")]},d.id))})})}function Ze(){const{selectedId:c}=n.useContext(D),{itemCount:s,filtered:r,clearFilters:a,search:p,setSearch:f}=n.useContext(k),[o,i]=n.useState(!1),m=n.useRef(null),l=n.useRef(null),u=r||!!p,h=o?e.jsxs(e.Fragment,{children:[e.jsx(Je,{filters:c==="simple"?V.filters:[]}),e.jsx(T,{className:b.shiftIconRight,icon:be,label:"Close",variant:"ghost",onClick:()=>{var C;F.flushSync(()=>i(!1)),(C=l.current)==null||C.focus()}})]}):e.jsx(T,{className:b.shiftIconRight,icon:H,label:"Search",dot:u?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var C;F.flushSync(()=>i(!0)),(C=m.current)==null||C.focus()}}),x=n.useMemo(()=>{if(r)return s===void 0?"Showing all tree items":`Showing ${s} tree items`},[r,s]);return e.jsxs("div",{className:b.subheader,children:[e.jsx(B,{"aria-live":"polite","aria-atomic":!0,children:x}),o?void 0:e.jsxs(le,{className:b.tabList,tone:"accent",ref:l,children:[e.jsx(G,{id:"simple",children:"Simple"}),e.jsx(G,{id:"complex",children:"Complex"})]}),o?e.jsxs(oe,{className:b.searchInput,children:[e.jsx(ce,{href:H}),e.jsx(de,{placeholder:"Search",ref:m,onChange:C=>{f(C.target.value)},value:p})]}):null,e.jsx("div",{className:b.subheaderActions,children:h})]})}function Je({filters:c}){const s=n.useContext(k),r=s.filters.length>0;return e.jsxs(N.Root,{children:[e.jsx(N.Button,{render:e.jsx(T,{icon:xe,label:"Filter",dot:r?"Some filters applied":void 0,variant:"ghost",disabled:c.length===0})}),e.jsx(N.Content,{children:c.map(a=>{const p=s.filters.includes(a);return e.jsx(N.CheckboxItem,{name:a,label:a,checked:p,onChange:()=>{s.toggleFilter(a)}},a)})})]})}function qe(c){const[s,r]=n.useState(!1),[a,p]=n.useState([]),[f,o]=n.useState(""),[i,m]=n.useState(void 0),l=n.useCallback(x=>{const C=a.includes(x)?a.filter(v=>v!==x):[...a,x];p(C),r(C.length>0)},[a]),u=n.useCallback(()=>{p([]),r(!1)},[]),h=n.useCallback(x=>{o(x),r(!!x)},[]);return e.jsx(k.Provider,{value:n.useMemo(()=>({filters:a,filtered:s,toggleFilter:l,clearFilters:u,search:f,setSearch:h,itemCount:i,setItemCount:m}),[a,s,l,u,f,h,i]),children:c.children})}function Qe(c){const[s,r]=n.useState(void 0);return e.jsx(D.Provider,{value:n.useMemo(()=>({selectedId:s??""}),[s]),children:e.jsx(ie,{setSelectedId:r,selectedId:s,children:c.children})})}const k=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),D=n.createContext({selectedId:""});export{Xt as default,Ht as meta};
