import{w as te}from"./LMDWO4NN-CjgXNlKs.js";import{t as ne,a as n,n as e}from"./chunk-K6AXKMTT-B_QCnNdX.js";import{a as F}from"./index-Dr3kRIaJ.js";import{B as re}from"./Button-B9Y9ZC-s.js";import{D as w}from"./DropdownMenu-CzzHjdoJ.js";import{I as R}from"./Icon-CX4gdXQq.js";import{I as B}from"./IconButton-BAY76b5F.js";import{S as le,H as se}from"./Select-BBqm7zKp.js";import{T as O,a as oe,b as G,c as ae}from"./Tabs-DcKaC6-L.js";import{T as K}from"./Text-Cx7XtJJm.js";import{T as ie,a as ce,b as de}from"./TextBox-CPMQAzDW.js";import{V as N}from"./VisuallyHidden-BAw8UVDZ.js";import{T as ue,a as pe,b as S}from"./Tree-mX2DEjl9.js";import{p as M}from"./placeholder-CXRUGZqy.js";import{p as fe,l as me,h as he,s as H,d as be,f as xe}from"./visibility-hide-CnRYYOmE.js";import{s as je}from"./visibility-show-BuFNxMaa.js";import"./index-jyeBNHV5.js";import"./X5NMLKT6-CDC6uCly.js";import"./KUU7WJ55-Bv_iLcLW.js";import"./LVA2YJMS-lcYihvP6.js";import"./~utils-Cznddkjz.js";import"./XL7CSKGW-BDKOkq2I.js";import"./Kbd-IGlqBFtx.js";import"./~hooks-DB-rPL5q.js";import"./YV4JVR4I-CifQtgWA.js";import"./menu-item-checkbox-ClhjdEFa.js";import"./VEVQD5MH-DPEcLm6H.js";import"./C3IKGW5T-CjT0G4z0.js";import"./P2CTZE2T-pqZi26Yr.js";import"./RZ4GPYOB-Dm-kc06G.js";import"./MTZPJQMC-DYCKLWR4.js";import"./VGCJ63VH-Bq11HgUV.js";import"./BYC7LY2E-BOJhOMwF.js";import"./XX67R432-9wQSqITc.js";import"./AOQQTIBO-zCaoVn01.js";import"./P4IRICAX-CvISAvhr.js";import"./ASMQKSDT-WAg7tTz_.js";import"./BOLVLGVE-Csp7McAR.js";import"./Tooltip-CJH9TUfu.js";import"./tooltip-anchor-CaTNdshp.js";import"./Field-BEh7dFvd.js";import"./~utils.ListItem-C641_AUU.js";import"./~utils-KZaJJO_T.js";import"./~hooks-CslsToVS.js";const ge="_appLayout_832ej_5",Ce="_header_832ej_22",Se="_platformBar_832ej_32",_e="_logo_832ej_38",ve="_tools_832ej_48",ye="_leftPanel_832ej_58",Ae="_panelHeader_832ej_70",Ie="_panelTitleWrapper_832ej_78",Pe="_panelCaption_832ej_82",Re="_shiftIconRight_832ej_86",Me="_subheader_832ej_90",Ne="_subheaderTitle_832ej_101",Te="_searchInput_832ej_106",we="_subheaderActions_832ej_110",Be="_tabList_832ej_114",ke="_emptyState_832ej_119",ze="_canvasWrapper_832ej_128",Le="_canvas_832ej_128",Ee="_splitter_832ej_165",Ke="_tabPanel_832ej_211",De="_tree_832ej_219",Fe="_slider_832ej_223",Oe="_colorSwatch_832ej_232",b={appLayout:ge,header:Ce,platformBar:Se,logo:_e,tools:ve,leftPanel:ye,panelHeader:Ae,panelTitleWrapper:Ie,panelCaption:Pe,shiftIconRight:Re,subheader:Me,subheaderTitle:Ne,searchInput:Te,subheaderActions:we,tabList:Be,emptyState:ke,canvasWrapper:ze,canvas:Le,splitter:Ee,tabPanel:Ke,tree:De,slider:Fe,colorSwatch:Oe},$="Kiwi sandbox",Wt=()=>[{title:$}],$t=te(function(){const[r,l]=ne(),s=r.get("tree")==="empty"?"epoch-2":"epoch-1",p=n.useCallback(i=>{l(m=>(i==="epoch-2"?m.set("tree","empty"):m.delete("tree"),m))},[l]),f=n.useMemo(()=>({"epoch-1":"Epoch System iModel 1","epoch-2":"Epoch System iModel 2"}),[]),d=n.useId();return e.jsxs(Ge,{panelContent:e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:b.panelHeader,children:[e.jsxs("div",{children:[e.jsx(N,{render:i=>e.jsx("label",{...i,htmlFor:d}),children:"Choose Model"}),e.jsx(le,{className:b.panelTitleWrapper,children:e.jsx(se,{id:d,variant:"ghost",defaultValue:s,onChange:i=>p(i.target.value),children:Object.entries(f).map(([i,m])=>e.jsx("option",{value:i,children:m},i))})}),e.jsxs("hgroup",{role:"group",children:[e.jsx(N,{render:i=>e.jsx("h2",{...i}),children:f[s]}),e.jsx("p",{className:b.panelCaption,children:"2024 Refresh"})]})]}),e.jsx("div",{children:e.jsx(B,{className:b.shiftIconRight,icon:fe,label:"Dock panel",variant:"ghost",disabled:!0})})]}),e.jsx(Ye,{children:e.jsxs(Qe,{children:[e.jsx(Je,{}),e.jsx(O,{tabId:"simple",className:b.tabPanel,focusable:!1,children:s==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"simple"})}),e.jsx(O,{tabId:"complex",className:b.tabPanel,focusable:!1,children:s==="epoch-2"?e.jsx(X,{}):e.jsx(W,{tree:"complex"})})]})})]}),children:[e.jsxs("header",{className:b.header,children:[e.jsx("div",{className:b.logo,children:e.jsx(R,{href:M,size:"large"})}),e.jsx(K,{render:i=>e.jsx("h1",{...i}),variant:"body-md",children:$})]}),e.jsx("div",{className:b.platformBar,children:e.jsxs("div",{className:b.tools,children:[e.jsx(R,{href:M,size:"large"}),e.jsx(R,{href:M,size:"large"}),e.jsx(R,{href:M,size:"large"})]})}),e.jsx("div",{className:b.canvasWrapper,children:e.jsx("div",{className:b.canvas})})]})});function Ge(a){const{sliderProps:r,panelProps:l,panelMinSize:s,panelMaxSize:p,resizing:f}=We({minSize:{px:256,pct:20},maxSize:{pct:30}}),d=n.useId();return e.jsxs("div",{className:b.appLayout,style:{"--_panel-min-size":s,"--_panel-max-size":p},children:[e.jsx("div",{...l,className:b.leftPanel,style:{position:"relative",...l.style},children:a.panelContent}),e.jsxs("div",{className:b.splitter,"data-resizing":f?"true":void 0,children:[e.jsx(N,{render:i=>e.jsx("label",{...i,htmlFor:d,children:"Resize layers panel"}),children:"Resize layers panel"}),e.jsx("input",{id:d,type:"range",className:b.slider,...r})]}),a.children]})}function X(){return e.jsxs("div",{className:b.emptyState,children:[e.jsx(K,{variant:"body-sm",children:"No layers"}),e.jsx(re,{children:"Create a layer"})]})}function He(){return e.jsx("div",{style:{textAlign:"center"},children:e.jsx(K,{variant:"body-sm",children:"No results found"})})}function Xe(a,r,l){return Math.min(Math.max(a,r),l)}function We(a){const{minSize:r,maxSize:l,onCollapse:s}=a,p=n.useId(),f=n.useRef(null),[d,i]=n.useState(void 0),[m,o]=n.useState(void 0),[u,h]=n.useState(void 0),[x,j]=n.useState(!1),[y,I]=n.useState(void 0),c=n.useMemo(()=>{if(r&&m)return Math.min(r.px,r.pct/100*m)},[r,m]),_=n.useMemo(()=>{if(c&&l&&m)return Math.max(c,l.pct/100*m)},[l,m,c]),v=n.useMemo(()=>{if(u==="smallest")return c??0;if(u==="largest")return _??0;if(d&&c&&_)return Xe(d,c,_)},[d,c,_,u]);n.useEffect(()=>{const g=f.current;if(!g)return;const C=g.parentElement;if(!C)return;const A=new ResizeObserver(()=>{const L=C.getBoundingClientRect(),E=g.getBoundingClientRect();o(L.width),i(E.width)});return A.observe(C),A.observe(g),()=>{A.disconnect()}},[]);const T=n.useCallback(g=>{const C=f.current;if(!C)return;const A=C.getBoundingClientRect();I(A.width+g),h(void 0),j(!0)},[]),z=n.useCallback(g=>{const C=f.current;if(!C)return;const A=C.parentElement;if(!A)return;const L=A.getBoundingClientRect(),E=g*(L.width*.005),ee=C.getBoundingClientRect();I(ee.width+E),h(void 0)},[]),Z=n.useCallback(()=>{f.current&&(I(void 0),j(!1))},[]),{moveableProps:P}=$e({onMove:T,onMoveEnd:Z,onKeyMove:z}),J=n.useMemo(()=>({...P,onKeyDown:g=>{var C;if((C=P.onKeyDown)==null||C.call(P,g),!g.defaultPrevented)switch(g.key){case"Enter":g.preventDefault(),s==null||s();break;case"Home":g.preventDefault(),h("smallest");break;case"End":g.preventDefault(),h("largest");break}},onChange:g=>{if(x)return;const C=Number(g.target.value);I(C)},value:v===void 0?0:Math.floor(v),min:c===void 0?void 0:Math.floor(c),max:_===void 0?void 0:Math.floor(_)}),[P,v,c,_,s,x]),q=n.useMemo(()=>({style:{WebkitUserSelect:y===void 0?void 0:"none"},id:p,ref:f}),[p,y]),Q=c===void 0?void 0:`${Math.floor(c)}px`,Y=n.useMemo(()=>{if(y!==void 0&&l!==void 0&&u===void 0)return`min(${Math.floor(y)}px, ${l.pct}%)`;if(v!==void 0)return`${Math.floor(v)}px`},[l,y,v,u]);return{sliderProps:J,panelProps:q,panelMinSize:Q,panelMaxSize:Y,resizing:x}}function $e(a){const{onMove:r,onMoveEnd:l,onKeyMove:s}=a,p=n.useRef(null),f=n.useRef(void 0),d=n.useRef(void 0),i=n.useCallback(()=>{d.current!==void 0&&(d.current=void 0,l==null||l())},[l]);return{moveableProps:n.useMemo(()=>({onPointerDown:o=>{if(o.button!==0||o.ctrlKey)return;const u=p.current;if(!u)return;const h=u.getBoundingClientRect(),x=o.clientX-h.left;d.current=x,o.preventDefault(),u.setPointerCapture(o.pointerId)},onPointerMove:o=>{const u=d.current;if(u===void 0)return;const h=p.current;if(!h)return;const x=h.getBoundingClientRect(),j=o.clientX-u-x.left;o.preventDefault(),r==null||r(j)},onPointerUp:i,onPointerCancel:i,onKeyDown:o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowLeft":o.preventDefault(),s==null||s(-1);break;case"ArrowRight":o.preventDefault(),s==null||s(1);break}},ref:o=>{var h;if(p.current=o,(h=f.current)==null||h.call(f),f.current=void 0,!o)return;const u=x=>{x.preventDefault()};o.addEventListener("touchstart",u),f.current=()=>{o.removeEventListener("touchstart",u)}}}),[s,r,i])}}const t=(()=>{let a=0;return r=>({id:`${a++}`,label:`Tree Item ${a}`,items:[],expanded:!0,...r})})(),V={filters:["Guides","Other","Road","Parking lot","Building","Sewer","Project boundary","Map"],items:[t({label:"Guides",type:"Guides",items:[t({label:"Tree",items:[t({label:"Guide 4"}),t({label:"Guide 3"}),t({label:"Guide 2"}),t({label:"Guide 1"})]})]}),t({label:"Other",type:"Other",items:[t({label:"Object 2",items:[t({label:"Path 3"})]}),t({label:"Object 1"})]}),t({label:"Road",type:"Road",items:[t({label:"Parking lot access"}),t({label:"Site access"})]}),t({label:"Parking lot",type:"Parking lot",items:[t({label:"Parking area",items:[t({label:"Bay point 2"}),t({label:"Bay point 1"}),t({label:"Space point 1"}),t({label:"Path 6"})]})]}),t({label:"Building",type:"Building",items:[t({label:"Building area",items:[t({label:"Path 5"})]})]}),t({label:"Sewer",type:"Building",items:[t({label:"Run off pipe",items:[t({label:"Path 4"})]})]}),t({label:"Project boundary",type:"Project boundary",items:[t({label:"Property area",items:[t({label:"Path 1"})]})]}),t({label:"Map",type:"Map",items:[t({label:"Location",items:[t({label:"Terrain"})]})]})]},Ve={filters:[],items:[t({label:"ITC_Master",color:"purple",items:[t({label:"002_Substation",expanded:!1,color:"red",items:[t({label:"002_Substation_A"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-COLS",description:"Columns",expanded:!1,color:"yellow",items:[t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-JOIS-ENVL",description:"Bar Joist: Envelopes",color:"teal"})]}),t({label:"003-BENARCH-ZO-RF-M3-A-00001 - S-SLAB-CONC",description:"Slabs: Concrete",color:"green"}),t({label:"003-BENSTR-ZO-LG2-M3-S-00001 - S-BEAM-PURL",description:"Columns: concrete",color:"yellow"}),t({label:"005-BENROAD-00-XX-M3-G-00002.dgn",expanded:!1,color:"yellow",items:[t({label:"005-BENROAD-00-XX-M3-G-00002-A",color:"red"})]}),t({label:"005-BENROAD-00-XX-M3-G-00003.dgn",color:"yellow",expanded:!1,items:[t({label:"005-BENROAD-00-XX-M3-G-00003-A",color:"blue"})]}),t({label:"007-aa_master.dgn",color:"green",items:[t({label:"A-CLNG-LITE",expanded:!1,color:"blue",items:[t({label:"A-CLNG-LITE-A"})]}),t({label:"A-CLNG-TILE",color:"gray",items:[t({label:"A-DOOR-2D-PLAN",color:"green",items:[t({label:"P00003 [2-KA62]",color:"yellow",items:[t({label:"Cell [2-KA63]",color:"teal",items:[t({label:"Cell [2-KA64]",color:"red",items:[t({label:"Complex Chain [2-KA6A]",color:"purple"}),t({label:"Complex Chain [2-KA6B]",color:"purple"}),t({label:"Complex Chain [2-KA6C]",color:"purple"}),t({label:"Complex Chain [2-KA6D]",color:"purple"}),t({label:"Complex Chain [2-KA6E]",color:"purple"}),t({label:"Complex Chain [2-KA6F]",color:"purple"}),t({label:"Complex Chain [2-KA6G]",color:"purple"}),t({label:"Complex Chain [2-KA6H]",color:"purple"}),t({label:"Complex Chain [2-KA61]",color:"purple"}),t({label:"Complex Chain [2-KA65]",color:"purple"}),t({label:"Complex Chain [2-KA66]",color:"purple"}),t({label:"Complex Chain [2-KA67]",color:"purple"}),t({label:"Complex Chain [2-KA68]",color:"purple"}),t({label:"Complex Chain [2-KA69]",color:"purple"})]})]})]}),t({label:"P00003 [2-KA74]",expanded:!1,color:"yellow",items:[t({label:"P00003 [2-KA74-A]",color:"green"})]}),t({label:"P00003 [2-KA86]",expanded:!1,color:"teal",items:[t({label:"P00003 [2-KA74-A]",color:"blue"})]}),t({label:"P00003 [2-KA98]",expanded:!1,color:"red",items:[t({label:"P00003 [2-KA98-A]",color:"purple"})]}),t({label:"P00003 [2-KAAA]",expanded:!1,color:"teal",items:[t({label:"P00003 [2-KAAA-A]",color:"gray"})]})]})]})]})]})]};function Ue({items:a,filters:r,search:l}){const s=n.useMemo(()=>r.length===0?a:a.reduce((d,i)=>(!i.type||!r.includes(i.type)||d.push(i),d),[]),[a,r]),p=n.useMemo(()=>{function d(i){return i.reduce((m,o)=>{const u=d(o.items??[]);return(o.label.toLowerCase().includes(l.toLowerCase())||u.length>0)&&m.push({...o,items:u}),m},[])}return l===""?s:d(s)},[s,l]),f=n.useMemo(()=>{if(r.length===0&&l==="")return;function d(i){return i.reduce((m,o)=>{const u=o.items?d(o.items):0;return m+1+u},0)}return d(p)},[p,r,l]);return{filteredTree:p,itemCount:f}}function Ze(a,r,l){return n.useMemo(()=>{function s(p,f,d,i,m){const o=[];let u=1;for(const h of p){const x=h.id===r||i,j=l.includes(h.id)||m;o.push({...h,level:d,parentItem:f,selected:x,hidden:j,parentHidden:m,position:u++,size:p.length}),h.expanded&&o.push(...s(h.items,h,d+1,x,j))}return o}return s(a,void 0,1,!1,!1)},[a,r,l])}function U(a,r){for(const l of a){if(l.id===r)return l;const s=U(l.items,r);if(s)return s}}function W({tree:a}){const{selectedId:r}=n.useContext(D),{filters:l,search:s,setItemCount:p}=n.useContext(k),[f,d]=n.useState(),[i,m]=n.useState([]),o=n.useCallback(c=>{m(_=>_.includes(c)?_.filter(v=>v!==c):[..._,c])},[]),[u,h]=n.useState(()=>a==="complex"?Ve.items:V.items),{filteredTree:x,itemCount:j}=Ue({items:u,filters:l,search:s}),y=Ze(x,f,i);n.useEffect(()=>{a===r&&p(j)},[a,r,p,j]);const I=n.useDeferredValue(y);return I.length===0?e.jsx(He,{}):e.jsx(n.Suspense,{fallback:"Loading...",children:e.jsx(ue,{className:b.tree,children:I.map(c=>e.jsx(pe,{label:c.label,description:c.description,"aria-level":c.level,"aria-posinset":c.position,"aria-setsize":c.size,selected:c.selected,onSelectedChange:()=>{if(f===c.id){d(void 0);return}d(c.id)},expanded:c.items.length===0?void 0:c.expanded,onExpandedChange:_=>{h(v=>{const T=U(v,c.id);if(!T)return v;const z=[...v];return T.expanded=_,z})},decorations:e.jsxs(e.Fragment,{children:[c.color?e.jsx(et,{color:c.color,alt:c.color}):null,e.jsx(R,{href:M})]}),actions:[e.jsx(S,{icon:me,label:"Lock",visible:c.hidden?!1:void 0},"lock"),e.jsx(S,{icon:c.hidden?he:je,label:c.hidden?"Show":"Hide",visible:c.hidden?!0:void 0,onClick:()=>{o(c.id)}},"visibility"),e.jsx(S,{label:"Copy"},"copy"),e.jsx(S,{label:"Paste"},"paste"),e.jsx(S,{label:"Copy/Paste as"},"copy-paste"),e.jsx(S,{label:"Move to"},"move"),e.jsx(S,{label:"Bring to front"},"bring-to-front"),e.jsx(S,{label:"Send to back"},"send-to-back"),e.jsx(S,{label:"Group selection"},"group"),e.jsx(S,{label:"Ungroup"},"ungroup"),e.jsx(S,{label:"Rename"},"rename"),e.jsx(S,{label:"Show/hide"},"show-hide"),e.jsx(S,{label:"Lock/unlock"},"lock-unlock"),e.jsx(S,{label:"Isolate object"},"isolate")]},c.id))})})}function Je(){const{selectedId:a}=n.useContext(D),{itemCount:r,filtered:l,clearFilters:s,search:p,setSearch:f}=n.useContext(k),[d,i]=n.useState(!1),m=n.useRef(null),o=n.useRef(null),u=l||!!p,h=d?e.jsxs(e.Fragment,{children:[e.jsx(qe,{filters:a==="simple"?V.filters:[]}),e.jsx(B,{className:b.shiftIconRight,icon:be,label:"Close",variant:"ghost",onClick:()=>{var j;F.flushSync(()=>i(!1)),(j=o.current)==null||j.focus()}})]}):e.jsx(B,{className:b.shiftIconRight,icon:H,label:"Search",dot:u?"Some filters or search applied":void 0,variant:"ghost",onClick:()=>{var j;F.flushSync(()=>i(!0)),(j=m.current)==null||j.focus()}}),x=n.useMemo(()=>{if(l)return r===void 0?"Showing all tree items":`Showing ${r} tree items`},[l,r]);return e.jsxs("div",{className:b.subheader,children:[e.jsx(N,{"aria-live":"polite","aria-atomic":!0,children:x}),d?void 0:e.jsxs(oe,{className:b.tabList,tone:"accent",ref:o,children:[e.jsx(G,{id:"simple",children:"Simple"}),e.jsx(G,{id:"complex",children:"Complex"})]}),d?e.jsxs(ie,{className:b.searchInput,children:[e.jsx(ce,{href:H}),e.jsx(de,{placeholder:"Search",ref:m,onChange:j=>{f(j.target.value)},value:p})]}):null,e.jsx("div",{className:b.subheaderActions,children:h})]})}function qe({filters:a}){const r=n.useContext(k),l=r.filters.length>0;return e.jsxs(w.Root,{children:[e.jsx(w.Button,{render:e.jsx(B,{icon:xe,label:"Filter",dot:l?"Some filters applied":void 0,variant:"ghost",disabled:a.length===0})}),e.jsx(w.Content,{children:a.map(s=>{const p=r.filters.includes(s);return e.jsx(w.CheckboxItem,{name:s,label:s,checked:p,onChange:()=>{r.toggleFilter(s)}},s)})})]})}function Qe(a){const[r,l]=n.useState(!1),[s,p]=n.useState([]),[f,d]=n.useState(""),[i,m]=n.useState(void 0),o=n.useCallback(x=>{const j=s.includes(x)?s.filter(y=>y!==x):[...s,x];p(j),l(j.length>0)},[s]),u=n.useCallback(()=>{p([]),l(!1)},[]),h=n.useCallback(x=>{d(x),l(!!x)},[]);return e.jsx(k.Provider,{value:n.useMemo(()=>({filters:s,filtered:r,toggleFilter:o,clearFilters:u,search:f,setSearch:h,itemCount:i,setItemCount:m}),[s,r,o,u,f,h,i]),children:a.children})}function Ye(a){const[r,l]=n.useState(void 0);return e.jsx(D.Provider,{value:n.useMemo(()=>({selectedId:r??""}),[r]),children:e.jsx(ae,{setSelectedId:l,selectedId:r,children:a.children})})}const k=n.createContext({filters:[],filtered:!1,toggleFilter:()=>{},clearFilters:()=>{},search:"",setSearch:()=>{},itemCount:void 0,setItemCount:()=>{}}),D=n.createContext({selectedId:""});function et(a){return e.jsx("div",{className:b.colorSwatch,style:{"--_color":`var(--_color--${a.color})`},children:a.alt?e.jsx(N,{children:a.alt}):null})}export{$t as default,Wt as meta};
