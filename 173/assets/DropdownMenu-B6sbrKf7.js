import{a as y,n as C}from"./chunk-D52XG6IA-BPj3SxYk.js";import{c as re}from"./index-LDMScfjX.js";import{f as Q,s as me}from"./~utils-DlLScLBX.js";import{R as ie}from"./XL7CSKGW-DDU26wbd.js";import{B as Ne}from"./Button-BOMamjQ5.js";import{K as je}from"./Kbd-CTB4YTDy.js";import{D as Ke}from"./Icon-DEgQPAjc.js";import{u as he,f as Re,C as ge,a as xe,b as Be}from"./P2CTZE2T-BT-mtSx2.js";import{H as Ve,a as $e,c as We,u as ze,b as Ue,d as qe,e as Ge}from"./BYC7LY2E-9GYEBff6.js";import{c as N,_ as H,e as w,u as X,b as v,f as j,d as K,i as V,g as Pe,h as Je,j as ue,k as L,r as Se,m as Ce,l as Qe,n as Xe,o as Me,s as Ye,p as Ze,q as et,t as tt,v as le,x as ye,y as nt,z as J,A as U,B,C as rt,D as ot,E as we,F as st,G as ut,H as at,I as Oe,J as it,K as lt}from"./LMDWO4NN-AdQVI40z.js";import{c as ct,u as dt,a as ft,b as mt}from"./ITI7HKP4-CKgdTtAx.js";import{m as pt,o as vt,p as bt,s as pe,a as ve,c as ht,u as gt,b as xt,d as _}from"./YV4JVR4I-7LgjLGcz.js";import{b as Pt,i as St}from"./VGCJ63VH-DjYMlTD4.js";import{h as q,a as Ct}from"./LVA2YJMS-CkBCxIVR.js";import{u as Mt}from"./P4IRICAX-DJ57dGqX.js";import{u as Ee,P as yt}from"./MTZPJQMC-BeFKSML9.js";var wt="div",De=N(function(t){var r=t,{store:e}=r,o=H(r,["store"]);const i=Ee();return e=e||i,o=w(v({},o),{ref:X(e==null?void 0:e.setAnchorElement,o.ref)}),o});j(function(t){const r=De(t);return K(wt,r)});var Ot="button",Ae=N(function(t){var r=t,{store:e}=r,o=H(r,["store"]);const i=Pt();e=e||i,V(e,!1);const s=e.useState("contentElement");return o=v({"aria-haspopup":Pe(s,"dialog")},o),o=Mt(v({store:e},o)),o});j(function(t){const r=Ae(t);return K(Ot,r)});var Et="div";function Te(n){const t=n.relatedTarget;return(t==null?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null}function Dt(n){const t=Te(n);return t?Qe(n.currentTarget,t):!1}var ae=Symbol("composite-hover");function At(n){let t=Te(n);if(!t)return!1;do{if(Xe(t,ae)&&t[ae])return!0;t=t.parentElement}while(t);return!1}var He=N(function(t){var r=t,{store:e,focusOnHover:o=!0,blurOnHoverEnd:i=!!o}=r,s=H(r,["store","focusOnHover","blurOnHoverEnd"]);const u=he();e=e||u,V(e,!1);const a=Je(),c=s.onMouseMove,l=ue(o),x=L(f=>{if(c==null||c(f),!f.defaultPrevented&&a()&&l(f)){if(!q(f.currentTarget)){const P=e==null?void 0:e.getState().baseElement;P&&!Ct(P)&&P.focus()}e==null||e.setActiveId(f.currentTarget.id)}}),p=s.onMouseLeave,d=ue(i),M=L(f=>{var P;p==null||p(f),!f.defaultPrevented&&a()&&(Dt(f)||At(f)||l(f)&&d(f)&&(e==null||e.setActiveId(null),(P=e==null?void 0:e.getState().baseElement)==null||P.focus()))}),m=y.useCallback(f=>{f&&(f[ae]=!0)},[]);return s=w(v({},s),{ref:X(m,s.ref),onMouseMove:x,onMouseLeave:M}),Se(s)});Ce(j(function(t){const r=He(t);return K(Et,r)}));var Tt="div",k="";function se(){k=""}function Ht(n){const t=n.target;return t&&Ze(t)?!1:n.key===" "&&k.length?!0:n.key.length===1&&!n.ctrlKey&&!n.altKey&&!n.metaKey&&/^[\p{Letter}\p{Number}]$/u.test(n.key)}function It(n,t){if(et(n))return!0;const r=n.target;return r?t.some(o=>o.element===r):!1}function Ft(n){return n.filter(t=>!t.disabled)}function ne(n,t){var r;const e=((r=n.element)==null?void 0:r.textContent)||n.children||"value"in n&&n.value;return e?tt(e).trim().toLowerCase().startsWith(t.toLowerCase()):!1}function _t(n,t,r){if(!r)return n;const e=n.find(o=>o.id===r);return!e||!ne(e,t)||k!==t&&ne(e,k)?n:(k=t,Re(n.filter(o=>ne(o,k)),r).filter(o=>o.id!==r))}var ce=N(function(t){var r=t,{store:e,typeahead:o=!0}=r,i=H(r,["store","typeahead"]);const s=he();e=e||s,V(e,!1);const u=i.onKeyDownCapture,a=y.useRef(0),c=L(l=>{if(u==null||u(l),l.defaultPrevented||!o||!e)return;if(!Ht(l))return se();const{renderedItems:x,items:p,activeId:d,id:M}=e.getState();let m=Ft(p.length>x.length?p:x);const f=Me(l.currentTarget),P=`[data-offscreen-id="${M}"]`,b=f.querySelectorAll(P);for(const S of b){const I=S.ariaDisabled==="true"||"disabled"in S&&!!S.disabled;m.push({id:S.id,element:S,disabled:I})}if(b.length&&(m=Ye(m,S=>S.element)),!It(l,m))return se();l.preventDefault(),window.clearTimeout(a.current),a.current=window.setTimeout(()=>{k=""},500);const D=l.key.toLowerCase();k+=D,m=_t(m,D,d);const E=m.find(S=>ne(S,k));E?e.move(E.id):se()});return i=w(v({},i),{onKeyDownCapture:c}),Se(i)});j(function(t){const r=ce(t);return K(Tt,r)});var kt="button",Ie=N(function(t){var r=t,{store:e}=r,o=H(r,["store"]);const i=Ee();e=e||i,V(e,!1);const s=o.onClick,u=L(a=>{e==null||e.setAnchorElement(a.currentTarget),s==null||s(a)});return o=le(o,a=>C.jsx(yt,{value:e,children:a}),[e]),o=w(v({},o),{onClick:u}),o=De(v({store:e},o)),o=Ae(v({store:e},o)),o});j(function(t){const r=Ie(t);return K(kt,r)});var Fe=ye([xe],[ge]),Lt=Fe.useContext,Nt=Fe.useScopedContext;y.createContext(void 0);var Y=ye([xe,$e],[ge,Ve]),jt=Y.useContext,Kt=Y.useScopedContext,oe=Y.useProviderContext,_e=Y.ContextProvider,Rt=Y.ScopedContextProvider;y.createContext(void 0);function Bt(n={}){var t=n,{combobox:r,parent:e,menubar:o}=t,i=nt(t,["combobox","parent","menubar"]);const s=!!o&&!e,u=pt(i.store,bt(e,["values"]),vt(r,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),a=u.getState(),c=ct(J(B({},i),{store:u,orientation:U(i.orientation,a.orientation,"vertical")})),l=We(J(B({},i),{store:u,placement:U(i.placement,a.placement,"bottom-start"),timeout:U(i.timeout,a.timeout,s?0:150),hideTimeout:U(i.hideTimeout,a.hideTimeout,0)})),x=J(B(B({},c.getState()),l.getState()),{initialFocus:U(a.initialFocus,"container"),values:U(i.values,a.values,i.defaultValues,{})}),p=ht(x,c,l,u);return pe(p,()=>ve(p,["mounted"],d=>{d.mounted||p.setState("activeId",null)})),pe(p,()=>ve(e,["orientation"],d=>{p.setState("placement",d.orientation==="vertical"?"right-start":"bottom-start")})),J(B(B(B({},c),l),p),{combobox:r,parent:e,menubar:o,hideAll:()=>{l.hide(),e==null||e.hideAll()},setInitialFocus:d=>p.setState("initialFocus",d),setValues:d=>p.setState("values",d),setValue:(d,M)=>{d!=="__proto__"&&d!=="constructor"&&(Array.isArray(d)||p.setState("values",m=>{const f=m[d],P=rt(M,f);return P===f?m:J(B({},m),{[d]:P!==void 0&&P})}))}})}function Vt(n,t,r){return ot(t,[r.combobox,r.parent,r.menubar]),xt(n,r,"values","setValues"),Object.assign(ze(ft(n,t,r),t,r),{combobox:r.combobox,parent:r.parent,menubar:r.menubar})}function ke(n={}){const t=jt(),r=Lt(),e=dt();n=w(v({},n),{parent:n.parent!==void 0?n.parent:t,menubar:n.menubar!==void 0?n.menubar:r,combobox:n.combobox!==void 0?n.combobox:e});const[o,i]=gt(Bt,n);return Vt(o,i,n)}var $t="div";function Wt(n){var t=n,{store:r}=t,e=H(t,["store"]);const[o,i]=y.useState(void 0),s=e["aria-label"],u=_(r,"disclosureElement"),a=_(r,"contentElement");return y.useEffect(()=>{const c=u;if(!c)return;const l=a;if(!l)return;s||l.hasAttribute("aria-label")?i(void 0):c.id&&i(c.id)},[s,u,a]),o}var Le=N(function(t){var r=t,{store:e,alwaysVisible:o,composite:i}=r,s=H(r,["store","alwaysVisible","composite"]);const u=oe();e=e||u,V(e,!1);const a=e.parent,c=e.menubar,l=!!a,x=we(s.id),p=s.onKeyDown,d=e.useState(g=>g.placement.split("-")[0]),M=e.useState(g=>g.orientation==="both"?void 0:g.orientation),m=M!=="vertical",f=_(c,g=>!!g&&g.orientation!=="vertical"),P=L(g=>{if(p==null||p(g),!g.defaultPrevented){if(l||c&&!m){const A={ArrowRight:()=>d==="left"&&!m,ArrowLeft:()=>d==="right"&&!m,ArrowUp:()=>d==="bottom"&&m,ArrowDown:()=>d==="top"&&m}[g.key];if(A!=null&&A())return g.stopPropagation(),g.preventDefault(),e==null?void 0:e.hide()}if(c){const A={ArrowRight:()=>{if(f)return c.next()},ArrowLeft:()=>{if(f)return c.previous()},ArrowDown:()=>{if(!f)return c.next()},ArrowUp:()=>{if(!f)return c.previous()}}[g.key],R=A==null?void 0:A();R!==void 0&&(g.stopPropagation(),g.preventDefault(),c.move(R))}}});s=le(s,g=>C.jsx(Rt,{value:e,children:g}),[e]);const b=Wt(v({store:e},s)),D=e.useState("mounted"),E=St(D,s.hidden,o),S=E?w(v({},s.style),{display:"none"}):s.style;s=w(v({id:x,"aria-labelledby":b,hidden:E},s),{ref:X(x?e.setContentElement:null,s.ref),style:S,onKeyDown:P});const I=!!e.combobox;return i=i??!I,i&&(s=v({role:"menu","aria-orientation":M},s)),s=mt(v({store:e,composite:i},s)),s=ce(v({store:e,typeahead:!I},s)),s});j(function(t){const r=Le(t);return K($t,r)});var zt="div",Ut=N(function(t){var r=t,{store:e,modal:o=!1,portal:i=!!o,hideOnEscape:s=!0,autoFocusOnShow:u=!0,hideOnHoverOutside:a,alwaysVisible:c}=r,l=H(r,["store","modal","portal","hideOnEscape","autoFocusOnShow","hideOnHoverOutside","alwaysVisible"]);const x=oe();e=e||x,V(e,!1);const p=y.useRef(null),d=e.parent,M=e.menubar,m=!!d,f=!!M&&!m;l=w(v({},l),{ref:X(p,l.ref)});const P=Le(v({store:e,alwaysVisible:c},l)),{"aria-labelledby":b}=P;l=H(P,["aria-labelledby"]);const[E,S]=y.useState(),I=e.useState("autoFocusOnShow"),g=e.useState("initialFocus"),W=e.useState("baseElement"),A=e.useState("renderedItems");y.useEffect(()=>{let F=!1;return S(O=>{var ee,de,fe;if(F||!I)return;if((ee=O==null?void 0:O.current)!=null&&ee.isConnected)return O;const te=y.createRef();switch(g){case"first":te.current=((de=A.find(G=>!G.disabled&&G.element))==null?void 0:de.element)||null;break;case"last":te.current=((fe=[...A].reverse().find(G=>!G.disabled&&G.element))==null?void 0:fe.element)||null;break;default:te.current=W}return te}),()=>{F=!0}},[e,I,g,A,W]);const R=m?!1:o,h=!!u,T=!!E||!!l.initialFocus||!!R,z=_(e.combobox||e,"contentElement"),$=_((d==null?void 0:d.combobox)||d,"contentElement"),Z=y.useMemo(()=>{if(!$||!z)return;const F=z.getAttribute("role"),O=$.getAttribute("role");if(!((O==="menu"||O==="menubar")&&F==="menu"))return $},[z,$]);return Z!==void 0&&(l=v({preserveTabOrderAnchor:Z},l)),l=Ue(w(v({store:e,alwaysVisible:c,initialFocus:E,autoFocusOnShow:h?T&&u:I||!!R},l),{hideOnEscape(F){return st(s,F)?!1:(e==null||e.hideAll(),!0)},hideOnHoverOutside(F){const O=e==null?void 0:e.getState().disclosureElement;return(typeof a=="function"?a(F):a??(m?!0:f?O?!q(O):!0:!1))?F.defaultPrevented||!m||!O||(ut(O,"mouseout",F),!q(O))?!0:(requestAnimationFrame(()=>{q(O)||e==null||e.hide()}),!1):!1},modal:R,portal:i,backdrop:m?!1:l.backdrop})),l=v({"aria-labelledby":b},l),l}),qt=qe(j(function(t){const r=Ut(t);return K(zt,r)}),oe);function Gt(n={}){const t=ke(n);return C.jsx(_e,{value:t,children:n.children})}var Jt="button";function Qt(n,t){return{ArrowDown:t==="bottom"||t==="top"?"first":!1,ArrowUp:t==="bottom"||t==="top"?"last":!1,ArrowRight:t==="right"?"first":!1,ArrowLeft:t==="left"?"first":!1}[n.key]}function be(n,t){return!!(n!=null&&n.some(r=>!r.element||r.element===t?!1:r.element.getAttribute("aria-expanded")==="true"))}var Xt=N(function(t){var r=t,{store:e,focusable:o,accessibleWhenDisabled:i,showOnHover:s}=r,u=H(r,["store","focusable","accessibleWhenDisabled","showOnHover"]);const a=oe();e=e||a,V(e,!1);const c=y.useRef(null),l=e.parent,x=e.menubar,p=!!l,d=!!x&&!p,M=at(u),m=()=>{const h=c.current;h&&(e==null||e.setDisclosureElement(h),e==null||e.setAnchorElement(h),e==null||e.show())},f=u.onFocus,P=L(h=>{if(f==null||f(h),M||h.defaultPrevented||(e==null||e.setAutoFocusOnShow(!1),e==null||e.setActiveId(null),!x)||!d)return;const{items:T}=x.getState();be(T,h.currentTarget)&&m()}),b=_(e,h=>h.placement.split("-")[0]),D=u.onKeyDown,E=L(h=>{if(D==null||D(h),M||h.defaultPrevented)return;const T=Qt(h,b);T&&(h.preventDefault(),m(),e==null||e.setAutoFocusOnShow(!0),e==null||e.setInitialFocus(T))}),S=u.onClick,I=L(h=>{if(S==null||S(h),h.defaultPrevented||!e)return;const T=!h.detail,{open:z}=e.getState();(!z||T)&&((!p||T)&&e.setAutoFocusOnShow(!0),e.setInitialFocus(T?"first":"container")),p&&m()});u=le(u,h=>C.jsx(_e,{value:e,children:h}),[e]),p&&(u=w(v({},u),{render:C.jsx(ie.div,{render:u.render})}));const g=we(u.id),W=_((l==null?void 0:l.combobox)||l,"contentElement"),A=p||d?Oe(W,"menuitem"):void 0,R=e.useState("contentElement");return u=w(v({id:g,role:A,"aria-haspopup":Pe(R,"menu")},u),{ref:X(c,u.ref),onFocus:P,onKeyDown:E,onClick:I}),u=Ge(w(v({store:e,focusable:o,accessibleWhenDisabled:i},u),{showOnHover:h=>{if(!(()=>{if(typeof s=="function")return s(h);if(s!=null)return s;if(p)return!0;if(!x)return!1;const{items:Z}=x.getState();return d&&be(Z)})())return!1;const $=d?x:l;return $&&$.setActiveId(h.currentTarget.id),!0}})),u=Ie(v({store:e,toggleOnClick:!p,focusable:o,accessibleWhenDisabled:i},u)),u=ce(v({store:e,typeahead:d},u)),u}),Yt=j(function(t){const r=Xt(t);return K(Jt,r)}),Zt="div";function en(n,t,r){var e;if(!n)return!1;if(q(n))return!0;const o=t==null?void 0:t.find(a=>{var c;return a.element===r?!1:((c=a.element)==null?void 0:c.getAttribute("aria-expanded"))==="true"}),i=(e=o==null?void 0:o.element)==null?void 0:e.getAttribute("aria-controls");if(!i)return!1;const u=Me(n).getElementById(i);return u?q(u)?!0:!!u.querySelector("[role=menuitem][aria-expanded=true]"):!1}var tn=N(function(t){var r=t,{store:e,hideOnClick:o=!0,preventScrollOnKeyDown:i=!0,focusOnHover:s,blurOnHoverEnd:u}=r,a=H(r,["store","hideOnClick","preventScrollOnKeyDown","focusOnHover","blurOnHoverEnd"]);const c=Kt(!0),l=Nt();e=e||c||l,V(e,!1);const x=a.onClick,p=ue(o),d="hideAll"in e?e.hideAll:void 0,M=!!d,m=L(b=>{x==null||x(b),!(b.defaultPrevented||it(b)||lt(b)||!d||b.currentTarget.getAttribute("aria-haspopup")==="menu")&&p(b)&&d()}),f=_(e,b=>"contentElement"in b?b.contentElement:null),P=Oe(f,"menuitem");return a=w(v({role:P},a),{onClick:m}),a=Be(v({store:e,preventScrollOnKeyDown:i},a)),a=He(w(v({store:e},a),{focusOnHover(b){const D=()=>typeof s=="function"?s(b):s??!0;if(!e||!D())return!1;const{baseElement:E,items:S}=e.getState();return M?(b.currentTarget.hasAttribute("aria-expanded")&&b.currentTarget.focus(),!0):en(E,S,b.currentTarget)?(b.currentTarget.focus(),!0):!1},blurOnHoverEnd(b){return typeof u=="function"?u(b):u??M}})),a}),nn=Ce(j(function(t){const r=tn(t);return K(Zt,r)}));const rn=Q((n,t)=>C.jsx(ie.div,{role:"listitem",...n,className:re("-list-item",n.className),ref:t})),on=Q((n,t)=>C.jsx(ie.span,{...n,className:re("-list-item-content",n.className),ref:t}));function Cn(n){const{children:t,placement:r,open:e,setOpen:o,defaultOpen:i}=n,s=ke(),u=_(s,c=>c.open),a=_(s,c=>c.popoverElement);return y.useEffect(function(){var l;a!=null&&a.isConnected&&((l=a==null?void 0:a.togglePopover)==null||l.call(a,u))},[u,a]),C.jsx(Gt,{store:s,placement:r,defaultOpen:i,open:e,setOpen:o,children:t})}const Mn=Q((n,t)=>C.jsx(qt,{portal:!me,unmountOnHide:!0,...n,style:{zIndex:me?void 0:9999,...n.style},wrapperProps:{popover:"manual"},className:re("-dropdown-menu",n.className),ref:t})),yn=Q((n,t)=>{const{accessibleWhenDisabled:r=!0,children:e,...o}=n;return C.jsx(Yt,{accessibleWhenDisabled:!0,render:C.jsxs(Ne,{accessibleWhenDisabled:r,children:[e,C.jsx(Ke,{})]}),...o,className:re("-dropdown-menu-button",n.className),ref:t})}),wn=Q((n,t)=>{const{shortcuts:r,...e}=n,o=y.useMemo(()=>typeof r=="string"?r.split("+").map(s=>s.trim()):[],[r]),i=o.length>0;return C.jsxs(nn,{accessibleWhenDisabled:!0,...e,render:C.jsx(rn,{render:n.render}),ref:t,children:[C.jsx(on,{children:n.children}),i&&C.jsx("span",{className:"-dropdown-menu-item-shortcuts",children:o.map((s,u)=>C.jsx(je,{variant:"ghost",children:s},`${s+u}`))})]})});export{Cn as D,yn as a,Mn as b,wn as c};
