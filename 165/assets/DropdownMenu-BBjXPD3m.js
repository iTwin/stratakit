import{r as C,l as w}from"./chunk-D52XG6IA-jQzNN5l_.js";import{c as Q}from"./index-a4IuZTzE.js";import{R as ae}from"./XL7CSKGW-BUPppNcW.js";import{B as Ne}from"./Button-Dqoh-2nW.js";import{K as Le}from"./Kbd-CEtyEQpD.js";import{D as Re}from"./Icon-HMBBDx8V.js";import{s as fe}from"./~utils-YFcEjjdk.js";import{u as be,f as je,C as he,a as ge,b as Ke}from"./P2CTZE2T-D74EtGof.js";import{H as Be,a as Ve,c as $e,u as We,b as ze,d as Ue,e as qe}from"./BYC7LY2E-gv6yc4TX.js";import{c as L,_ as T,b as y,u as X,d as v,f as R,e as j,i as V,g as xe,h as Ge,j as se,k as N,r as Se,m as Pe,l as Je,n as Qe,o as Ce,s as Xe,p as Ye,q as Ze,t as et,v as ie,x as we,y as tt,z as J,A as U,B,C as nt,D as rt,E as Me,F as ot,G as st,H as ut,I as ye,J as at,K as it}from"./LMDWO4NN-BRsz5zsA.js";import{c as lt,u as ct,a as dt,b as ft}from"./ITI7HKP4-DOujbMlG.js";import{m as mt,o as pt,p as vt,s as me,a as pe,c as bt,u as ht,b as gt,d as _}from"./YV4JVR4I-kBT4CmdM.js";import{b as xt,i as St}from"./VGCJ63VH-tC5wH7MA.js";import{h as q,a as Pt}from"./LVA2YJMS-D3AobD5S.js";import{u as Ct}from"./P4IRICAX-CavFY99D.js";import{u as Oe,P as wt}from"./MTZPJQMC-DYufF59M.js";var Mt="div",Ee=L(function(t){var r=t,{store:e}=r,o=T(r,["store"]);const i=Oe();return e=e||i,o=y(v({},o),{ref:X(e==null?void 0:e.setAnchorElement,o.ref)}),o});R(function(t){const r=Ee(t);return j(Mt,r)});var yt="button",De=L(function(t){var r=t,{store:e}=r,o=T(r,["store"]);const i=xt();e=e||i,V(e,!1);const u=e.useState("contentElement");return o=v({"aria-haspopup":xe(u,"dialog")},o),o=Ct(v({store:e},o)),o});R(function(t){const r=De(t);return j(yt,r)});var Ot="div";function Ae(n){const t=n.relatedTarget;return(t==null?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null}function Et(n){const t=Ae(n);return t?Je(n.currentTarget,t):!1}var ue=Symbol("composite-hover");function Dt(n){let t=Ae(n);if(!t)return!1;do{if(Qe(t,ue)&&t[ue])return!0;t=t.parentElement}while(t);return!1}var Ie=L(function(t){var r=t,{store:e,focusOnHover:o=!0,blurOnHoverEnd:i=!!o}=r,u=T(r,["store","focusOnHover","blurOnHoverEnd"]);const s=be();e=e||s,V(e,!1);const a=Ge(),c=u.onMouseMove,l=se(o),x=N(f=>{if(c==null||c(f),!f.defaultPrevented&&a()&&l(f)){if(!q(f.currentTarget)){const S=e==null?void 0:e.getState().baseElement;S&&!Pt(S)&&S.focus()}e==null||e.setActiveId(f.currentTarget.id)}}),p=u.onMouseLeave,d=se(i),M=N(f=>{var S;p==null||p(f),!f.defaultPrevented&&a()&&(Et(f)||Dt(f)||l(f)&&d(f)&&(e==null||e.setActiveId(null),(S=e==null?void 0:e.getState().baseElement)==null||S.focus()))}),m=C.useCallback(f=>{f&&(f[ue]=!0)},[]);return u=y(v({},u),{ref:X(m,u.ref),onMouseMove:x,onMouseLeave:M}),Se(u)});Pe(R(function(t){const r=Ie(t);return j(Ot,r)}));var At="div",k="";function oe(){k=""}function It(n){const t=n.target;return t&&Ye(t)?!1:n.key===" "&&k.length?!0:n.key.length===1&&!n.ctrlKey&&!n.altKey&&!n.metaKey&&/^[\p{Letter}\p{Number}]$/u.test(n.key)}function Tt(n,t){if(Ze(n))return!0;const r=n.target;return r?t.some(o=>o.element===r):!1}function Ht(n){return n.filter(t=>!t.disabled)}function ne(n,t){var r;const e=((r=n.element)==null?void 0:r.textContent)||n.children||"value"in n&&n.value;return e?et(e).trim().toLowerCase().startsWith(t.toLowerCase()):!1}function Ft(n,t,r){if(!r)return n;const e=n.find(o=>o.id===r);return!e||!ne(e,t)||k!==t&&ne(e,k)?n:(k=t,je(n.filter(o=>ne(o,k)),r).filter(o=>o.id!==r))}var le=L(function(t){var r=t,{store:e,typeahead:o=!0}=r,i=T(r,["store","typeahead"]);const u=be();e=e||u,V(e,!1);const s=i.onKeyDownCapture,a=C.useRef(0),c=N(l=>{if(s==null||s(l),l.defaultPrevented||!o||!e)return;if(!It(l))return oe();const{renderedItems:x,items:p,activeId:d,id:M}=e.getState();let m=Ht(p.length>x.length?p:x);const f=Ce(l.currentTarget),S=`[data-offscreen-id="${M}"]`,b=f.querySelectorAll(S);for(const P of b){const H=P.ariaDisabled==="true"||"disabled"in P&&!!P.disabled;m.push({id:P.id,element:P,disabled:H})}if(b.length&&(m=Xe(m,P=>P.element)),!Tt(l,m))return oe();l.preventDefault(),window.clearTimeout(a.current),a.current=window.setTimeout(()=>{k=""},500);const D=l.key.toLowerCase();k+=D,m=Ft(m,D,d);const E=m.find(P=>ne(P,k));E?e.move(E.id):oe()});return i=y(v({},i),{onKeyDownCapture:c}),Se(i)});R(function(t){const r=le(t);return j(At,r)});var _t="button",Te=L(function(t){var r=t,{store:e}=r,o=T(r,["store"]);const i=Oe();e=e||i,V(e,!1);const u=o.onClick,s=N(a=>{e==null||e.setAnchorElement(a.currentTarget),u==null||u(a)});return o=ie(o,a=>w.jsx(wt,{value:e,children:a}),[e]),o=y(v({},o),{onClick:s}),o=Ee(v({store:e},o)),o=De(v({store:e},o)),o});R(function(t){const r=Te(t);return j(_t,r)});var He=we([ge],[he]),kt=He.useContext,Nt=He.useScopedContext;C.createContext(void 0);var Y=we([ge,Ve],[he,Be]),Lt=Y.useContext,Rt=Y.useScopedContext,re=Y.useProviderContext,Fe=Y.ContextProvider,jt=Y.ScopedContextProvider;C.createContext(void 0);function Kt(n={}){var t=n,{combobox:r,parent:e,menubar:o}=t,i=tt(t,["combobox","parent","menubar"]);const u=!!o&&!e,s=mt(i.store,vt(e,["values"]),pt(r,["arrowElement","anchorElement","contentElement","popoverElement","disclosureElement"])),a=s.getState(),c=lt(J(B({},i),{store:s,orientation:U(i.orientation,a.orientation,"vertical")})),l=$e(J(B({},i),{store:s,placement:U(i.placement,a.placement,"bottom-start"),timeout:U(i.timeout,a.timeout,u?0:150),hideTimeout:U(i.hideTimeout,a.hideTimeout,0)})),x=J(B(B({},c.getState()),l.getState()),{initialFocus:U(a.initialFocus,"container"),values:U(i.values,a.values,i.defaultValues,{})}),p=bt(x,c,l,s);return me(p,()=>pe(p,["mounted"],d=>{d.mounted||p.setState("activeId",null)})),me(p,()=>pe(e,["orientation"],d=>{p.setState("placement",d.orientation==="vertical"?"right-start":"bottom-start")})),J(B(B(B({},c),l),p),{combobox:r,parent:e,menubar:o,hideAll:()=>{l.hide(),e==null||e.hideAll()},setInitialFocus:d=>p.setState("initialFocus",d),setValues:d=>p.setState("values",d),setValue:(d,M)=>{d!=="__proto__"&&d!=="constructor"&&(Array.isArray(d)||p.setState("values",m=>{const f=m[d],S=nt(M,f);return S===f?m:J(B({},m),{[d]:S!==void 0&&S})}))}})}function Bt(n,t,r){return rt(t,[r.combobox,r.parent,r.menubar]),gt(n,r,"values","setValues"),Object.assign(We(dt(n,t,r),t,r),{combobox:r.combobox,parent:r.parent,menubar:r.menubar})}function _e(n={}){const t=Lt(),r=kt(),e=ct();n=y(v({},n),{parent:n.parent!==void 0?n.parent:t,menubar:n.menubar!==void 0?n.menubar:r,combobox:n.combobox!==void 0?n.combobox:e});const[o,i]=ht(Kt,n);return Bt(o,i,n)}var Vt="div";function $t(n){var t=n,{store:r}=t,e=T(t,["store"]);const[o,i]=C.useState(void 0),u=e["aria-label"],s=_(r,"disclosureElement"),a=_(r,"contentElement");return C.useEffect(()=>{const c=s;if(!c)return;const l=a;if(!l)return;u||l.hasAttribute("aria-label")?i(void 0):c.id&&i(c.id)},[u,s,a]),o}var ke=L(function(t){var r=t,{store:e,alwaysVisible:o,composite:i}=r,u=T(r,["store","alwaysVisible","composite"]);const s=re();e=e||s,V(e,!1);const a=e.parent,c=e.menubar,l=!!a,x=Me(u.id),p=u.onKeyDown,d=e.useState(g=>g.placement.split("-")[0]),M=e.useState(g=>g.orientation==="both"?void 0:g.orientation),m=M!=="vertical",f=_(c,g=>!!g&&g.orientation!=="vertical"),S=N(g=>{if(p==null||p(g),!g.defaultPrevented){if(l||c&&!m){const A={ArrowRight:()=>d==="left"&&!m,ArrowLeft:()=>d==="right"&&!m,ArrowUp:()=>d==="bottom"&&m,ArrowDown:()=>d==="top"&&m}[g.key];if(A!=null&&A())return g.stopPropagation(),g.preventDefault(),e==null?void 0:e.hide()}if(c){const A={ArrowRight:()=>{if(f)return c.next()},ArrowLeft:()=>{if(f)return c.previous()},ArrowDown:()=>{if(!f)return c.next()},ArrowUp:()=>{if(!f)return c.previous()}}[g.key],K=A==null?void 0:A();K!==void 0&&(g.stopPropagation(),g.preventDefault(),c.move(K))}}});u=ie(u,g=>w.jsx(jt,{value:e,children:g}),[e]);const b=$t(v({store:e},u)),D=e.useState("mounted"),E=St(D,u.hidden,o),P=E?y(v({},u.style),{display:"none"}):u.style;u=y(v({id:x,"aria-labelledby":b,hidden:E},u),{ref:X(x?e.setContentElement:null,u.ref),style:P,onKeyDown:S});const H=!!e.combobox;return i=i??!H,i&&(u=v({role:"menu","aria-orientation":M},u)),u=ft(v({store:e,composite:i},u)),u=le(v({store:e,typeahead:!H},u)),u});R(function(t){const r=ke(t);return j(Vt,r)});var Wt="div",zt=L(function(t){var r=t,{store:e,modal:o=!1,portal:i=!!o,hideOnEscape:u=!0,autoFocusOnShow:s=!0,hideOnHoverOutside:a,alwaysVisible:c}=r,l=T(r,["store","modal","portal","hideOnEscape","autoFocusOnShow","hideOnHoverOutside","alwaysVisible"]);const x=re();e=e||x,V(e,!1);const p=C.useRef(null),d=e.parent,M=e.menubar,m=!!d,f=!!M&&!m;l=y(v({},l),{ref:X(p,l.ref)});const S=ke(v({store:e,alwaysVisible:c},l)),{"aria-labelledby":b}=S;l=T(S,["aria-labelledby"]);const[E,P]=C.useState(),H=e.useState("autoFocusOnShow"),g=e.useState("initialFocus"),W=e.useState("baseElement"),A=e.useState("renderedItems");C.useEffect(()=>{let F=!1;return P(O=>{var ee,ce,de;if(F||!H)return;if((ee=O==null?void 0:O.current)!=null&&ee.isConnected)return O;const te=C.createRef();switch(g){case"first":te.current=((ce=A.find(G=>!G.disabled&&G.element))==null?void 0:ce.element)||null;break;case"last":te.current=((de=[...A].reverse().find(G=>!G.disabled&&G.element))==null?void 0:de.element)||null;break;default:te.current=W}return te}),()=>{F=!0}},[e,H,g,A,W]);const K=m?!1:o,h=!!s,I=!!E||!!l.initialFocus||!!K,z=_(e.combobox||e,"contentElement"),$=_((d==null?void 0:d.combobox)||d,"contentElement"),Z=C.useMemo(()=>{if(!$||!z)return;const F=z.getAttribute("role"),O=$.getAttribute("role");if(!((O==="menu"||O==="menubar")&&F==="menu"))return $},[z,$]);return Z!==void 0&&(l=v({preserveTabOrderAnchor:Z},l)),l=ze(y(v({store:e,alwaysVisible:c,initialFocus:E,autoFocusOnShow:h?I&&s:H||!!K},l),{hideOnEscape(F){return ot(u,F)?!1:(e==null||e.hideAll(),!0)},hideOnHoverOutside(F){const O=e==null?void 0:e.getState().disclosureElement;return(typeof a=="function"?a(F):a??(m?!0:f?O?!q(O):!0:!1))?F.defaultPrevented||!m||!O||(st(O,"mouseout",F),!q(O))?!0:(requestAnimationFrame(()=>{q(O)||e==null||e.hide()}),!1):!1},modal:K,portal:i,backdrop:m?!1:l.backdrop})),l=v({"aria-labelledby":b},l),l}),Ut=Ue(R(function(t){const r=zt(t);return j(Wt,r)}),re);function qt(n={}){const t=_e(n);return w.jsx(Fe,{value:t,children:n.children})}var Gt="button";function Jt(n,t){return{ArrowDown:t==="bottom"||t==="top"?"first":!1,ArrowUp:t==="bottom"||t==="top"?"last":!1,ArrowRight:t==="right"?"first":!1,ArrowLeft:t==="left"?"first":!1}[n.key]}function ve(n,t){return!!(n!=null&&n.some(r=>!r.element||r.element===t?!1:r.element.getAttribute("aria-expanded")==="true"))}var Qt=L(function(t){var r=t,{store:e,focusable:o,accessibleWhenDisabled:i,showOnHover:u}=r,s=T(r,["store","focusable","accessibleWhenDisabled","showOnHover"]);const a=re();e=e||a,V(e,!1);const c=C.useRef(null),l=e.parent,x=e.menubar,p=!!l,d=!!x&&!p,M=ut(s),m=()=>{const h=c.current;h&&(e==null||e.setDisclosureElement(h),e==null||e.setAnchorElement(h),e==null||e.show())},f=s.onFocus,S=N(h=>{if(f==null||f(h),M||h.defaultPrevented||(e==null||e.setAutoFocusOnShow(!1),e==null||e.setActiveId(null),!x)||!d)return;const{items:I}=x.getState();ve(I,h.currentTarget)&&m()}),b=_(e,h=>h.placement.split("-")[0]),D=s.onKeyDown,E=N(h=>{if(D==null||D(h),M||h.defaultPrevented)return;const I=Jt(h,b);I&&(h.preventDefault(),m(),e==null||e.setAutoFocusOnShow(!0),e==null||e.setInitialFocus(I))}),P=s.onClick,H=N(h=>{if(P==null||P(h),h.defaultPrevented||!e)return;const I=!h.detail,{open:z}=e.getState();(!z||I)&&((!p||I)&&e.setAutoFocusOnShow(!0),e.setInitialFocus(I?"first":"container")),p&&m()});s=ie(s,h=>w.jsx(Fe,{value:e,children:h}),[e]),p&&(s=y(v({},s),{render:w.jsx(ae.div,{render:s.render})}));const g=Me(s.id),W=_((l==null?void 0:l.combobox)||l,"contentElement"),A=p||d?ye(W,"menuitem"):void 0,K=e.useState("contentElement");return s=y(v({id:g,role:A,"aria-haspopup":xe(K,"menu")},s),{ref:X(c,s.ref),onFocus:S,onKeyDown:E,onClick:H}),s=qe(y(v({store:e,focusable:o,accessibleWhenDisabled:i},s),{showOnHover:h=>{if(!(()=>{if(typeof u=="function")return u(h);if(u!=null)return u;if(p)return!0;if(!x)return!1;const{items:Z}=x.getState();return d&&ve(Z)})())return!1;const $=d?x:l;return $&&$.setActiveId(h.currentTarget.id),!0}})),s=Te(v({store:e,toggleOnClick:!p,focusable:o,accessibleWhenDisabled:i},s)),s=le(v({store:e,typeahead:d},s)),s}),Xt=R(function(t){const r=Qt(t);return j(Gt,r)}),Yt="div";function Zt(n,t,r){var e;if(!n)return!1;if(q(n))return!0;const o=t==null?void 0:t.find(a=>{var c;return a.element===r?!1:((c=a.element)==null?void 0:c.getAttribute("aria-expanded"))==="true"}),i=(e=o==null?void 0:o.element)==null?void 0:e.getAttribute("aria-controls");if(!i)return!1;const s=Ce(n).getElementById(i);return s?q(s)?!0:!!s.querySelector("[role=menuitem][aria-expanded=true]"):!1}var en=L(function(t){var r=t,{store:e,hideOnClick:o=!0,preventScrollOnKeyDown:i=!0,focusOnHover:u,blurOnHoverEnd:s}=r,a=T(r,["store","hideOnClick","preventScrollOnKeyDown","focusOnHover","blurOnHoverEnd"]);const c=Rt(!0),l=Nt();e=e||c||l,V(e,!1);const x=a.onClick,p=se(o),d="hideAll"in e?e.hideAll:void 0,M=!!d,m=N(b=>{x==null||x(b),!(b.defaultPrevented||at(b)||it(b)||!d||b.currentTarget.getAttribute("aria-haspopup")==="menu")&&p(b)&&d()}),f=_(e,b=>"contentElement"in b?b.contentElement:null),S=ye(f,"menuitem");return a=y(v({role:S},a),{onClick:m}),a=Ke(v({store:e,preventScrollOnKeyDown:i},a)),a=Ie(y(v({store:e},a),{focusOnHover(b){const D=()=>typeof u=="function"?u(b):u??!0;if(!e||!D())return!1;const{baseElement:E,items:P}=e.getState();return M?(b.currentTarget.hasAttribute("aria-expanded")&&b.currentTarget.focus(),!0):Zt(E,P,b.currentTarget)?(b.currentTarget.focus(),!0):!1},blurOnHoverEnd(b){return typeof s=="function"?s(b):s??M}})),a}),tn=Pe(R(function(t){const r=en(t);return j(Yt,r)}));const nn=C.forwardRef((n,t)=>w.jsx(ae.div,{role:"listitem",...n,className:Q("-list-item",n.className),ref:t})),rn=C.forwardRef((n,t)=>w.jsx(ae.span,{...n,className:Q("-list-item-content",n.className),ref:t}));function Pn(n){const{children:t,placement:r,open:e,setOpen:o,defaultOpen:i}=n,u=_e(),s=_(u,c=>c.open),a=_(u,c=>c.popoverElement);return C.useEffect(function(){var l;a!=null&&a.isConnected&&((l=a==null?void 0:a.togglePopover)==null||l.call(a,s))},[s,a]),w.jsx(qt,{store:u,placement:r,defaultOpen:i,open:e,setOpen:o,children:t})}const Cn=C.forwardRef((n,t)=>w.jsx(Ut,{portal:!fe,unmountOnHide:!0,...n,style:{zIndex:fe?void 0:9999,...n.style},wrapperProps:{popover:"manual"},className:Q("-dropdown-menu",n.className),ref:t})),wn=C.forwardRef((n,t)=>{const{accessibleWhenDisabled:r=!0,children:e,...o}=n;return w.jsx(Xt,{accessibleWhenDisabled:r,render:w.jsxs(Ne,{accessibleWhenDisabled:r,children:[e,w.jsx(Re,{})]}),...o,className:Q("-dropdown-menu-button",n.className),ref:t})}),Mn=C.forwardRef((n,t)=>{const{shortcuts:r,...e}=n,o=typeof r=="string"?r.split("+").map(s=>s.trim()):[],i=typeof r=="string"&&r.trim().length>0,u=Q(n.className,{"data-has-shortcuts":i});return w.jsx(tn,{accessibleWhenDisabled:!0,...e,render:w.jsxs(nn,{render:n.render,className:u,children:[w.jsx("span",{children:n.children}),i&&w.jsx(rn,{children:o.map((s,a)=>w.jsx(Le,{variant:"ghost",children:s},`shortcut-${a}-${s}`))})]}),ref:t})});export{Pn as D,wn as a,Cn as b,Mn as c};
