import{v as A,x as d,an as m,Q as B,aS as O,z as M,G as h,F as q,aT as Y,aK as j,aU as _,r as z,M as G,s as w,ad as H,I as J,J as L}from"./~utils-BFcooMC1.js";import{b as o}from"./index-DDCMeoDP.js";var Q="button";function C(a){if(!a.isTrusted)return!1;const t=a.currentTarget;return a.key==="Enter"?m(t)||t.tagName==="SUMMARY"||t.tagName==="A":a.key===" "?m(t)||t.tagName==="SUMMARY"||t.tagName==="INPUT"||t.tagName==="SELECT":!1}var V=Symbol("command"),W=A(function(t){var i=t,{clickOnEnter:k=!0,clickOnSpace:c=!0}=i,r=d(i,["clickOnEnter","clickOnSpace"]);const f=o.useRef(null),[D,K]=o.useState(!1);o.useEffect(()=>{f.current&&K(m(f.current))},[]);const[R,y]=o.useState(!1),l=o.useRef(!1),E=B(r),[S,U]=O(r,V,!0),v=r.onKeyDown,x=M(e=>{v==null||v(e);const s=e.currentTarget;if(e.defaultPrevented||S||E||!h(e)||q(s)||s.isContentEditable)return;const u=k&&e.key==="Enter",n=c&&e.key===" ",b=e.key==="Enter"&&!k,p=e.key===" "&&!c;if(b||p){e.preventDefault();return}if(u||n){const g=C(e);if(u){if(!g){e.preventDefault();const N=e,{view:X}=N,I=d(N,["view"]),T=()=>_(s,I);Y()?j(s,"keyup",T):queueMicrotask(T)}}else n&&(l.current=!0,g||(e.preventDefault(),y(!0)))}}),P=r.onKeyUp,F=M(e=>{if(P==null||P(e),e.defaultPrevented||S||E||e.metaKey)return;const s=c&&e.key===" ";if(l.current&&s&&(l.current=!1,!C(e))){e.preventDefault(),y(!1);const u=e.currentTarget,n=e,{view:b}=n,p=d(n,["view"]);queueMicrotask(()=>_(u,p))}});return r=z(w(w({"data-active":R||void 0,type:D?"button":void 0},U),r),{ref:G(f,r.ref),onKeyDown:x,onKeyUp:F}),r=H(r),r});J(function(t){const i=W(t);return L(Q,i)});export{W as u};
