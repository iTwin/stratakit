import{j as v,r as P}from"./chunk-D52XG6IA-s6jvCII1.js";import{c as W}from"./index-Ba6OMkQD.js";import{s as j}from"./~utils-YFcEjjdk.js";import{c as Q,u as Y,H as q,a as G,b as J,d as K,e as L}from"./BYC7LY2E-DiK-NmWc.js";import{c as F,e as U,f as k,b as w,u as R}from"./YV4JVR4I-B0SQrKTj.js";import{Q as V,P as x,E as b,k as X,c as I,_ as B,i as N,z as Z,h as g,e as $,Y as H,D as ee,f as D,j as M,T as te,d as y}from"./LMDWO4NN-Del9Mlh1.js";function re(t={}){var o;const r=(o=t.store)==null?void 0:o.getState(),e=Q(V(b({},t),{placement:x(t.placement,r==null?void 0:r.placement,"top"),hideTimeout:x(t.hideTimeout,r==null?void 0:r.hideTimeout,0)})),p=V(b({},e.getState()),{type:x(t.type,r==null?void 0:r.type,"description"),skipTimeout:x(t.skipTimeout,r==null?void 0:r.skipTimeout,300)}),s=F(p,e,t.store);return b(b({},e),s)}function oe(t,o,r){return k(t,r,"type"),k(t,r,"skipTimeout"),Y(t,o,r)}function z(t={}){const[o,r]=U(re,t);return oe(o,r,t)}var _=X([G],[q]),C=_.useProviderContext,ne=_.ContextProvider,se=_.ScopedContextProvider,ae="div",ie=I(function(o){var r=o,{store:e,portal:p=!0,gutter:s=8,preserveTabOrder:f=!1,hideOnHoverOutside:c=!0,hideOnInteractOutside:S=!0}=r,i=B(r,["store","portal","gutter","preserveTabOrder","hideOnHoverOutside","hideOnInteractOutside"]);const h=C();e=e||h,N(e,!1),i=Z(i,a=>v.jsx(se,{value:e,children:a}),[e]);const O=e.useState(a=>a.type==="description"?"tooltip":"none");return i=g({role:O},i),i=J($(g({},i),{store:e,portal:p,gutter:s,preserveTabOrder:f,hideOnHoverOutside(a){if(H(c,a))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!("focusVisible"in l.dataset):!0},hideOnInteractOutside:a=>{if(H(S,a))return!1;const l=e==null?void 0:e.getState().anchorElement;return l?!ee(l,a.target):!0}})),i}),ue=K(D(function(o){const r=ie(o);return M(ae,r)}),C);function le(t={}){const o=z(t);return v.jsx(ne,{value:o,children:t.children})}var ce="div",m=F({activeStore:null});function A(t){return()=>{const{activeStore:o}=m.getState();o===t&&m.setState("activeStore",null)}}var de=I(function(o){var r=o,{store:e,showOnHover:p=!0}=r,s=B(r,["store","showOnHover"]);const f=C();e=e||f,N(e,!1);const c=P.useRef(!1);P.useEffect(()=>w(e,["mounted"],n=>{n.mounted||(c.current=!1)}),[e]),P.useEffect(()=>{if(e)return te(A(e),w(e,["mounted","skipTimeout"],n=>{if(!e)return;if(n.mounted){const{activeStore:E}=m.getState();return E!==e&&(E==null||E.hide()),m.setState("activeStore",e)}const d=setTimeout(A(e),n.skipTimeout);return()=>clearTimeout(d)}))},[e]);const S=s.onMouseEnter,i=y(n=>{S==null||S(n),c.current=!0}),h=s.onFocusVisible,O=y(n=>{h==null||h(n),!n.defaultPrevented&&(e==null||e.setAnchorElement(n.currentTarget),e==null||e.show())}),a=s.onBlur,l=y(n=>{if(a==null||a(n),n.defaultPrevented)return;const{activeStore:d}=m.getState();c.current=!1,d===e&&m.setState("activeStore",null)}),u=e.useState("type"),T=e.useState(n=>{var d;return(d=n.contentElement)==null?void 0:d.id});return s=$(g({"aria-labelledby":u==="label"?T:void 0},s),{onMouseEnter:i,onFocusVisible:O,onBlur:l}),s=L(g({store:e,showOnHover(n){if(!c.current||H(p,n))return!1;const{activeStore:d}=m.getState();return d?(e==null||e.show(),!1):!0}},s)),s}),pe=D(function(o){const r=de(o);return M(ce,r)});const Pe=P.forwardRef((t,o)=>{const{content:r,children:e,className:p,type:s="description",id:f=P.useId(),defaultOpen:c,open:S,setOpen:i,unmountOnHide:h=s==="none",...O}=t,a=z(),l=R(a,T=>T.open),u=R(a,T=>T.popoverElement);return P.useEffect(function(){var n;u!=null&&u.isConnected&&((n=u==null?void 0:u.togglePopover)==null||n.call(u,l))},[l,u]),v.jsx(v.Fragment,{children:v.jsxs(le,{store:a,defaultOpen:c,open:S,setOpen:i,children:[v.jsx(pe,{render:e,...s==="description"&&{"aria-describedby":f},...s==="label"&&{"aria-labelledby":f}}),v.jsx(ue,{"aria-hidden":"true",...O,unmountOnHide:h,className:W("ü•ù-tooltip",p),ref:o,id:f,style:{zIndex:j?void 0:9999,...t.style},wrapperProps:{popover:"manual"},portal:!j,children:r})]})})});export{Pe as T,le as a,pe as b,ue as c,z as u};
