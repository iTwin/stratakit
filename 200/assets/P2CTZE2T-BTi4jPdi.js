import{k as W,o as Y,J as be,c as $,_ as J,t as q,e as P,g as Q,h as w,x as X,f as Z,j as ee,K as Ce,m as xe,d as O,H as Se,L as F,n as _,G as Pe,u as V,M as we,N as he,z as Ee,y as ye,l as Te,O as Re}from"./LMDWO4NN-Del9Mlh1.js";import{r as I,j as De}from"./chunk-D52XG6IA-s6jvCII1.js";import{u as Oe}from"./KUU7WJ55-C5Gh6fA0.js";import{a as Fe}from"./YV4JVR4I-B0SQrKTj.js";var h=W(),_e=h.useContext;h.useScopedContext;h.useProviderContext;var Ae=h.ContextProvider,ke=h.ScopedContextProvider,y=W([Ae],[ke]),ze=y.useContext,tt=y.useProviderContext,rt=y.ContextProvider,nt=y.ScopedContextProvider,Ke=I.createContext(void 0),Le=I.createContext(void 0),Ne={id:null};function ot(r,n,o=!1){const t=r.findIndex(a=>a.id===n);return[...r.slice(t+1),...o?[Ne]:[],...r.slice(0,t)]}function it(r,n){return r.find(o=>!o.disabled)}function Me(r,n){return n&&r.item(n)||null}function st(r){const n=[];for(const o of r){const t=n.find(a=>{var d;return((d=a[0])==null?void 0:d.rowId)===o.rowId});t?t.push(o):n.push([o])}return n}function Be(r,n=!1){if(Y(r))r.setSelectionRange(n?r.value.length:0,r.value.length);else if(r.isContentEditable){const o=be(r).getSelection();o==null||o.selectAllChildren(r),n&&(o==null||o.collapseToEnd())}}var A=Symbol("FOCUS_SILENTLY");function He(r){r[A]=!0,r.focus({preventScroll:!0})}function ut(r){const n=r[A];return delete r[A],n}function te(r,n,o){return!(!n||n===o||!r.item(n.id))}var je="div",re=$(function(n){var o=n,{store:t,shouldRegisterItem:a=!0,getItem:d=Ce,element:b}=o,v=J(o,["store","shouldRegisterItem","getItem","element"]);const c=_e();t=t||c;const m=q(v.id),p=I.useRef(b);return I.useEffect(()=>{const i=p.current;if(!m||!i||!a)return;const C=d({id:m,element:i});return t==null?void 0:t.renderItem(C)},[m,a,d,t]),v=P(w({},v),{ref:Q(p,v.ref)}),X(v)});Z(function(n){const o=re(n);return ee(je,o)});var Ue="button";function Ve(r){return F(r)?!0:r.tagName==="INPUT"&&!Te(r)}function Ge(r,n=!1){const o=r.clientHeight,{top:t}=r.getBoundingClientRect(),a=Math.max(o*.875,o-40)*1.5,d=n?o-a+t:a+t;return r.tagName==="HTML"?d+r.scrollTop:d}function We(r,n=!1){const{top:o}=r.getBoundingClientRect();return n?o+r.clientHeight:o}function G(r,n,o,t=!1){var a;if(!n||!o)return;const{renderedItems:d}=n.getState(),b=Re(r);if(!b)return;const v=Ge(b,t);let c,m;for(let p=0;p<d.length;p+=1){const i=c;if(c=o(p),!c)break;if(c===i)continue;const C=(a=Me(n,c))==null?void 0:a.element;if(!C)continue;const x=We(C,t)-v,l=Math.abs(x);if(t&&x<=0||!t&&x>=0){m!==void 0&&m<l&&(c=i);break}m=l}return c}function Ye(r,n){return _(r)?!1:te(n,r.target)}var $e=$(function(n){var o=n,{store:t,rowId:a,preventScrollOnKeyDown:d=!1,moveOnKeyPress:b=!0,tabbable:v=!1,getItem:c,"aria-setsize":m,"aria-posinset":p}=o,i=J(o,["store","rowId","preventScrollOnKeyDown","moveOnKeyPress","tabbable","getItem","aria-setsize","aria-posinset"]);const C=ze();t=t||C;const f=q(i.id),x=I.useRef(null),l=I.useContext(Le),k=xe(i)&&!i.accessibleWhenDisabled,{rowId:T,baseElement:z,isActiveItem:ne,ariaSetSize:oe,ariaPosInSet:ie,isTabbable:se}=Fe(t,{rowId(e){if(a)return a;if(e&&l!=null&&l.baseElement&&l.baseElement===e.baseElement)return l.id},baseElement(e){return(e==null?void 0:e.baseElement)||void 0},isActiveItem(e){return!!e&&e.activeId===f},ariaSetSize(e){if(m!=null)return m;if(e&&l!=null&&l.ariaSetSize&&l.baseElement===e.baseElement)return l.ariaSetSize},ariaPosInSet(e){if(p!=null)return p;if(!e||!(l!=null&&l.ariaPosInSet)||l.baseElement!==e.baseElement)return;const s=e.renderedItems.filter(u=>u.rowId===T);return l.ariaPosInSet+s.findIndex(u=>u.id===f)},isTabbable(e){if(!(e!=null&&e.renderedItems.length))return!0;if(e.virtualFocus)return!1;if(v)return!0;if(e.activeId===null)return!1;const s=t==null?void 0:t.item(e.activeId);return s!=null&&s.disabled||!(s!=null&&s.element)?!0:e.activeId===f}}),ue=I.useCallback(e=>{var s;const u=P(w({},e),{id:f||e.id,rowId:T,disabled:!!k,children:(s=e.element)==null?void 0:s.textContent});return c?c(u):u},[f,T,k,c]),K=i.onFocus,R=I.useRef(!1),ae=O(e=>{if(K==null||K(e),e.defaultPrevented||Se(e)||!f||!t||Ye(e,t))return;const{virtualFocus:s,baseElement:u}=t.getState();if(t.setActiveId(f),F(e.currentTarget)&&Be(e.currentTarget),!s||!_(e)||Ve(e.currentTarget)||!(u!=null&&u.isConnected))return;Pe()&&e.currentTarget.hasAttribute("data-autofocus")&&e.currentTarget.scrollIntoView({block:"nearest",inline:"nearest"}),R.current=!0,e.relatedTarget===u||te(t,e.relatedTarget)?He(u):u.focus()}),L=i.onBlurCapture,le=O(e=>{if(L==null||L(e),e.defaultPrevented)return;const s=t==null?void 0:t.getState();s!=null&&s.virtualFocus&&R.current&&(R.current=!1,e.preventDefault(),e.stopPropagation())}),N=i.onKeyDown,ce=V(d),fe=V(b),de=O(e=>{if(N==null||N(e),e.defaultPrevented||!_(e)||!t)return;const{currentTarget:s}=e,u=t.getState(),D=t.item(f),g=!!(D!=null&&D.rowId),E=u.orientation!=="horizontal",S=u.orientation!=="vertical",B=()=>!!(g||S||!u.baseElement||!Y(u.baseElement)),H={ArrowUp:(g||E)&&t.up,ArrowRight:(g||S)&&t.next,ArrowDown:(g||E)&&t.down,ArrowLeft:(g||S)&&t.previous,Home:()=>{if(B())return!g||e.ctrlKey?t==null?void 0:t.first():t==null?void 0:t.previous(-1)},End:()=>{if(B())return!g||e.ctrlKey?t==null?void 0:t.last():t==null?void 0:t.next(-1)},PageUp:()=>G(s,t,t==null?void 0:t.up,!0),PageDown:()=>G(s,t,t==null?void 0:t.down)}[e.key];if(H){if(F(s)){const U=we(s),me=S&&e.key==="ArrowLeft",ve=S&&e.key==="ArrowRight",pe=E&&e.key==="ArrowUp",Ie=E&&e.key==="ArrowDown";if(ve||Ie){const{length:ge}=he(s);if(U.end!==ge)return}else if((me||pe)&&U.start!==0)return}const j=H();if(ce(e)||j!==void 0){if(!fe(e))return;e.preventDefault(),t.move(j)}}}),M=I.useMemo(()=>({id:f,baseElement:z}),[f,z]);return i=Ee(i,e=>De.jsx(Ke.Provider,{value:M,children:e}),[M]),i=P(w({id:f,"data-active-item":ne||void 0},i),{ref:Q(x,i.ref),tabIndex:se?i.tabIndex:-1,onFocus:ae,onBlurCapture:le,onKeyDown:de}),i=Oe(i),i=re(P(w({store:t},i),{getItem:ue,shouldRegisterItem:f?i.shouldRegisterItem:!1})),X(P(w({},i),{"aria-setsize":oe,"aria-posinset":ie}))}),at=ye(Z(function(n){const o=$e(n);return ee(Ue,o)}));export{nt as C,rt as a,tt as b,st as c,at as d,re as e,it as f,Me as g,ze as h,te as i,ot as j,ut as s,$e as u};
